var xO=Object.defineProperty;var _O=(R,w,f)=>w in R?xO(R,w,{enumerable:!0,configurable:!0,writable:!0,value:f}):R[w]=f;var vr=(R,w,f)=>(_O(R,typeof w!="symbol"?w+"":w,f),f),uw=(R,w,f)=>{if(!w.has(R))throw TypeError("Cannot "+f)};var ao=(R,w,f)=>(uw(R,w,"read from private field"),f?f.call(R):w.get(R)),ps=(R,w,f)=>{if(w.has(R))throw TypeError("Cannot add the same private member more than once");w instanceof WeakSet?w.add(R):w.set(R,f)};var zr=(R,w,f)=>(uw(R,w,"access private method"),f);(function(){const w=document.createElement("link").relList;if(w&&w.supports&&w.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))v(x);new MutationObserver(x=>{for(const k of x)if(k.type==="childList")for(const I of k.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&v(I)}).observe(document,{childList:!0,subtree:!0});function f(x){const k={};return x.integrity&&(k.integrity=x.integrity),x.referrerPolicy&&(k.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?k.credentials="include":x.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function v(x){if(x.ep)return;x.ep=!0;const k=f(x);fetch(x.href,k)}})();var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function SO(R){return R&&R.__esModule&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R}(()=>{var R=Object.create,w=Object.defineProperty,f=Object.defineProperties,v=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,re=(e,t,i)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,A=(e,t)=>{for(var i in t||(t={}))j.call(t,i)&&re(e,i,t[i]);if(I)for(var i of I(t))Y.call(t,i)&&re(e,i,t[i]);return e},B=(e,t)=>f(e,x(t)),Pe=e=>w(e,"__esModule",{value:!0}),le=(e,t)=>{var i={};for(var r in e)j.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&I)for(var r of I(e))t.indexOf(r)<0&&Y.call(e,r)&&(i[r]=e[r]);return i},lt=(e,t)=>()=>(e&&(t=e(e=0)),t),Je=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),St=(e,t)=>{for(var i in t)w(e,i,{get:t[i],enumerable:!0})},Ne=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of k(t))!j.call(e,n)&&(i||n!=="default")&&w(e,n,{get:()=>t[n],enumerable:!(r=v(t,n))||r.enumerable});return e},Be=(e,t)=>Ne(Pe(w(e!=null?R(M(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Yt=(e=>(t,i)=>e&&e.get(t)||(i=Ne(Pe({}),t,1),e&&e.set(t,i),i))(typeof WeakMap<"u"?new WeakMap:0),Ve=(e,t,i)=>(re(e,typeof t!="symbol"?t+"":t,i),i);function Nt(e,t){for(var i in t)e[i]=t[i];return e}function wi(e){var t=e.parentNode;t&&t.removeChild(e)}function $(e,t,i){var r,n,a,l={};for(a in t)a=="key"?r=t[a]:a=="ref"?n=t[a]:l[a]=t[a];if(arguments.length>2&&(l.children=arguments.length>3?fo.call(arguments,2):i),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)l[a]===void 0&&(l[a]=e.defaultProps[a]);return Li(e,l,r,n,null)}function Li(e,t,i,r,n){var a={type:e,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:n??++Tp};return n==null&&Ce.vnode!=null&&Ce.vnode(a),a}function br(){return{current:null}}function et(e){return e.children}function Kt(e,t){this.props=e,this.context=t}function It(e,t){if(t==null)return e.__?It(e.__,e.__.__k.indexOf(e)+1):null;for(var i;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null)return i.__e;return typeof e.type=="function"?It(e):null}function Ni(e){var t,i;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null){e.__e=e.__c.base=i.__e;break}return Ni(e)}}function lr(e){(!e.__d&&(e.__d=!0)&&go.push(e)&&!Gi.__r++||Rp!==Ce.debounceRendering)&&((Rp=Ce.debounceRendering)||Ip)(Gi)}function Gi(){for(var e;Gi.__r=go.length;)e=go.sort(function(t,i){return t.__v.__b-i.__v.__b}),go=[],e.some(function(t){var i,r,n,a,l,u;t.__d&&(l=(a=(i=t).__v).__e,(u=i.__P)&&(r=[],(n=Nt({},a)).__v=a.__v+1,xi(u,a,n,i.__n,u.ownerSVGElement!==void 0,a.__h!=null?[l]:null,r,l??It(a),a.__h),ft(r,a),a.__e!=l&&Ni(a)))})}function Ki(e,t,i,r,n,a,l,u,h,g){var p,y,S,C,_,T,L,O=r&&r.__k||Wu,E=O.length;for(i.__k=[],p=0;p<t.length;p++)if((C=i.__k[p]=(C=t[p])==null||typeof C=="boolean"?null:typeof C=="string"||typeof C=="number"||typeof C=="bigint"?Li(null,C,null,null,C):Array.isArray(C)?Li(et,{children:C},null,null,null):C.__b>0?Li(C.type,C.props,C.key,null,C.__v):C)!=null){if(C.__=i,C.__b=i.__b+1,(S=O[p])===null||S&&C.key==S.key&&C.type===S.type)O[p]=void 0;else for(y=0;y<E;y++){if((S=O[y])&&C.key==S.key&&C.type===S.type){O[y]=void 0;break}S=null}xi(e,C,S=S||mo,n,a,l,u,h,g),_=C.__e,(y=C.ref)&&S.ref!=y&&(L||(L=[]),S.ref&&L.push(S.ref,null,C),L.push(y,C.__c||_,C)),_!=null?(T==null&&(T=_),typeof C.type=="function"&&C.__k===S.__k?C.__d=h=ur(C,h,e):h=Z(e,C,S,O,_,h),typeof i.type=="function"&&(i.__d=h)):h&&S.__e==h&&h.parentNode!=e&&(h=It(S))}for(i.__e=T,p=E;p--;)O[p]!=null&&(typeof i.type=="function"&&O[p].__e!=null&&O[p].__e==i.__d&&(i.__d=It(r,p+1)),Pp(O[p],O[p]));if(L)for(p=0;p<L.length;p++)Ea(L[p],L[++p],L[++p])}function ur(e,t,i){for(var r,n=e.__k,a=0;n&&a<n.length;a++)(r=n[a])&&(r.__=e,t=typeof r.type=="function"?ur(r,t,i):Z(i,r,r,n,r.__e,t));return t}function pe(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(i){pe(i,t)}):t.push(e)),t}function Z(e,t,i,r,n,a){var l,u,h;if(t.__d!==void 0)l=t.__d,t.__d=void 0;else if(i==null||n!=a||n.parentNode==null)e:if(a==null||a.parentNode!==e)e.appendChild(n),l=null;else{for(u=a,h=0;(u=u.nextSibling)&&h<r.length;h+=2)if(u==n)break e;e.insertBefore(n,a),l=a}return l!==void 0?l:n.nextSibling}function ne(e,t,i,r,n){var a;for(a in i)a==="children"||a==="key"||a in t||ee(e,a,null,i[a],r);for(a in t)n&&typeof t[a]!="function"||a==="children"||a==="key"||a==="value"||a==="checked"||i[a]===t[a]||ee(e,a,t[a],i[a],r)}function ue(e,t,i){t[0]==="-"?e.setProperty(t,i):e[t]=i==null?"":typeof i!="number"||Op.test(t)?i:i+"px"}function ee(e,t,i,r,n){var a;e:if(t==="style")if(typeof i=="string")e.style.cssText=i;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)i&&t in i||ue(e.style,t,"");if(i)for(t in i)r&&i[t]===r[t]||ue(e.style,t,i[t])}else if(t[0]==="o"&&t[1]==="n")a=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=i,i?r||e.addEventListener(t,a?st:Te,a):e.removeEventListener(t,a?st:Te,a);else if(t!=="dangerouslySetInnerHTML"){if(n)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=i??"";break e}catch{}typeof i=="function"||(i!=null&&(i!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,i):e.removeAttribute(t))}}function Te(e){this.l[e.type+!1](Ce.event?Ce.event(e):e)}function st(e){this.l[e.type+!0](Ce.event?Ce.event(e):e)}function xi(e,t,i,r,n,a,l,u,h){var g,p,y,S,C,_,T,L,O,E,F,z=t.type;if(t.constructor!==void 0)return null;i.__h!=null&&(h=i.__h,u=t.__e=i.__e,t.__h=null,a=[u]),(g=Ce.__b)&&g(t);try{e:if(typeof z=="function"){if(L=t.props,O=(g=z.contextType)&&r[g.__c],E=g?O?O.props.value:g.__:r,i.__c?T=(p=t.__c=i.__c).__=p.__E:("prototype"in z&&z.prototype.render?t.__c=p=new z(L,E):(t.__c=p=new Kt(L,E),p.constructor=z,p.render=Bu),O&&O.sub(p),p.props=L,p.state||(p.state={}),p.context=E,p.__n=r,y=p.__d=!0,p.__h=[]),p.__s==null&&(p.__s=p.state),z.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=Nt({},p.__s)),Nt(p.__s,z.getDerivedStateFromProps(L,p.__s))),S=p.props,C=p.state,y)z.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(z.getDerivedStateFromProps==null&&L!==S&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(L,E),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(L,p.__s,E)===!1||t.__v===i.__v){p.props=L,p.state=p.__s,t.__v!==i.__v&&(p.__d=!1),p.__v=t,t.__e=i.__e,t.__k=i.__k,t.__k.forEach(function(U){U&&(U.__=t)}),p.__h.length&&l.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(L,p.__s,E),p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(S,C,_)})}p.context=E,p.props=L,p.state=p.__s,(g=Ce.__r)&&g(t),p.__d=!1,p.__v=t,p.__P=e,g=p.render(p.props,p.state,p.context),p.state=p.__s,p.getChildContext!=null&&(r=Nt(Nt({},r),p.getChildContext())),y||p.getSnapshotBeforeUpdate==null||(_=p.getSnapshotBeforeUpdate(S,C)),F=g!=null&&g.type===et&&g.key==null?g.props.children:g,Ki(e,Array.isArray(F)?F:[F],t,i,r,n,a,l,u,h),p.base=t.__e,t.__h=null,p.__h.length&&l.push(p),T&&(p.__E=p.__=null),p.__e=!1}else a==null&&t.__v===i.__v?(t.__k=i.__k,t.__e=i.__e):t.__e=bs(i.__e,t,i,r,n,a,l,h);(g=Ce.diffed)&&g(t)}catch(U){t.__v=null,(h||a!=null)&&(t.__e=u,t.__h=!!h,a[a.indexOf(u)]=null),Ce.__e(U,t,i)}}function ft(e,t){Ce.__c&&Ce.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(r){r.call(i)})}catch(r){Ce.__e(r,i.__v)}})}function bs(e,t,i,r,n,a,l,u){var h,g,p,y=i.props,S=t.props,C=t.type,_=0;if(C==="svg"&&(n=!0),a!=null){for(;_<a.length;_++)if((h=a[_])&&"setAttribute"in h==!!C&&(C?h.localName===C:h.nodeType===3)){e=h,a[_]=null;break}}if(e==null){if(C===null)return document.createTextNode(S);e=n?document.createElementNS("http://www.w3.org/2000/svg",C):document.createElement(C,S.is&&S),a=null,u=!1}if(C===null)y===S||u&&e.data===S||(e.data=S);else{if(a=a&&fo.call(e.childNodes),g=(y=i.props||mo).dangerouslySetInnerHTML,p=S.dangerouslySetInnerHTML,!u){if(a!=null)for(y={},_=0;_<e.attributes.length;_++)y[e.attributes[_].name]=e.attributes[_].value;(p||g)&&(p&&(g&&p.__html==g.__html||p.__html===e.innerHTML)||(e.innerHTML=p&&p.__html||""))}if(ne(e,S,y,n,u),p)t.__k=[];else if(_=t.props.children,Ki(e,Array.isArray(_)?_:[_],t,i,r,n&&C!=="foreignObject",a,l,a?a[0]:i.__k&&It(i,0),u),a!=null)for(_=a.length;_--;)a[_]!=null&&wi(a[_]);u||("value"in S&&(_=S.value)!==void 0&&(_!==e.value||C==="progress"&&!_||C==="option"&&_!==y.value)&&ee(e,"value",_,y.value,!1),"checked"in S&&(_=S.checked)!==void 0&&_!==e.checked&&ee(e,"checked",_,y.checked,!1))}return e}function Ea(e,t,i){try{typeof e=="function"?e(t):e.current=t}catch(r){Ce.__e(r,i)}}function Pp(e,t,i){var r,n;if(Ce.unmount&&Ce.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Ea(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){Ce.__e(a,t)}r.base=r.__P=null}if(r=e.__k)for(n=0;n<r.length;n++)r[n]&&Pp(r[n],t,typeof e.type!="function");i||e.__e==null||wi(e.__e),e.__e=e.__d=void 0}function Bu(e,t,i){return this.constructor(e,i)}function wr(e,t,i){var r,n,a;Ce.__&&Ce.__(e,t),n=(r=typeof i=="function")?null:i&&i.__k||t.__k,a=[],xi(t,e=(!r&&i||t).__k=$(et,null,[e]),n||mo,mo,t.ownerSVGElement!==void 0,!r&&i?[i]:n?null:t.firstChild?fo.call(t.childNodes):null,a,!r&&i?i:n?n.__e:t.firstChild,r),ft(a,e)}function Du(e,t){wr(e,t,Du)}function Uu(e,t,i){var r,n,a,l=Nt({},e.props);for(a in t)a=="key"?r=t[a]:a=="ref"?n=t[a]:l[a]=t[a];return arguments.length>2&&(l.children=arguments.length>3?fo.call(arguments,2):i),Li(e.type,l,r||e.key,n||e.ref,null)}function ri(e,t){var i={__c:t="__cC"+Lp++,__:e,Consumer:function(r,n){return r.children(n)},Provider:function(r){var n,a;return this.getChildContext||(n=[],(a={})[t]=this,this.getChildContext=function(){return a},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&n.some(lr)},this.sub=function(l){n.push(l);var u=l.componentWillUnmount;l.componentWillUnmount=function(){n.splice(n.indexOf(l),1),u&&u.call(l)}}),r.children}};return i.Provider.__=i.Consumer.contextType=i}var fo,Ce,Tp,go,Ip,Rp,Lp,mo,Wu,Op,Xe=lt(()=>{mo={},Wu=[],Op=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,fo=Wu.slice,Ce={__e:function(e,t,i,r){for(var n,a,l;t=t.__;)if((n=t.__c)&&!n.__)try{if((a=n.constructor)&&a.getDerivedStateFromError!=null&&(n.setState(a.getDerivedStateFromError(e)),l=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(e,r||{}),l=n.__d),l)return n.__E=n}catch(u){e=u}throw e}},Tp=0,Kt.prototype.setState=function(e,t){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Nt({},this.state),typeof e=="function"&&(e=e(Nt({},i),this.props)),e&&Nt(i,e),e!=null&&this.__v&&(t&&this.__h.push(t),lr(this))},Kt.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),lr(this))},Kt.prototype.render=et,go=[],Ip=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Gi.__r=0,Lp=0});function ws(e,t){Ce.__h&&Ce.__h(di,e,Tn||t),Tn=0;var i=di.__H||(di.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({}),i.__[e]}function Me(e){return Tn=1,xs(Mp,e)}function xs(e,t,i){var r=ws(Pn++,2);return r.t=e,r.__c||(r.__=[i?i(t):Mp(void 0,t),function(n){var a=r.t(r.__[0],n);r.__[0]!==a&&(r.__=[a,r.__[1]],r.__c.setState({}))}],r.__c=di),r.__}function de(e,t){var i=ws(Pn++,3);!Ce.__s&&qu(i.__H,t)&&(i.__=e,i.__H=t,di.__H.__h.push(i))}function Rt(e,t){var i=ws(Pn++,4);!Ce.__s&&qu(i.__H,t)&&(i.__=e,i.__H=t,di.__h.push(i))}function Se(e){return Tn=5,Ee(function(){return{current:e}},[])}function $p(e,t,i){Tn=6,Rt(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},i==null?i:i.concat(e))}function Ee(e,t){var i=ws(Pn++,7);return qu(i.__H,t)&&(i.__=e(),i.__H=t,i.__h=e),i.__}function De(e,t){return Tn=8,Ee(function(){return e},t)}function Jt(e){var t=di.context[e.__c],i=ws(Pn++,9);return i.c=e,t?(i.__==null&&(i.__=!0,t.sub(di)),t.props.value):e.__}function Fp(e,t){Ce.useDebugValue&&Ce.useDebugValue(t?t(e):e)}function Uw(e){var t=ws(Pn++,10),i=Me();return t.__=e,di.componentDidCatch||(di.componentDidCatch=function(r){t.__&&t.__(r),i[1](r)}),[i[0],function(){i[1](void 0)}]}function Ww(){for(var e;e=Qu.shift();)if(e.__P)try{e.__H.__h.forEach(Ca),e.__H.__h.forEach(Hu),e.__H.__h=[]}catch(t){e.__H.__h=[],Ce.__e(t,e.__v)}}function Ca(e){var t=di,i=e.__c;typeof i=="function"&&(e.__c=void 0,i()),di=t}function Hu(e){var t=di;e.__c=e.__(),di=t}function qu(e,t){return!e||e.length!==t.length||t.some(function(i,r){return i!==e[r]})}function Mp(e,t){return typeof t=="function"?t(e):t}var Pn,di,zp,Tn,Qu,Vu,Gu,Yu,Xu,Zu,Ku,Np=lt(()=>{Xe(),Tn=0,Qu=[],Vu=Ce.__b,Gu=Ce.__r,Yu=Ce.diffed,Xu=Ce.__c,Zu=Ce.unmount,Ce.__b=function(e){di=null,Vu&&Vu(e)},Ce.__r=function(e){Gu&&Gu(e),Pn=0;var t=(di=e.__c).__H;t&&(t.__h.forEach(Ca),t.__h.forEach(Hu),t.__h=[])},Ce.diffed=function(e){Yu&&Yu(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(Qu.push(t)!==1&&zp===Ce.requestAnimationFrame||((zp=Ce.requestAnimationFrame)||function(i){var r,n=function(){clearTimeout(a),Ku&&cancelAnimationFrame(r),setTimeout(i)},a=setTimeout(n,100);Ku&&(r=requestAnimationFrame(n))})(Ww)),di=null},Ce.__c=function(e,t){t.some(function(i){try{i.__h.forEach(Ca),i.__h=i.__h.filter(function(r){return!r.__||Hu(r)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],Ce.__e(r,i.__v)}}),Xu&&Xu(e,t)},Ce.unmount=function(e){Zu&&Zu(e);var t,i=e.__c;i&&i.__H&&(i.__H.__.forEach(function(r){try{Ca(r)}catch(n){t=n}}),t&&Ce.__e(t,i.__v))},Ku=typeof requestAnimationFrame=="function"}),_s={};St(_s,{Children:()=>Jr,Component:()=>Kt,Fragment:()=>et,PureComponent:()=>ka,StrictMode:()=>Jp,Suspense:()=>vo,SuspenseList:()=>Ss,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>cc,cloneElement:()=>Aa,createContext:()=>ri,createElement:()=>$,createFactory:()=>Hp,createPortal:()=>Up,createRef:()=>br,default:()=>K,findDOMNode:()=>Qp,flushSync:()=>dc,forwardRef:()=>pi,hydrate:()=>Wp,isValidElement:()=>yo,lazy:()=>Dp,memo:()=>ec,render:()=>Es,unmountComponentAtNode:()=>qp,unstable_batchedUpdates:()=>hc,useCallback:()=>De,useContext:()=>Jt,useDebugValue:()=>Fp,useEffect:()=>de,useErrorBoundary:()=>Uw,useImperativeHandle:()=>$p,useLayoutEffect:()=>Rt,useMemo:()=>Ee,useReducer:()=>xs,useRef:()=>Se,useState:()=>Me,version:()=>Pa});function jp(e,t){for(var i in t)e[i]=t[i];return e}function Ju(e,t){for(var i in e)if(i!=="__source"&&!(i in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function ka(e){this.props=e}function ec(e,t){function i(n){var a=this.props.ref,l=a==n.ref;return!l&&a&&(a.call?a(null):a.current=null),t?!t(this.props,n)||!l:Ju(this.props,n)}function r(n){return this.shouldComponentUpdate=i,$(e,n)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}function pi(e){function t(i){var r=jp({},i);return delete r.ref,e(r,i.ref||null)}return t.$$typeof=Vp,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}function vo(){this.__u=0,this.t=null,this.__b=null}function Bp(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function Dp(e){var t,i,r;function n(a){if(t||(t=e()).then(function(l){i=l.default||l},function(l){r=l}),r)throw r;if(!i)throw t;return $(i,a)}return n.displayName="Lazy",n.__f=!0,n}function Ss(){this.u=null,this.o=null}function Hw(e){return this.getChildContext=function(){return e.context},e.children}function qw(e){var t=this,i=e.i;t.componentWillUnmount=function(){wr(null,t.l),t.l=null,t.i=null},t.i&&t.i!==i&&t.componentWillUnmount(),e.__v?(t.l||(t.i=i,t.l={nodeType:1,parentNode:i,childNodes:[],appendChild:function(r){this.childNodes.push(r),t.i.appendChild(r)},insertBefore:function(r,n){this.childNodes.push(r),t.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.i.removeChild(r)}}),wr($(Hw,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function Up(e,t){return $(qw,{__v:e,i:t})}function Es(e,t,i){return t.__k==null&&(t.textContent=""),wr(e,t),typeof i=="function"&&i(),e?e.__c:null}function Wp(e,t,i){return Du(e,t),typeof i=="function"&&i(),e?e.__c:null}function Qw(){}function Vw(){return this.cancelBubble}function Gw(){return this.defaultPrevented}function Hp(e){return $.bind(null,e)}function yo(e){return!!e&&e.$$typeof===sc}function Aa(e){return yo(e)?Uu.apply(null,arguments):e}function qp(e){return!!e.__k&&(wr(null,e),!0)}function Qp(e){return e&&(e.base||e.nodeType===1&&e)||null}var tc,Vp,ic,Jr,Gp,rc,nc,sc,Yp,Xp,Zp,oc,Kp,ac,lc,uc,cc,Pa,hc,dc,Jp,K,Qe=lt(()=>{Np(),Np(),Xe(),Xe(),(ka.prototype=new Kt).isPureReactComponent=!0,ka.prototype.shouldComponentUpdate=function(e,t){return Ju(this.props,e)||Ju(this.state,t)},tc=Ce.__b,Ce.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),tc&&tc(e)},Vp=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911,ic=function(e,t){return e==null?null:pe(pe(e).map(t))},Jr={map:ic,forEach:ic,count:function(e){return e?pe(e).length:0},only:function(e){var t=pe(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:pe},Gp=Ce.__e,Ce.__e=function(e,t,i,r){if(e.then){for(var n,a=t;a=a.__;)if((n=a.__c)&&n.__c)return t.__e==null&&(t.__e=i.__e,t.__k=i.__k),n.__c(e,t)}Gp(e,t,i,r)},rc=Ce.unmount,Ce.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),rc&&rc(e)},(vo.prototype=new Kt).__c=function(e,t){var i=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(i);var n=Bp(r.__v),a=!1,l=function(){a||(a=!0,i.__R=null,n?n(u):u())};i.__R=l;var u=function(){if(!--r.__u){if(r.state.__e){var g=r.state.__e;r.__v.__k[0]=function y(S,C,_){return S&&(S.__v=null,S.__k=S.__k&&S.__k.map(function(T){return y(T,C,_)}),S.__c&&S.__c.__P===C&&(S.__e&&_.insertBefore(S.__e,S.__d),S.__c.__e=!0,S.__c.__P=_)),S}(g,g.__c.__P,g.__c.__O)}var p;for(r.setState({__e:r.__b=null});p=r.t.pop();)p.forceUpdate()}},h=t.__h===!0;r.__u++||h||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(l,l)},vo.prototype.componentWillUnmount=function(){this.t=[]},vo.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var i=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function a(l,u,h){return l&&(l.__c&&l.__c.__H&&(l.__c.__H.__.forEach(function(g){typeof g.__c=="function"&&g.__c()}),l.__c.__H=null),(l=jp({},l)).__c!=null&&(l.__c.__P===h&&(l.__c.__P=u),l.__c=null),l.__k=l.__k&&l.__k.map(function(g){return a(g,u,h)})),l}(this.__b,i,r.__O=r.__P)}this.__b=null}var n=t.__e&&$(et,null,e.fallback);return n&&(n.__h=null),[$(et,null,t.__e?null:e.children),n]},nc=function(e,t,i){if(++i[1]===i[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(i=e.u;i;){for(;i.length>3;)i.pop()();if(i[1]<i[0])break;e.u=i=i[2]}},(Ss.prototype=new Kt).__e=function(e){var t=this,i=Bp(t.__v),r=t.o.get(e);return r[0]++,function(n){var a=function(){t.props.revealOrder?(r.push(n),nc(t,e,r)):n()};i?i(a):a()}},Ss.prototype.render=function(e){this.u=null,this.o=new Map;var t=pe(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var i=t.length;i--;)this.o.set(t[i],this.u=[1,0,this.u]);return e.children},Ss.prototype.componentDidUpdate=Ss.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,i){nc(e,i,t)})},sc=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Yp=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Xp=typeof document<"u",Zp=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)},Kt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Kt.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}),oc=Ce.event,Ce.event=function(e){return oc&&(e=oc(e)),e.persist=Qw,e.isPropagationStopped=Vw,e.isDefaultPrevented=Gw,e.nativeEvent=e},ac={configurable:!0,get:function(){return this.class}},lc=Ce.vnode,Ce.vnode=function(e){var t=e.type,i=e.props,r=i;if(typeof t=="string"){var n=t.indexOf("-")===-1;for(var a in r={},i){var l=i[a];Xp&&a==="children"&&t==="noscript"||a==="value"&&"defaultValue"in i&&l==null||(a==="defaultValue"&&"value"in i&&i.value==null?a="value":a==="download"&&l===!0?l="":/ondoubleclick/i.test(a)?a="ondblclick":/^onchange(textarea|input)/i.test(a+t)&&!Zp(i.type)?a="oninput":/^onfocus$/i.test(a)?a="onfocusin":/^onblur$/i.test(a)?a="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(a)?a=a.toLowerCase():n&&Yp.test(a)?a=a.replace(/[A-Z0-9]/,"-$&").toLowerCase():l===null&&(l=void 0),r[a]=l)}t=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=pe(i.children).forEach(function(u){u.props.selected=r.value.indexOf(u.props.value)!=-1})),t=="select"&&r.defaultValue!=null&&(r.value=pe(i.children).forEach(function(u){u.props.selected=r.multiple?r.defaultValue.indexOf(u.props.value)!=-1:r.defaultValue==u.props.value})),e.props=r,i.class!=i.className&&(ac.enumerable="className"in i,i.className!=null&&(r.class=i.className),Object.defineProperty(r,"className",ac))}e.$$typeof=sc,lc&&lc(e)},uc=Ce.__r,Ce.__r=function(e){uc&&uc(e),Kp=e.__c},cc={ReactCurrentDispatcher:{current:{readContext:function(e){return Kp.__n[e.__c].props.value}}}},Pa="17.0.2",hc=function(e,t){return e(t)},dc=function(e,t){return e(t)},Jp=et,K={useState:Me,useReducer:xs,useEffect:de,useLayoutEffect:Rt,useRef:Se,useImperativeHandle:$p,useMemo:Ee,useCallback:De,useContext:Jt,useDebugValue:Fp,version:"17.0.2",Children:Jr,render:Es,hydrate:Wp,unmountComponentAtNode:qp,createPortal:Up,createElement:$,createContext:ri,createFactory:Hp,cloneElement:Aa,createRef:br,Fragment:et,isValidElement:yo,findDOMNode:Qp,Component:Kt,PureComponent:ka,memo:ec,forwardRef:pi,flushSync:dc,unstable_batchedUpdates:hc,StrictMode:et,Suspense:vo,SuspenseList:Ss,lazy:Dp,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:cc}}),Yw=Je(e=>{function t(J,Ae){var Oe=J.length;J.push(Ae);e:for(;0<Oe;){var Ge=Oe-1>>>1,it=J[Ge];if(0<n(it,Ae))J[Ge]=Ae,J[Oe]=it,Oe=Ge;else break e}}function i(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var Ae=J[0],Oe=J.pop();if(Oe!==Ae){J[0]=Oe;e:for(var Ge=0,it=J.length,ie=it>>>1;Ge<ie;){var Le=2*(Ge+1)-1,$t=J[Le],Qt=Le+1,Wt=J[Qt];if(0>n($t,Oe))Qt<it&&0>n(Wt,$t)?(J[Ge]=Wt,J[Qt]=Oe,Ge=Qt):(J[Ge]=$t,J[Le]=Oe,Ge=Le);else if(Qt<it&&0>n(Wt,Oe))J[Ge]=Wt,J[Qt]=Oe,Ge=Qt;else break e}}return Ae}function n(J,Ae){var Oe=J.sortIndex-Ae.sortIndex;return Oe!==0?Oe:J.id-Ae.id}typeof performance=="object"&&typeof performance.now=="function"?(a=performance,e.unstable_now=function(){return a.now()}):(l=Date,u=l.now(),e.unstable_now=function(){return l.now()-u});var a,l,u,h=[],g=[],p=1,y=null,S=3,C=!1,_=!1,T=!1,L=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(J){for(var Ae=i(g);Ae!==null;){if(Ae.callback===null)r(g);else if(Ae.startTime<=J)r(g),Ae.sortIndex=Ae.expirationTime,t(h,Ae);else break;Ae=i(g)}}function z(J){if(T=!1,F(J),!_)if(i(h)!==null)_=!0,ye(U);else{var Ae=i(g);Ae!==null&&Re(z,Ae.startTime-J)}}function U(J,Ae){_=!1,T&&(T=!1,O(V),V=-1),C=!0;var Oe=S;try{for(F(Ae),y=i(h);y!==null&&(!(y.expirationTime>Ae)||J&&!se());){var Ge=y.callback;if(typeof Ge=="function"){y.callback=null,S=y.priorityLevel;var it=Ge(y.expirationTime<=Ae);Ae=e.unstable_now(),typeof it=="function"?y.callback=it:y===i(h)&&r(h),F(Ae)}else r(h);y=i(h)}if(y!==null)var ie=!0;else{var Le=i(g);Le!==null&&Re(z,Le.startTime-Ae),ie=!1}return ie}finally{y=null,S=Oe,C=!1}}var q=!1,G=null,V=-1,ae=5,H=-1;function se(){return!(e.unstable_now()-H<ae)}function ce(){if(G!==null){var J=e.unstable_now();H=J;var Ae=!0;try{Ae=G(!0,J)}finally{Ae?he():(q=!1,G=null)}}else q=!1}var he;typeof E=="function"?he=function(){E(ce)}:typeof MessageChannel<"u"?(_e=new MessageChannel,me=_e.port2,_e.port1.onmessage=ce,he=function(){me.postMessage(null)}):he=function(){L(ce,0)};var _e,me;function ye(J){G=J,q||(q=!0,he())}function Re(J,Ae){V=L(function(){J(e.unstable_now())},Ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){_||C||(_=!0,ye(U))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return i(h)},e.unstable_next=function(J){switch(S){case 1:case 2:case 3:var Ae=3;break;default:Ae=S}var Oe=S;S=Ae;try{return J()}finally{S=Oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,Ae){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Oe=S;S=J;try{return Ae()}finally{S=Oe}},e.unstable_scheduleCallback=function(J,Ae,Oe){var Ge=e.unstable_now();switch(typeof Oe=="object"&&Oe!==null?(Oe=Oe.delay,Oe=typeof Oe=="number"&&0<Oe?Ge+Oe:Ge):Oe=Ge,J){case 1:var it=-1;break;case 2:it=250;break;case 5:it=1073741823;break;case 4:it=1e4;break;default:it=5e3}return it=Oe+it,J={id:p++,callback:Ae,priorityLevel:J,startTime:Oe,expirationTime:it,sortIndex:-1},Oe>Ge?(J.sortIndex=Oe,t(g,J),i(h)===null&&J===i(g)&&(T?(O(V),V=-1):T=!0,Re(z,Oe-Ge))):(J.sortIndex=it,t(h,J),_||C||(_=!0,ye(U))),J},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(J){var Ae=S;return function(){var Oe=S;S=Ae;try{return J.apply(this,arguments)}finally{S=Oe}}}}),Xw=Je((e,t)=>{t.exports=Yw()}),Zw=Je((e,t)=>{t.exports=function(i){var r={},n=(Qe(),Yt(_s)),a=Xw(),l=Object.assign;function u(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),p=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),q=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=q&&s[q]||s["@@iterator"],typeof s=="function"?s:null)}function V(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case y:return"Fragment";case p:return"Portal";case C:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case E:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case T:return(s.displayName||"Context")+".Consumer";case _:return(s._context.displayName||"Context")+".Provider";case L:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case F:return o=s.displayName||null,o!==null?o:V(s.type)||"Memo";case z:o=s._payload,s=s._init;try{return V(s(o))}catch{}}return null}function ae(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(o);case 8:return o===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function H(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,o.flags&4098&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function se(s){if(H(s)!==s)throw Error(u(188))}function ce(s){var o=s.alternate;if(!o){if(o=H(s),o===null)throw Error(u(188));return o!==s?null:s}for(var c=s,d=o;;){var m=c.return;if(m===null)break;var b=m.alternate;if(b===null){if(d=m.return,d!==null){c=d;continue}break}if(m.child===b.child){for(b=m.child;b;){if(b===c)return se(m),s;if(b===d)return se(m),o;b=b.sibling}throw Error(u(188))}if(c.return!==d.return)c=m,d=b;else{for(var P=!1,N=m.child;N;){if(N===c){P=!0,c=m,d=b;break}if(N===d){P=!0,d=m,c=b;break}N=N.sibling}if(!P){for(N=b.child;N;){if(N===c){P=!0,c=b,d=m;break}if(N===d){P=!0,d=b,c=m;break}N=N.sibling}if(!P)throw Error(u(189))}}if(c.alternate!==d)throw Error(u(190))}if(c.tag!==3)throw Error(u(188));return c.stateNode.current===c?s:o}function he(s){return s=ce(s),s!==null?_e(s):null}function _e(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=_e(s);if(o!==null)return o;s=s.sibling}return null}function me(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){if(s.tag!==4){var o=me(s);if(o!==null)return o}s=s.sibling}return null}var ye=Array.isArray,Re=i.getPublicInstance,J=i.getRootHostContext,Ae=i.getChildHostContext,Oe=i.prepareForCommit,Ge=i.resetAfterCommit,it=i.createInstance,ie=i.appendInitialChild,Le=i.finalizeInitialChildren,$t=i.prepareUpdate,Qt=i.shouldSetTextContent,Wt=i.createTextInstance,yt=i.scheduleTimeout,Et=i.cancelTimeout,ai=i.noTimeout,ei=i.isPrimaryRenderer,Ft=i.supportsMutation,Xt=i.supportsPersistence,mt=i.supportsHydration,Fe=i.getInstanceFromNode,We=i.preparePortalMount,rt=i.getCurrentEventPriority,Ue=i.detachDeletedInstance,Ze=i.supportsMicrotasks,at=i.scheduleMicrotask,tt=i.supportsTestSelectors,Mi=i.findFiberRoot,es=i.getBoundingRect,ts=i.getTextContent,is=i.isHiddenSubtree,Di=i.matchAccessibilityRole,Nl=i.setFocusIfFocusable,Vh=i.setupIntersectionObserver,Gh=i.appendChild,Ho=i.appendChildToContainer,Qs=i.commitTextUpdate,qo=i.commitMount,jl=i.commitUpdate,ve=i.insertBefore,ze=i.insertInContainerBefore,bt=i.removeChild,Ht=i.removeChildFromContainer,Vt=i.resetTextContent,te=i.hideInstance,ke=i.hideTextInstance,nt=i.unhideInstance,Ct=i.unhideTextInstance,pt=i.clearContainer,Pr=i.cloneInstance,Qo=i.createContainerChildSet,_b=i.appendChildToContainerChildSet,uL=i.finalizeContainerChildren,Yh=i.replaceContainerChildren,Sb=i.cloneHiddenInstance,Eb=i.cloneHiddenTextInstance,cL=i.canHydrateInstance,hL=i.canHydrateTextInstance,dL=i.canHydrateSuspenseInstance,Cb=i.isSuspenseInstancePending,Xh=i.isSuspenseInstanceFallback,pL=i.getSuspenseInstanceFallbackErrorDetails,fL=i.registerSuspenseInstanceRetry,Bl=i.getNextHydratableSibling,gL=i.getFirstHydratableChild,mL=i.getFirstHydratableChildWithinContainer,vL=i.getFirstHydratableChildWithinSuspenseInstance,yL=i.hydrateInstance,bL=i.hydrateTextInstance,wL=i.hydrateSuspenseInstance,xL=i.getNextHydratableInstanceAfterSuspenseInstance,_L=i.commitHydratedContainer,SL=i.commitHydratedSuspenseInstance,EL=i.clearSuspenseBoundary,CL=i.clearSuspenseBoundaryFromContainer,kL=i.shouldDeleteUnhydratedTailInstances,AL=i.didNotMatchHydratedContainerTextInstance,PL=i.didNotMatchHydratedTextInstance,Zh;function Vo(s){if(Zh===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Zh=o&&o[1]||""}return`
`+Zh+s}var Kh=!1;function Jh(s,o){if(!s||Kh)return"";Kh=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(oe){var d=oe}Reflect.construct(s,[],o)}else{try{o.call()}catch(oe){d=oe}s.call(o.prototype)}else{try{throw Error()}catch(oe){d=oe}s()}}catch(oe){if(oe&&d&&typeof oe.stack=="string"){for(var m=oe.stack.split(`
`),b=d.stack.split(`
`),P=m.length-1,N=b.length-1;1<=P&&0<=N&&m[P]!==b[N];)N--;for(;1<=P&&0<=N;P--,N--)if(m[P]!==b[N]){if(P!==1||N!==1)do if(P--,N--,0>N||m[P]!==b[N]){var Q=`
`+m[P].replace(" at new "," at ");return s.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",s.displayName)),Q}while(1<=P&&0<=N);break}}}finally{Kh=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?Vo(s):""}var TL=Object.prototype.hasOwnProperty,ed=[],Vs=-1;function vn(s){return{current:s}}function kt(s){0>Vs||(s.current=ed[Vs],ed[Vs]=null,Vs--)}function _t(s,o){Vs++,ed[Vs]=s.current,s.current=o}var yn={},Ai=vn(yn),Ui=vn(!1),rs=yn;function Gs(s,o){var c=s.type.contextTypes;if(!c)return yn;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var m={},b;for(b in c)m[b]=o[b];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function Wi(s){return s=s.childContextTypes,s!=null}function Dl(){kt(Ui),kt(Ai)}function kb(s,o,c){if(Ai.current!==yn)throw Error(u(168));_t(Ai,o),_t(Ui,c)}function Ab(s,o,c){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var m in d)if(!(m in o))throw Error(u(108,ae(s)||"Unknown",m));return l({},c,d)}function Ul(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||yn,rs=Ai.current,_t(Ai,s),_t(Ui,Ui.current),!0}function Pb(s,o,c){var d=s.stateNode;if(!d)throw Error(u(169));c?(s=Ab(s,o,rs),d.__reactInternalMemoizedMergedChildContext=s,kt(Ui),kt(Ai),_t(Ai,s)):kt(Ui),_t(Ui,c)}var hr=Math.clz32?Math.clz32:LL,IL=Math.log,RL=Math.LN2;function LL(s){return s>>>=0,s===0?32:31-(IL(s)/RL|0)|0}var Wl=64,Hl=4194304;function Go(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ql(s,o){var c=s.pendingLanes;if(c===0)return 0;var d=0,m=s.suspendedLanes,b=s.pingedLanes,P=c&268435455;if(P!==0){var N=P&~m;N!==0?d=Go(N):(b&=P,b!==0&&(d=Go(b)))}else P=c&~m,P!==0?d=Go(P):b!==0&&(d=Go(b));if(d===0)return 0;if(o!==0&&o!==d&&!(o&m)&&(m=d&-d,b=o&-o,m>=b||m===16&&(b&4194240)!==0))return o;if(d&4&&(d|=c&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)c=31-hr(o),m=1<<c,d|=s[c],o&=~m;return d}function OL(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $L(s,o){for(var c=s.suspendedLanes,d=s.pingedLanes,m=s.expirationTimes,b=s.pendingLanes;0<b;){var P=31-hr(b),N=1<<P,Q=m[P];Q===-1?(!(N&c)||N&d)&&(m[P]=OL(N,o)):Q<=o&&(s.expiredLanes|=N),b&=~N}}function td(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Tb(){var s=Wl;return Wl<<=1,!(Wl&4194240)&&(Wl=64),s}function id(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function Yo(s,o,c){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-hr(o),s[o]=c}function FL(s,o){var c=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<c;){var m=31-hr(c),b=1<<m;o[m]=0,d[m]=-1,s[m]=-1,c&=~b}}function rd(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var d=31-hr(c),m=1<<d;m&o|s[d]&o&&(s[d]|=o),c&=~m}}var ut=0;function Ib(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var nd=a.unstable_scheduleCallback,Rb=a.unstable_cancelCallback,ML=a.unstable_shouldYield,zL=a.unstable_requestPaint,li=a.unstable_now,sd=a.unstable_ImmediatePriority,NL=a.unstable_UserBlockingPriority,od=a.unstable_NormalPriority,jL=a.unstable_IdlePriority,Ql=null,Tr=null;function BL(s){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Ql,s,void 0,(s.current.flags&128)===128)}catch{}}function DL(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var dr=typeof Object.is=="function"?Object.is:DL,Qr=null,Vl=!1,ad=!1;function Lb(s){Qr===null?Qr=[s]:Qr.push(s)}function UL(s){Vl=!0,Lb(s)}function Ir(){if(!ad&&Qr!==null){ad=!0;var s=0,o=ut;try{var c=Qr;for(ut=1;s<c.length;s++){var d=c[s];do d=d(!0);while(d!==null)}Qr=null,Vl=!1}catch(m){throw Qr!==null&&(Qr=Qr.slice(s+1)),nd(sd,Ir),m}finally{ut=o,ad=!1}}return null}var Ys=[],Xs=0,Gl=null,Yl=0,er=[],tr=0,ns=null,Vr=1,Gr="";function ss(s,o){Ys[Xs++]=Yl,Ys[Xs++]=Gl,Gl=s,Yl=o}function Ob(s,o,c){er[tr++]=Vr,er[tr++]=Gr,er[tr++]=ns,ns=s;var d=Vr;s=Gr;var m=32-hr(d)-1;d&=~(1<<m),c+=1;var b=32-hr(o)+m;if(30<b){var P=m-m%5;b=(d&(1<<P)-1).toString(32),d>>=P,m-=P,Vr=1<<32-hr(o)+m|c<<m|d,Gr=b+s}else Vr=1<<b|c<<m|d,Gr=s}function ld(s){s.return!==null&&(ss(s,1),Ob(s,1,0))}function ud(s){for(;s===Gl;)Gl=Ys[--Xs],Ys[Xs]=null,Yl=Ys[--Xs],Ys[Xs]=null;for(;s===ns;)ns=er[--tr],er[tr]=null,Gr=er[--tr],er[tr]=null,Vr=er[--tr],er[tr]=null}var Xi=null,ir=null,Pt=!1,Xo=!1,pr=null;function $b(s,o){var c=ar(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=s,o=s.deletions,o===null?(s.deletions=[c],s.flags|=16):o.push(c)}function Fb(s,o){switch(s.tag){case 5:return o=cL(o,s.type,s.pendingProps),o!==null?(s.stateNode=o,Xi=s,ir=gL(o),!0):!1;case 6:return o=hL(o,s.pendingProps),o!==null?(s.stateNode=o,Xi=s,ir=null,!0):!1;case 13:if(o=dL(o),o!==null){var c=ns!==null?{id:Vr,overflow:Gr}:null;return s.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=ar(18,null,null,0),c.stateNode=o,c.return=s,s.child=c,Xi=s,ir=null,!0}return!1;default:return!1}}function cd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function hd(s){if(Pt){var o=ir;if(o){var c=o;if(!Fb(s,o)){if(cd(s))throw Error(u(418));o=Bl(c);var d=Xi;o&&Fb(s,o)?$b(d,c):(s.flags=s.flags&-4097|2,Pt=!1,Xi=s)}}else{if(cd(s))throw Error(u(418));s.flags=s.flags&-4097|2,Pt=!1,Xi=s}}}function Mb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Xi=s}function Xl(s){if(!mt||s!==Xi)return!1;if(!Pt)return Mb(s),Pt=!0,!1;if(s.tag!==3&&(s.tag!==5||kL(s.type)&&!Qt(s.type,s.memoizedProps))){var o=ir;if(o){if(cd(s))throw zb(),Error(u(418));for(;o;)$b(s,o),o=Bl(o)}}if(Mb(s),s.tag===13){if(!mt)throw Error(u(316));if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(u(317));ir=xL(s)}else ir=Xi?Bl(s.stateNode):null;return!0}function zb(){for(var s=ir;s;)s=Bl(s)}function Zs(){mt&&(ir=Xi=null,Xo=Pt=!1)}function dd(s){pr===null?pr=[s]:pr.push(s)}var WL=h.ReactCurrentBatchConfig;function Zl(s,o){if(dr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!TL.call(o,m)||!dr(s[m],o[m]))return!1}return!0}function HL(s){switch(s.tag){case 5:return Vo(s.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 2:case 15:return s=Jh(s.type,!1),s;case 11:return s=Jh(s.type.render,!1),s;case 1:return s=Jh(s.type,!0),s;default:return""}}function fr(s,o){if(s&&s.defaultProps){o=l({},o),s=s.defaultProps;for(var c in s)o[c]===void 0&&(o[c]=s[c]);return o}return o}var Kl=vn(null),Jl=null,Ks=null,pd=null;function fd(){pd=Ks=Jl=null}function Nb(s,o,c){ei?(_t(Kl,o._currentValue),o._currentValue=c):(_t(Kl,o._currentValue2),o._currentValue2=c)}function gd(s){var o=Kl.current;kt(Kl),ei?s._currentValue=o:s._currentValue2=o}function md(s,o,c){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===c)break;s=s.return}}function Js(s,o){Jl=s,pd=Ks=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&o&&(Hi=!0),s.firstContext=null)}function rr(s){var o=ei?s._currentValue:s._currentValue2;if(pd!==s)if(s={context:s,memoizedValue:o,next:null},Ks===null){if(Jl===null)throw Error(u(308));Ks=s,Jl.dependencies={lanes:0,firstContext:s}}else Ks=Ks.next=s;return o}var os=null;function vd(s){os===null?os=[s]:os.push(s)}function jb(s,o,c,d){var m=o.interleaved;return m===null?(c.next=c,vd(o)):(c.next=m.next,m.next=c),o.interleaved=c,Rr(s,d)}function Rr(s,o){s.lanes|=o;var c=s.alternate;for(c!==null&&(c.lanes|=o),c=s,s=s.return;s!==null;)s.childLanes|=o,c=s.alternate,c!==null&&(c.childLanes|=o),c=s,s=s.return;return c.tag===3?c.stateNode:null}var bn=!1;function yd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bb(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Yr(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function wn(s,o,c){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Ke&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,Rr(s,c)}return m=d.interleaved,m===null?(o.next=o,vd(d)):(o.next=m.next,m.next=o),d.interleaved=o,Rr(s,c)}function eu(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,c|=d,o.lanes=c,rd(s,c)}}function Db(s,o){var c=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var m=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var P={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};b===null?m=b=P:b=b.next=P,c=c.next}while(c!==null);b===null?m=b=o:b=b.next=o}else m=b=o;c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:b,shared:d.shared,effects:d.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}function tu(s,o,c,d){var m=s.updateQueue;bn=!1;var b=m.firstBaseUpdate,P=m.lastBaseUpdate,N=m.shared.pending;if(N!==null){m.shared.pending=null;var Q=N,oe=Q.next;Q.next=null,P===null?b=oe:P.next=oe,P=Q;var xe=s.alternate;xe!==null&&(xe=xe.updateQueue,N=xe.lastBaseUpdate,N!==P&&(N===null?xe.firstBaseUpdate=oe:N.next=oe,xe.lastBaseUpdate=Q))}if(b!==null){var He=m.baseState;P=0,xe=oe=Q=null,N=b;do{var fe=N.lane,At=N.eventTime;if((d&fe)===fe){xe!==null&&(xe=xe.next={eventTime:At,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var wt=s,Vi=N;switch(fe=o,At=c,Vi.tag){case 1:if(wt=Vi.payload,typeof wt=="function"){He=wt.call(At,He,fe);break e}He=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Vi.payload,fe=typeof wt=="function"?wt.call(At,He,fe):wt,fe==null)break e;He=l({},He,fe);break e;case 2:bn=!0}}N.callback!==null&&N.lane!==0&&(s.flags|=64,fe=m.effects,fe===null?m.effects=[N]:fe.push(N))}else At={eventTime:At,lane:fe,tag:N.tag,payload:N.payload,callback:N.callback,next:null},xe===null?(oe=xe=At,Q=He):xe=xe.next=At,P|=fe;if(N=N.next,N===null){if(N=m.shared.pending,N===null)break;fe=N,N=fe.next,fe.next=null,m.lastBaseUpdate=fe,m.shared.pending=null}}while(1);if(xe===null&&(Q=He),m.baseState=Q,m.firstBaseUpdate=oe,m.lastBaseUpdate=xe,o=m.shared.interleaved,o!==null){m=o;do P|=m.lane,m=m.next;while(m!==o)}else b===null&&(m.shared.lanes=0);ls|=P,s.lanes=P,s.memoizedState=He}}function Ub(s,o,c){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],m=d.callback;if(m!==null){if(d.callback=null,d=c,typeof m!="function")throw Error(u(191,m));m.call(d)}}}var Wb=new n.Component().refs;function bd(s,o,c,d){o=s.memoizedState,c=c(d,o),c=c==null?o:l({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var iu={isMounted:function(s){return(s=s._reactInternals)?H(s)===s:!1},enqueueSetState:function(s,o,c){s=s._reactInternals;var d=Ri(),m=Sn(s),b=Yr(d,m);b.payload=o,c!=null&&(b.callback=c),o=wn(s,b,m),o!==null&&(or(o,s,m,d),eu(o,s,m))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var d=Ri(),m=Sn(s),b=Yr(d,m);b.tag=1,b.payload=o,c!=null&&(b.callback=c),o=wn(s,b,m),o!==null&&(or(o,s,m,d),eu(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=Ri(),d=Sn(s),m=Yr(c,d);m.tag=2,o!=null&&(m.callback=o),o=wn(s,m,d),o!==null&&(or(o,s,d,c),eu(o,s,d))}};function Hb(s,o,c,d,m,b,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,b,P):o.prototype&&o.prototype.isPureReactComponent?!Zl(c,d)||!Zl(m,b):!0}function qb(s,o,c){var d=!1,m=yn,b=o.contextType;return typeof b=="object"&&b!==null?b=rr(b):(m=Wi(o)?rs:Ai.current,d=o.contextTypes,b=(d=d!=null)?Gs(s,m):yn),o=new o(c,b),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=iu,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=b),o}function Qb(s,o,c,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==s&&iu.enqueueReplaceState(o,o.state,null)}function wd(s,o,c,d){var m=s.stateNode;m.props=c,m.state=s.memoizedState,m.refs=Wb,yd(s);var b=o.contextType;typeof b=="object"&&b!==null?m.context=rr(b):(b=Wi(o)?rs:Ai.current,m.context=Gs(s,b)),m.state=s.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(bd(s,o,b,c),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&iu.enqueueReplaceState(m,m.state,null),tu(s,c,m,d),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function Zo(s,o,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(u(309));var d=c.stateNode}if(!d)throw Error(u(147,s));var m=d,b=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===b?o.ref:(o=function(P){var N=m.refs;N===Wb&&(N=m.refs={}),P===null?delete N[b]:N[b]=P},o._stringRef=b,o)}if(typeof s!="string")throw Error(u(284));if(!c._owner)throw Error(u(290,s))}return s}function ru(s,o){throw s=Object.prototype.toString.call(o),Error(u(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Vb(s){var o=s._init;return o(s._payload)}function Gb(s){function o(W,D){if(s){var X=W.deletions;X===null?(W.deletions=[D],W.flags|=16):X.push(D)}}function c(W,D){if(!s)return null;for(;D!==null;)o(W,D),D=D.sibling;return null}function d(W,D){for(W=new Map;D!==null;)D.key!==null?W.set(D.key,D):W.set(D.index,D),D=D.sibling;return W}function m(W,D){return W=Cn(W,D),W.index=0,W.sibling=null,W}function b(W,D,X){return W.index=X,s?(X=W.alternate,X!==null?(X=X.index,X<D?(W.flags|=2,D):X):(W.flags|=2,D)):(W.flags|=1048576,D)}function P(W){return s&&W.alternate===null&&(W.flags|=2),W}function N(W,D,X,ge){return D===null||D.tag!==6?(D=op(X,W.mode,ge),D.return=W,D):(D=m(D,X),D.return=W,D)}function Q(W,D,X,ge){var $e=X.type;return $e===y?xe(W,D,X.props.children,ge,X.key):D!==null&&(D.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===z&&Vb($e)===D.type)?(ge=m(D,X.props),ge.ref=Zo(W,D,X),ge.return=W,ge):(ge=Tu(X.type,X.key,X.props,null,W.mode,ge),ge.ref=Zo(W,D,X),ge.return=W,ge)}function oe(W,D,X,ge){return D===null||D.tag!==4||D.stateNode.containerInfo!==X.containerInfo||D.stateNode.implementation!==X.implementation?(D=ap(X,W.mode,ge),D.return=W,D):(D=m(D,X.children||[]),D.return=W,D)}function xe(W,D,X,ge,$e){return D===null||D.tag!==7?(D=ds(X,W.mode,ge,$e),D.return=W,D):(D=m(D,X),D.return=W,D)}function He(W,D,X){if(typeof D=="string"&&D!==""||typeof D=="number")return D=op(""+D,W.mode,X),D.return=W,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case g:return X=Tu(D.type,D.key,D.props,null,W.mode,X),X.ref=Zo(W,null,D),X.return=W,X;case p:return D=ap(D,W.mode,X),D.return=W,D;case z:var ge=D._init;return He(W,ge(D._payload),X)}if(ye(D)||G(D))return D=ds(D,W.mode,X,null),D.return=W,D;ru(W,D)}return null}function fe(W,D,X,ge){var $e=D!==null?D.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return $e!==null?null:N(W,D,""+X,ge);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case g:return X.key===$e?Q(W,D,X,ge):null;case p:return X.key===$e?oe(W,D,X,ge):null;case z:return $e=X._init,fe(W,D,$e(X._payload),ge)}if(ye(X)||G(X))return $e!==null?null:xe(W,D,X,ge,null);ru(W,X)}return null}function At(W,D,X,ge,$e){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return W=W.get(X)||null,N(D,W,""+ge,$e);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case g:return W=W.get(ge.key===null?X:ge.key)||null,Q(D,W,ge,$e);case p:return W=W.get(ge.key===null?X:ge.key)||null,oe(D,W,ge,$e);case z:var Ye=ge._init;return At(W,D,X,Ye(ge._payload),$e)}if(ye(ge)||G(ge))return W=W.get(X)||null,xe(D,W,ge,$e,null);ru(D,ge)}return null}function wt(W,D,X,ge){for(var $e=null,Ye=null,qe=D,ct=D=0,hi=null;qe!==null&&ct<X.length;ct++){qe.index>ct?(hi=qe,qe=null):hi=qe.sibling;var ht=fe(W,qe,X[ct],ge);if(ht===null){qe===null&&(qe=hi);break}s&&qe&&ht.alternate===null&&o(W,qe),D=b(ht,D,ct),Ye===null?$e=ht:Ye.sibling=ht,Ye=ht,qe=hi}if(ct===X.length)return c(W,qe),Pt&&ss(W,ct),$e;if(qe===null){for(;ct<X.length;ct++)qe=He(W,X[ct],ge),qe!==null&&(D=b(qe,D,ct),Ye===null?$e=qe:Ye.sibling=qe,Ye=qe);return Pt&&ss(W,ct),$e}for(qe=d(W,qe);ct<X.length;ct++)hi=At(qe,W,ct,X[ct],ge),hi!==null&&(s&&hi.alternate!==null&&qe.delete(hi.key===null?ct:hi.key),D=b(hi,D,ct),Ye===null?$e=hi:Ye.sibling=hi,Ye=hi);return s&&qe.forEach(function(kn){return o(W,kn)}),Pt&&ss(W,ct),$e}function Vi(W,D,X,ge){var $e=G(X);if(typeof $e!="function")throw Error(u(150));if(X=$e.call(X),X==null)throw Error(u(151));for(var Ye=$e=null,qe=D,ct=D=0,hi=null,ht=X.next();qe!==null&&!ht.done;ct++,ht=X.next()){qe.index>ct?(hi=qe,qe=null):hi=qe.sibling;var kn=fe(W,qe,ht.value,ge);if(kn===null){qe===null&&(qe=hi);break}s&&qe&&kn.alternate===null&&o(W,qe),D=b(kn,D,ct),Ye===null?$e=kn:Ye.sibling=kn,Ye=kn,qe=hi}if(ht.done)return c(W,qe),Pt&&ss(W,ct),$e;if(qe===null){for(;!ht.done;ct++,ht=X.next())ht=He(W,ht.value,ge),ht!==null&&(D=b(ht,D,ct),Ye===null?$e=ht:Ye.sibling=ht,Ye=ht);return Pt&&ss(W,ct),$e}for(qe=d(W,qe);!ht.done;ct++,ht=X.next())ht=At(qe,W,ct,ht.value,ge),ht!==null&&(s&&ht.alternate!==null&&qe.delete(ht.key===null?ct:ht.key),D=b(ht,D,ct),Ye===null?$e=ht:Ye.sibling=ht,Ye=ht);return s&&qe.forEach(function(wO){return o(W,wO)}),Pt&&ss(W,ct),$e}function Kr(W,D,X,ge){if(typeof X=="object"&&X!==null&&X.type===y&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case g:e:{for(var $e=X.key,Ye=D;Ye!==null;){if(Ye.key===$e){if($e=X.type,$e===y){if(Ye.tag===7){c(W,Ye.sibling),D=m(Ye,X.props.children),D.return=W,W=D;break e}}else if(Ye.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===z&&Vb($e)===Ye.type){c(W,Ye.sibling),D=m(Ye,X.props),D.ref=Zo(W,Ye,X),D.return=W,W=D;break e}c(W,Ye);break}else o(W,Ye);Ye=Ye.sibling}X.type===y?(D=ds(X.props.children,W.mode,ge,X.key),D.return=W,W=D):(ge=Tu(X.type,X.key,X.props,null,W.mode,ge),ge.ref=Zo(W,D,X),ge.return=W,W=ge)}return P(W);case p:e:{for(Ye=X.key;D!==null;){if(D.key===Ye)if(D.tag===4&&D.stateNode.containerInfo===X.containerInfo&&D.stateNode.implementation===X.implementation){c(W,D.sibling),D=m(D,X.children||[]),D.return=W,W=D;break e}else{c(W,D);break}else o(W,D);D=D.sibling}D=ap(X,W.mode,ge),D.return=W,W=D}return P(W);case z:return Ye=X._init,Kr(W,D,Ye(X._payload),ge)}if(ye(X))return wt(W,D,X,ge);if(G(X))return Vi(W,D,X,ge);ru(W,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,D!==null&&D.tag===6?(c(W,D.sibling),D=m(D,X),D.return=W,W=D):(c(W,D),D=op(X,W.mode,ge),D.return=W,W=D),P(W)):c(W,D)}return Kr}var eo=Gb(!0),Yb=Gb(!1),Ko={},nr=vn(Ko),Jo=vn(Ko),to=vn(Ko);function Lr(s){if(s===Ko)throw Error(u(174));return s}function xd(s,o){_t(to,o),_t(Jo,s),_t(nr,Ko),s=J(o),kt(nr),_t(nr,s)}function io(){kt(nr),kt(Jo),kt(to)}function Xb(s){var o=Lr(to.current),c=Lr(nr.current);o=Ae(c,s.type,o),c!==o&&(_t(Jo,s),_t(nr,o))}function _d(s){Jo.current===s&&(kt(nr),kt(Jo))}var Mt=vn(0);function nu(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Cb(c)||Xh(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Sd=[];function Ed(){for(var s=0;s<Sd.length;s++){var o=Sd[s];ei?o._workInProgressVersionPrimary=null:o._workInProgressVersionSecondary=null}Sd.length=0}var su=h.ReactCurrentDispatcher,Cd=h.ReactCurrentBatchConfig,as=0,zt=null,ti=null,ui=null,ou=!1,ea=!1,ta=0,qL=0;function Pi(){throw Error(u(321))}function kd(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!dr(s[c],o[c]))return!1;return!0}function Ad(s,o,c,d,m,b){if(as=b,zt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,su.current=s===null||s.memoizedState===null?YL:XL,s=c(d,m),ea){b=0;do{if(ea=!1,ta=0,25<=b)throw Error(u(301));b+=1,ui=ti=null,o.updateQueue=null,su.current=ZL,s=c(d,m)}while(ea)}if(su.current=uu,o=ti!==null&&ti.next!==null,as=0,ui=ti=zt=null,ou=!1,o)throw Error(u(300));return s}function Pd(){var s=ta!==0;return ta=0,s}function Or(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ui===null?zt.memoizedState=ui=s:ui=ui.next=s,ui}function sr(){if(ti===null){var s=zt.alternate;s=s!==null?s.memoizedState:null}else s=ti.next;var o=ui===null?zt.memoizedState:ui.next;if(o!==null)ui=o,ti=s;else{if(s===null)throw Error(u(310));ti=s,s={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},ui===null?zt.memoizedState=ui=s:ui=ui.next=s}return ui}function ia(s,o){return typeof o=="function"?o(s):o}function Td(s){var o=sr(),c=o.queue;if(c===null)throw Error(u(311));c.lastRenderedReducer=s;var d=ti,m=d.baseQueue,b=c.pending;if(b!==null){if(m!==null){var P=m.next;m.next=b.next,b.next=P}d.baseQueue=m=b,c.pending=null}if(m!==null){b=m.next,d=d.baseState;var N=P=null,Q=null,oe=b;do{var xe=oe.lane;if((as&xe)===xe)Q!==null&&(Q=Q.next={lane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),d=oe.hasEagerState?oe.eagerState:s(d,oe.action);else{var He={lane:xe,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null};Q===null?(N=Q=He,P=d):Q=Q.next=He,zt.lanes|=xe,ls|=xe}oe=oe.next}while(oe!==null&&oe!==b);Q===null?P=d:Q.next=N,dr(d,o.memoizedState)||(Hi=!0),o.memoizedState=d,o.baseState=P,o.baseQueue=Q,c.lastRenderedState=d}if(s=c.interleaved,s!==null){m=s;do b=m.lane,zt.lanes|=b,ls|=b,m=m.next;while(m!==s)}else m===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function Id(s){var o=sr(),c=o.queue;if(c===null)throw Error(u(311));c.lastRenderedReducer=s;var d=c.dispatch,m=c.pending,b=o.memoizedState;if(m!==null){c.pending=null;var P=m=m.next;do b=s(b,P.action),P=P.next;while(P!==m);dr(b,o.memoizedState)||(Hi=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function Zb(){}function Kb(s,o){var c=zt,d=sr(),m=o(),b=!dr(d.memoizedState,m);if(b&&(d.memoizedState=m,Hi=!0),d=d.queue,Rd(t1.bind(null,c,d,s),[s]),d.getSnapshot!==o||b||ui!==null&&ui.memoizedState.tag&1){if(c.flags|=2048,ra(9,e1.bind(null,c,d,m,o),void 0,null),ci===null)throw Error(u(349));as&30||Jb(c,o,m)}return m}function Jb(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=zt.updateQueue,o===null?(o={lastEffect:null,stores:null},zt.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function e1(s,o,c,d){o.value=c,o.getSnapshot=d,i1(o)&&r1(s)}function t1(s,o,c){return c(function(){i1(o)&&r1(s)})}function i1(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!dr(s,c)}catch{return!0}}function r1(s){var o=Rr(s,1);o!==null&&or(o,s,1,-1)}function n1(s){var o=Or();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:s},o.queue=s,s=s.dispatch=GL.bind(null,zt,s),[o.memoizedState,s]}function ra(s,o,c,d){return s={tag:s,create:o,destroy:c,deps:d,next:null},o=zt.updateQueue,o===null?(o={lastEffect:null,stores:null},zt.updateQueue=o,o.lastEffect=s.next=s):(c=o.lastEffect,c===null?o.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,o.lastEffect=s)),s}function s1(){return sr().memoizedState}function au(s,o,c,d){var m=Or();zt.flags|=s,m.memoizedState=ra(1|o,c,void 0,d===void 0?null:d)}function lu(s,o,c,d){var m=sr();d=d===void 0?null:d;var b=void 0;if(ti!==null){var P=ti.memoizedState;if(b=P.destroy,d!==null&&kd(d,P.deps)){m.memoizedState=ra(o,c,b,d);return}}zt.flags|=s,m.memoizedState=ra(1|o,c,b,d)}function o1(s,o){return au(8390656,8,s,o)}function Rd(s,o){return lu(2048,8,s,o)}function a1(s,o){return lu(4,2,s,o)}function l1(s,o){return lu(4,4,s,o)}function u1(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function c1(s,o,c){return c=c!=null?c.concat([s]):null,lu(4,4,u1.bind(null,o,s),c)}function Ld(){}function h1(s,o){var c=sr();o=o===void 0?null:o;var d=c.memoizedState;return d!==null&&o!==null&&kd(o,d[1])?d[0]:(c.memoizedState=[s,o],s)}function d1(s,o){var c=sr();o=o===void 0?null:o;var d=c.memoizedState;return d!==null&&o!==null&&kd(o,d[1])?d[0]:(s=s(),c.memoizedState=[s,o],s)}function p1(s,o,c){return as&21?(dr(c,o)||(c=Tb(),zt.lanes|=c,ls|=c,s.baseState=!0),o):(s.baseState&&(s.baseState=!1,Hi=!0),s.memoizedState=c)}function QL(s,o){var c=ut;ut=c!==0&&4>c?c:4,s(!0);var d=Cd.transition;Cd.transition={};try{s(!1),o()}finally{ut=c,Cd.transition=d}}function f1(){return sr().memoizedState}function VL(s,o,c){var d=Sn(s);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},g1(s))m1(o,c);else if(c=jb(s,o,c,d),c!==null){var m=Ri();or(c,s,d,m),v1(c,o,d)}}function GL(s,o,c){var d=Sn(s),m={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(g1(s))m1(o,m);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var P=o.lastRenderedState,N=b(P,c);if(m.hasEagerState=!0,m.eagerState=N,dr(N,P)){var Q=o.interleaved;Q===null?(m.next=m,vd(o)):(m.next=Q.next,Q.next=m),o.interleaved=m;return}}catch{}finally{}c=jb(s,o,m,d),c!==null&&(m=Ri(),or(c,s,d,m),v1(c,o,d))}}function g1(s){var o=s.alternate;return s===zt||o!==null&&o===zt}function m1(s,o){ea=ou=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function v1(s,o,c){if(c&4194240){var d=o.lanes;d&=s.pendingLanes,c|=d,o.lanes=c,rd(s,c)}}var uu={readContext:rr,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useInsertionEffect:Pi,useLayoutEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useMutableSource:Pi,useSyncExternalStore:Pi,useId:Pi,unstable_isNewReconciler:!1},YL={readContext:rr,useCallback:function(s,o){return Or().memoizedState=[s,o===void 0?null:o],s},useContext:rr,useEffect:o1,useImperativeHandle:function(s,o,c){return c=c!=null?c.concat([s]):null,au(4194308,4,u1.bind(null,o,s),c)},useLayoutEffect:function(s,o){return au(4194308,4,s,o)},useInsertionEffect:function(s,o){return au(4,2,s,o)},useMemo:function(s,o){var c=Or();return o=o===void 0?null:o,s=s(),c.memoizedState=[s,o],s},useReducer:function(s,o,c){var d=Or();return o=c!==void 0?c(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=VL.bind(null,zt,s),[d.memoizedState,s]},useRef:function(s){var o=Or();return s={current:s},o.memoizedState=s},useState:n1,useDebugValue:Ld,useDeferredValue:function(s){return Or().memoizedState=s},useTransition:function(){var s=n1(!1),o=s[0];return s=QL.bind(null,s[1]),Or().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,c){var d=zt,m=Or();if(Pt){if(c===void 0)throw Error(u(407));c=c()}else{if(c=o(),ci===null)throw Error(u(349));as&30||Jb(d,o,c)}m.memoizedState=c;var b={value:c,getSnapshot:o};return m.queue=b,o1(t1.bind(null,d,b,s),[s]),d.flags|=2048,ra(9,e1.bind(null,d,b,c,o),void 0,null),c},useId:function(){var s=Or(),o=ci.identifierPrefix;if(Pt){var c=Gr,d=Vr;c=(d&~(1<<32-hr(d)-1)).toString(32)+c,o=":"+o+"R"+c,c=ta++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=qL++,o=":"+o+"r"+c.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},XL={readContext:rr,useCallback:h1,useContext:rr,useEffect:Rd,useImperativeHandle:c1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:d1,useReducer:Td,useRef:s1,useState:function(){return Td(ia)},useDebugValue:Ld,useDeferredValue:function(s){var o=sr();return p1(o,ti.memoizedState,s)},useTransition:function(){var s=Td(ia)[0],o=sr().memoizedState;return[s,o]},useMutableSource:Zb,useSyncExternalStore:Kb,useId:f1,unstable_isNewReconciler:!1},ZL={readContext:rr,useCallback:h1,useContext:rr,useEffect:Rd,useImperativeHandle:c1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:d1,useReducer:Id,useRef:s1,useState:function(){return Id(ia)},useDebugValue:Ld,useDeferredValue:function(s){var o=sr();return ti===null?o.memoizedState=s:p1(o,ti.memoizedState,s)},useTransition:function(){var s=Id(ia)[0],o=sr().memoizedState;return[s,o]},useMutableSource:Zb,useSyncExternalStore:Kb,useId:f1,unstable_isNewReconciler:!1};function ro(s,o){try{var c="",d=o;do c+=HL(d),d=d.return;while(d);var m=c}catch(b){m=`
Error generating stack: `+b.message+`
`+b.stack}return{value:s,source:o,stack:m,digest:null}}function Od(s,o,c){return{value:s,source:null,stack:c??null,digest:o??null}}function $d(s,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var KL=typeof WeakMap=="function"?WeakMap:Map;function y1(s,o,c){c=Yr(-1,c),c.tag=3,c.payload={element:null};var d=o.value;return c.callback=function(){Su||(Su=!0,Jd=d),$d(s,o)},c}function b1(s,o,c){c=Yr(-1,c),c.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;c.payload=function(){return d(m)},c.callback=function(){$d(s,o)}}var b=s.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(c.callback=function(){$d(s,o),typeof d!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var P=o.stack;this.componentDidCatch(o.value,{componentStack:P!==null?P:""})}),c}function w1(s,o,c){var d=s.pingCache;if(d===null){d=s.pingCache=new KL;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(c)||(m.add(c),s=dO.bind(null,s,o,c),o.then(s,s))}function x1(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function _1(s,o,c,d,m){return s.mode&1?(s.flags|=65536,s.lanes=m,s):(s===o?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=Yr(-1,1),o.tag=2,wn(c,o,1))),c.lanes|=1),s)}var JL=h.ReactCurrentOwner,Hi=!1;function zi(s,o,c,d){o.child=s===null?Yb(o,null,c,d):eo(o,s.child,c,d)}function S1(s,o,c,d,m){c=c.render;var b=o.ref;return Js(o,m),d=Ad(s,o,c,d,b,m),c=Pd(),s!==null&&!Hi?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,Xr(s,o,m)):(Pt&&c&&ld(o),o.flags|=1,zi(s,o,d,m),o.child)}function E1(s,o,c,d,m){if(s===null){var b=c.type;return typeof b=="function"&&!sp(b)&&b.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=b,C1(s,o,b,d,m)):(s=Tu(c.type,null,d,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(b=s.child,(s.lanes&m)===0){var P=b.memoizedProps;if(c=c.compare,c=c!==null?c:Zl,c(P,d)&&s.ref===o.ref)return Xr(s,o,m)}return o.flags|=1,s=Cn(b,d),s.ref=o.ref,s.return=o,o.child=s}function C1(s,o,c,d,m){if(s!==null){var b=s.memoizedProps;if(Zl(b,d)&&s.ref===o.ref)if(Hi=!1,o.pendingProps=d=b,(s.lanes&m)!==0)s.flags&131072&&(Hi=!0);else return o.lanes=s.lanes,Xr(s,o,m)}return Fd(s,o,c,d,m)}function k1(s,o,c){var d=o.pendingProps,m=d.children,b=s!==null?s.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(so,Zi),Zi|=c;else{if(!(c&1073741824))return s=b!==null?b.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,_t(so,Zi),Zi|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=b!==null?b.baseLanes:c,_t(so,Zi),Zi|=d}else b!==null?(d=b.baseLanes|c,o.memoizedState=null):d=c,_t(so,Zi),Zi|=d;return zi(s,o,m,c),o.child}function A1(s,o){var c=o.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Fd(s,o,c,d,m){var b=Wi(c)?rs:Ai.current;return b=Gs(o,b),Js(o,m),c=Ad(s,o,c,d,b,m),d=Pd(),s!==null&&!Hi?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,Xr(s,o,m)):(Pt&&d&&ld(o),o.flags|=1,zi(s,o,c,m),o.child)}function P1(s,o,c,d,m){if(Wi(c)){var b=!0;Ul(o)}else b=!1;if(Js(o,m),o.stateNode===null)hu(s,o),qb(o,c,d),wd(o,c,d,m),d=!0;else if(s===null){var P=o.stateNode,N=o.memoizedProps;P.props=N;var Q=P.context,oe=c.contextType;typeof oe=="object"&&oe!==null?oe=rr(oe):(oe=Wi(c)?rs:Ai.current,oe=Gs(o,oe));var xe=c.getDerivedStateFromProps,He=typeof xe=="function"||typeof P.getSnapshotBeforeUpdate=="function";He||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(N!==d||Q!==oe)&&Qb(o,P,d,oe),bn=!1;var fe=o.memoizedState;P.state=fe,tu(o,d,P,m),Q=o.memoizedState,N!==d||fe!==Q||Ui.current||bn?(typeof xe=="function"&&(bd(o,c,xe,d),Q=o.memoizedState),(N=bn||Hb(o,c,N,d,fe,Q,oe))?(He||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(o.flags|=4194308)):(typeof P.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=Q),P.props=d,P.state=Q,P.context=oe,d=N):(typeof P.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{P=o.stateNode,Bb(s,o),N=o.memoizedProps,oe=o.type===o.elementType?N:fr(o.type,N),P.props=oe,He=o.pendingProps,fe=P.context,Q=c.contextType,typeof Q=="object"&&Q!==null?Q=rr(Q):(Q=Wi(c)?rs:Ai.current,Q=Gs(o,Q));var At=c.getDerivedStateFromProps;(xe=typeof At=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(N!==He||fe!==Q)&&Qb(o,P,d,Q),bn=!1,fe=o.memoizedState,P.state=fe,tu(o,d,P,m);var wt=o.memoizedState;N!==He||fe!==wt||Ui.current||bn?(typeof At=="function"&&(bd(o,c,At,d),wt=o.memoizedState),(oe=bn||Hb(o,c,oe,d,fe,wt,Q)||!1)?(xe||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(d,wt,Q),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(d,wt,Q)),typeof P.componentDidUpdate=="function"&&(o.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof P.componentDidUpdate!="function"||N===s.memoizedProps&&fe===s.memoizedState||(o.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&fe===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=wt),P.props=d,P.state=wt,P.context=Q,d=oe):(typeof P.componentDidUpdate!="function"||N===s.memoizedProps&&fe===s.memoizedState||(o.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&fe===s.memoizedState||(o.flags|=1024),d=!1)}return Md(s,o,c,d,b,m)}function Md(s,o,c,d,m,b){A1(s,o);var P=(o.flags&128)!==0;if(!d&&!P)return m&&Pb(o,c,!1),Xr(s,o,b);d=o.stateNode,JL.current=o;var N=P&&typeof c.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&P?(o.child=eo(o,s.child,null,b),o.child=eo(o,null,N,b)):zi(s,o,N,b),o.memoizedState=d.state,m&&Pb(o,c,!0),o.child}function T1(s){var o=s.stateNode;o.pendingContext?kb(s,o.pendingContext,o.pendingContext!==o.context):o.context&&kb(s,o.context,!1),xd(s,o.containerInfo)}function I1(s,o,c,d,m){return Zs(),dd(m),o.flags|=256,zi(s,o,c,d),o.child}var zd={dehydrated:null,treeContext:null,retryLane:0};function Nd(s){return{baseLanes:s,cachePool:null,transitions:null}}function R1(s,o,c){var d=o.pendingProps,m=Mt.current,b=!1,P=(o.flags&128)!==0,N;if((N=P)||(N=s!==null&&s.memoizedState===null?!1:(m&2)!==0),N?(b=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),_t(Mt,m&1),s===null)return hd(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(o.mode&1?Xh(s)?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(P=d.children,s=d.fallback,b?(d=o.mode,b=o.child,P={mode:"hidden",children:P},!(d&1)&&b!==null?(b.childLanes=0,b.pendingProps=P):b=Iu(P,d,0,null),s=ds(s,d,c,null),b.return=o,s.return=o,b.sibling=s,o.child=b,o.child.memoizedState=Nd(c),o.memoizedState=zd,s):jd(o,P));if(m=s.memoizedState,m!==null&&(N=m.dehydrated,N!==null))return eO(s,o,P,d,N,m,c);if(b){b=d.fallback,P=o.mode,m=s.child,N=m.sibling;var Q={mode:"hidden",children:d.children};return!(P&1)&&o.child!==m?(d=o.child,d.childLanes=0,d.pendingProps=Q,o.deletions=null):(d=Cn(m,Q),d.subtreeFlags=m.subtreeFlags&14680064),N!==null?b=Cn(N,b):(b=ds(b,P,c,null),b.flags|=2),b.return=o,d.return=o,d.sibling=b,o.child=d,d=b,b=o.child,P=s.child.memoizedState,P=P===null?Nd(c):{baseLanes:P.baseLanes|c,cachePool:null,transitions:P.transitions},b.memoizedState=P,b.childLanes=s.childLanes&~c,o.memoizedState=zd,d}return b=s.child,s=b.sibling,d=Cn(b,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=c),d.return=o,d.sibling=null,s!==null&&(c=o.deletions,c===null?(o.deletions=[s],o.flags|=16):c.push(s)),o.child=d,o.memoizedState=null,d}function jd(s,o){return o=Iu({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function cu(s,o,c,d){return d!==null&&dd(d),eo(o,s.child,null,c),s=jd(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function eO(s,o,c,d,m,b,P){if(c)return o.flags&256?(o.flags&=-257,d=Od(Error(u(422))),cu(s,o,P,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(b=d.fallback,m=o.mode,d=Iu({mode:"visible",children:d.children},m,0,null),b=ds(b,m,P,null),b.flags|=2,d.return=o,b.return=o,d.sibling=b,o.child=d,o.mode&1&&eo(o,s.child,null,P),o.child.memoizedState=Nd(P),o.memoizedState=zd,b);if(!(o.mode&1))return cu(s,o,P,null);if(Xh(m))return d=pL(m).digest,b=Error(u(419)),d=Od(b,d,void 0),cu(s,o,P,d);if(c=(P&s.childLanes)!==0,Hi||c){if(d=ci,d!==null){switch(P&-P){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(d.suspendedLanes|P)?0:m,m!==0&&m!==b.retryLane&&(b.retryLane=m,Rr(s,m),or(d,s,m,-1))}return np(),d=Od(Error(u(421))),cu(s,o,P,d)}return Cb(m)?(o.flags|=128,o.child=s.child,o=pO.bind(null,s),fL(m,o),null):(s=b.treeContext,mt&&(ir=vL(m),Xi=o,Pt=!0,pr=null,Xo=!1,s!==null&&(er[tr++]=Vr,er[tr++]=Gr,er[tr++]=ns,Vr=s.id,Gr=s.overflow,ns=o)),o=jd(o,d.children),o.flags|=4096,o)}function L1(s,o,c){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),md(s.return,o,c)}function Bd(s,o,c,d,m){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=c,b.tailMode=m)}function O1(s,o,c){var d=o.pendingProps,m=d.revealOrder,b=d.tail;if(zi(s,o,d.children,c),d=Mt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&L1(s,c,o);else if(s.tag===19)L1(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(_t(Mt,d),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(c=o.child,m=null;c!==null;)s=c.alternate,s!==null&&nu(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=o.child,o.child=null):(m=c.sibling,c.sibling=null),Bd(o,!1,m,c,b);break;case"backwards":for(c=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&nu(s)===null){o.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}Bd(o,!0,c,null,b);break;case"together":Bd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function hu(s,o){!(o.mode&1)&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Xr(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),ls|=o.lanes,(c&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(u(153));if(o.child!==null){for(s=o.child,c=Cn(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=Cn(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function tO(s,o,c){switch(o.tag){case 3:T1(o),Zs();break;case 5:Xb(o);break;case 1:Wi(o.type)&&Ul(o);break;case 4:xd(o,o.stateNode.containerInfo);break;case 10:Nb(o,o.type._context,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(_t(Mt,Mt.current&1),o.flags|=128,null):c&o.child.childLanes?R1(s,o,c):(_t(Mt,Mt.current&1),s=Xr(s,o,c),s!==null?s.sibling:null);_t(Mt,Mt.current&1);break;case 19:if(d=(c&o.childLanes)!==0,(s.flags&128)!==0){if(d)return O1(s,o,c);o.flags|=128}var m=o.memoizedState;if(m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),_t(Mt,Mt.current),d)break;return null;case 22:case 23:return o.lanes=0,k1(s,o,c)}return Xr(s,o,c)}function $r(s){s.flags|=4}function $1(s,o){if(s!==null&&s.child===o.child)return!0;if(o.flags&16)return!1;for(s=o.child;s!==null;){if(s.flags&12854||s.subtreeFlags&12854)return!1;s=s.sibling}return!0}var na,sa,du,pu;if(Ft)na=function(s,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)ie(s,c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},sa=function(){},du=function(s,o,c,d,m){if(s=s.memoizedProps,s!==d){var b=o.stateNode,P=Lr(nr.current);c=$t(b,c,s,d,m,P),(o.updateQueue=c)&&$r(o)}},pu=function(s,o,c,d){c!==d&&$r(o)};else if(Xt){na=function(s,o,c,d){for(var m=o.child;m!==null;){if(m.tag===5){var b=m.stateNode;c&&d&&(b=Sb(b,m.type,m.memoizedProps,m)),ie(s,b)}else if(m.tag===6)b=m.stateNode,c&&d&&(b=Eb(b,m.memoizedProps,m)),ie(s,b);else if(m.tag!==4){if(m.tag===22&&m.memoizedState!==null)b=m.child,b!==null&&(b.return=m),na(s,m,!0,!0);else if(m.child!==null){m.child.return=m,m=m.child;continue}}if(m===o)break;for(;m.sibling===null;){if(m.return===null||m.return===o)return;m=m.return}m.sibling.return=m.return,m=m.sibling}};var F1=function(s,o,c,d){for(var m=o.child;m!==null;){if(m.tag===5){var b=m.stateNode;c&&d&&(b=Sb(b,m.type,m.memoizedProps,m)),_b(s,b)}else if(m.tag===6)b=m.stateNode,c&&d&&(b=Eb(b,m.memoizedProps,m)),_b(s,b);else if(m.tag!==4){if(m.tag===22&&m.memoizedState!==null)b=m.child,b!==null&&(b.return=m),F1(s,m,!0,!0);else if(m.child!==null){m.child.return=m,m=m.child;continue}}if(m===o)break;for(;m.sibling===null;){if(m.return===null||m.return===o)return;m=m.return}m.sibling.return=m.return,m=m.sibling}};sa=function(s,o){var c=o.stateNode;if(!$1(s,o)){s=c.containerInfo;var d=Qo(s);F1(d,o,!1,!1),c.pendingChildren=d,$r(o),uL(s,d)}},du=function(s,o,c,d,m){var b=s.stateNode,P=s.memoizedProps;if((s=$1(s,o))&&P===d)o.stateNode=b;else{var N=o.stateNode,Q=Lr(nr.current),oe=null;P!==d&&(oe=$t(N,c,P,d,m,Q)),s&&oe===null?o.stateNode=b:(b=Pr(b,oe,c,P,d,o,s,N),Le(b,c,d,m,Q)&&$r(o),o.stateNode=b,s?$r(o):na(b,o,!1,!1))}},pu=function(s,o,c,d){c!==d?(s=Lr(to.current),c=Lr(nr.current),o.stateNode=Wt(d,s,c,o),$r(o)):o.stateNode=s.stateNode}}else sa=function(){},du=function(){},pu=function(){};function oa(s,o){if(!Pt)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Ti(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,d=0;if(o)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=d,s.childLanes=c,o}function iO(s,o,c){var d=o.pendingProps;switch(ud(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(o),null;case 1:return Wi(o.type)&&Dl(),Ti(o),null;case 3:return c=o.stateNode,io(),kt(Ui),kt(Ai),Ed(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Xl(o)?$r(o):s===null||s.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,pr!==null&&(ip(pr),pr=null))),sa(s,o),Ti(o),null;case 5:_d(o),c=Lr(to.current);var m=o.type;if(s!==null&&o.stateNode!=null)du(s,o,m,d,c),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(u(166));return Ti(o),null}if(s=Lr(nr.current),Xl(o)){if(!mt)throw Error(u(175));s=yL(o.stateNode,o.type,o.memoizedProps,c,s,o,!Xo),o.updateQueue=s,s!==null&&$r(o)}else{var b=it(m,d,c,s,o);na(b,o,!1,!1),o.stateNode=b,Le(b,m,d,c,s)&&$r(o)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ti(o),null;case 6:if(s&&o.stateNode!=null)pu(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(u(166));if(s=Lr(to.current),c=Lr(nr.current),Xl(o)){if(!mt)throw Error(u(176));if(s=o.stateNode,c=o.memoizedProps,(d=bL(s,c,o,!Xo))&&(m=Xi,m!==null))switch(m.tag){case 3:AL(m.stateNode.containerInfo,s,c,(m.mode&1)!==0);break;case 5:PL(m.type,m.memoizedProps,m.stateNode,s,c,(m.mode&1)!==0)}d&&$r(o)}else o.stateNode=Wt(d,s,c,o)}return Ti(o),null;case 13:if(kt(Mt),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Pt&&ir!==null&&o.mode&1&&!(o.flags&128))zb(),Zs(),o.flags|=98560,m=!1;else if(m=Xl(o),d!==null&&d.dehydrated!==null){if(s===null){if(!m)throw Error(u(318));if(!mt)throw Error(u(344));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(u(317));wL(m,o)}else Zs(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Ti(o),m=!1}else pr!==null&&(ip(pr),pr=null),m=!0;if(!m)return o.flags&65536?o:null}return o.flags&128?(o.lanes=c,o):(c=d!==null,c!==(s!==null&&s.memoizedState!==null)&&c&&(o.child.flags|=8192,o.mode&1&&(s===null||Mt.current&1?ii===0&&(ii=3):np())),o.updateQueue!==null&&(o.flags|=4),Ti(o),null);case 4:return io(),sa(s,o),s===null&&We(o.stateNode.containerInfo),Ti(o),null;case 10:return gd(o.type._context),Ti(o),null;case 17:return Wi(o.type)&&Dl(),Ti(o),null;case 19:if(kt(Mt),m=o.memoizedState,m===null)return Ti(o),null;if(d=(o.flags&128)!==0,b=m.rendering,b===null)if(d)oa(m,!1);else{if(ii!==0||s!==null&&s.flags&128)for(s=o.child;s!==null;){if(b=nu(s),b!==null){for(o.flags|=128,oa(m,!1),s=b.updateQueue,s!==null&&(o.updateQueue=s,o.flags|=4),o.subtreeFlags=0,s=c,c=o.child;c!==null;)d=c,m=s,d.flags&=14680066,b=d.alternate,b===null?(d.childLanes=0,d.lanes=m,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=b.childLanes,d.lanes=b.lanes,d.child=b.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=b.memoizedProps,d.memoizedState=b.memoizedState,d.updateQueue=b.updateQueue,d.type=b.type,m=b.dependencies,d.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),c=c.sibling;return _t(Mt,Mt.current&1|2),o.child}s=s.sibling}m.tail!==null&&li()>Kd&&(o.flags|=128,d=!0,oa(m,!1),o.lanes=4194304)}else{if(!d)if(s=nu(b),s!==null){if(o.flags|=128,d=!0,s=s.updateQueue,s!==null&&(o.updateQueue=s,o.flags|=4),oa(m,!0),m.tail===null&&m.tailMode==="hidden"&&!b.alternate&&!Pt)return Ti(o),null}else 2*li()-m.renderingStartTime>Kd&&c!==1073741824&&(o.flags|=128,d=!0,oa(m,!1),o.lanes=4194304);m.isBackwards?(b.sibling=o.child,o.child=b):(s=m.last,s!==null?s.sibling=b:o.child=b,m.last=b)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=li(),o.sibling=null,s=Mt.current,_t(Mt,d?s&1|2:s&1),o):(Ti(o),null);case 22:case 23:return rp(),c=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==c&&(o.flags|=8192),c&&o.mode&1?Zi&1073741824&&(Ti(o),Ft&&o.subtreeFlags&6&&(o.flags|=8192)):Ti(o),null;case 24:return null;case 25:return null}throw Error(u(156,o.tag))}function rO(s,o){switch(ud(o),o.tag){case 1:return Wi(o.type)&&Dl(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return io(),kt(Ui),kt(Ai),Ed(),s=o.flags,s&65536&&!(s&128)?(o.flags=s&-65537|128,o):null;case 5:return _d(o),null;case 13:if(kt(Mt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(u(340));Zs()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return kt(Mt),null;case 4:return io(),null;case 10:return gd(o.type._context),null;case 22:case 23:return rp(),null;case 24:return null;default:return null}}var fu=!1,Ii=!1,nO=typeof WeakSet=="function"?WeakSet:Set,be=null;function no(s,o){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){Tt(s,o,d)}else c.current=null}function M1(s,o,c){try{c()}catch(d){Tt(s,o,d)}}var z1=!1;function sO(s,o){for(Oe(s.containerInfo),be=o;be!==null;)if(s=be,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,be=o;else for(;be!==null;){s=be;try{var c=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(c!==null){var d=c.memoizedProps,m=c.memoizedState,b=s.stateNode,P=b.getSnapshotBeforeUpdate(s.elementType===s.type?d:fr(s.type,d),m);b.__reactInternalSnapshotBeforeUpdate=P}break;case 3:Ft&&pt(s.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(N){Tt(s,s.return,N)}if(o=s.sibling,o!==null){o.return=s.return,be=o;break}be=s.return}return c=z1,z1=!1,c}function aa(s,o,c){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&s)===s){var b=m.destroy;m.destroy=void 0,b!==void 0&&M1(o,c,b)}m=m.next}while(m!==d)}}function gu(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&s)===s){var d=c.create;c.destroy=d()}c=c.next}while(c!==o)}}function Dd(s){var o=s.ref;if(o!==null){var c=s.stateNode;switch(s.tag){case 5:s=Re(c);break;default:s=c}typeof o=="function"?o(s):o.current=s}}function N1(s){var o=s.alternate;o!==null&&(s.alternate=null,N1(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Ue(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function j1(s){return s.tag===5||s.tag===3||s.tag===4}function B1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||j1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ud(s,o,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?ze(c,s,o):Ho(c,s);else if(d!==4&&(s=s.child,s!==null))for(Ud(s,o,c),s=s.sibling;s!==null;)Ud(s,o,c),s=s.sibling}function Wd(s,o,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?ve(c,s,o):Gh(c,s);else if(d!==4&&(s=s.child,s!==null))for(Wd(s,o,c),s=s.sibling;s!==null;)Wd(s,o,c),s=s.sibling}var yi=null,gr=!1;function Fr(s,o,c){for(c=c.child;c!==null;)Hd(s,o,c),c=c.sibling}function Hd(s,o,c){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Ql,c)}catch{}switch(c.tag){case 5:Ii||no(c,o);case 6:if(Ft){var d=yi,m=gr;yi=null,Fr(s,o,c),yi=d,gr=m,yi!==null&&(gr?Ht(yi,c.stateNode):bt(yi,c.stateNode))}else Fr(s,o,c);break;case 18:Ft&&yi!==null&&(gr?CL(yi,c.stateNode):EL(yi,c.stateNode));break;case 4:Ft?(d=yi,m=gr,yi=c.stateNode.containerInfo,gr=!0,Fr(s,o,c),yi=d,gr=m):(Xt&&(d=c.stateNode.containerInfo,m=Qo(d),Yh(d,m)),Fr(s,o,c));break;case 0:case 11:case 14:case 15:if(!Ii&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var b=m,P=b.destroy;b=b.tag,P!==void 0&&(b&2||b&4)&&M1(c,o,P),m=m.next}while(m!==d)}Fr(s,o,c);break;case 1:if(!Ii&&(no(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(N){Tt(c,o,N)}Fr(s,o,c);break;case 21:Fr(s,o,c);break;case 22:c.mode&1?(Ii=(d=Ii)||c.memoizedState!==null,Fr(s,o,c),Ii=d):Fr(s,o,c);break;default:Fr(s,o,c)}}function D1(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new nO),o.forEach(function(d){var m=fO.bind(null,s,d);c.has(d)||(c.add(d),d.then(m,m))})}}function mr(s,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var m=c[d];try{var b=s,P=o;if(Ft){var N=P;e:for(;N!==null;){switch(N.tag){case 5:yi=N.stateNode,gr=!1;break e;case 3:yi=N.stateNode.containerInfo,gr=!0;break e;case 4:yi=N.stateNode.containerInfo,gr=!0;break e}N=N.return}if(yi===null)throw Error(u(160));Hd(b,P,m),yi=null,gr=!1}else Hd(b,P,m);var Q=m.alternate;Q!==null&&(Q.return=null),m.return=null}catch(oe){Tt(m,o,oe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)U1(o,s),o=o.sibling}function U1(s,o){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(mr(o,s),Mr(s),d&4){try{aa(3,s,s.return),gu(3,s)}catch(fe){Tt(s,s.return,fe)}try{aa(5,s,s.return)}catch(fe){Tt(s,s.return,fe)}}break;case 1:mr(o,s),Mr(s),d&512&&c!==null&&no(c,c.return);break;case 5:if(mr(o,s),Mr(s),d&512&&c!==null&&no(c,c.return),Ft){if(s.flags&32){var m=s.stateNode;try{Vt(m)}catch(fe){Tt(s,s.return,fe)}}if(d&4&&(m=s.stateNode,m!=null)){var b=s.memoizedProps;if(c=c!==null?c.memoizedProps:b,d=s.type,o=s.updateQueue,s.updateQueue=null,o!==null)try{jl(m,o,d,c,b,s)}catch(fe){Tt(s,s.return,fe)}}}break;case 6:if(mr(o,s),Mr(s),d&4&&Ft){if(s.stateNode===null)throw Error(u(162));m=s.stateNode,b=s.memoizedProps,c=c!==null?c.memoizedProps:b;try{Qs(m,c,b)}catch(fe){Tt(s,s.return,fe)}}break;case 3:if(mr(o,s),Mr(s),d&4){if(Ft&&mt&&c!==null&&c.memoizedState.isDehydrated)try{_L(o.containerInfo)}catch(fe){Tt(s,s.return,fe)}if(Xt){m=o.containerInfo,b=o.pendingChildren;try{Yh(m,b)}catch(fe){Tt(s,s.return,fe)}}}break;case 4:if(mr(o,s),Mr(s),d&4&&Xt){b=s.stateNode,m=b.containerInfo,b=b.pendingChildren;try{Yh(m,b)}catch(fe){Tt(s,s.return,fe)}}break;case 13:mr(o,s),Mr(s),m=s.child,m.flags&8192&&(b=m.memoizedState!==null,m.stateNode.isHidden=b,!b||m.alternate!==null&&m.alternate.memoizedState!==null||(Zd=li())),d&4&&D1(s);break;case 22:var P=c!==null&&c.memoizedState!==null;if(s.mode&1?(Ii=(c=Ii)||P,mr(o,s),Ii=c):mr(o,s),Mr(s),d&8192){if(c=s.memoizedState!==null,(s.stateNode.isHidden=c)&&!P&&(s.mode&1)!==0)for(be=s,d=s.child;d!==null;){for(o=be=d;be!==null;){P=be;var N=P.child;switch(P.tag){case 0:case 11:case 14:case 15:aa(4,P,P.return);break;case 1:no(P,P.return);var Q=P.stateNode;if(typeof Q.componentWillUnmount=="function"){var oe=P,xe=P.return;try{var He=oe;Q.props=He.memoizedProps,Q.state=He.memoizedState,Q.componentWillUnmount()}catch(fe){Tt(oe,xe,fe)}}break;case 5:no(P,P.return);break;case 22:if(P.memoizedState!==null){q1(o);continue}}N!==null?(N.return=P,be=N):q1(o)}d=d.sibling}if(Ft){e:if(d=null,Ft)for(o=s;;){if(o.tag===5){if(d===null){d=o;try{m=o.stateNode,c?te(m):nt(o.stateNode,o.memoizedProps)}catch(fe){Tt(s,s.return,fe)}}}else if(o.tag===6){if(d===null)try{b=o.stateNode,c?ke(b):Ct(b,o.memoizedProps)}catch(fe){Tt(s,s.return,fe)}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}}}break;case 19:mr(o,s),Mr(s),d&4&&D1(s);break;case 21:break;default:mr(o,s),Mr(s)}}function Mr(s){var o=s.flags;if(o&2){try{if(Ft){e:{for(var c=s.return;c!==null;){if(j1(c)){var d=c;break e}c=c.return}throw Error(u(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(Vt(m),d.flags&=-33);var b=B1(s);Wd(s,b,m);break;case 3:case 4:var P=d.stateNode.containerInfo,N=B1(s);Ud(s,N,P);break;default:throw Error(u(161))}}}catch(Q){Tt(s,s.return,Q)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function oO(s,o,c){be=s,W1(s)}function W1(s,o,c){for(var d=(s.mode&1)!==0;be!==null;){var m=be,b=m.child;if(m.tag===22&&d){var P=m.memoizedState!==null||fu;if(!P){var N=m.alternate,Q=N!==null&&N.memoizedState!==null||Ii;N=fu;var oe=Ii;if(fu=P,(Ii=Q)&&!oe)for(be=m;be!==null;)P=be,Q=P.child,P.tag===22&&P.memoizedState!==null?Q1(m):Q!==null?(Q.return=P,be=Q):Q1(m);for(;b!==null;)be=b,W1(b),b=b.sibling;be=m,fu=N,Ii=oe}H1(s)}else m.subtreeFlags&8772&&b!==null?(b.return=m,be=b):H1(s)}}function H1(s){for(;be!==null;){var o=be;if(o.flags&8772){var c=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Ii||gu(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Ii)if(c===null)d.componentDidMount();else{var m=o.elementType===o.type?c.memoizedProps:fr(o.type,c.memoizedProps);d.componentDidUpdate(m,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var b=o.updateQueue;b!==null&&Ub(o,b,d);break;case 3:var P=o.updateQueue;if(P!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=Re(o.child.stateNode);break;case 1:c=o.child.stateNode}Ub(o,P,c)}break;case 5:var N=o.stateNode;c===null&&o.flags&4&&qo(N,o.type,o.memoizedProps,o);break;case 6:break;case 4:break;case 12:break;case 13:if(mt&&o.memoizedState===null){var Q=o.alternate;if(Q!==null){var oe=Q.memoizedState;if(oe!==null){var xe=oe.dehydrated;xe!==null&&SL(xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163))}Ii||o.flags&512&&Dd(o)}catch(He){Tt(o,o.return,He)}}if(o===s){be=null;break}if(c=o.sibling,c!==null){c.return=o.return,be=c;break}be=o.return}}function q1(s){for(;be!==null;){var o=be;if(o===s){be=null;break}var c=o.sibling;if(c!==null){c.return=o.return,be=c;break}be=o.return}}function Q1(s){for(;be!==null;){var o=be;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{gu(4,o)}catch(Q){Tt(o,c,Q)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var m=o.return;try{d.componentDidMount()}catch(Q){Tt(o,m,Q)}}var b=o.return;try{Dd(o)}catch(Q){Tt(o,b,Q)}break;case 5:var P=o.return;try{Dd(o)}catch(Q){Tt(o,P,Q)}}}catch(Q){Tt(o,o.return,Q)}if(o===s){be=null;break}var N=o.sibling;if(N!==null){N.return=o.return,be=N;break}be=o.return}}var mu=0,vu=1,yu=2,bu=3,wu=4;if(typeof Symbol=="function"&&Symbol.for){var la=Symbol.for;mu=la("selector.component"),vu=la("selector.has_pseudo_class"),yu=la("selector.role"),bu=la("selector.test_id"),wu=la("selector.text")}function qd(s){var o=Fe(s);if(o!=null){if(typeof o.memoizedProps["data-testname"]!="string")throw Error(u(364));return o}if(s=Mi(s),s===null)throw Error(u(362));return s.stateNode.current}function Qd(s,o){switch(o.$$typeof){case mu:if(s.type===o.value)return!0;break;case vu:e:{o=o.value,s=[s,0];for(var c=0;c<s.length;){var d=s[c++],m=s[c++],b=o[m];if(d.tag!==5||!is(d)){for(;b!=null&&Qd(d,b);)m++,b=o[m];if(m===o.length){o=!0;break e}else for(d=d.child;d!==null;)s.push(d,m),d=d.sibling}}o=!1}return o;case yu:if(s.tag===5&&Di(s.stateNode,o.value))return!0;break;case wu:if((s.tag===5||s.tag===6)&&(s=ts(s),s!==null&&0<=s.indexOf(o.value)))return!0;break;case bu:if(s.tag===5&&(s=s.memoizedProps["data-testname"],typeof s=="string"&&s.toLowerCase()===o.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function Vd(s){switch(s.$$typeof){case mu:return"<"+(V(s.value)||"Unknown")+">";case vu:return":has("+(Vd(s)||"")+")";case yu:return'[role="'+s.value+'"]';case wu:return'"'+s.value+'"';case bu:return'[data-testname="'+s.value+'"]';default:throw Error(u(365))}}function V1(s,o){var c=[];s=[s,0];for(var d=0;d<s.length;){var m=s[d++],b=s[d++],P=o[b];if(m.tag!==5||!is(m)){for(;P!=null&&Qd(m,P);)b++,P=o[b];if(b===o.length)c.push(m);else for(m=m.child;m!==null;)s.push(m,b),m=m.sibling}}return c}function Gd(s,o){if(!tt)throw Error(u(363));s=qd(s),s=V1(s,o),o=[],s=Array.from(s);for(var c=0;c<s.length;){var d=s[c++];if(d.tag===5)is(d)||o.push(d.stateNode);else for(d=d.child;d!==null;)s.push(d),d=d.sibling}return o}var aO=Math.ceil,xu=h.ReactCurrentDispatcher,Yd=h.ReactCurrentOwner,Gt=h.ReactCurrentBatchConfig,Ke=0,ci=null,Zt=null,bi=0,Zi=0,so=vn(0),ii=0,ua=null,ls=0,_u=0,Xd=0,ca=null,qi=null,Zd=0,Kd=1/0,Zr=null;function oo(){Kd=li()+500}var Su=!1,Jd=null,xn=null,Eu=!1,_n=null,Cu=0,ha=0,ep=null,ku=-1,Au=0;function Ri(){return Ke&6?li():ku!==-1?ku:ku=li()}function Sn(s){return s.mode&1?Ke&2&&bi!==0?bi&-bi:WL.transition!==null?(Au===0&&(Au=Tb()),Au):(s=ut,s!==0?s:rt()):1}function or(s,o,c,d){if(50<ha)throw ha=0,ep=null,Error(u(185));Yo(s,c,d),(!(Ke&2)||s!==ci)&&(s===ci&&(!(Ke&2)&&(_u|=c),ii===4&&En(s,bi)),Qi(s,d),c===1&&Ke===0&&!(o.mode&1)&&(oo(),Vl&&Ir()))}function Qi(s,o){var c=s.callbackNode;$L(s,o);var d=ql(s,s===ci?bi:0);if(d===0)c!==null&&Rb(c),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(c!=null&&Rb(c),o===1)s.tag===0?UL(Y1.bind(null,s)):Lb(Y1.bind(null,s)),Ze?at(function(){!(Ke&6)&&Ir()}):nd(sd,Ir),c=null;else{switch(Ib(d)){case 1:c=sd;break;case 4:c=NL;break;case 16:c=od;break;case 536870912:c=jL;break;default:c=od}c=nw(c,G1.bind(null,s))}s.callbackPriority=o,s.callbackNode=c}}function G1(s,o){if(ku=-1,Au=0,(Ke&6)!==0)throw Error(u(327));var c=s.callbackNode;if(hs()&&s.callbackNode!==c)return null;var d=ql(s,s===ci?bi:0);if(d===0)return null;if(d&30||d&s.expiredLanes||o)o=Pu(s,d);else{o=d;var m=Ke;Ke|=2;var b=K1();(ci!==s||bi!==o)&&(Zr=null,oo(),us(s,o));do try{cO();break}catch(N){Z1(s,N)}while(1);fd(),xu.current=b,Ke=m,Zt!==null?o=0:(ci=null,bi=0,o=ii)}if(o!==0){if(o===2&&(m=td(s),m!==0&&(d=m,o=tp(s,m))),o===1)throw c=ua,us(s,0),En(s,d),Qi(s,li()),c;if(o===6)En(s,d);else{if(m=s.current.alternate,(d&30)===0&&!lO(m)&&(o=Pu(s,d),o===2&&(b=td(s),b!==0&&(d=b,o=tp(s,b))),o===1))throw c=ua,us(s,0),En(s,d),Qi(s,li()),c;switch(s.finishedWork=m,s.finishedLanes=d,o){case 0:case 1:throw Error(u(345));case 2:cs(s,qi,Zr);break;case 3:if(En(s,d),(d&130023424)===d&&(o=Zd+500-li(),10<o)){if(ql(s,0)!==0)break;if(m=s.suspendedLanes,(m&d)!==d){Ri(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=yt(cs.bind(null,s,qi,Zr),o);break}cs(s,qi,Zr);break;case 4:if(En(s,d),(d&4194240)===d)break;for(o=s.eventTimes,m=-1;0<d;){var P=31-hr(d);b=1<<P,P=o[P],P>m&&(m=P),d&=~b}if(d=m,d=li()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*aO(d/1960))-d,10<d){s.timeoutHandle=yt(cs.bind(null,s,qi,Zr),d);break}cs(s,qi,Zr);break;case 5:cs(s,qi,Zr);break;default:throw Error(u(329))}}}return Qi(s,li()),s.callbackNode===c?G1.bind(null,s):null}function tp(s,o){var c=ca;return s.current.memoizedState.isDehydrated&&(us(s,o).flags|=256),s=Pu(s,o),s!==2&&(o=qi,qi=c,o!==null&&ip(o)),s}function ip(s){qi===null?qi=s:qi.push.apply(qi,s)}function lO(s){for(var o=s;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var m=c[d],b=m.getSnapshot;m=m.value;try{if(!dr(b(),m))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function En(s,o){for(o&=~Xd,o&=~_u,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var c=31-hr(o),d=1<<c;s[c]=-1,o&=~d}}function Y1(s){if(Ke&6)throw Error(u(327));hs();var o=ql(s,0);if(!(o&1))return Qi(s,li()),null;var c=Pu(s,o);if(s.tag!==0&&c===2){var d=td(s);d!==0&&(o=d,c=tp(s,d))}if(c===1)throw c=ua,us(s,0),En(s,o),Qi(s,li()),c;if(c===6)throw Error(u(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,cs(s,qi,Zr),Qi(s,li()),null}function X1(s){_n!==null&&_n.tag===0&&!(Ke&6)&&hs();var o=Ke;Ke|=1;var c=Gt.transition,d=ut;try{if(Gt.transition=null,ut=1,s)return s()}finally{ut=d,Gt.transition=c,Ke=o,!(Ke&6)&&Ir()}}function rp(){Zi=so.current,kt(so)}function us(s,o){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==ai&&(s.timeoutHandle=ai,Et(c)),Zt!==null)for(c=Zt.return;c!==null;){var d=c;switch(ud(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Dl();break;case 3:io(),kt(Ui),kt(Ai),Ed();break;case 5:_d(d);break;case 4:io();break;case 13:kt(Mt);break;case 19:kt(Mt);break;case 10:gd(d.type._context);break;case 22:case 23:rp()}c=c.return}if(ci=s,Zt=s=Cn(s.current,null),bi=Zi=o,ii=0,ua=null,Xd=_u=ls=0,qi=ca=null,os!==null){for(o=0;o<os.length;o++)if(c=os[o],d=c.interleaved,d!==null){c.interleaved=null;var m=d.next,b=c.pending;if(b!==null){var P=b.next;b.next=m,d.next=P}c.pending=d}os=null}return s}function Z1(s,o){do{var c=Zt;try{if(fd(),su.current=uu,ou){for(var d=zt.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}ou=!1}if(as=0,ui=ti=zt=null,ea=!1,ta=0,Yd.current=null,c===null||c.return===null){ii=1,ua=o,Zt=null;break}e:{var b=s,P=c.return,N=c,Q=o;if(o=bi,N.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var oe=Q,xe=N,He=xe.tag;if(!(xe.mode&1)&&(He===0||He===11||He===15)){var fe=xe.alternate;fe?(xe.updateQueue=fe.updateQueue,xe.memoizedState=fe.memoizedState,xe.lanes=fe.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var At=x1(P);if(At!==null){At.flags&=-257,_1(At,P,N,b,o),At.mode&1&&w1(b,oe,o),o=At,Q=oe;var wt=o.updateQueue;if(wt===null){var Vi=new Set;Vi.add(Q),o.updateQueue=Vi}else wt.add(Q);break e}else{if(!(o&1)){w1(b,oe,o),np();break e}Q=Error(u(426))}}else if(Pt&&N.mode&1){var Kr=x1(P);if(Kr!==null){!(Kr.flags&65536)&&(Kr.flags|=256),_1(Kr,P,N,b,o),dd(ro(Q,N));break e}}b=Q=ro(Q,N),ii!==4&&(ii=2),ca===null?ca=[b]:ca.push(b),b=P;do{switch(b.tag){case 3:b.flags|=65536,o&=-o,b.lanes|=o;var W=y1(b,Q,o);Db(b,W);break e;case 1:N=Q;var D=b.type,X=b.stateNode;if(!(b.flags&128)&&(typeof D.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(xn===null||!xn.has(X)))){b.flags|=65536,o&=-o,b.lanes|=o;var ge=b1(b,N,o);Db(b,ge);break e}}b=b.return}while(b!==null)}ew(c)}catch($e){o=$e,Zt===c&&c!==null&&(Zt=c=c.return);continue}break}while(1)}function K1(){var s=xu.current;return xu.current=uu,s===null?uu:s}function np(){(ii===0||ii===3||ii===2)&&(ii=4),ci===null||!(ls&268435455)&&!(_u&268435455)||En(ci,bi)}function Pu(s,o){var c=Ke;Ke|=2;var d=K1();(ci!==s||bi!==o)&&(Zr=null,us(s,o));do try{uO();break}catch(m){Z1(s,m)}while(1);if(fd(),Ke=c,xu.current=d,Zt!==null)throw Error(u(261));return ci=null,bi=0,ii}function uO(){for(;Zt!==null;)J1(Zt)}function cO(){for(;Zt!==null&&!ML();)J1(Zt)}function J1(s){var o=rw(s.alternate,s,Zi);s.memoizedProps=s.pendingProps,o===null?ew(s):Zt=o,Yd.current=null}function ew(s){var o=s;do{var c=o.alternate;if(s=o.return,(o.flags&32768)===0){if(c=iO(c,o,Zi),c!==null){Zt=c;return}}else{if(c=rO(c,o),c!==null){c.flags&=32767,Zt=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ii=6,Zt=null;return}}if(o=o.sibling,o!==null){Zt=o;return}Zt=o=s}while(o!==null);ii===0&&(ii=5)}function cs(s,o,c){var d=ut,m=Gt.transition;try{Gt.transition=null,ut=1,hO(s,o,c,d)}finally{Gt.transition=m,ut=d}return null}function hO(s,o,c,d){do hs();while(_n!==null);if(Ke&6)throw Error(u(327));c=s.finishedWork;var m=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(u(177));s.callbackNode=null,s.callbackPriority=0;var b=c.lanes|c.childLanes;if(FL(s,b),s===ci&&(Zt=ci=null,bi=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||Eu||(Eu=!0,nw(od,function(){return hs(),null})),b=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||b){b=Gt.transition,Gt.transition=null;var P=ut;ut=1;var N=Ke;Ke|=4,Yd.current=null,sO(s,c),U1(c,s),Ge(s.containerInfo),s.current=c,oO(c),zL(),Ke=N,ut=P,Gt.transition=b}else s.current=c;if(Eu&&(Eu=!1,_n=s,Cu=m),b=s.pendingLanes,b===0&&(xn=null),BL(c.stateNode),Qi(s,li()),o!==null)for(d=s.onRecoverableError,c=0;c<o.length;c++)m=o[c],d(m.value,{componentStack:m.stack,digest:m.digest});if(Su)throw Su=!1,s=Jd,Jd=null,s;return Cu&1&&s.tag!==0&&hs(),b=s.pendingLanes,b&1?s===ep?ha++:(ha=0,ep=s):ha=0,Ir(),null}function hs(){if(_n!==null){var s=Ib(Cu),o=Gt.transition,c=ut;try{if(Gt.transition=null,ut=16>s?16:s,_n===null)var d=!1;else{if(s=_n,_n=null,Cu=0,(Ke&6)!==0)throw Error(u(331));var m=Ke;for(Ke|=4,be=s.current;be!==null;){var b=be,P=b.child;if(be.flags&16){var N=b.deletions;if(N!==null){for(var Q=0;Q<N.length;Q++){var oe=N[Q];for(be=oe;be!==null;){var xe=be;switch(xe.tag){case 0:case 11:case 15:aa(8,xe,b)}var He=xe.child;if(He!==null)He.return=xe,be=He;else for(;be!==null;){xe=be;var fe=xe.sibling,At=xe.return;if(N1(xe),xe===oe){be=null;break}if(fe!==null){fe.return=At,be=fe;break}be=At}}}var wt=b.alternate;if(wt!==null){var Vi=wt.child;if(Vi!==null){wt.child=null;do{var Kr=Vi.sibling;Vi.sibling=null,Vi=Kr}while(Vi!==null)}}be=b}}if(b.subtreeFlags&2064&&P!==null)P.return=b,be=P;else e:for(;be!==null;){if(b=be,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:aa(9,b,b.return)}var W=b.sibling;if(W!==null){W.return=b.return,be=W;break e}be=b.return}}var D=s.current;for(be=D;be!==null;){P=be;var X=P.child;if(P.subtreeFlags&2064&&X!==null)X.return=P,be=X;else e:for(P=D;be!==null;){if(N=be,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:gu(9,N)}}catch($e){Tt(N,N.return,$e)}if(N===P){be=null;break e}var ge=N.sibling;if(ge!==null){ge.return=N.return,be=ge;break e}be=N.return}}if(Ke=m,Ir(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Ql,s)}catch{}d=!0}return d}finally{ut=c,Gt.transition=o}}return!1}function tw(s,o,c){o=ro(c,o),o=y1(s,o,1),s=wn(s,o,1),o=Ri(),s!==null&&(Yo(s,1,o),Qi(s,o))}function Tt(s,o,c){if(s.tag===3)tw(s,s,c);else for(;o!==null;){if(o.tag===3){tw(o,s,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(xn===null||!xn.has(d))){s=ro(c,s),s=b1(o,s,1),o=wn(o,s,1),s=Ri(),o!==null&&(Yo(o,1,s),Qi(o,s));break}}o=o.return}}function dO(s,o,c){var d=s.pingCache;d!==null&&d.delete(o),o=Ri(),s.pingedLanes|=s.suspendedLanes&c,ci===s&&(bi&c)===c&&(ii===4||ii===3&&(bi&130023424)===bi&&500>li()-Zd?us(s,0):Xd|=c),Qi(s,o)}function iw(s,o){o===0&&(s.mode&1?(o=Hl,Hl<<=1,!(Hl&130023424)&&(Hl=4194304)):o=1);var c=Ri();s=Rr(s,o),s!==null&&(Yo(s,o,c),Qi(s,c))}function pO(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),iw(s,c)}function fO(s,o){var c=0;switch(s.tag){case 13:var d=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(u(314))}d!==null&&d.delete(o),iw(s,c)}var rw;rw=function(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps||Ui.current)Hi=!0;else{if(!(s.lanes&c)&&!(o.flags&128))return Hi=!1,tO(s,o,c);Hi=(s.flags&131072)!==0}else Hi=!1,Pt&&o.flags&1048576&&Ob(o,Yl,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;hu(s,o),s=o.pendingProps;var m=Gs(o,Ai.current);Js(o,c),m=Ad(null,o,d,s,m,c);var b=Pd();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Wi(d)?(b=!0,Ul(o)):b=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,yd(o),m.updater=iu,o.stateNode=m,m._reactInternals=o,wd(o,d,s,c),o=Md(null,o,d,!0,b,c)):(o.tag=0,Pt&&b&&ld(o),zi(null,o,m,c),o=o.child),o;case 16:d=o.elementType;e:{switch(hu(s,o),s=o.pendingProps,m=d._init,d=m(d._payload),o.type=d,m=o.tag=mO(d),s=fr(d,s),m){case 0:o=Fd(null,o,d,s,c);break e;case 1:o=P1(null,o,d,s,c);break e;case 11:o=S1(null,o,d,s,c);break e;case 14:o=E1(null,o,d,fr(d.type,s),c);break e}throw Error(u(306,d,""))}return o;case 0:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:fr(d,m),Fd(s,o,d,m,c);case 1:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:fr(d,m),P1(s,o,d,m,c);case 3:e:{if(T1(o),s===null)throw Error(u(387));d=o.pendingProps,b=o.memoizedState,m=b.element,Bb(s,o),tu(o,d,null,c);var P=o.memoizedState;if(d=P.element,mt&&b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){m=ro(Error(u(423)),o),o=I1(s,o,d,c,m);break e}else if(d!==m){m=ro(Error(u(424)),o),o=I1(s,o,d,c,m);break e}else for(mt&&(ir=mL(o.stateNode.containerInfo),Xi=o,Pt=!0,pr=null,Xo=!1),c=Yb(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Zs(),d===m){o=Xr(s,o,c);break e}zi(s,o,d,c)}o=o.child}return o;case 5:return Xb(o),s===null&&hd(o),d=o.type,m=o.pendingProps,b=s!==null?s.memoizedProps:null,P=m.children,Qt(d,m)?P=null:b!==null&&Qt(d,b)&&(o.flags|=32),A1(s,o),zi(s,o,P,c),o.child;case 6:return s===null&&hd(o),null;case 13:return R1(s,o,c);case 4:return xd(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=eo(o,null,d,c):zi(s,o,d,c),o.child;case 11:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:fr(d,m),S1(s,o,d,m,c);case 7:return zi(s,o,o.pendingProps,c),o.child;case 8:return zi(s,o,o.pendingProps.children,c),o.child;case 12:return zi(s,o,o.pendingProps.children,c),o.child;case 10:e:{if(d=o.type._context,m=o.pendingProps,b=o.memoizedProps,P=m.value,Nb(o,d,P),b!==null)if(dr(b.value,P)){if(b.children===m.children&&!Ui.current){o=Xr(s,o,c);break e}}else for(b=o.child,b!==null&&(b.return=o);b!==null;){var N=b.dependencies;if(N!==null){P=b.child;for(var Q=N.firstContext;Q!==null;){if(Q.context===d){if(b.tag===1){Q=Yr(-1,c&-c),Q.tag=2;var oe=b.updateQueue;if(oe!==null){oe=oe.shared;var xe=oe.pending;xe===null?Q.next=Q:(Q.next=xe.next,xe.next=Q),oe.pending=Q}}b.lanes|=c,Q=b.alternate,Q!==null&&(Q.lanes|=c),md(b.return,c,o),N.lanes|=c;break}Q=Q.next}}else if(b.tag===10)P=b.type===o.type?null:b.child;else if(b.tag===18){if(P=b.return,P===null)throw Error(u(341));P.lanes|=c,N=P.alternate,N!==null&&(N.lanes|=c),md(P,c,o),P=b.sibling}else P=b.child;if(P!==null)P.return=b;else for(P=b;P!==null;){if(P===o){P=null;break}if(b=P.sibling,b!==null){b.return=P.return,P=b;break}P=P.return}b=P}zi(s,o,m.children,c),o=o.child}return o;case 9:return m=o.type,d=o.pendingProps.children,Js(o,c),m=rr(m),d=d(m),o.flags|=1,zi(s,o,d,c),o.child;case 14:return d=o.type,m=fr(d,o.pendingProps),m=fr(d.type,m),E1(s,o,d,m,c);case 15:return C1(s,o,o.type,o.pendingProps,c);case 17:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:fr(d,m),hu(s,o),o.tag=1,Wi(d)?(s=!0,Ul(o)):s=!1,Js(o,c),qb(o,d,m),wd(o,d,m,c),Md(null,o,d,!0,s,c);case 19:return O1(s,o,c);case 22:return k1(s,o,c)}throw Error(u(156,o.tag))};function nw(s,o){return nd(s,o)}function gO(s,o,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(s,o,c,d){return new gO(s,o,c,d)}function sp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function mO(s){if(typeof s=="function")return sp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===L)return 11;if(s===F)return 14}return 2}function Cn(s,o){var c=s.alternate;return c===null?(c=ar(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function Tu(s,o,c,d,m,b){var P=2;if(d=s,typeof s=="function")sp(s)&&(P=1);else if(typeof s=="string")P=5;else e:switch(s){case y:return ds(c.children,m,b,o);case S:P=8,m|=8;break;case C:return s=ar(12,c,o,m|2),s.elementType=C,s.lanes=b,s;case O:return s=ar(13,c,o,m),s.elementType=O,s.lanes=b,s;case E:return s=ar(19,c,o,m),s.elementType=E,s.lanes=b,s;case U:return Iu(c,m,b,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case _:P=10;break e;case T:P=9;break e;case L:P=11;break e;case F:P=14;break e;case z:P=16,d=null;break e}throw Error(u(130,s==null?s:typeof s,""))}return o=ar(P,c,o,m),o.elementType=s,o.type=d,o.lanes=b,o}function ds(s,o,c,d){return s=ar(7,s,d,o),s.lanes=c,s}function Iu(s,o,c,d){return s=ar(22,s,d,o),s.elementType=U,s.lanes=c,s.stateNode={isHidden:!1},s}function op(s,o,c){return s=ar(6,s,null,o),s.lanes=c,s}function ap(s,o,c){return o=ar(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function vO(s,o,c,d,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ai,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=id(0),this.expirationTimes=id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=id(0),this.identifierPrefix=d,this.onRecoverableError=m,mt&&(this.mutableSourceEagerHydrationData=null)}function sw(s,o,c,d,m,b,P,N,Q){return s=new vO(s,o,c,N,Q),o===1?(o=1,b===!0&&(o|=8)):o=0,b=ar(3,null,null,o),s.current=b,b.stateNode=s,b.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},yd(b),s}function ow(s){if(!s)return yn;s=s._reactInternals;e:{if(H(s)!==s||s.tag!==1)throw Error(u(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Wi(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(u(171))}if(s.tag===1){var c=s.type;if(Wi(c))return Ab(s,c,o)}return o}function aw(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(u(188)):(s=Object.keys(s).join(","),Error(u(268,s)));return s=he(o),s===null?null:s.stateNode}function lw(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function Ru(s,o){lw(s,o),(s=s.alternate)&&lw(s,o)}function yO(s){return s=he(s),s===null?null:s.stateNode}function bO(){return null}return r.attemptContinuousHydration=function(s){if(s.tag===13){var o=Rr(s,134217728);if(o!==null){var c=Ri();or(o,s,134217728,c)}Ru(s,134217728)}},r.attemptDiscreteHydration=function(s){if(s.tag===13){var o=Rr(s,1);if(o!==null){var c=Ri();or(o,s,1,c)}Ru(s,1)}},r.attemptHydrationAtCurrentPriority=function(s){if(s.tag===13){var o=Sn(s),c=Rr(s,o);if(c!==null){var d=Ri();or(c,s,o,d)}Ru(s,o)}},r.attemptSynchronousHydration=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var c=Go(o.pendingLanes);c!==0&&(rd(o,c|1),Qi(o,li()),!(Ke&6)&&(oo(),Ir()))}break;case 13:X1(function(){var d=Rr(s,1);if(d!==null){var m=Ri();or(d,s,1,m)}}),Ru(s,1)}},r.batchedUpdates=function(s,o){var c=Ke;Ke|=1;try{return s(o)}finally{Ke=c,Ke===0&&(oo(),Vl&&Ir())}},r.createComponentSelector=function(s){return{$$typeof:mu,value:s}},r.createContainer=function(s,o,c,d,m,b,P){return sw(s,o,!1,null,c,d,m,b,P)},r.createHasPseudoClassSelector=function(s){return{$$typeof:vu,value:s}},r.createHydrationContainer=function(s,o,c,d,m,b,P,N,Q){return s=sw(c,d,!0,s,m,b,P,N,Q),s.context=ow(null),c=s.current,d=Ri(),m=Sn(c),b=Yr(d,m),b.callback=o??null,wn(c,b,m),s.current.lanes=m,Yo(s,m,d),Qi(s,d),s},r.createPortal=function(s,o,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:d==null?null:""+d,children:s,containerInfo:o,implementation:c}},r.createRoleSelector=function(s){return{$$typeof:yu,value:s}},r.createTestNameSelector=function(s){return{$$typeof:bu,value:s}},r.createTextSelector=function(s){return{$$typeof:wu,value:s}},r.deferredUpdates=function(s){var o=ut,c=Gt.transition;try{return Gt.transition=null,ut=16,s()}finally{ut=o,Gt.transition=c}},r.discreteUpdates=function(s,o,c,d,m){var b=ut,P=Gt.transition;try{return Gt.transition=null,ut=1,s(o,c,d,m)}finally{ut=b,Gt.transition=P,Ke===0&&oo()}},r.findAllNodes=Gd,r.findBoundingRects=function(s,o){if(!tt)throw Error(u(363));o=Gd(s,o),s=[];for(var c=0;c<o.length;c++)s.push(es(o[c]));for(o=s.length-1;0<o;o--){c=s[o];for(var d=c.x,m=d+c.width,b=c.y,P=b+c.height,N=o-1;0<=N;N--)if(o!==N){var Q=s[N],oe=Q.x,xe=oe+Q.width,He=Q.y,fe=He+Q.height;if(d>=oe&&b>=He&&m<=xe&&P<=fe){s.splice(o,1);break}else if(d!==oe||c.width!==Q.width||fe<b||He>P){if(!(b!==He||c.height!==Q.height||xe<d||oe>m)){oe>d&&(Q.width+=oe-d,Q.x=d),xe<m&&(Q.width=m-oe),s.splice(o,1);break}}else{He>b&&(Q.height+=He-b,Q.y=b),fe<P&&(Q.height=P-He),s.splice(o,1);break}}}return s},r.findHostInstance=aw,r.findHostInstanceWithNoPortals=function(s){return s=ce(s),s=s!==null?me(s):null,s===null?null:s.stateNode},r.findHostInstanceWithWarning=function(s){return aw(s)},r.flushControlled=function(s){var o=Ke;Ke|=1;var c=Gt.transition,d=ut;try{Gt.transition=null,ut=1,s()}finally{ut=d,Gt.transition=c,Ke=o,Ke===0&&(oo(),Ir())}},r.flushPassiveEffects=hs,r.flushSync=X1,r.focusWithin=function(s,o){if(!tt)throw Error(u(363));for(s=qd(s),o=V1(s,o),o=Array.from(o),s=0;s<o.length;){var c=o[s++];if(!is(c)){if(c.tag===5&&Nl(c.stateNode))return!0;for(c=c.child;c!==null;)o.push(c),c=c.sibling}}return!1},r.getCurrentUpdatePriority=function(){return ut},r.getFindAllNodesFailureDescription=function(s,o){if(!tt)throw Error(u(363));var c=0,d=[];s=[qd(s),0];for(var m=0;m<s.length;){var b=s[m++],P=s[m++],N=o[P];if((b.tag!==5||!is(b))&&(Qd(b,N)&&(d.push(Vd(N)),P++,P>c&&(c=P)),P<o.length))for(b=b.child;b!==null;)s.push(b,P),b=b.sibling}if(c<o.length){for(s=[];c<o.length;c++)s.push(Vd(o[c]));return`findAllNodes was able to match part of the selector:
  `+(d.join(" > ")+`

No matching component was found for:
  `)+s.join(" > ")}return null},r.getPublicRootInstance=function(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return Re(s.child.stateNode);default:return s.child.stateNode}},r.injectIntoDevTools=function(s){if(s={bundleType:s.bundleType,version:s.version,rendererPackageName:s.rendererPackageName,rendererConfig:s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:yO,findFiberByHostInstance:s.findFiberByHostInstance||bO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")s=!1;else{var o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(o.isDisabled||!o.supportsFiber)s=!0;else{try{Ql=o.inject(s),Tr=o}catch{}s=!!o.checkDCE}}return s},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(s,o,c,d){if(!tt)throw Error(u(363));s=Gd(s,o);var m=Vh(s,c,d).disconnect;return{disconnect:function(){m()}}},r.registerMutableSourceForHydration=function(s,o){var c=o._getVersion;c=c(o._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[o,c]:s.mutableSourceEagerHydrationData.push(o,c)},r.runWithPriority=function(s,o){var c=ut;try{return ut=s,o()}finally{ut=c}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(s,o,c,d){var m=o.current,b=Ri(),P=Sn(m);return c=ow(c),o.context===null?o.context=c:o.pendingContext=c,o=Yr(b,P),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=wn(m,o,P),s!==null&&(or(s,m,P,b),eu(s,m,P)),P},r}}),Kw=Je((e,t)=>{t.exports=Zw()}),ef=Je(e=>{var t=(Qe(),Yt(_s));e.createRoot=t.createRoot,e.hydrateRoot=t.hydrateRoot}),pc=Je((e,t)=>{(function(i,r){r(typeof e=="object"&&typeof t<"u"?e:(i=i||self).TypesafeActions={})})(e,function(i){function r(E){return E==null}function n(E){throw new Error("Argument "+E+" is empty.")}function a(E){return typeof E=="function"&&"getType"in E}function l(E){throw new Error("Argument "+E+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function u(E,F){if(E==null)throw new Error("Argument contains array with empty element at index "+F);if(E.getType==null)throw new Error("Argument contains array with invalid element at index "+F+', it should be an action-creator instance from "typesafe-actions"')}function h(E){return typeof E=="string"||typeof E=="symbol"}function g(E){return!h(E)}function p(E){throw new Error("Argument "+E+" is invalid, it should be an action type of type: string | symbol")}function y(E,F){if(E==null)throw new Error("Argument contains array with empty element at index "+F);if(typeof E!="string"&&typeof E!="symbol")throw new Error("Argument contains array with invalid element at index "+F+", it should be of type: string | symbol")}function S(E,F,z,U){return r(E)&&n(1),g(E)&&l(1),{type:E,payload:F,meta:z,error:U}}function C(E,F){return r(E)&&n(1),g(E)&&p(1),Object.assign(function(){var z=F!=null?F.apply(void 0,arguments):void 0;return Object.assign({type:E},z)},{getType:function(){return E},toString:function(){return E}})}function _(E,F,z){return r(E)&&n(1),g(E)&&p(1),function(){return C(E,function(){var U=arguments.length<=0?void 0:arguments[0],q=arguments.length<=1?void 0:arguments[1];return F==null&&z==null||(U=F!=null?F.apply(void 0,arguments):void 0,q=z!=null?z.apply(void 0,arguments):void 0),Object.assign({},U!==void 0&&{payload:U},{},q!==void 0&&{meta:q})})}}function T(E){return r(E)&&n(1),a(E)||l(1),E.getType()}function L(E,F){r(E)&&n(1),g(E)&&p(1);var z=F!=null?F(E):function(){return{type:E}};return Object.assign(z,{getType:function(){return E},toString:function(){return E}})}var O={createAction:function(E,F){var z=F==null?function(){return S(E)}:F(S.bind(null,E));return Object.assign(z,{getType:function(){return E},toString:function(){return E}})},createCustomAction:L,createStandardAction:function(E){return r(E)&&n(1),g(E)&&p(1),Object.assign(function(){return L(E,function(F){return function(z,U){return{type:F,payload:z,meta:U}}})},{map:function(F){return L(E,function(z){return function(U,q){return Object.assign(F(U,q),{type:z})}})}})}};i.action=S,i.createAction=_,i.createAsyncAction=function(E,F,z,U){return function(){var q=[E,F,z,U].map(function(G,V){return Array.isArray(G)?_(G[0],G[1],G[2])():typeof G=="string"||typeof G=="symbol"?_(G)():void(V<3&&function(ae){throw new Error("Argument "+ae+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(V))});return{request:q[0],success:q[1],failure:q[2],cancel:q[3]}}},i.createCustomAction=C,i.createReducer=function E(F,z){z===void 0&&(z={});var U=Object.assign({},z),q=function(G,V){var ae=Array.isArray(G)?G:[G],H={};return ae.map(function(se,ce){return a(se)?T(se):h(se)?se:function(he){throw new Error("Argument "+he+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(ce+1)}).forEach(function(se){return H[se]=V}),E(F,Object.assign({},U,{},H))};return Object.assign(function(G,V){if(G===void 0&&(G=F),U.hasOwnProperty(V.type)){var ae=U[V.type];if(typeof ae!="function")throw Error('Reducer under "'+V.type+'" key is not a valid reducer');return ae(G,V)}return G},{handlers:Object.assign({},U),handleAction:q,handleType:q})},i.deprecated=O,i.getType=T,i.isActionOf=function(E,F){r(E)&&n(1);var z=Array.isArray(E)?E:[E];z.forEach(u);var U=function(q){return z.some(function(G){return q.type===G.getType()})};return F===void 0?U:U(F)},i.isOfType=function(E,F){r(E)&&n(1);var z=Array.isArray(E)?E:[E];z.forEach(y);var U=function(q){return z.includes(q.type)};return F===void 0?U:U(F)}})}),tf=Je((e,t)=>{(function(i,r){typeof e=="object"&&typeof t<"u"?r(e,(Qe(),Yt(_s))):(i=typeof globalThis<"u"?globalThis:i||self,r(i.ReactErrorBoundary={},i.React))})(e,function(i,r){function n(C){if(C&&C.__esModule)return C;var _=Object.create(null);return C&&Object.keys(C).forEach(function(T){if(T!=="default"){var L=Object.getOwnPropertyDescriptor(C,T);Object.defineProperty(_,T,L.get?L:{enumerable:!0,get:function(){return C[T]}})}}),_.default=C,Object.freeze(_)}var a=n(r);function l(C,_){return l=Object.setPrototypeOf||function(T,L){return T.__proto__=L,T},l(C,_)}function u(C,_){C.prototype=Object.create(_.prototype),C.prototype.constructor=C,l(C,_)}var h=function(C,_){return C===void 0&&(C=[]),_===void 0&&(_=[]),C.length!==_.length||C.some(function(T,L){return!Object.is(T,_[L])})},g={error:null},p=function(C){u(_,C);function _(){for(var L,O=arguments.length,E=new Array(O),F=0;F<O;F++)E[F]=arguments[F];return L=C.call.apply(C,[this].concat(E))||this,L.state=g,L.resetErrorBoundary=function(){for(var z,U=arguments.length,q=new Array(U),G=0;G<U;G++)q[G]=arguments[G];L.props.onReset==null||(z=L.props).onReset.apply(z,q),L.reset()},L}_.getDerivedStateFromError=function(L){return{error:L}};var T=_.prototype;return T.reset=function(){this.setState(g)},T.componentDidCatch=function(L,O){var E,F;(E=(F=this.props).onError)==null||E.call(F,L,O)},T.componentDidUpdate=function(L,O){var E=this.state.error,F=this.props.resetKeys;if(E!==null&&O.error!==null&&h(L.resetKeys,F)){var z,U;(z=(U=this.props).onResetKeysChange)==null||z.call(U,L.resetKeys,F),this.reset()}},T.render=function(){var L=this.state.error,O=this.props,E=O.fallbackRender,F=O.FallbackComponent,z=O.fallback;if(L!==null){var U={error:L,resetErrorBoundary:this.resetErrorBoundary};if(a.isValidElement(z))return z;if(typeof E=="function")return E(U);if(F)return a.createElement(F,U);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},_}(a.Component);function y(C,_){var T=function(O){return a.createElement(p,_,a.createElement(C,O))},L=C.displayName||C.name||"Unknown";return T.displayName="withErrorBoundary("+L+")",T}function S(C){var _=a.useState(null),T=_[0],L=_[1];if(C!=null)throw C;if(T!=null)throw T;return L}i.ErrorBoundary=p,i.useErrorHandler=S,i.withErrorBoundary=y,Object.defineProperty(i,"__esModule",{value:!0})})});Xe();function In(e,t,i,r){function n(){let l=Reflect.construct(HTMLElement,[],n);return l._vdomComponent=e,l._shadowEnabled=r&&r.shadow,l._root=l._shadowEnabled?l.attachShadow({mode:"open"}):l,r.onConstruct&&r.onConstruct(l),l.ready=!1,l.whenReady=u=>{l.ready?u():l.addEventListener("ready",u)},l}n.prototype=Object.create(HTMLElement.prototype),n.prototype.constructor=n,n.prototype.connectedCallback=ex,n.prototype.attributeChangedCallback=tx,n.prototype.disconnectedCallback=ix,i=i||e.observedAttributes||Object.keys(e.propTypes||{}),n.observedAttributes=i,i.forEach(l=>{Object.defineProperty(n.prototype,l,{get(){return this._vdom?this._vdom.props[l]:(this._props||(this._props={}),this._props[l])},set(u){this._vdom?(this._props[l]=u,this.attributeChangedCallback(l,null,u)):(this._props||(this._props={}),this._props[l]=u,this._props[fc(l)]=u);let h=typeof u;(u==null||h==="string"||h==="boolean"||h==="number")&&this.setAttribute(l,u)}})}),r.beforeCreate&&r.beforeCreate(n);let a=t||e.tagName||e.displayName||e.name;if(!customElements.get(a))return customElements.define(t||e.tagName||e.displayName||e.name,n)}function Jw(e){this.getChildContext=()=>e.context;let t=e,{context:i,children:r}=t,n=le(t,["context","children"]);return Uu(r,n)}function ex(){let e=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(e);let t=e.detail.context;this._vdom=$(Jw,B(A({},this._props),{context:t}),nf(this,this._vdomComponent,this._shadowEnabled)),(this.hasAttribute("hydrate")?Du:wr)(this._vdom,this._root),this.ready||(this.ready=!0,this.dispatchEvent(new CustomEvent("ready",{detail:{},bubbles:!1,cancelable:!1})))}function fc(e){return e.replace(/-(\w)/g,(t,i)=>i?i.toUpperCase():"")}function tx(e,t,i){if(!this._vdom)return;i=i??void 0;let r={};r[e]=i,r[fc(e)]=i,this._vdom=Uu(this._vdom,r),wr(this._vdom,this._root)}function ix(){wr(this._vdom=null,this._root)}function rf(e,t){let i=e,{shadow:r,addContextListener:n,removeContextListener:a}=i,l=le(i,["shadow","addContextListener","removeContextListener"]),u=h=>{h?(this.ref=h,this._listener||(this._listener=g=>{g.stopPropagation(),g.detail.context=t},n(this._listener,this.ref))):a(this._listener,this.ref)};return!r&&!this._listener&&(this._listener=h=>{h.stopPropagation(),h.detail.context=t},n(this._listener)),$(r?"slot":et,B(A({},l),{ref:u}))}function nf(e,t,i){if(e.nodeType===3)return e.data;if(e.nodeType!==1)return null;let r=[],n={},a=0,l=e.attributes,u=e.childNodes;for(a=l.length;a--;)l[a].name!=="slot"&&(n[l[a].name]=l[a].value,n[fc(l[a].name)]=l[a].value);for(a=u.length;a--;){let g=u[a],p=nf(g,null,i),y=g.slot;y?n[y]=$(rf,{name:y,shadow:i,addContextListener(S,C=g){C.addEventListener("_preact",S)},removeContextListener(S,C=g){C.removeEventListener("_preact",S)}},p):r[a]=p}let h=t?$(rf,{shadow:i,addContextListener(g,p=e){p.addEventListener("_preact",g)},removeContextListener(g,p=e){p.removeEventListener("_preact",g)}},r):r;return!i&&t&&(e.innerHTML=""),$(t||e.nodeName.toLowerCase(),n,h)}Qe(),Qe(),Qe(),Qe(),Qe();var rx=Be(Kw(),1),sf,of,Ta=["onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onScroll","onWheel","onClick","onDragStart","onDragEnd","onDragEnter","onDragExit","onDrag","onDragOver"];function nx(){return Ta.reduce((e,t)=>(e[t]=[],e),{})}var Cs=Ta.reduce((e,t)=>(e[t.slice(2).toLowerCase()]=t,e[t]=t,e),{}),bo=(e,t,i)=>{let r=e.length,n=i||Ie(r);for(let a=0;a<r;a++)n[a]=a%5===0?e[a+1]<t[3]&&e[a+3]>t[1]&&e[a+2]<t[4]&&e[a+4]>t[2]?1:0:e[a];return n};function Ie(e,t,i){return new Float32Array(e,t,i)}var sx=(e,t,i)=>{let r=e[1]<=t[3]&&e[3]>=t[1]&&e[2]<=t[4]&&e[4]>=t[2],n=i||Ie(5);return r?(n[0]=1,n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.min(e[3],t[3]),n[4]=Math.min(e[4],t[4]),n):(n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n)},ox=e=>e.length/5,Nr=(e,t,i)=>{let r=i||Ie(9);return r[0]=e[0]*t[0]+e[1]*t[3]+e[2]*t[6],r[1]=e[0]*t[1]+e[1]*t[4]+e[2]*t[7],r[2]=e[0]*t[2]+e[1]*t[5]+e[2]*t[8],r[3]=e[3]*t[0]+e[4]*t[3]+e[5]*t[6],r[4]=e[3]*t[1]+e[4]*t[4]+e[5]*t[7],r[5]=e[3]*t[2]+e[4]*t[5]+e[5]*t[8],r[6]=e[6]*t[0]+e[7]*t[3]+e[8]*t[6],r[7]=e[6]*t[1]+e[7]*t[4]+e[8]*t[7],r[8]=e[6]*t[2]+e[7]*t[5]+e[8]*t[8],r},ot=class{constructor(e){this.index=0,this.length=e,this.points=Ie(this.length)}static grid(e=1,t=1){return new ot(5*e*t)}static point(e,t){let i=Ie(5);return i[0]=1,i[1]=e,i[2]=t,i[3]=e,i[4]=t,i}static positionPair(e){let t=Ie(5);return t[0]=1,t[1]=e.x1,t[2]=e.y1,t[3]=e.x2,t[4]=e.y2,t}static projection(e){return ot.singleBox(e.width,e.height,e.x,e.y)}static singleBox(e,t,i=0,r=0){let n=Ie(5);return n[0]=1,n[1]=i,n[2]=r,n[3]=e+i,n[4]=t+r,n}row(e){return e(this)}addPoints(e,t,i,r){return this.points[this.index]=1,this.points[1+this.index]=e,this.points[2+this.index]=t,this.points[3+this.index]=i,this.points[4+this.index]=r,this.index+=5,this}addBox(e,t,i,r){return this.addPoints(e,t,e+i,t+r),this}build(){return this.points}},xr=(e,t)=>{let i=e.length;for(let r=0;r<i;r++)e[r]=r%5===0?t[6]*e[r+1]+t[7]*e[r+2]+t[8]*e[r]:r%5%2===1?t[0]*e[r]+t[1]*e[r+1]+t[2]:t[3]*e[r-1]+t[4]*e[r]+t[5];return e},en=e=>{let t=Ie(9);return t[0]=e,t[4]=e,t[8]=1,t},Oi=(e,t)=>{let i=Ie(9);return i[0]=1,i[2]=e,i[4]=1,i[5]=t,i[8]=1,i},wo=(e,t,i)=>Nr(Oi((1-e)*t,(1-e)*i),en(e)),jr=(e,t,i)=>{let r=e.length,n=i&&i.length>=r?i.slice(0,r):Ie(r);for(let a=0;a<r;a++)n[a]=a%5===0?t[6]*e[a+1]+t[7]*e[a+2]+t[8]*e[a]:a%5%2===1?t[0]*e[a]+t[1]*e[a+1]+t[2]:t[3]*e[a-1]+t[4]*e[a]+t[5];return n},Ia=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,i)=>(i&=63,i<36?t+=i.toString(36):i<62?t+=(i-26).toString(36).toUpperCase():i>62?t+="-":t+="_",t),""),_r=class{constructor(){this.__revision=0,this.__owner={value:void 0},this.__state={},this.scale=1,this.layers=[],this.time=[],this.addEventListener=(e,t,i)=>{let r=Cs[e];if(!this.eventHandlers[r])throw new Error(`Unknown event ${r}`);this.eventHandlers[r].indexOf(t)===-1&&this.eventHandlers[r].push(t)},this.removeEventListener=(e,t)=>{let i=Cs[e];if(!this.eventHandlers[i]){console.warn(`Unknown event ${i}`);return}this.eventHandlers[i].indexOf(t)!==-1&&(this.eventHandlers[i]=this.eventHandlers[i].filter(r=>r!==t))},this.id=this.__id=Ia(),this.eventHandlers=nx()}get crop(){return this._crop}set crop(e){this._crop=e}getObjectsAt(e){return[]}getAllPointsAt(e,t,i){return[]}getScheduledUpdates(e,t){return[]}dispatchEvent(e,t){let i=this.eventHandlers[e],r=i?i.length:0,n=!1;if(r)for(let a=0;a<r;a++)try{i[a](t),n=!0}catch(l){console.error(e,l)}return n}get x(){return this.points[1]}get y(){return this.points[2]}get width(){return this.points[3]-this.points[1]}get height(){return this.points[4]-this.points[2]}translate(e,t){xr(this.points,Oi(e,t))}atScale(e){xr(this.points,wo(e,this.x,this.y)),this.scale*=e}transform(e){xr(this.points,e)}applyProps(e){this.__revision++}appendChild(e){}removeChild(e){}insertBefore(e,t){}hideInstance(){}},cr=class extends _r{constructor(e){if(super(),this.type="spacial-content",this.style={opacity:1},!e)this.id="",this.uri="",this.display={x:0,y:0,scale:1,width:0,height:0,points:Ie(5)},this.points=Ie(5);else{let t=e.scale||1;this.id=e.id||e.uri,this.uri=e.uri,this.points=ot.singleBox(e.width,e.height,e.x,e.y),this.display={x:0,y:0,scale:t,width:e.width/t,height:e.height/t,points:ot.singleBox(e.width/t,e.height/t),rotation:e==null?void 0:e.rotation}}}applyProps(e){let t=e.display?e.display.width:e.target.width,i=e.target.width/t;if(this.id=e.id||e.uri,this.uri=e.uri,this.points.set(ot.singleBox(e.target.width,e.target.height,e.target.x,e.target.y)),e.style&&typeof e.style.opacity<"u"&&(this.style.opacity=e.style.opacity),e.crop){this.cropData=e.crop;let r=ot.singleBox(e.crop.width,e.crop.height,e.crop.x,e.crop.y);xr(r,Oi(-e.crop.x,-e.crop.y)),this.crop?this.crop.set(r):this.crop=Ie(r)}e.display?(this.display.scale=i,this.display.width=e.display.width,this.display.height=e.display.height,this.display.rotation=e.display.rotation,this.display.points=ot.singleBox(e.display.width,e.display.height)):(this.display.scale=i,this.display.width=e.target.width/i,this.display.height=e.target.height/i,this.display.points=ot.singleBox(e.target.width/i,e.target.height/i))}getAllPointsAt(e,t,i){return[[this,this.crop||this.points,t]]}static fromSvg(e,t,i,r){return cr.fromImage("data:image/svg+xml;base64,"+btoa(e),t,i,r)}static fromImage(e,t,i,r){let n=new cr;return n.applyProps({uri:e,id:r,display:i,target:t}),n}getImageUrl(){return this.uri}},Ra=class extends _r{constructor(e){if(super(),this.type="spacial-content",this.getTexture=()=>({source:void 0,hash:-1}),!e)this.id="",this.uri="",this.display={x:0,y:0,scale:1,width:0,height:0,points:Ie(5)},this.points=Ie(5);else{let t=e.scale||1;this.id=e.id||e.uri,this.uri=e.uri,this.points=ot.singleBox(e.width,e.height),this.display={x:0,y:0,scale:t,width:e.width/t,height:e.height/t,points:t!==1?ot.singleBox(e.width/t,e.height/t):this.points}}}applyProps(e){let t=e.display?e.display.width:e.target.width,i=e.target.width/t;this.id=e.id,this.points.set(ot.singleBox(e.target.width,e.target.height)),this.display.scale=i,this.display.width=e.target.width/i,this.display.height=e.target.height/i,this.getTexture=e.getTexture,this.display.points=i!==1?ot.singleBox(e.target.width/i,e.target.height/i):this.points}getAllPointsAt(e,t,i){return[[this,this.points,t]]}};function ax(e,t,i=1){let r=t.length;if(r===0)throw new Error("No resources passed in.");let n=0;for(let a=0;a<r&&!(!t[a]||!t[a].display);a++)n=Math.abs(t[a].display.scale-e)*i<Math.abs(t[n].display.scale-e)?a:n;return n}function af(e,t){return Math.abs(e-t)}function La(e,t){let i=af(e.x,t.x),r=af(e.y,t.y);return Math.sqrt(Math.pow(i,2)+Math.pow(r,2))}function lx(e){let t=e.length;return e.indexOf("/info.json")===t-10?e.slice(0,-10):e}function lf(...e){return t=>e.forEach(i=>function(r,n){typeof r=="function"?r(n):r!=null&&(r.current=n)}(i,t))}function Oa(...e){return De(lf(...e),e)}function _i(){return _i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},_i.apply(this,arguments)}var uf=pi((e,t)=>{let i=e,{children:r}=i,n=le(i,["children"]);return Jr.toArray(r).some(hf)?$(et,null,Jr.map(r,a=>hf(a)?$(gc,_i({},n,{ref:t}),a.props.children):a)):$(gc,_i({},n,{ref:t}),r)});uf.displayName="Slot";var gc=pi((e,t)=>{let i=e,{children:r}=i,n=le(i,["children"]);return yo(r)?Aa(r,B(A({},ux(n,r.props)),{ref:lf(t,r.ref)})):Jr.count(r)>1?Jr.only(null):null});gc.displayName="SlotClone";var cf=({children:e})=>$(et,null,e);function hf(e){return yo(e)&&e.type===cf}function ux(e,t){let i=A({},t);for(let r in t){let n=e[r],a=t[r];/^on[A-Z]/.test(r)?i[r]=(...l)=>{a==null||a(...l),n==null||n(...l)}:r==="style"?i[r]=A(A({},n),a):r==="className"&&(i[r]=[n,a].filter(Boolean).join(" "))}return A(A({},e),i)}var $a=globalThis!=null&&globalThis.document?Rt:()=>{},Fa=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};Fa.prototype._test=function(e){var t=this.fn;try{ks(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return ks(this.modifiers.slice(),t,this)(e)}catch{return!1}},Fa.prototype._check=function(e){try{ks(this.modifiers.slice(),this.fn,this)(e)}catch{if(ks(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!ks(this.modifiers.slice(),this.fn,this)(e))throw null},Fa.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){pf(t.modifiers.slice(),t.fn,t)(e).then(function(n){n?i(e):r(null)}).catch(function(n){return r(n)})})};function df(e,t){return t===void 0&&(t="simple"),typeof e=="object"?e[t]:e}function ks(e,t,i){if(e.length){var r=e.shift(),n=ks(e,t,i);return r.perform(n,i)}else return df(t)}function pf(e,t,i){if(e.length){var r=e.shift(),n=pf(e,t,i);return r.performAsync(n,i)}else return function(a){return Promise.resolve(df(t,"async")(a))}}var cx=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},mc=function(e){function t(i,r,n,a){for(var l=[],u=arguments.length-4;u-- >0;)l[u]=arguments[u+4];e.call(this,l),e.captureStackTrace&&e.captureStackTrace(this,t),this.rule=i,this.value=r,this.cause=n,this.target=a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Sr=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Sr.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];return i.chain.push(new Fa(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}},Sr.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new cx(t,e.simple,e.async)),this},Sr.prototype._clone=function(){return new Sr(this.chain.slice(),this.nextRuleModifiers.slice())},Sr.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})},Sr.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new mc(i,e,r))}}),t},Sr.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new mc(t,e,i)}})},Sr.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){ff(e,t.chain.slice(),i,r)})};function ff(e,t,i,r){if(t.length){var n=t.shift();n._testAsync(e).then(function(){ff(e,t,i,r)},function(a){r(new mc(n,e,a))})}else i(e)}var gf=function(e,t){return t&&typeof e=="string"&&e.trim().length===0?!0:e==null};function hx(e,t){return t===void 0&&(t=!1),{simple:function(i){return gf(i,t)||e.check(i)===void 0},async:function(i){return gf(i,t)||e.testAsync(i)}}}function tn(){return typeof Proxy<"u"?mf(new Sr):vc(new Sr)}var xo={};tn.extend=function(e){Object.assign(xo,e)},tn.clearCustomRules=function(){xo={}};function mf(e){return new Proxy(e,{get:function(t,i){if(i in t)return t[i];var r=mf(e._clone());if(i in Ma)return r._applyModifier(Ma[i],i);if(i in xo)return r._applyRule(xo[i],i);if(i in yc)return r._applyRule(yc[i],i)}})}function vc(e){var t=function(n,a){return Object.keys(n).forEach(function(l){a[l]=function(){for(var u=[],h=arguments.length;h--;)u[h]=arguments[h];var g=vc(a._clone()),p=g._applyRule(n[l],l).apply(void 0,u);return p}}),a},i=t(yc,e),r=t(xo,i);return Object.keys(Ma).forEach(function(n){Object.defineProperty(r,n,{get:function(){var a=vc(r._clone());return a._applyModifier(Ma[n],n)}})}),r}var Ma={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then(function(i){return!i}).catch(function(){return!0})}}},some:{simple:function(e){return function(t){return za(t).some(function(i){try{return e(i)}catch{return!1}})}},async:function(e){return function(t){return Promise.all(za(t).map(function(i){try{return e(i).catch(function(){return!1})}catch{return!1}})).then(function(i){return i.some(Boolean)})}}},every:{simple:function(e){return function(t){return t!==!1&&za(t).every(e)}},async:function(e){return function(t){return Promise.all(za(t).map(e)).then(function(i){return i.every(Boolean)})}}},strict:{simple:function(e,t){return function(i){return vf(t)&&i&&typeof i=="object"?Object.keys(t.args[0]).length===Object.keys(i).length&&e(i):e(i)}},async:function(e,t){return function(i){return Promise.resolve(e(i)).then(function(r){return vf(t)&&i&&typeof i=="object"?Object.keys(t.args[0]).length===Object.keys(i).length&&r:r}).catch(function(){return!1})}}}};function vf(e){return e&&e.name==="schema"&&e.args.length>0&&typeof e.args[0]=="object"}function za(e){return typeof e=="string"?e.split(""):e}var yc={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(e){return e===void 0&&(e=!0),function(t){return typeof t=="number"&&(e||isFinite(t))}},integer:function(){return function(e){var t=Number.isInteger||dx;return t(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return As("string")},boolean:function(){return As("boolean")},undefined:function(){return As("undefined")},null:function(){return As("null")},array:function(){return As("array")},object:function(){return As("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return typeof e=="boolean"||e===e.toLowerCase()&&e.trim()!==""}},uppercase:function(){return function(e){return e===e.toUpperCase()&&e.trim()!==""}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return e.length===0}},length:function(e,t){return function(i){return i.length>=e&&i.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(i){return i>=e&&i<=t}},range:function(e,t){return function(i){return i>=e&&i<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2===0}},odd:function(){return function(e){return e%2!==0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return px(e)},passesAnyOf:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(i){return e.some(function(r){return r.test(i)})}},optional:hx};function As(e){return function(t){return Array.isArray(t)&&e==="array"||t===null&&e==="null"||typeof t===e}}function dx(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function px(e){return{simple:function(t){var i=[];if(Object.keys(e).forEach(function(r){var n=e[r];try{n.check((t||{})[r])}catch(a){a.target=r,i.push(a)}}),i.length>0)throw i;return!0},async:function(t){var i=[],r=Object.keys(e).map(function(n){var a=e[n];return a.testAsync((t||{})[n]).catch(function(l){l.target=n,i.push(l)})});return Promise.all(r).then(function(){if(i.length>0)throw i;return!0})}}}var vt="colors",$i="sizes",we="space",fx={gap:we,gridGap:we,columnGap:we,gridColumnGap:we,rowGap:we,gridRowGap:we,inset:we,insetBlock:we,insetBlockEnd:we,insetBlockStart:we,insetInline:we,insetInlineEnd:we,insetInlineStart:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,marginBlock:we,marginBlockEnd:we,marginBlockStart:we,marginInline:we,marginInlineEnd:we,marginInlineStart:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,paddingBlock:we,paddingBlockEnd:we,paddingBlockStart:we,paddingInline:we,paddingInlineEnd:we,paddingInlineStart:we,top:we,right:we,bottom:we,left:we,scrollMargin:we,scrollMarginTop:we,scrollMarginRight:we,scrollMarginBottom:we,scrollMarginLeft:we,scrollMarginX:we,scrollMarginY:we,scrollMarginBlock:we,scrollMarginBlockEnd:we,scrollMarginBlockStart:we,scrollMarginInline:we,scrollMarginInlineEnd:we,scrollMarginInlineStart:we,scrollPadding:we,scrollPaddingTop:we,scrollPaddingRight:we,scrollPaddingBottom:we,scrollPaddingLeft:we,scrollPaddingX:we,scrollPaddingY:we,scrollPaddingBlock:we,scrollPaddingBlockEnd:we,scrollPaddingBlockStart:we,scrollPaddingInline:we,scrollPaddingInlineEnd:we,scrollPaddingInlineStart:we,fontSize:"fontSizes",background:vt,backgroundColor:vt,backgroundImage:vt,borderImage:vt,border:vt,borderBlock:vt,borderBlockEnd:vt,borderBlockStart:vt,borderBottom:vt,borderBottomColor:vt,borderColor:vt,borderInline:vt,borderInlineEnd:vt,borderInlineStart:vt,borderLeft:vt,borderLeftColor:vt,borderRight:vt,borderRightColor:vt,borderTop:vt,borderTopColor:vt,caretColor:vt,color:vt,columnRuleColor:vt,fill:vt,outline:vt,outlineColor:vt,stroke:vt,textDecorationColor:vt,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:$i,minBlockSize:$i,maxBlockSize:$i,inlineSize:$i,minInlineSize:$i,maxInlineSize:$i,width:$i,minWidth:$i,maxWidth:$i,height:$i,minHeight:$i,maxHeight:$i,flexBasis:$i,gridTemplateColumns:$i,gridTemplateRows:$i,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},gx=(e,t)=>typeof t=="function"?{"()":Function.prototype.toString.call(t)}:t,Ps=()=>{let e=Object.create(null);return(t,i,...r)=>{let n=(a=>JSON.stringify(a,gx))(t);return n in e?e[n]:e[n]=i(t,...r)}},Rn=Symbol.for("sxs.internal"),bc=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),yf=e=>{for(let t in e)return!0;return!1},{hasOwnProperty:mx}=Object.prototype,wc=e=>e.includes("-")?e:e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),vx=/\s+(?![^()]*\))/,Ts=e=>t=>e(...typeof t=="string"?String(t).split(vx):[t]),bf={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:Ts((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e})),marginInline:Ts((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e})),maxSize:Ts((e,t)=>({maxBlockSize:e,maxInlineSize:t||e})),minSize:Ts((e,t)=>({minBlockSize:e,minInlineSize:t||e})),paddingBlock:Ts((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e})),paddingInline:Ts((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e}))},xc=/([\d.]+)([^]*)/,yx=(e,t)=>e.length?e.reduce((i,r)=>(i.push(...t.map(n=>n.includes("&")?n.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(n)?`:is(${r})`:r):r+" "+n)),i),[]):t,bx=(e,t)=>e in wx&&typeof t=="string"?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(i,r,n,a)=>r+(n==="stretch"?`-moz-available${a};${wc(e)}:${r}-webkit-fill-available`:`-moz-fit-content${a};${wc(e)}:${r}fit-content`)+a):String(t),wx={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Br=e=>e?e+"-":"",wf=(e,t,i)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,n,a,l,u)=>l=="$"==!!a?r:(n||l=="--"?"calc(":"")+"var(--"+(l==="$"?Br(t)+(u.includes("$")?"":Br(i))+u.replace(/\$/g,"-"):u)+")"+(n||l=="--"?"*"+(n||"")+(a||"1")+")":"")),xx=/\s*,\s*(?![^()]*\))/,_x=Object.prototype.toString,Is=(e,t,i,r,n)=>{let a,l,u,h=(g,p,y)=>{let S,C,_=T=>{for(S in T){let E=S.charCodeAt(0)===64,F=E&&Array.isArray(T[S])?T[S]:[T[S]];for(C of F){let z=/[A-Z]/.test(O=S)?O:O.replace(/-[^]/g,q=>q[1].toUpperCase()),U=typeof C=="object"&&C&&C.toString===_x&&(!r.utils[z]||!p.length);if(z in r.utils&&!U){let q=r.utils[z];if(q!==l){l=q,_(q(C)),l=null;continue}}else if(z in bf){let q=bf[z];if(q!==u){u=q,_(q(C)),u=null;continue}}if(E&&(L=S.slice(1)in r.media?"@media "+r.media[S.slice(1)]:S,S=L.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(q,G,V,ae,H,se)=>{let ce=xc.test(G),he=.0625*(ce?-1:1),[_e,me]=ce?[ae,G]:[G,ae];return"("+(V[0]==="="?"":V[0]===">"===ce?"max-":"min-")+_e+":"+(V[0]!=="="&&V.length===1?me.replace(xc,(ye,Re,J)=>Number(Re)+he*(V===">"?1:-1)+J):me)+(H?") and ("+(H[0]===">"?"min-":"max-")+_e+":"+(H.length===1?se.replace(xc,(ye,Re,J)=>Number(Re)+he*(H===">"?-1:1)+J):se):"")+")"})),U){let q=E?y.concat(S):[...y],G=E?[...p]:yx(p,S.split(xx));a!==void 0&&n(xf(...a)),a=void 0,h(C,G,q)}else a===void 0&&(a=[[],p,y]),S=E||S.charCodeAt(0)!==36?S:`--${Br(r.prefix)}${S.slice(1).replace(/\$/g,"-")}`,C=U?C:typeof C=="number"?C&&z in Sx?String(C)+"px":String(C):wf(bx(z,C??""),r.prefix,r.themeMap[z]),a[0].push(`${E?`${S} `:`${wc(S)}:`}${C}`)}}var L,O};_(g),a!==void 0&&n(xf(...a)),a=void 0};h(e,t,i)},xf=(e,t,i)=>`${i.map(r=>`${r}{`).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(i.length?i.length+1:0).join("}")}`,Sx={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},_f=e=>String.fromCharCode(e+(e>25?39:97)),Ln=e=>(t=>{let i,r="";for(i=Math.abs(t);i>52;i=i/52|0)r=_f(i%52)+r;return _f(i%52)+r})(((t,i)=>{let r=i.length;for(;r;)t=33*t^i.charCodeAt(--r);return t})(5381,JSON.stringify(e))>>>0),_o=["themed","global","styled","onevar","resonevar","allvar","inline"],Ex=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch{return!1}},Cx=e=>{let t,i=()=>{let{cssRules:n}=t.sheet;return[].map.call(n,(a,l)=>{let{cssText:u}=a,h="";if(u.startsWith("--sxs"))return"";if(n[l-1]&&(h=n[l-1].cssText).startsWith("--sxs")){if(!a.cssRules.length)return"";for(let g in t.rules)if(t.rules[g].group===a)return`--sxs{--sxs:${[...t.rules[g].cache].join(" ")}}${u}`;return a.cssRules.length?`${h}${u}`:""}return u}).join("")},r=()=>{if(t){let{rules:u,sheet:h}=t;if(!h.deleteRule){for(;Object(Object(h.cssRules)[0]).type===3;)h.cssRules.splice(0,1);h.cssRules=[]}for(let g in u)delete u[g]}let n=Object(e).styleSheets||[];for(let u of n)if(Ex(u)){for(let h=0,g=u.cssRules;g[h];++h){let p=Object(g[h]);if(p.type!==1)continue;let y=Object(g[h+1]);if(y.type!==4)continue;++h;let{cssText:S}=p;if(!S.startsWith("--sxs"))continue;let C=S.slice(14,-3).trim().split(/\s+/),_=_o[C[0]];_&&(t||(t={sheet:u,reset:r,rules:{},toString:i}),t.rules[_]={group:y,index:h,cache:new Set(C)})}if(t)break}if(!t){let u=(h,g)=>({type:g,cssRules:[],insertRule(p,y){this.cssRules.splice(y,0,u(p,{import:3,undefined:1}[(p.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return h==="@media{}"?`@media{${[].map.call(this.cssRules,p=>p.cssText).join("")}}`:h}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:u("","text/css"),rules:{},reset:r,toString:i}}let{sheet:a,rules:l}=t;for(let u=_o.length-1;u>=0;--u){let h=_o[u];if(!l[h]){let g=_o[u+1],p=l[g]?l[g].index:a.cssRules.length;a.insertRule("@media{}",p),a.insertRule(`--sxs{--sxs:${u}}`,p),l[h]={group:a.cssRules[p+1],index:p,cache:new Set([u])}}kx(l[h])}};return r(),t},kx=e=>{let t=e.group,i=t.cssRules.length;e.apply=r=>{try{t.insertRule(r,i),++i}catch{}}},So=Symbol(),Ax=Ps(),Sf=(e,t)=>Ax(e,()=>(...i)=>{let r={type:null,composers:new Set};for(let n of i)if(n!=null)if(n[Rn]){r.type==null&&(r.type=n[Rn].type);for(let a of n[Rn].composers)r.composers.add(a)}else n.constructor!==Object||n.$$typeof?r.type==null&&(r.type=n):r.composers.add(Px(n,e));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),Tx(e,r,t)}),Px=(e,t)=>{var i=e,{variants:r,compoundVariants:n,defaultVariants:a}=i,l=le(i,["variants","compoundVariants","defaultVariants"]);let u=`${Br(t.prefix)}c-${Ln(l)}`,h=[],g=[],p=Object.create(null),y=[];for(let _ in a)p[_]=String(a[_]);if(typeof r=="object"&&r)for(let _ in r){S=p,C=_,mx.call(S,C)||(p[_]="undefined");let T=r[_];for(let L in T){let O={[_]:String(L)};String(L)==="undefined"&&y.push(_);let E=T[L],F=[O,E,!yf(E)];h.push(F)}}var S,C;if(typeof n=="object"&&n)for(let _ of n){let T=_,{css:L}=T,O=le(T,["css"]);L=typeof L=="object"&&L||{};for(let F in O)O[F]=String(O[F]);let E=[O,L,!yf(L)];g.push(E)}return[u,l,h,g,p,y]},Tx=(e,t,i)=>{let[r,n,a,l]=Ix(t.composers),u=typeof t.type=="function"||t.type.$$typeof?(y=>{function S(){for(let C=0;C<S[So].length;C++){let[_,T]=S[So][C];y.rules[_].apply(T)}return S[So]=[],null}return S[So]=[],S.rules={},_o.forEach(C=>S.rules[C]={apply:_=>S[So].push([C,_])}),S})(i):null,h=(u||i).rules,g=`.${r}${n.length>1?`:where(.${n.slice(1).join(".")})`:""}`,p=y=>{y=typeof y=="object"&&y||Rx;let S=y,{css:C}=S,_=le(S,["css"]),T={};for(let E in a)if(delete _[E],E in y){let F=y[E];typeof F=="object"&&F?T[E]=A({"@initial":a[E]},F):(F=String(F),T[E]=F!=="undefined"||l.has(E)?F:a[E])}else T[E]=a[E];let L=new Set([...n]);for(let[E,F,z,U]of t.composers){i.rules.styled.cache.has(E)||(i.rules.styled.cache.add(E),Is(F,[`.${E}`],[],e,V=>{h.styled.apply(V)}));let q=Ef(z,T,e.media),G=Ef(U,T,e.media,!0);for(let V of q)if(V!==void 0)for(let[ae,H,se]of V){let ce=`${E}-${Ln(H)}-${ae}`;L.add(ce);let he=(se?i.rules.resonevar:i.rules.onevar).cache,_e=se?h.resonevar:h.onevar;he.has(ce)||(he.add(ce),Is(H,[`.${ce}`],[],e,me=>{_e.apply(me)}))}for(let V of G)if(V!==void 0)for(let[ae,H]of V){let se=`${E}-${Ln(H)}-${ae}`;L.add(se),i.rules.allvar.cache.has(se)||(i.rules.allvar.cache.add(se),Is(H,[`.${se}`],[],e,ce=>{h.allvar.apply(ce)}))}}if(typeof C=="object"&&C){let E=`${r}-i${Ln(C)}-css`;L.add(E),i.rules.inline.cache.has(E)||(i.rules.inline.cache.add(E),Is(C,[`.${E}`],[],e,F=>{h.inline.apply(F)}))}for(let E of String(y.className||"").trim().split(/\s+/))E&&L.add(E);let O=_.className=[...L].join(" ");return{type:t.type,className:O,selector:g,props:_,toString:()=>O,deferredInjector:u}};return bc(p,{className:r,selector:g,[Rn]:t,toString:()=>(i.rules.styled.cache.has(r)||p(),r)})},Ix=e=>{let t="",i=[],r={},n=[];for(let[a,,,,l,u]of e){t===""&&(t=a),i.push(a),n.push(...u);for(let h in l){let g=l[h];(r[h]===void 0||g!=="undefined"||u.includes(g))&&(r[h]=g)}}return[t,i,r,new Set(n)]},Ef=(e,t,i,r)=>{let n=[];e:for(let[a,l,u]of e){if(u)continue;let h,g=0,p=!1;for(h in a){let y=a[h],S=t[h];if(S!==y){if(typeof S!="object"||!S)continue e;{let C,_,T=0;for(let L in S){if(y===String(S[L])){if(L!=="@initial"){let O=L.slice(1);(_=_||[]).push(O in i?i[O]:L.replace(/^@media ?/,"")),p=!0}g+=T,C=!0}++T}if(_&&_.length&&(l={["@media "+_.join(", ")]:l}),!C)continue e}}}(n[g]=n[g]||[]).push([r?"cv":`${h}-${a[h]}`,l,p])}return n},Rx={},Lx=Ps(),Ox=(e,t)=>Lx(e,()=>(...i)=>{let r=()=>{for(let n of i){n=typeof n=="object"&&n||{};let a=Ln(n);if(!t.rules.global.cache.has(a)){if(t.rules.global.cache.add(a),"@import"in n){let l=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let u of[].concat(n["@import"]))u=u.includes('"')||u.includes("'")?u:`"${u}"`,t.sheet.insertRule(`@import ${u};`,l++);delete n["@import"]}Is(n,[],[],e,l=>{t.rules.global.apply(l)})}}return""};return bc(r,{toString:r})}),$x=Ps(),Fx=(e,t)=>$x(e,()=>i=>{let r=`${Br(e.prefix)}k-${Ln(i)}`,n=()=>{if(!t.rules.global.cache.has(r)){t.rules.global.cache.add(r);let a=[];Is(i,[],[],e,u=>a.push(u));let l=`@keyframes ${r}{${a.join("")}}`;t.rules.global.apply(l)}return r};return bc(n,{get name(){return n()},toString:n})}),Mx=class{constructor(e,t,i,r){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=i==null?"":String(i),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Br(this.prefix)+Br(this.scale)+this.token}toString(){return this.computedValue}},zx=Ps(),Nx=(e,t)=>zx(e,()=>(i,r)=>{r=typeof i=="object"&&i||Object(r);let n=`.${i=(i=typeof i=="string"?i:"")||`${Br(e.prefix)}t-${Ln(r)}`}`,a={},l=[];for(let h in r){a[h]={};for(let g in r[h]){let p=`--${Br(e.prefix)}${h}-${g}`,y=wf(String(r[h][g]),e.prefix,h);a[h][g]=new Mx(g,y,h,e.prefix),l.push(`${p}:${y}`)}}let u=()=>{if(l.length&&!t.rules.themed.cache.has(i)){t.rules.themed.cache.add(i);let h=`${r===e.theme?":root,":""}.${i}{${l.join(";")}}`;t.rules.themed.apply(h)}return i};return B(A({},a),{get className(){return u()},selector:n,toString:u})}),jx=Ps(),Bx=Ps(),Dx=e=>{let t=(i=>{let r=!1,n=jx(i,a=>{r=!0;let l="prefix"in(a=typeof a=="object"&&a||{})?String(a.prefix):"",u=typeof a.media=="object"&&a.media||{},h=typeof a.root=="object"?a.root||null:globalThis.document||null,g=typeof a.theme=="object"&&a.theme||{},p={prefix:l,media:u,theme:g,themeMap:typeof a.themeMap=="object"&&a.themeMap||A({},fx),utils:typeof a.utils=="object"&&a.utils||{}},y=Cx(h),S={css:Sf(p,y),globalCss:Ox(p,y),keyframes:Fx(p,y),createTheme:Nx(p,y),reset(){y.reset(),S.theme.toString()},theme:{},sheet:y,config:p,prefix:l,getCssText:y.toString,toString:y.toString};return String(S.theme=S.createTheme(g)),S});return r||n.reset(),n})(e);return t.styled=(({config:i,sheet:r})=>Bx(i,()=>{let n=Sf(i,r);return(...a)=>{let l=n(...a),u=l[Rn].type,h=K.forwardRef((g,p)=>{let y=g&&g.as||u,{props:S,deferredInjector:C}=l(g);return delete S.as,S.ref=p,C?K.createElement(K.Fragment,null,K.createElement(y,S),K.createElement(C,null)):K.createElement(y,S)});return h.className=l.className,h.displayName=`Styled.${u.displayName||u.name||u}`,h.selector=l.selector,h.toString=()=>l.selector,h[Rn]=l[Rn],h}}))(t),t};function Ux(e,t,i){return Math.max(t,Math.min(e,i))}var Si={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function Cf(e,t,i){return t===0||Math.abs(t)===1/0?Math.pow(e,i*5):e*t*i/(t+i*e)}function kf(e,t,i,r=.15){return r===0?Ux(e,t,i):e<t?-Cf(t-e,i-t,r)+t:e>i?+Cf(e-i,i-t,r)+i:e}function Wx(e,[t,i],[r,n]){let[[a,l],[u,h]]=e;return[kf(t,a,l,r),kf(i,u,h,n)]}function Hx(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qx(e){var t=Hx(e,"string");return typeof t=="symbol"?t:String(t)}function ji(e,t,i){return t=qx(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Af(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function Lt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Af(Object(i),!0).forEach(function(r){ji(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Af(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Pf={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Tf(e){return e?e[0].toUpperCase()+e.slice(1):""}var Qx=["enter","leave"];function Vx(e=!1,t){return e&&!Qx.includes(t)}function Gx(e,t="",i=!1){let r=Pf[e],n=r&&r[t]||t;return"on"+Tf(e)+Tf(n)+(Vx(i,n)?"Capture":"")}var Yx=["gotpointercapture","lostpointercapture"];function Xx(e){let t=e.substring(2).toLowerCase(),i=!!~t.indexOf("passive");i&&(t=t.replace("passive",""));let r=Yx.includes(t)?"capturecapture":"capture",n=!!~t.indexOf(r);return n&&(t=t.replace("capture","")),{device:t,capture:n,passive:i}}function Zx(e,t=""){let i=Pf[e],r=i&&i[t]||t;return e+r}function Na(e){return"touches"in e}function If(e){return Na(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function Kx(e){return Array.from(e.touches).filter(t=>{var i,r;return t.target===e.currentTarget||((i=e.currentTarget)===null||i===void 0||(r=i.contains)===null||r===void 0?void 0:r.call(i,t.target))})}function Jx(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function Rf(e){return Na(e)?Jx(e)[0]:e}function e_(e){return Kx(e).map(t=>t.identifier)}function _c(e){let t=Rf(e);return Na(e)?t.identifier:t.pointerId}function Lf(e){let t=Rf(e);return[t.clientX,t.clientY]}function t_(e){let t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){let{shiftKey:i,altKey:r,metaKey:n,ctrlKey:a}=e;Object.assign(t,{shiftKey:i,altKey:r,metaKey:n,ctrlKey:a})}return t}function ja(e,...t){return typeof e=="function"?e(...t):e}function i_(){}function r_(...e){return e.length===0?i_:e.length===1?e[0]:function(){let t;for(let i of e)t=i.apply(this,arguments)||t;return t}}function Of(e,t){return Object.assign({},t,e||{})}var n_=32,s_=class{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){let t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?ja(i.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){let t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){let e=this.state;e._initial=e._values,e.initial=e.values}compute(e){let{state:t,config:i,shared:r}=this;t.args=this.args;let n=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,t_(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,n=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){let U=t._delta.map(Math.abs);Si.addTo(t._distance,U)}this.axisIntent&&this.axisIntent(e);let[a,l]=t._movement,[u,h]=i.threshold,{_step:g,values:p}=t;if(i.hasCustomTransform?(g[0]===!1&&(g[0]=Math.abs(a)>=u&&p[0]),g[1]===!1&&(g[1]=Math.abs(l)>=h&&p[1])):(g[0]===!1&&(g[0]=Math.abs(a)>=u&&Math.sign(a)*u),g[1]===!1&&(g[1]=Math.abs(l)>=h&&Math.sign(l)*h)),t.intentional=g[0]!==!1||g[1]!==!1,!t.intentional)return;let y=[0,0];if(i.hasCustomTransform){let[U,q]=p;y[0]=g[0]!==!1?U-g[0]:0,y[1]=g[1]!==!1?q-g[1]:0}else y[0]=g[0]!==!1?a-g[0]:0,y[1]=g[1]!==!1?l-g[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(y);let S=t.offset,C=t._active&&!t._blocked||t.active;C&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=ja(i.bounds,t)),this.setup&&this.setup()),t.movement=y,this.computeOffset()));let[_,T]=t.offset,[[L,O],[E,F]]=t._bounds;t.overflow=[_<L?-1:_>O?1:0,T<E?-1:T>F?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;let z=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=Wx(t._bounds,t.offset,z),t.delta=Si.sub(t.offset,S),this.computeMovement(),C&&(!t.last||n>n_)){t.delta=Si.sub(t.offset,S);let U=t.delta.map(Math.abs);Si.addTo(t.distance,U),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&n>0&&(t.velocity=[U[0]/n,U[1]/n])}}emit(){let e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;let r=this.handler(Lt(Lt(Lt({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}};function o_([e,t],i){let r=Math.abs(e),n=Math.abs(t);if(r>n&&r>i)return"x";if(n>r&&n>i)return"y"}var a_=class extends s_{constructor(...e){super(...e),ji(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Si.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Si.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){let t=this.state,i=this.config;if(!t.axis&&e){let r=typeof i.axisThreshold=="object"?i.axisThreshold[If(e)]:i.axisThreshold;t.axis=o_(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}},l_=e=>e,$f=.15,Ff={enabled(e=!0){return e},eventOptions(e,t,i){return Lt(Lt({},i.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[$f,$f];case!1:return[0,0];default:return Si.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return Si.toVector(e)},transform(e,t,i){let r=e||i.shared.transform;return this.hasCustomTransform=!!r,r||l_},threshold(e){return Si.toVector(e,0)}},u_=0,Eo=Lt(Lt({},Ff),{},{axis(e,t,{axis:i}){if(this.lockDirection=i==="lock",!this.lockDirection)return i},axisThreshold(e=u_){return e},bounds(e={}){if(typeof e=="function")return a=>Eo.bounds(e(a));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;let{left:t=-1/0,right:i=1/0,top:r=-1/0,bottom:n=1/0}=e;return[[t,i],[r,n]]}}),Mf={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]},c_=class extends a_{constructor(...e){super(...e),ji(this,"ingKey","dragging")}reset(){super.reset();let e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){let e=this.state;if(e._bounds instanceof HTMLElement){let t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=Eo.bounds(r)}}cancel(){let e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){let t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;let r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=_c(e),i._pointerActive=!0,this.computeValues(Lf(e)),this.computeInitial(),t.preventScrollAxis&&If(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){let t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){let t=this.state,i=this.config;if(!t._pointerActive||t.type===e.type&&e.timeStamp===t.timeStamp)return;let r=_c(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;let n=Lf(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Si.sub(n,t._values),this.computeValues(n)),Si.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}let t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;let r=_c(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);let[n,a]=t._distance;if(t.tap=n<=i.tapsThreshold&&a<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{let[l,u]=t.direction,[h,g]=t.velocity,[p,y]=t.movement,[S,C]=i.swipe.velocity,[_,T]=i.swipe.distance,L=i.swipe.duration;t.elapsedTime<L&&(Math.abs(h)>S&&Math.abs(p)>_&&(t.swipe[0]=l),Math.abs(g)>C&&Math.abs(y)>T&&(t.swipe[1]=u))}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){let t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,h_(e);let t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){let t=Mf[e.key];if(t){let i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,Si.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Mf&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){let t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}};function h_(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}var Co=typeof window<"u"&&window.document&&window.document.createElement;function d_(){return Co&&"ontouchstart"in window}function zf(){return d_()||Co&&window.navigator.maxTouchPoints>1}function p_(){return Co&&"onpointerdown"in window}function f_(){return Co&&"exitPointerLock"in window.document}function g_(){try{return"constructor"in GestureEvent}catch{return!1}}var Ji={isBrowser:Co,gesture:g_(),touch:zf(),touchscreen:zf(),pointer:p_(),pointerLock:f_()},m_=250,v_=180,y_=.5,b_=50,w_=250,x_=10,Nf={mouse:0,touch:0,pen:8},__=Lt(Lt({},Eo),{},{device(e,t,{pointer:{touch:i=!1,lock:r=!1,mouse:n=!1}={}}){return this.pointerLock=r&&Ji.pointerLock,Ji.touch&&i?"touch":this.pointerLock?"mouse":Ji.pointer&&!n?"pointer":Ji.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:i}){if(this.preventScrollDelay=typeof i=="number"?i:i||i===void 0&&e?m_:void 0,!(!Ji.touchscreen||i===!1))return e||(i!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:i=!0,buttons:r=1,keys:n=!0}={}}){return this.pointerButtons=r,this.keys=n,!this.pointerLock&&this.device==="pointer"&&i},threshold(e,t,{filterTaps:i=!1,tapsThreshold:r=3,axis:n=void 0}){let a=Si.toVector(e,i?r:n?1:0);return this.filterTaps=i,this.tapsThreshold=r,a},swipe({velocity:e=y_,distance:t=b_,duration:i=w_}={}){return{velocity:this.transform(Si.toVector(e)),distance:this.transform(Si.toVector(t)),duration:i}},delay(e=0){switch(e){case!0:return v_;case!1:return 0;default:return e}},axisThreshold(e){return e?Lt(Lt({},Nf),e):Nf},keyboardDisplacement(e=x_){return e}});Lt(Lt({},Ff),{},{device(e,t,{shared:i,pointer:{touch:r=!1}={}}){if(i.target&&!Ji.touch&&Ji.gesture)return"gesture";if(Ji.touch&&r)return"touch";if(Ji.touchscreen){if(Ji.pointer)return"pointer";if(Ji.touch)return"touch"}},bounds(e,t,{scaleBounds:i={},angleBounds:r={}}){let n=l=>{let u=Of(ja(i,l),{min:-1/0,max:1/0});return[u.min,u.max]},a=l=>{let u=Of(ja(r,l),{min:-1/0,max:1/0});return[u.min,u.max]};return typeof i!="function"&&typeof r!="function"?[n(),a()]:l=>[n(l),a(l)]},threshold(e,t,i){return this.lockDirection=i.axis==="lock",Si.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}}),Lt(Lt({},Eo),{},{mouseOnly:(e=!0)=>e}),Lt(Lt({},Eo),{},{mouseOnly:(e=!0)=>e});var jf=new Map,Sc=new Map;function S_(e){jf.set(e.key,e.engine),Sc.set(e.key,e.resolver)}var E_={key:"drag",engine:c_,resolver:__};function C_(e,t){if(e==null)return{};var i={},r=Object.keys(e),n,a;for(a=0;a<r.length;a++)n=r[a],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function k_(e,t){if(e==null)return{};var i=C_(e,t),r,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(i[r]=e[r]))}return i}var A_={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=Ji.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},P_=["target","eventOptions","window","enabled","transform"];function Ba(e={},t){let i={};for(let[r,n]of Object.entries(t))switch(typeof n){case"function":i[r]=n.call(i,e[r],r,e);break;case"object":i[r]=Ba(e[r],n);break;case"boolean":n&&(i[r]=e[r]);break}return i}function T_(e,t,i={}){let r=e,{target:n,eventOptions:a,window:l,enabled:u,transform:h}=r,g=k_(r,P_);if(i.shared=Ba({target:n,eventOptions:a,window:l,enabled:u,transform:h},A_),t){let p=Sc.get(t);i[t]=Ba(Lt({shared:i.shared},g),p)}else for(let p in g){let y=Sc.get(p);y&&(i[p]=Ba(Lt({shared:i.shared},g[p]),y))}return i}var Bf=class{constructor(e,t){ji(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,n){let a=this._listeners,l=Zx(t,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},h=Lt(Lt({},u),n);e.addEventListener(l,r,h);let g=()=>{e.removeEventListener(l,r,h),a.delete(g)};return a.add(g),g}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}},I_=class{constructor(){ji(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){let t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}},R_=class{constructor(e){ji(this,"gestures",new Set),ji(this,"_targetEventStore",new Bf(this)),ji(this,"gestureEventStores",{}),ji(this,"gestureTimeoutStores",{}),ji(this,"handlers",{}),ji(this,"config",{}),ji(this,"pointerIds",new Set),ji(this,"touchIds",new Set),ji(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),L_(this,e)}setEventIds(e){if(Na(e))return this.touchIds=new Set(e_(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=T_(e,t,this.config)}clean(){this._targetEventStore.clean();for(let e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){let t=this.config.shared,i={},r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(let a of this.gestures){let l=this.config[a],u=Df(i,l.eventOptions,!!r);if(l.enabled){let h=jf.get(a);new h(this,e,a).bind(u)}}let n=Df(i,t.eventOptions,!!r);for(let a in this.nativeHandlers)n(a,"",l=>this.nativeHandlers[a](Lt(Lt({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(let n in i)i[n]=r_(...i[n]);if(!r)return i;for(let n in i){let{device:a,capture:l,passive:u}=Xx(n);this._targetEventStore.add(r,a,"",i[n],{capture:l,passive:u})}}}};function Rs(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Bf(e,t),e.gestureTimeoutStores[t]=new I_}function L_(e,t){t.drag&&Rs(e,"drag"),t.wheel&&Rs(e,"wheel"),t.scroll&&Rs(e,"scroll"),t.move&&Rs(e,"move"),t.pinch&&Rs(e,"pinch"),t.hover&&Rs(e,"hover")}var Df=(e,t,i)=>(r,n,a,l={},u=!1)=>{var h,g;let p=(h=l.capture)!==null&&h!==void 0?h:t.capture,y=(g=l.passive)!==null&&g!==void 0?g:t.passive,S=u?r:Gx(r,n,p);i&&y&&(S+="Passive"),e[S]=e[S]||[],e[S].push(a)};function O_(e,t={},i,r){let n=K.useMemo(()=>new R_(e),[]);if(n.applyHandlers(e,r),n.applyConfig(t,i),K.useEffect(n.effect.bind(n)),K.useEffect(()=>n.clean.bind(n),[]),t.target===void 0)return n.bind.bind(n)}function $_(e,t){return S_(E_),O_({drag:e},t||{},"drag")}var F_=_s["useId".toString()]||(()=>{}),M_=0;function z_(e){let[t,i]=Me(F_());return $a(()=>{e||i(r=>r??String(M_++))},[e]),e||(t?`radix-${t}`:"")}var Ls=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((e,t)=>B(A({},e),{[t]:pi((i,r)=>{let n=i,{asChild:a}=n,l=le(n,["asChild"]),u=a?uf:t;return de(()=>{window[Symbol.for("radix-ui")]=!0},[]),i.as&&console.error(N_),$(u,_i({},l,{ref:r}))})}),{}),N_="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",j_=pi((e,t)=>$(Ls.span,_i({},e,{ref:t,style:B(A({},e.style),{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"})}))),B_=j_,D_=pi((e,t)=>{var i,r;let n=e,{containerRef:a,style:l}=n,u=le(n,["containerRef","style"]),h=(i=a==null?void 0:a.current)!==null&&i!==void 0?i:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,g]=Me({});return $a(()=>{g({})},[]),h?K.createPortal($(Ls.div,_i({"data-radix-portal":""},u,{ref:t,style:h===document.body?A({position:"absolute",top:0,left:0,zIndex:2147483647},l):void 0})),h):null}),U_=pi((e,t)=>{let i=e,{children:r,width:n=10,height:a=5}=i,l=le(i,["children","width","height"]);return $(Ls.svg,_i({},l,{ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?r:$("polygon",{points:"0,0 30,0 15,10"}))}),W_=U_;function Uf(e){let[t,i]=Me(void 0);return de(()=>{if(e){let r=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;let a=n[0],l,u;if("borderBoxSize"in a){let h=a.borderBoxSize,g=Array.isArray(h)?h[0]:h;l=g.inlineSize,u=g.blockSize}else{let h=e.getBoundingClientRect();l=h.width,u=h.height}i({width:l,height:u})});return r.observe(e,{box:"border-box"}),()=>{i(void 0),r.unobserve(e)}}},[e]),t}function H_(e,t){let i=On.get(e);return i===void 0?(On.set(e,{rect:{},callbacks:[t]}),On.size===1&&(Ec=requestAnimationFrame(Wf))):(i.callbacks.push(t),t(e.getBoundingClientRect())),()=>{let r=On.get(e);if(r===void 0)return;let n=r.callbacks.indexOf(t);n>-1&&r.callbacks.splice(n,1),r.callbacks.length===0&&(On.delete(e),On.size===0&&cancelAnimationFrame(Ec))}}var Ec,On=new Map;function Wf(){let e=[];On.forEach((t,i)=>{let r=i.getBoundingClientRect();var n,a;n=t.rect,a=r,(n.width!==a.width||n.height!==a.height||n.top!==a.top||n.right!==a.right||n.bottom!==a.bottom||n.left!==a.left)&&(t.rect=r,e.push(t))}),e.forEach(t=>{t.callbacks.forEach(i=>i(t.rect))}),Ec=requestAnimationFrame(Wf)}function Hf(e){let[t,i]=Me();return de(()=>{if(e){let r=H_(e,i);return()=>{i(void 0),r()}}},[e]),t}function qf(e,t=[]){let i=[],r=()=>{let n=i.map(a=>ri(a));return function(a){let l=(a==null?void 0:a[e])||n;return Ee(()=>({[`__scope${e}`]:B(A({},a),{[e]:l})}),[a,l])}};return r.scopeName=e,[function(n,a){let l=ri(a),u=i.length;function h(g){let p=g,{scope:y,children:S}=p,C=le(p,["scope","children"]),_=(y==null?void 0:y[e][u])||l,T=Ee(()=>C,Object.values(C));return $(_.Provider,{value:T},S)}return i=[...i,a],h.displayName=n+"Provider",[h,function(g,p){let y=(p==null?void 0:p[e][u])||l,S=Jt(y);if(S)return S;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${n}\``)}]},q_(r,...t)]}function q_(...e){let t=e[0];if(e.length===1)return t;let i=()=>{let r=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(n){let a=r.reduce((l,{useScope:u,scopeName:h})=>A(A({},l),u(n)[`__scope${h}`]),{});return Ee(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return i.scopeName=t.scopeName,i}function Q_({anchorRect:e,popperSize:t,arrowSize:i,arrowOffset:r=0,side:n,sideOffset:a=0,align:l,alignOffset:u=0,shouldAvoidCollisions:h=!0,collisionBoundariesRect:g,collisionTolerance:p=0}){if(!e||!t||!g)return{popperStyles:V_,arrowStyles:Cc};let y=function(G,V,ae=0,H=0,se){let ce=se?se.height:0,he=Qf(V,G,"x"),_e=Qf(V,G,"y"),me=_e.before-ae-ce,ye=_e.after+ae+ce,Re=he.before-ae-ce,J=he.after+ae+ce;return{top:{start:{x:he.start+H,y:me},center:{x:he.center,y:me},end:{x:he.end-H,y:me}},right:{start:{x:J,y:_e.start+H},center:{x:J,y:_e.center},end:{x:J,y:_e.end-H}},bottom:{start:{x:he.start+H,y:ye},center:{x:he.center,y:ye},end:{x:he.end-H,y:ye}},left:{start:{x:Re,y:_e.start+H},center:{x:Re,y:_e.center},end:{x:Re,y:_e.end-H}}}}(t,e,a,u,i),S=y[n][l];if(h===!1){let G=Vf(S),V=Cc;return i&&(V=Yf({popperSize:t,arrowSize:i,arrowOffset:r,side:n,align:l})),{popperStyles:B(A({},G),{"--radix-popper-transform-origin":Gf(t,n,l,r,i)}),arrowStyles:V,placedSide:n,placedAlign:l}}let C=DOMRect.fromRect(A(A({},t),S)),_=(T=g,L=p,DOMRect.fromRect({width:T.width-2*L,height:T.height-2*L,x:T.left+L,y:T.top+L}));var T,L;let O=Zf(C,_),E=y[Xf(n)][l],F=function(G,V,ae){let H=Xf(G);return V[G]&&!ae[H]?H:G}(n,O,Zf(DOMRect.fromRect(A(A({},t),E)),_)),z=function(G,V,ae,H,se){let ce=ae==="top"||ae==="bottom",he=ce?"left":"top",_e=ce?"right":"bottom",me=ce?"width":"height",ye=V[me]>G[me];return(H==="start"||H==="center")&&(se[he]&&ye||se[_e]&&!ye)?"end":(H==="end"||H==="center")&&(se[_e]&&ye||se[he]&&!ye)?"start":H}(t,e,n,l,O),U=Vf(y[F][z]),q=Cc;return i&&(q=Yf({popperSize:t,arrowSize:i,arrowOffset:r,side:F,align:z})),{popperStyles:B(A({},U),{"--radix-popper-transform-origin":Gf(t,F,z,r,i)}),arrowStyles:q,placedSide:F,placedAlign:z}}function Qf(e,t,i){let r=e[i==="x"?"left":"top"],n=i==="x"?"width":"height",a=e[n],l=t[n];return{before:r-l,start:r,center:r+(a-l)/2,end:r+a-l,after:r+a}}function Vf(e){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(e.x+window.scrollX)}px, ${Math.round(e.y+window.scrollY)}px, 0)`}}function Gf(e,t,i,r,n){let a=t==="top"||t==="bottom",l=n?n.width:0,u=n?n.height:0,h=l/2+r,g="",p="";return a?(g={start:`${h}px`,center:"center",end:e.width-h+"px"}[i],p=t==="top"?`${e.height+u}px`:-u+"px"):(g=t==="left"?`${e.width+u}px`:-u+"px",p={start:`${h}px`,center:"center",end:e.height-h+"px"}[i]),`${g} ${p}`}var V_={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},Cc={position:"absolute",opacity:0};function Yf({popperSize:e,arrowSize:t,arrowOffset:i,side:r,align:n}){let a=(e.width-t.width)/2,l=(e.height-t.width)/2,u={top:0,right:90,bottom:180,left:-90}[r],h=Math.max(t.width,t.height),g={width:`${h}px`,height:`${h}px`,transform:`rotate(${u}deg)`,willChange:"transform",position:"absolute",[r]:"100%",direction:G_(r,n)};return r!=="top"&&r!=="bottom"||(n==="start"&&(g.left=`${i}px`),n==="center"&&(g.left=`${a}px`),n==="end"&&(g.right=`${i}px`)),r!=="left"&&r!=="right"||(n==="start"&&(g.top=`${i}px`),n==="center"&&(g.top=`${l}px`),n==="end"&&(g.bottom=`${i}px`)),g}function G_(e,t){return(e!=="top"&&e!=="right"||t!=="end")&&(e!=="bottom"&&e!=="left"||t==="end")?"ltr":"rtl"}function Xf(e){return{top:"bottom",right:"left",bottom:"top",left:"right"}[e]}function Zf(e,t){return{top:e.top<t.top,right:e.right>t.right,bottom:e.bottom>t.bottom,left:e.left<t.left}}var[Kf,Jf]=qf("Popper"),[Y_,eg]=Kf("Popper"),X_=e=>{let{__scopePopper:t,children:i}=e,[r,n]=Me(null);return $(Y_,{scope:t,anchor:r,onAnchorChange:n},i)},Z_=pi((e,t)=>{let i=e,{__scopePopper:r,virtualRef:n}=i,a=le(i,["__scopePopper","virtualRef"]),l=eg("PopperAnchor",r),u=Se(null),h=Oa(t,u);return de(()=>{l.onAnchorChange((n==null?void 0:n.current)||u.current)}),n?null:$(Ls.div,_i({},a,{ref:h}))}),[K_,J_]=Kf("PopperContent"),eS=pi((e,t)=>{let i=e,{__scopePopper:r,side:n="bottom",sideOffset:a,align:l="center",alignOffset:u,collisionTolerance:h,avoidCollisions:g=!0}=i,p=le(i,["__scopePopper","side","sideOffset","align","alignOffset","collisionTolerance","avoidCollisions"]),y=eg("PopperContent",r),[S,C]=Me(),_=Hf(y.anchor),[T,L]=Me(null),O=Uf(T),[E,F]=Me(null),z=Uf(E),U=Oa(t,he=>L(he)),q=function(){let[he,_e]=Me(void 0);return de(()=>{let me;function ye(){_e({width:window.innerWidth,height:window.innerHeight})}function Re(){window.clearTimeout(me),me=window.setTimeout(ye,100)}return ye(),window.addEventListener("resize",Re),()=>window.removeEventListener("resize",Re)},[]),he}(),G=q?DOMRect.fromRect(B(A({},q),{x:0,y:0})):void 0,{popperStyles:V,arrowStyles:ae,placedSide:H,placedAlign:se}=Q_({anchorRect:_,popperSize:O,arrowSize:z,arrowOffset:S,side:n,sideOffset:a,align:l,alignOffset:u,shouldAvoidCollisions:g,collisionBoundariesRect:G,collisionTolerance:h}),ce=H!==void 0;return $("div",{style:V,"data-radix-popper-content-wrapper":""},$(K_,{scope:r,arrowStyles:ae,onArrowChange:F,onArrowOffsetChange:C},$(Ls.div,_i({"data-side":H,"data-align":se},p,{style:B(A({},p.style),{animation:ce?void 0:"none"}),ref:U}))))}),tS=pi(function(e,t){let i=e,{__scopePopper:r,offset:n}=i,a=le(i,["__scopePopper","offset"]),l=J_("PopperArrow",r),{onArrowOffsetChange:u}=l;return de(()=>u(n),[u,n]),$("span",{style:B(A({},l.arrowStyles),{pointerEvents:"none"})},$("span",{ref:l.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},$(W_,_i({},a,{ref:t,style:B(A({},a.style),{display:"block"})}))))}),iS=X_,rS=Z_,nS=eS,sS=tS,tg=e=>{let{present:t,children:i}=e,r=function(l){let[u,h]=Me(),g=Se({}),p=Se(l),y=Se("none"),S=l?"mounted":"unmounted",[C,_]=function(T,L){return xs((O,E)=>{let F=L[O][E];return F??O},T)}(S,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return de(()=>{let T=Da(g.current);y.current=C==="mounted"?T:"none"},[C]),$a(()=>{let T=g.current,L=p.current;if(L!==l){let O=y.current,E=Da(T);l?_("MOUNT"):E==="none"||(T==null?void 0:T.display)==="none"?_("UNMOUNT"):_(L&&O!==E?"ANIMATION_OUT":"UNMOUNT"),p.current=l}},[l,_]),$a(()=>{if(u){let T=O=>{let E=Da(g.current).includes(O.animationName);O.target===u&&E&&_("ANIMATION_END")},L=O=>{O.target===u&&(y.current=Da(g.current))};return u.addEventListener("animationstart",L),u.addEventListener("animationcancel",T),u.addEventListener("animationend",T),()=>{u.removeEventListener("animationstart",L),u.removeEventListener("animationcancel",T),u.removeEventListener("animationend",T)}}},[u,_]),{isPresent:["mounted","unmountSuspended"].includes(C),ref:De(T=>{T&&(g.current=getComputedStyle(T)),h(T)},[])}}(t),n=typeof i=="function"?i({present:r.isPresent}):Jr.only(i),a=Oa(r.ref,n.ref);return typeof i=="function"||r.isPresent?Aa(n,{ref:a}):null};function Da(e){return(e==null?void 0:e.animationName)||"none"}tg.displayName="Presence";function ig(e){let t=Se(e);return de(()=>{t.current=e},[e]),t.current}function kc(e){let t=Se(e);return de(()=>{t.current=e}),Ee(()=>(...i)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...i)},[])}function oS(e){let t=kc(e);de(()=>{let i=r=>{r.key==="Escape"&&t(r)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t])}function aS({prop:e,defaultProp:t,onChange:i=()=>{}}){let[r,n]=function({defaultProp:h,onChange:g}){let p=Me(h),[y]=p,S=Se(y),C=kc(g);return de(()=>{S.current!==y&&(C(y),S.current=y)},[y,S,C]),p}({defaultProp:t,onChange:i}),a=e!==void 0,l=a?e:r,u=kc(i);return[l,De(h=>{if(a){let g=h,p=typeof h=="function"?g(e):h;p!==e&&u(p)}else n(h)},[a,e,n,u])]}function Os(e,t,{checkForDefaultPrevented:i=!0}={}){return function(r){if(e==null||e(r),i===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}var[rg,p$]=qf("Tooltip",[Jf]),Ua=Jf(),lS=700,[f$,uS]=rg("TooltipProvider",{isOpenDelayed:!0,delayDuration:lS,onOpen:()=>{},onClose:()=>{}}),[cS,Wa]=rg("Tooltip"),hS=e=>{let{__scopeTooltip:t,children:i,open:r,defaultOpen:n=!1,onOpenChange:a,delayDuration:l}=e,u=uS("Tooltip",t),h=Ua(t),[g,p]=Me(null),y=z_(),S=Se(0),C=l??u.delayDuration,_=Se(!1),{onOpen:T,onClose:L}=u,[O=!1,E]=aS({prop:r,defaultProp:n,onChange:q=>{q&&(document.dispatchEvent(new CustomEvent("tooltip.open")),T()),a==null||a(q)}}),F=Ee(()=>O?_.current?"delayed-open":"instant-open":"closed",[O]),z=De(()=>{window.clearTimeout(S.current),_.current=!1,E(!0)},[E]),U=De(()=>{window.clearTimeout(S.current),S.current=window.setTimeout(()=>{_.current=!0,E(!0)},C)},[C,E]);return de(()=>()=>window.clearTimeout(S.current),[]),$(iS,h,$(cS,{scope:t,contentId:y,open:O,stateAttribute:F,trigger:g,onTriggerChange:p,onTriggerEnter:De(()=>{u.isOpenDelayed?U():z()},[u.isOpenDelayed,U,z]),onOpen:De(z,[z]),onClose:De(()=>{window.clearTimeout(S.current),E(!1),L()},[E,L])},i))},dS=pi((e,t)=>{let i=e,{__scopeTooltip:r}=i,n=le(i,["__scopeTooltip"]),a=Wa("TooltipTrigger",r),l=Ua(r),u=Oa(t,a.onTriggerChange),h=Se(!1),g=De(()=>h.current=!1,[]);return de(()=>()=>document.removeEventListener("mouseup",g),[g]),$(rS,_i({asChild:!0},l),$(Ls.button,_i({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},n,{ref:u,onMouseEnter:Os(e.onMouseEnter,a.onTriggerEnter),onMouseLeave:Os(e.onMouseLeave,a.onClose),onMouseDown:Os(e.onMouseDown,()=>{a.onClose(),h.current=!0,document.addEventListener("mouseup",g,{once:!0})}),onFocus:Os(e.onFocus,()=>{h.current||a.onOpen()}),onBlur:Os(e.onBlur,a.onClose),onClick:Os(e.onClick,a.onClose)})))}),pS=pi((e,t)=>{let i=e,{forceMount:r}=i,n=le(i,["forceMount"]),a=Wa("TooltipContent",e.__scopeTooltip);return $(tg,{present:r||a.open},$(fS,_i({ref:t},n)))}),fS=pi((e,t)=>{let i=e,{__scopeTooltip:r,children:n,"aria-label":a,portalled:l=!0}=i,u=le(i,["__scopeTooltip","children","aria-label","portalled"]),h=Wa("TooltipContent",r),g=Ua(r),p=l?D_:et,{onClose:y}=h;return oS(()=>y()),de(()=>(document.addEventListener("tooltip.open",y),()=>document.removeEventListener("tooltip.open",y)),[y]),$(p,null,$(mS,{__scopeTooltip:r}),$(nS,_i({"data-state":h.stateAttribute},g,u,{ref:t,style:B(A({},u.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"})}),$(cf,null,n),$(B_,{id:h.contentId,role:"tooltip"},a||n)))}),gS=pi((e,t)=>{let i=e,{__scopeTooltip:r}=i,n=le(i,["__scopeTooltip"]),a=Ua(r);return $(sS,_i({},a,n,{ref:t}))});function mS(e){let{__scopeTooltip:t}=e,i=Wa("CheckTriggerMoved",t),r=Hf(i.trigger),n=r==null?void 0:r.left,a=ig(n),l=r==null?void 0:r.top,u=ig(l),h=i.onClose;return de(()=>{(a!==void 0&&a!==n||u!==void 0&&u!==l)&&h()},[h,a,u,n,l]),null}var vS=hS,yS=dS,bS=pS,wS=gS;function xS(e,t){if(e==null)return{};var i={},r=Object.keys(e),n,a;for(a=0;a<r.length;a++)n=r[a],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function Dr(e,t){if(e==null)return{};var i=xS(e,t),r,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(i[r]=e[r]))}return i}var Fi;(function(e){e[e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",e[e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",e[e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",e[e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",e[e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",e[e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",e[e.THEME_ERROR=6]="THEME_ERROR",e[e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",e[e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",e[e.EMPTY_KEY=9]="EMPTY_KEY"})(Fi||(Fi={}));var _S={[Fi.UNSUPPORTED_INPUT]:(e,t)=>[`An input with type \`${e}\` input was found at path \`${t}\` but it's not supported yet.`],[Fi.NO_COMPONENT_FOR_TYPE]:(e,t)=>[`Type \`${e}\` found at path \`${t}\` can't be displayed in panel because no component supports it yet.`],[Fi.UNKNOWN_INPUT]:(e,t)=>[`input at path \`${e}\` is not recognized.`,t],[Fi.DUPLICATE_KEYS]:(e,t,i)=>[`Key \`${e}\` of path \`${t}\` already exists at path \`${i}\`. Even nested keys need to be unique. Rename one of the keys.`],[Fi.ALREADY_REGISTERED_TYPE]:e=>[`Type ${e} has already been registered. You can't register a component with the same type.`],[Fi.CLIPBOARD_ERROR]:e=>["Error copying the value",e],[Fi.THEME_ERROR]:(e,t)=>[`Error accessing the theme \`${e}.${t}\` value.`],[Fi.PATH_DOESNT_EXIST]:e=>[`Error getting the value at path \`${e}\`. There is probably an error in your \`render\` function.`],[Fi.PATH_DOESNT_EXIST]:e=>[`Error accessing the value at path \`${e}\``],[Fi.INPUT_TYPE_OVERRIDE]:(e,t,i)=>[`Input at path \`${e}\` already exists with type: \`${t}\`. Its type cannot be overridden with type \`${i}\`.`],[Fi.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function ng(e,t,...i){let[r,...n]=_S[t](...i);console[e]("LEVA: "+r,...n)}var sg=ng.bind(null,"warn");ng.bind(null,"log");function SS(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function og(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function $n(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?og(Object(i),!0).forEach(function(r){SS(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):og(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var rn=(e,t,i)=>e>i?i:e<t?t:e,ES=e=>{if(e===""||typeof e=="number")return e;try{let t=nn(e);if(!isNaN(t))return t}catch{}return parseFloat(e)},CS=Math.log(10);function ag(e){let t=Math.abs(+String(e).replace(".",""));if(t===0)return .01;for(;t!==0&&t%10===0;)t/=10;let i=Math.floor(Math.log(t)/CS)+1,r=Math.floor(Math.log10(Math.abs(e))),n=Math.pow(10,r-i);return Math.max(n,.001)}var kS=(e,t,i)=>i===t?0:(rn(e,t,i)-t)/(i-t),lg=(e,t,i)=>e*(i-t)+t,ug=/\(([0-9+\-*/^ .]+)\)/,cg=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,hg=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,dg=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,pg=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,fg=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function nn(e){if(isNaN(Number(e)))if(ug.test(e)){let t=e.replace(ug,(i,r)=>String(nn(r)));return nn(t)}else if(cg.test(e)){let t=e.replace(cg,(i,r,n)=>String(Math.pow(Number(r),Number(n))));return nn(t)}else if(hg.test(e)){let t=e.replace(hg,(i,r,n)=>String(Number(r)*Number(n)));return nn(t)}else if(dg.test(e)){let t=e.replace(dg,(i,r,n)=>{if(n!=0)return String(Number(r)/Number(n));throw new Error("Division by zero")});return nn(t)}else if(pg.test(e)){let t=e.replace(pg,(i,r,n)=>String(Number(r)+Number(n)));return nn(t)}else if(fg.test(e)){let t=e.replace(fg,(i,r,n)=>String(Number(r)-Number(n)));return nn(t)}else return Number(e);return Number(e)}var gg;(function(e){e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.MONITOR="MONITOR",e.FOLDER="FOLDER"})(gg||(gg={}));var mg;(function(e){e.SELECT="SELECT",e.IMAGE="IMAGE",e.NUMBER="NUMBER",e.COLOR="COLOR",e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.INTERVAL="INTERVAL",e.VECTOR3D="VECTOR3D",e.VECTOR2D="VECTOR2D"})(mg||(mg={}));var AS=e=>e.shiftKey?5:e.altKey?1/5:1,PS=["value"],TS=["min","max"],IS=e=>{if(typeof e=="number")return!0;if(typeof e=="string"){let t=parseFloat(e);return isNaN(t)?!1:e.substring((""+t).length).trim().length<4}return!1},RS=(e,{min:t=-1/0,max:i=1/0,suffix:r})=>{let n=parseFloat(e);if(e===""||isNaN(n))throw Error("Invalid number");let a=rn(n,t,i);return r?a+r:a},LS=(e,{pad:t=0,suffix:i})=>{let r=parseFloat(e).toFixed(t);return i?r+i:r},OS=e=>{let{value:t}=e,i=Dr(e,PS),{min:r=-1/0,max:n=1/0}=i,a=Dr(i,TS),l=parseFloat(t),u=typeof t=="string"?t.substring((""+l).length):void 0;l=rn(l,r,n);let h=i.step;h||(Number.isFinite(r)?Number.isFinite(n)?h=+(Math.abs(n-r)/100).toPrecision(1):h=+(Math.abs(l-r)/100).toPrecision(1):Number.isFinite(n)&&(h=+(Math.abs(n-l)/100).toPrecision(1)));let g=h?ag(h)*10:ag(l);h=h||g/10;let p=Math.round(rn(Math.log10(1/g),0,2));return{value:u?l+u:l,settings:$n({initialValue:l,step:h,pad:p,min:r,max:n,suffix:u},a)}},vg=(e,{step:t,initialValue:i})=>{let r=Math.round((e-i)/t);return i+r*t},$S=Object.freeze({__proto__:null,schema:IS,sanitize:RS,format:LS,normalize:OS,sanitizeStep:vg});function Yi(){return Yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Yi.apply(this,arguments)}var FS=ri({});function Ur(){return Jt(FS)}var MS=ri(null);ri(null);var zS=ri(null);function NS(){return Jt(zS)}var jS=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Ha(e,t){let[i,r]=e.split(" "),n={};return i!=="none"&&(n.boxShadow=`${t.inset?"inset ":""}0 0 0 $borderWidths${[t.key]} $colors${i!=="default"&&i||t.borderColor}`),r&&(n.backgroundColor=r),n}var ko={$inputStyle:()=>e=>Ha(e,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>e=>Ha(e,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>e=>Ha(e,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>e=>Ha(e,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:gt,css:g$,createTheme:m$,globalCss:BS,keyframes:v$}=Dx({prefix:"leva",theme:jS(),utils:$n($n({},ko),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:e=>({"&:focus":ko.$focusStyle()(e)}),$focusWithin:e=>({"&:focus-within":ko.$focusStyle()(e)}),$hover:e=>({"&:hover":ko.$hoverStyle()(e)}),$active:e=>({"&:active":ko.$activeStyle()(e)})})});BS({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function DS(e,t){let{theme:i}=Jt(MS);if(!(e in i)||!(t in i[e]))return sg(Fi.THEME_ERROR,e,t),"";let r=t;for(;;){let n=i[e][r];if(typeof n=="string"&&n.charAt(0)==="$")r=n.substr(1);else return n}}var yg=gt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),bg=gt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${yg}`]:{paddingLeft:0}}),US=gt(bg,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),WS=gt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),HS=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],qS=["onUpdate"];function wg(e){let{innerLabel:t,value:i,onUpdate:r,onChange:n,onKeyDown:a,type:l,id:u,inputType:h="text",rows:g=0}=e,p=Dr(e,HS),{id:y,emitOnEditStart:S,emitOnEditEnd:C,disabled:_}=Ur(),T=u||y,L=Se(null),O=g>0,E=O?"textarea":"input",F=De(q=>G=>{let V=G.currentTarget.value;q(V)},[]);K.useEffect(()=>{let q=L.current,G=F(V=>{r(V),C()});return q==null||q.addEventListener("blur",G),()=>q==null?void 0:q.removeEventListener("blur",G)},[F,r,C]);let z=De(q=>{q.key==="Enter"&&F(r)(q)},[F,r]),U=Object.assign({as:E},O?{rows:g}:{},p);return K.createElement(WS,{textArea:O},t&&typeof t=="string"?K.createElement(bg,null,t):t,K.createElement(yg,Yi({levaType:l,ref:L,id:T,type:h,autoComplete:"off",spellCheck:"false",value:i,onChange:F(n),onFocus:()=>S(),onKeyPress:z,onKeyDown:a,disabled:_},U)))}function QS(e){let{onUpdate:t}=e,i=Dr(e,qS),r=De(a=>t(ES(a)),[t]),n=De(a=>{let l=a.key==="ArrowUp"?1:a.key==="ArrowDown"?-1:0;if(l){a.preventDefault();let u=a.altKey?.1:a.shiftKey?10:1;t(h=>parseFloat(h)+l*u)}},[t]);return K.createElement(wg,Yi({},i,{onUpdate:r,onKeyDown:n,type:"number"}))}var Ac=gt("div",{}),xg=gt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]});gt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${xg}::after`]:{opacity:.6},[`${Ac}:hover > & + ${xg}::after`]:{opacity:.6},[`${Ac}:hover > & > svg`]:{opacity:1}});var VS=gt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Ac}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),_g=gt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${VS} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),GS=gt(_g,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),YS=gt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),XS=gt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),Pc=gt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}});gt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${Pc}`]:{pointerEvents:"auto"}}}}}),gt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"});var ZS=gt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),KS=gt(wS,{fill:"$toolTipBackground"}),JS=["align"];function eE(){let{id:e,disable:t,disabled:i}=Ur();return K.createElement(K.Fragment,null,K.createElement(XS,{id:e+"__disable",type:"checkbox",checked:!i,onChange:()=>t(!i)}),K.createElement("label",{htmlFor:e+"__disable"}))}function tE(e){let{id:t,optional:i,hint:r}=Ur(),n=e.htmlFor||(t?{htmlFor:t}:null),a=!r&&typeof e.children=="string"?{title:e.children}:null;return K.createElement(K.Fragment,null,i&&K.createElement(eE,null),r!==void 0?K.createElement(vS,null,K.createElement(yS,{asChild:!0},K.createElement(Pc,Yi({},n,e))),K.createElement(bS,{side:"top",sideOffset:2},K.createElement(ZS,null,r,K.createElement(KS,null)))):K.createElement(Pc,Yi({},n,a,e)))}function qa(e){let{align:t}=e,i=Dr(e,JS),{value:r,label:n,key:a,disabled:l}=Ur(),{hideCopyButton:u}=NS(),h=!u&&a!==void 0,[g,p]=Me(!1),y=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[a]:r??""})),p(!0)}catch{sg(Fi.CLIPBOARD_ERROR,{[a]:r})}};return K.createElement(YS,{align:t,onPointerLeave:()=>p(!1)},K.createElement(tE,i),h&&!l&&K.createElement("div",{title:`Click to copy ${typeof n=="string"?n:a} value`},g?K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},K.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),K.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):K.createElement("svg",{onClick:y,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},K.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),K.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}var iE=["toggled"],rE=gt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function nE(e){let{toggled:t}=e,i=Dr(e,iE);return K.createElement(rE,Yi({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${t?0:-90}deg)`}},i),K.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}var sE=["input"];function Qa(e){let{input:t}=e,i=Dr(e,sE);return t?K.createElement(GS,i):K.createElement(_g,i)}function Sg(e,t){let{emitOnEditStart:i,emitOnEditEnd:r}=Ur();return $_(n=>{n.first&&(document.body.classList.add("leva__panel__dragged"),i==null||i());let a=e(n);return n.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),a},t)}var oE=gt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),aE=gt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),lE=gt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),uE=gt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),cE=gt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function hE({value:e,min:t,max:i,onDrag:r,step:n,initialValue:a}){let l=Se(null),u=Se(null),h=Se(0),g=DS("sizes","scrubberWidth"),p=Sg(({event:S,first:C,xy:[_],movement:[T],memo:L})=>{if(C){let{width:E,left:F}=l.current.getBoundingClientRect();h.current=E-parseFloat(g),L=(S==null?void 0:S.target)===u.current?e:lg((_-F)/E,t,i)}let O=L+lg(T/h.current,0,i-t);return r(vg(O,{step:n,initialValue:a})),L}),y=kS(e,t,i);return K.createElement(uE,Yi({ref:l},p()),K.createElement(aE,null,K.createElement(cE,{style:{left:0,right:`${(1-y)*100}%`}})),K.createElement(lE,{ref:u,style:{left:`calc(${y} * (100% - ${g}))`}}))}var dE=K.memo(({label:e,onUpdate:t,step:i,innerLabelTrim:r})=>{let[n,a]=Me(!1),l=Sg(({active:u,delta:[h],event:g,memo:p=0})=>(a(u),p+=h/2,Math.abs(p)>=1&&(t(y=>parseFloat(y)+Math.floor(p)*i*AS(g)),p=0),p));return K.createElement(US,Yi({dragging:n,title:e.length>1?e:""},l()),e.slice(0,r))});function pE({label:e,id:t,displayValue:i,onUpdate:r,onChange:n,settings:a,innerLabelTrim:l=1}){let u=l>0&&K.createElement(dE,{label:e,step:a.step,onUpdate:r,innerLabelTrim:l});return K.createElement(QS,{id:t,value:String(i),onUpdate:r,onChange:n,innerLabel:u})}function fE(){let e=Ur(),{label:t,value:i,onUpdate:r,settings:n,id:a}=e,{min:l,max:u}=n,h=u!==1/0&&l!==-1/0;return K.createElement(Qa,{input:!0},K.createElement(qa,null,t),K.createElement(oE,{hasRange:h},h&&K.createElement(hE,Yi({value:parseFloat(i),onDrag:r},n)),K.createElement(pE,Yi({},e,{id:a,label:"value",innerLabelTrim:h?0:1}))))}var gE=Dr($S,["sanitizeStep"]);$n({component:fE},gE);var mE=(e,t)=>tn().schema({options:tn().passesAnyOf(tn().object(),tn().array())}).test(t),vE=(e,{values:t})=>{if(t.indexOf(e)<0)throw Error("Selected value doesn't match Select options");return e},yE=(e,{values:t})=>t.indexOf(e),bE=e=>{let{value:t,options:i}=e,r,n;return Array.isArray(i)?(n=i,r=i.map(a=>String(a))):(n=Object.values(i),r=Object.keys(i)),"value"in e?n.includes(t)||(r.unshift(String(t)),n.unshift(t)):t=n[0],Object.values(i).includes(t)||(i[String(t)]=t),{value:t,settings:{keys:r,values:n}}},wE=Object.freeze({__proto__:null,schema:mE,sanitize:vE,format:yE,normalize:bE}),xE=gt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),Tc=gt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),_E=gt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${Tc}:focus + &`]:{$focusStyle:""},[`${Tc}:hover + &`]:{$hoverStyle:""}});function SE({displayValue:e,value:t,onUpdate:i,id:r,settings:n,disabled:a}){let{keys:l,values:u}=n,h=Se();return t===u[e]&&(h.current=l[e]),K.createElement(xE,null,K.createElement(Tc,{id:r,value:e,onChange:g=>i(u[Number(g.currentTarget.value)]),disabled:a},l.map((g,p)=>K.createElement("option",{key:g,value:p},g))),K.createElement(_E,null,h.current),K.createElement(nE,{toggled:!0}))}function EE(){let{label:e,value:t,displayValue:i,onUpdate:r,id:n,disabled:a,settings:l}=Ur();return K.createElement(Qa,{input:!0},K.createElement(qa,null,e),K.createElement(SE,{id:n,value:t,displayValue:i,onUpdate:r,settings:l,disabled:a}))}$n({component:EE},wE);var CE=e=>tn().string().test(e),kE=e=>{if(typeof e!="string")throw Error("Invalid string");return e},AE=({value:e,editable:t=!0,rows:i=!1})=>({value:e,settings:{editable:t,rows:typeof i=="number"?i:i?5:0}}),PE=Object.freeze({__proto__:null,schema:CE,sanitize:kE,normalize:AE}),TE=["displayValue","onUpdate","onChange","editable"],IE=gt("div",{whiteSpace:"pre-wrap"});function RE(e){let{displayValue:t,onUpdate:i,onChange:r,editable:n=!0}=e,a=Dr(e,TE);return n?K.createElement(wg,Yi({value:t,onUpdate:i,onChange:r},a)):K.createElement(IE,null,t)}function LE(){let{label:e,settings:t,displayValue:i,onUpdate:r,onChange:n}=Ur();return K.createElement(Qa,{input:!0},K.createElement(qa,null,e),K.createElement(RE,Yi({displayValue:i,onUpdate:r,onChange:n},t)))}$n({component:LE},PE);var OE=e=>tn().boolean().test(e),$E=e=>{if(typeof e!="boolean")throw Error("Invalid boolean");return e},FE=Object.freeze({__proto__:null,schema:OE,sanitize:$E}),ME=gt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function zE({value:e,onUpdate:t,id:i,disabled:r}){return K.createElement(ME,null,K.createElement("input",{id:i,type:"checkbox",checked:e,onChange:n=>t(n.currentTarget.checked),disabled:r}),K.createElement("label",{htmlFor:i},K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},K.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function NE(){let{label:e,value:t,onUpdate:i,disabled:r,id:n}=Ur();return K.createElement(Qa,{input:!0},K.createElement(qa,null,e),K.createElement(zE,{value:t,onUpdate:i,id:n,disabled:r}))}$n({component:NE},FE),gt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});var sn=class extends _r{constructor(e){super(),this.type="spacial-content",this.style={opacity:1},this.format="jpg",this.tileUrl=lx(e.url),this.id=e.id||`${this.tileUrl}--${e.scaleFactor}`,this.points=e.displayPoints?e.displayPoints:jr(e.points,en(e.scaleFactor)),this.tileWidth=e.tileWidth,this.display={x:0,y:0,width:e.width/e.scaleFactor,height:e.height/e.scaleFactor,points:e.points,scale:e.scaleFactor},e.format&&(this.format=e.format)}applyProps(e){if(e.style&&typeof e.style.opacity<"u"&&(this.style.opacity=e.style.opacity),e.service!==this.service&&(this.service=e.service),e.format?this.format=e.format:this.format="jpg",e.crop){this.cropData=e.crop;let t=Ie([...this.points]),i=t.length/5,r=e.crop.x||0,n=e.crop.y||0,a=e.crop.x+e.crop.width,l=e.crop.y+e.crop.height;for(let u=0;u<i;u++){let h=u*5;t[h+1]<a&&t[h+3]>r&&t[h+2]<l&&t[h+4]>n?(t[h+1]=rn(t[h+1],r,a),t[h+3]=rn(t[h+3],r,a),t[h+2]=rn(t[h+2],n,l),t[h+4]=rn(t[h+4],n,l)):t[h]=0}xr(t,Oi(-e.crop.x,-e.crop.y)),this.crop?this.crop.set(t):this.crop=t}}static fromTile(e,t,i,r,n,a,l){i.height=i.height?i.height:i.width;let u=l?Math.floor(t.width/r):Math.ceil(t.width/r),h=l?Math.floor(t.height/r):Math.ceil(t.height/r),g=Math.ceil(u/i.width),p=Math.ceil(h/i.height),y=ot.grid(g,p),S=ot.grid(g,p);for(let _=0;_<p;_++)for(let T=0;T<g;T++){let L=T*i.width,O=_*i.height;S.addPoints(L*r,O*r,T===g-1?t.width:(L+i.width)*r,_===p-1?t.height:(O+i.height)*r),y.addPoints(L,O,T===g-1?u:L+i.width,_===p-1?h:O+i.height)}let C=new sn({url:e,scaleFactor:r,points:y.build(),displayPoints:S.build(),width:t.width,height:t.height,tileWidth:i.width,format:a});return C.applyProps({service:n}),C}getImageUrl(e){let t=this.points.slice(e*5,e*5+5),i=t[3]-t[1],r=t[4]-t[2],n=Math.ceil(i/this.display.scale);return`${this.tileUrl}/${t[1]},${t[2]},${i},${r}/${n>this.tileWidth?this.tileWidth:n},/0/default.${this.format||"jpg"}`}getAllPointsAt(e,t,i){let r=bo(this.crop||this.points,e);return[[this,r,t]]}transform(e){xr(this.points,e)}getScheduledUpdates(e,t){return[]}},jE=class extends _r{constructor(){super(...arguments),this.type="spacial-content"}getAllPointsAt(e,t,i){return[[this,this.points,t]]}},Ic=class extends jE{constructor(e){super(),this.images=[],this.allImages=[],this.scaleFactors=[],this.aggregateBuffer=Ie(9),this.isFullyLoaded=!1,this.maxScaleFactor=0,this._scheduleSortByScales=!1,this._sortByScales=()=>{this._scheduleSortByScales=!1,this.allImages.sort((i,r)=>r.display.width-i.display.width),this.images=[];let t=.1;for(let i of this.allImages)if(!(i.display.width<this.renderOptions.minSize&&i.display.height<this.renderOptions.minSize&&!i.priority||i instanceof cr&&(i.display.width>this.renderOptions.maxImageSize||i.display.height>this.renderOptions.maxImageSize)&&!i.priority)){if(Math.abs(i.display.scale-t)<.25||i.priority){let r=this.images.pop();r&&(r instanceof cr||r.priority)?(i.priority&&this.images.push(i),this.images.push(r)):i&&this.images.push(i)}else i&&this.images.push(i);t=i.display.scale}this.images.length===0&&(this.images=[...this.allImages]),this.scaleFactors=this.images.map(i=>i.display.scale),this.maxScaleFactor=Math.max(...this.scaleFactors)},this.loadFullResource=async()=>{if(!this.isFullyLoaded&&this.lazyLoader){this.isFullyLoaded=!0;let t=await this.lazyLoader();this.addImages(t)}},this.fallback=[this.loadFullResource],this.id=e.id,this.points=ot.singleBox(e.width,e.height),this.lazyLoader=e.loadFullImages,e.loadFullImages||(this.isFullyLoaded=!0),this.display={x:0,y:0,points:ot.singleBox(e.width,e.height),height:e.height,width:e.width,scale:1},this.renderOptions=A({renderSmallestFallback:!0,renderLayers:2,minSize:255,maxImageSize:1024,quality:1.75},e.renderOptions||{}),this.addImages(e.images)}applyProps(e){typeof e.renderSmallestFallback<"u"&&e.renderSmallestFallback!==this.renderOptions.renderSmallestFallback&&(this.renderOptions.renderSmallestFallback=e.renderSmallestFallback),typeof e.renderLayers<"u"&&e.renderLayers!==this.renderOptions.renderLayers&&(this.renderOptions.renderLayers=e.renderLayers),typeof e.minSize<"u"&&e.minSize!==this.renderOptions.minSize&&(this.renderOptions.minSize=e.minSize),typeof e.maxImageSize<"u"&&e.maxImageSize!==this.renderOptions.maxImageSize&&(this.renderOptions.maxImageSize=e.maxImageSize),typeof e.quality<"u"&&e.quality!==this.renderOptions.quality&&(this.renderOptions.quality=e.quality)}appendChild(e){this.addImages([e])}removeChild(e){this.images.indexOf(e)!==-1&&(this.images=this.images.filter(t=>t!==e),this.sortByScales())}insertBefore(e,t){this.addImages([e])}hideInstance(){}addImages(e){for(let t of e)t.__parent=this,t.__owner=this.__owner;this.allImages.push(...e.filter(Boolean)),this.sortByScales()}sortByScales(){this._scheduleSortByScales=!0}getScheduledUpdates(e,t){return this._scheduleSortByScales?[this._sortByScales]:this.isFullyLoaded?[]:t>1/this.maxScaleFactor?this.fallback:[]}getAllPointsAt(e,t,i){if(this.images.length===0)return[];let r=ax(1/(i||1)/(window.devicePixelRatio||1),this.images,this.renderOptions.quality),n=this.images.length,a=t?Nr(t,Oi(this.x,this.y)):Oi(this.x,this.y);if(r!==this.images.length-1&&this.images[r+1]){let l=[];for(let g=n-1;g>=r;g--)l.push(g);let u=l[0];this.renderOptions.renderLayers&&(l=l.slice(-Math.min(l.length,this.renderOptions.renderLayers))),this.renderOptions.renderSmallestFallback&&l.indexOf(u)===-1&&l.unshift(u);let h=[];for(let g=0;g<l.length;g++)h.push(...this.images[l[g]].getAllPointsAt(e,a,i));return h}return this.images[r].getAllPointsAt(e,a,i)}};function Va(e,t,i,r,n){let a=Math.PI/180*n,l=Math.cos(a),u=Math.sin(a),h=l*(i-e)+u*(r-t)+e,g=l*(r-t)-u*(i-e)+t;return[h,g]}var $s=class extends _r{constructor(e,t){super(),this.type="world-object",this.intersectionBuffer=Ie(5),this.aggregateBuffer=Ie(9),this.invertedBuffer=Ie(9),this.rotation=0,this._updatedList=[];let{x:i=0,y:r=0}=t||{};e?(this.id=e.id||"",this.scale=1,this.layers=e.layers,this.points=Ie([1,i,r,i+e.width,r+e.height]),this.worldPoints=Ie([1,i,r,i+e.width,r+e.height]),this.filteredPointsBuffer=Ie(e.layers.length*5)):(this.id="",this.scale=1,this.layers=[],this.points=Ie(5),this.worldPoints=Ie(5),this.filteredPointsBuffer=Ie(5))}static createWithProps(e){let t=new $s;return t.applyProps(e),t}applyProps(e){let t=e.x||0,i=e.y||0;this.id=e.id;let r=typeof e.scale<"u"?e.scale:this.scale;this.points[0]=1,this.points[1]=t,this.points[2]=i,this.points[3]=t+e.width,this.points[4]=i+e.height,this.rotation=e.rotation||0,this.worldPoints[3]=this.worldPoints[1]+e.width,this.worldPoints[4]=this.worldPoints[2]+e.height,e.scale&&e.scale!==1&&this.atScale(r),this.scale=r}appendChild(e){e.points[0]===0&&e.points.set(this.points),e.__owner.value=this,this.addLayers([e])}removeChild(e){this.layers=this.layers.filter(t=>t!==e),this.filteredPointsBuffer=Ie(this.layers.length*5)}insertBefore(e,t){let i=this.layers.indexOf(t);if(i===-1||this.layers.indexOf(e)!==-1)return;let r=this.layers.slice(0,i),n=this.layers.slice(i);this.layers=[...r,e,...n]}hideInstance(){console.warn("hideInstance: not yet implemented")}getObjectsAt(e,t){if(this.rotation&&(e=this.applyRotation(e)),bo(this.points,e,this.filteredPointsBuffer)[0]===0)return[];let i=this.layers.length,r=[];for(let n=0;n<i;n++){let a=this.layers[n];if(t&&a.isShape){let l=jr(a.points,Oi(this.x,this.y));if(!a.intersects([e[1]-l[1],e[2]-l[2]]))continue}if(bo(jr(a.points,Oi(this.x,this.y)),e,this.filteredPointsBuffer)[0]!==0&&r.push(a),t){let l=a;r.push(...l.getObjectsAt(e,t))}}return r}applyRotation(e){if(this.rotation){let t={x:e[1],y:e[2]},i={x:e[1],y:e[4]},r={x:e[3],y:e[2]},n={x:e[3],y:e[4]},a=this.points[1]+(this.points[3]-this.points[1])/2,l=this.points[2]+(this.points[4]-this.points[2])/2,[u,h]=Va(a,l,t.x,t.y,this.rotation),[g,p]=Va(a,l,i.x,i.y,this.rotation),[y,S]=Va(a,l,r.x,r.y,this.rotation),[C,_]=Va(a,l,n.x,n.y,this.rotation),T=Math.min(u,g,y,C),L=Math.max(u,g,y,C),O=Math.min(h,p,S,_),E=Math.max(h,p,S,_);return Ie([e[0],T,O,L,E])}return e}getAllPointsAt(e,t,i){let r=Nr(Oi(this.x,this.y),en(this.scale),this.aggregateBuffer);this.rotation&&(e=this.applyRotation(e));let n=sx(e,this.points,this.intersectionBuffer),a=this.layers.length,l=[],u=jr(n,Nr(en(1/this.scale),Oi(-this.x,-this.y),this.invertedBuffer)),h=t?Nr(t,r,this.aggregateBuffer):r,g=i*this.scale;for(let p=0;p<a;p++)l.push(...this.layers[p].getAllPointsAt(u,h,g));return l}addLayers(e){let t=[];for(let i of e)this.layers.indexOf(i)===-1&&(t.push(i),i.points.length===5&&(i.points[1]<this.worldPoints[1]/this.scale||i.points[2]<this.worldPoints[2]/this.scale||i.points[3]>this.worldPoints[3]/this.scale||i.points[4]>this.worldPoints[4]/this.scale)&&(i.crop=i.crop||Ie([1,Math.max(this.worldPoints[1]/this.scale,i.points[1]),Math.max(this.worldPoints[2]/this.scale,i.points[2]),Math.min(this.worldPoints[3]/this.scale,i.points[3]),Math.min(this.worldPoints[4]/this.scale,i.points[4])])));this.layers=this.layers.concat(t),this.filteredPointsBuffer=Ie(this.layers.length*5)}getScheduledUpdates(e,t){let i=this.layers.length;this._updatedList=[];let r=t*this.scale;for(let n=0;n<i;n++){let a=this.layers[n].getScheduledUpdates(e,r);a&&this._updatedList.push(...a)}return this._updatedList}},on=class extends _r{constructor(e=0,t=0,i=100,r="left-to-right"){super(),this.id="world",this.aggregateBuffer=Ie(9),this.isDirty=!1,this.zones=[],this.triggerQueue=[],this.activatedEvents=[],this._updatedList=[],this.translationBuffer=Ie(9),this.needsRecalculate=!0,this.emptyPaintables=[],this.renderOrder=[],this.objects=[],this.subscriptions=[],this._propagateEventTargets=[],this._alreadyFlushed=[],this._width=e,this._height=t,this.aspectRatio=Number.isNaN(e/t)?1:e/t,this.viewingDirection=r,this.points=Ie(i*5),this.filteredPointsBuffer=Ie(i*5)}get x(){return 0}get y(){return 0}get width(){return this._width}get height(){return this._height}static withProps(e){let t=new on;return t.applyProps(e),t}applyProps(e){typeof e.width<"u"&&typeof e.height<"u"&&(e.width!==this._width||e.height!==this._height)&&this.resize(e.width,e.height),e.viewingDirection!==this.viewingDirection&&(this.viewingDirection=e.viewingDirection,this.triggerRepaint())}propagateTouchEvent(e,t,i){let r=[];for(let n of i)if(n.x&&n.y){let a=ot.singleBox(1,1,n.x,n.y);r.push(this.getObjectsAt(a,!0).reverse())}return r.map(n=>this.propagateEvent(e,t,n,{bubbles:!0,cancelable:!0}))}propagatePointerEvent(e,t,i,r,n={}){let a=ot.singleBox(1,1,i,r),l=this.getObjectsAt(a,!0).reverse();return this.propagateEvent(e,t,l,n)}propagateEvent(e,t,i,{bubbles:r=!1,cancelable:n=!1}={}){t.atlasTarget=this,this._propagateEventTargets.length=1,this._propagateEventTargets[0]=this;let a=!1;t.stopPropagation=()=>{a=!0};let l=i.length;for(let g=l-1;g>=0;g--){this._propagateEventTargets.unshift(i[g][0]);let p=i[g][1].length;if(p)for(let y=0;y<p;y++)this._propagateEventTargets.unshift(i[g][1][y])}let u=this._propagateEventTargets.length,h=!1;for(let g=0;g<u&&(t.atlasTarget=this._propagateEventTargets[g],t.atlasWorld=this,h=this._propagateEventTargets[g].dispatchEvent(e,t)||h,!a);g++);return h&&this.triggerRepaint(),this._propagateEventTargets}appendChild(e){let t=this.appendWorldObject(e);this.renderOrder.push(t/5)}removeChild(e){let t=this.objects.indexOf(e);if(t===-1){for(let i of this.objects)if(i&&i.id===e.id){this.removeChild(i);return}return}this.objects[t]=null,this.renderOrder=this.renderOrder.filter(i=>i!==t),this.points[t*5]=0,this.triggerRepaint(),this.needsRecalculate=!0}insertBefore(e,t){let i=this.objects.indexOf(t);if(i===-1)return;let r=this.appendWorldObject(e);this.renderOrder.splice(i-1,0,r/5)}hideInstance(){}asWorldObject(){return null}addZone(e){this.zones.push(e)}selectZone(e){if(typeof e=="string"){let t=this.zones.length;for(let i=0;i<t;i++)if(this.zones[i].id===e){this.selectedZone=i,this.trigger("zone-changed");return}}else this.zones[e]&&(this.selectedZone=e,this.trigger("zone-changed"))}deselectZone(){this.selectedZone=void 0}getActiveZone(){if(this.selectedZone)return this.zones[this.selectedZone]}hasActiveZone(){return typeof this.selectedZone<"u"}checkResizeInternalBuffer(){if(ox(this.points)===this.objects.length){let e=this.points,t=Ie(this.points.length*2);t.set(e,0),this.points=t}}appendWorldObject(e){this.checkResizeInternalBuffer();let t=this.objects.length*5,i=e.points;return e.points=this.points.subarray(this.objects.length*5,this.objects.length*5+5),e.points[1]=i[1],e.points[2]=i[2],e.points[3]=i[3],e.points[4]=i[4],this.objects.push(e),this.filteredPointsBuffer=Ie(this.objects.length*5),this.needsRecalculate=!0,this.triggerRepaint(),t}recalculateWorldSize(){let e=!1;if(this.needsRecalculate){let t=new Int32Array(this.objects.length),i=new Int32Array(this.objects.length),r=this.renderOrder.length;for(let l=0;l<r;l++){let u=this.renderOrder[l];this.objects[u]&&(t[l]=this.points[u*5+3],i[l]=this.points[u*5+4])}let n=Math.max(...t);n!==this._width&&(this._width=n,e=!0);let a=Math.max(...i);a!==this._height&&(this._height=a,e=!0),e&&this.trigger("recalculate-world-size",{width:n,height:a}),this.needsRecalculate=!1}return e}addObjectAt(e,t){t.width&&!t.height?t.height=t.width/e.width*e.height:t.height&&!t.width&&(t.width=t.height/e.height*e.width),(!t||!t.width||!t.height)&&(t.width=e.width,t.height=e.height);let{width:i,x:r,y:n}=t,a=i/e.width;this.checkResizeInternalBuffer(),this.points.set(ot.singleBox(e.width,e.height,0,0),this.objects.length*5);let l=new $s(e);return l.points=this.points.subarray(this.objects.length*5,this.objects.length*5+5),this.objects.push(l),this.scaleWorldObject(this.objects.length-1,a),this.translateWorldObject(this.objects.length-1,r,n),this.filteredPointsBuffer=Ie(this.points.length*2),this.triggerRepaint(),this.needsRecalculate=!0,l}scaleWorldObject(e,t){xr(this.points.subarray(e*5,e*5+5),wo(t,this.points[e*5+1],this.points[e*5+2]));let i=this.objects[e];i&&(i.atScale(t),this.triggerRepaint())}translateWorldObject(e,t,i){xr(this.points.subarray(e*5,e*5+5),Oi(t,i));let r=this.objects[e];r&&(r.translate(t,i),this.triggerRepaint())}resize(e,t){return this._width=e,this._height=t,this.aspectRatio=e/t,this.triggerRepaint(),this}getObjects(){return this.objects}getPoints(){return this.points}getPointsFromViewer(e,t){let i=ot.singleBox(e.width,e.height,e.x,e.y);return this.getPointsAt(i,t,e.scale)}addLayoutSubscriber(e){return this.subscriptions.push(e),()=>{this.subscriptions.splice(this.subscriptions.indexOf(e),1)}}getScheduledUpdates(e,t){let i=bo(this.points,e,this.filteredPointsBuffer),r=this.objects.length;this._updatedList=[];for(let n=0;n<r;n++)if(i[n*5]!==0){if(!this.objects[n])continue;this._updatedList.push(...this.objects[n].getScheduledUpdates(e,t))}return this._updatedList}getObjectsAt(e,t=!1){let i=this.getActiveZone(),r=bo(this.points,e,this.filteredPointsBuffer),n=this.renderOrder.length,a=[];for(let l=0;l<n;l++){let u=this.renderOrder[l];if(r[u*5]!==0){let h=this.objects[u];if(!h||i&&i.objects.indexOf(h)===-1)continue;if(h.type!=="world-object"){a.push([h,[h]]);continue}t?a.push([h,h.getObjectsAt(e,t)]):a.push([h,this.emptyPaintables])}}return a}getPointsAt(e,t,i=1){let r=this.getObjectsAt(e),n=Nr(en(i),Oi(-e[1],-e[2]),this.translationBuffer),a=t?Nr(t,n,this.aggregateBuffer):n,l=r.length,u=[];for(let h=0;h<l;h++)r[h]&&u.push(...r[h][0].getAllPointsAt(e,a,i));return u}flushSubscriptions(){if(this.triggerQueue.length){this._alreadyFlushed=[];let e=this.triggerQueue.length;for(let t=0;t<e;t++){if(this._alreadyFlushed.indexOf(this.triggerQueue[t][0])!==-1)continue;typeof this.triggerQueue[t][1]>"u"&&this._alreadyFlushed.push(this.triggerQueue[t][0]);let i=this.subscriptions.length;for(let r=0;r<i;r++)this.subscriptions[r].apply(null,this.triggerQueue[t])}this.triggerQueue=[]}}trigger(e,t){this.triggerQueue.push([e,t])}triggerEventActivation(){this.trigger("event-activation")}triggerRepaint(){this.trigger("repaint")}gotoRegion(e){this.trigger("goto-region",e)}goHome(e=!1){this.trigger("go-home",{immediate:e})}zoomTo(e,t,i){this.trigger("zoom-to",{point:t,factor:e,stream:i})}zoomIn(e){this.trigger("zoom-to",{point:e,factor:.5})}zoomOut(e){this.trigger("zoom-to",{point:e,factor:2})}constraintBounds(e){this.trigger("constrain-bounds",{immediate:e})}},Ga=/([0-9]+(px|em)\s+)+(solid)\s+(.*)/g,Ya={},BE=["backgroundColor","opacity","boxShadow","borderColor","borderWidth","borderStyle","outlineColor","outlineWidth","outlineOffset","outlineStyle"],Fs=class extends _r{constructor(){super(),this.type="spacial-content",this.hoverEvents=!1,this.activeEvents=!1,this.display={x:0,y:0,scale:1,width:-1,height:-1,points:Ie(5)},this._parsed={border:{id:null,match:[]},outline:{id:null,match:[]}},this.props={},this.addHover=()=>{this.hovering=!0,this.__revision++},this.removeHover=()=>{this.hovering=!1,this.pressing=!1,this.__revision++},this.addPress=()=>{this.pressing=!0,this.__revision++},this.removePress=()=>{this.pressing=!1,this.__revision++},this.id=Ia(12),this.points=Ie(5)}getAllPointsAt(e,t){return[[this,this.points,t]]}applyProps(e={}){let t=!1;if(e.interactive!==this.props.interactive&&(t=!0,this.props.interactive=e.interactive),e.style){let i=e.border||e.style.border;if(i!==this._parsed.border.id)if(!i)this._parsed.border.id=null,this._parsed.border.match=[];else{let r=Ya[i]||Ga.exec(i)||Ga.exec(i);r&&(this._parsed.border.id=i,this._parsed.border.match=Ya[i]=r)}if(this._parsed.border.id&&(e.style.borderWidth=this._parsed.border.match[1],e.style.borderStyle="solid",e.style.borderColor=this._parsed.border.match[4]),e.style.outline!==this._parsed.outline.id)if(!e.style.outline)this._parsed.outline.id=null,this._parsed.outline.match=[];else{let r=Ya[e.style.outline]||Ga.exec(e.style.outline)||Ga.exec(e.style.outline);r&&(this._parsed.outline.id=e.style.outline,this._parsed.outline.match=Ya[e.style.outline]=r)}this._parsed.outline.id&&(e.style.outlineWidth=this._parsed.outline.match[1],e.style.outlineStyle="solid",e.style.outlineColor=this._parsed.outline.match[4]),this.props.style=e.style,e.backgroundColor&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.backgroundColor,t=!0),e.style.background&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.style.background,t=!0);for(let r of BE)if(this.props.style[r]!==e.style[r]){t=!0;break}e.style[":hover"]!==this.props.hoverStyles&&(this.props.hoverStyles=e.style[":hover"],this.hoverEvents||(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),t=!0),e.style[":active"]!==this.props.pressStyles&&(this.props.pressStyles=e.style[":active"],this.activeEvents||(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),t=!0)}e.href!==this.props.href&&(this.props.href=e.href,t=!0),e.hrefTarget!==this.props.hrefTarget&&(this.props.hrefTarget=e.hrefTarget,t=!0),e.title!==this.props.title&&(this.props.title=e.title,t=!0),e.className!==this.props.className&&(this.props.className=e.className,e.className&&!this.hoverEvents&&(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),e.className&&!this.activeEvents&&(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),t=!0),e.relativeSize!==this.props.relativeSize&&(this.props.relativeSize=e.relativeSize,t=!0),e.relativeStyle!==this.props.relativeStyle&&(this.props.relativeStyle=e.relativeStyle,t=!0),e.html!==this.props.html&&(this.props.html=e.html,t=!0),e.target&&(e.target.width!==this.display.width||e.target.height!==this.display.height||e.target.x!==this.points[1]||e.target.y!==this.points[2])&&(t=!0,this.points=ot.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.points=ot.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.width=e.target.width,this.display.height=e.target.height),t&&this.__revision++}},Xa=/([0-9]+(px|em)\s+)+(solid)\s+(.*)/g,Za={},DE=["backgroundColor","opacity","boxShadow","borderColor","borderWidth","borderStyle","outlineColor","outlineWidth","outlineOffset","outlineStyle"],Eg=class extends _r{constructor(){super(),this.type="spacial-content",this.isShape=!0,this.hoverEvents=!1,this.activeEvents=!1,this.display={x:0,y:0,scale:1,width:-1,height:-1,points:Ie(5)},this.boundingBox=null,this._parsed={border:{id:null,match:[]},outline:{id:null,match:[]}},this.props={},this.shape={type:"none"},this.addHover=()=>{this.hovering=!0,this.__revision++},this.removeHover=()=>{this.hovering=!1,this.pressing=!1,this.__revision++},this.addPress=()=>{this.pressing=!0,this.__revision++},this.removePress=()=>{this.pressing=!1,this.__revision++},this.id=Ia(12),this.points=Ie(5),this.shape={type:"none"}}updateBoundingBox(){if(this.shape.type==="none")return;let e=this.shape.points;if(this.shape.points.length>2){let t=Math.min(...e.map(a=>a[0])),i=Math.min(...e.map(a=>a[1])),r=Math.max(0,...e.map(a=>a[0])),n=Math.max(0,...e.map(a=>a[1]));this.boundingBox={x:t,y:i,width:r-t,height:n-i};return}this.boundingBox=null}intersects(e){if(!e||this.shape.type==="none")return!1;let[t,i]=e,r=this.shape.points,n=this.boundingBox;if(n||(this.updateBoundingBox(),n=this.boundingBox),!n||t<n.x||t>n.x+n.width||i<n.y||i>n.height+n.y)return!1;let a=!1;for(let l=0,u=r.length-1;l<r.length;u=l++)r[l][1]>i!=r[u][1]>i&&t<(r[u][0]-r[l][0])*(i-r[l][1])/(r[u][1]-r[l][1])+r[l][0]&&(a=!a);return a}getAllPointsAt(e,t){return e[3]-e[1]===1&&e[4]-e[2]===1?this.intersects([e[1],e[2]])?[[this,this.points,t]]:[]:[[this,this.points,t]]}applyProps(e={}){let t=!1;if(e.points)if(this.shape.type!=="polygon"||this.shape.points.length!==e.points.length)this.shape={type:"polygon",points:e.points,open:e.open},this.updateBoundingBox();else{let i=!1,r=e.points.length;for(let n=0;n<r;n++)if(e.points[n][0]!==this.shape.points[n][0]||e.points[n][1]!==this.shape.points[n][1]){i=!0;break}i&&(this.shape={type:"polygon",points:e.points,open:e.open},this.updateBoundingBox())}if(e.interactive!==this.props.interactive&&(t=!0,this.props.interactive=e.interactive),(e.open||e.open===!1)&&(t=!0,this.shape.open=e.open),e.style){let i=e.border||e.style.border;if(i!==this._parsed.border.id)if(!i)this._parsed.border.id=null,this._parsed.border.match=[];else{let r=Za[i]||Xa.exec(i)||Xa.exec(i);r&&(this._parsed.border.id=i,this._parsed.border.match=Za[i]=r)}if(this._parsed.border.id&&(e.style.borderWidth=this._parsed.border.match[1],e.style.borderStyle="solid",e.style.borderColor=this._parsed.border.match[4]),e.style.outline!==this._parsed.outline.id)if(!e.style.outline)this._parsed.outline.id=null,this._parsed.outline.match=[];else{let r=Za[e.style.outline]||Xa.exec(e.style.outline)||Xa.exec(e.style.outline);r&&(this._parsed.outline.id=e.style.outline,this._parsed.outline.match=Za[e.style.outline]=r)}this._parsed.outline.id&&(e.style.outlineWidth=this._parsed.outline.match[1],e.style.outlineStyle="solid",e.style.outlineColor=this._parsed.outline.match[4]),this.props.style=e.style,e.backgroundColor&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.backgroundColor,t=!0),e.style.background&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.style.background,t=!0);for(let r of DE)if(this.props.style[r]!==e.style[r]){t=!0;break}e.style[":hover"]!==this.props.hoverStyles&&(this.props.hoverStyles=e.style[":hover"],this.hoverEvents||(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),t=!0),e.style[":active"]!==this.props.pressStyles&&(this.props.pressStyles=e.style[":active"],this.activeEvents||(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),t=!0)}e.href!==this.props.href&&(this.props.href=e.href,t=!0),e.hrefTarget!==this.props.hrefTarget&&(this.props.hrefTarget=e.hrefTarget,t=!0),e.title!==this.props.title&&(this.props.title=e.title,t=!0),e.className!==this.props.className&&(this.props.className=e.className,e.className&&!this.hoverEvents&&(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),e.className&&!this.activeEvents&&(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),t=!0),e.relativeSize!==this.props.relativeSize&&(this.props.relativeSize=e.relativeSize,t=!0),e.relativeStyle!==this.props.relativeStyle&&(this.props.relativeStyle=e.relativeStyle,t=!0),e.html!==this.props.html&&(this.props.html=e.html,t=!0),e.target&&(e.target.width!==this.display.width||e.target.height!==this.display.height||e.target.x!==this.points[1]||e.target.y!==this.points[2])&&(t=!0,this.points=ot.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.points=ot.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.width=e.target.width,this.display.height=e.target.height),t&&this.__revision++}},Ao=class extends _r{constructor(){super(),this.type="spacial-content",this.color="#000",this.text="",this.display={x:0,y:0,scale:1,width:100,height:100,points:Ie(5)},this.interactive=!1,this.props={font:"18px Arial, sans-serif",lineHeight:1,textAlign:"left",verticalAlign:"top",paddingX:0,paddingY:0,fitParent:!1,lineBreak:"auto",strokeText:!1,sizeToFill:!1,maxFontSizeToFill:void 0,allowNewLine:!0,justifyLines:!1,renderHDPI:!1,textDecoration:"none",interactive:!1,relativeSize:!1},this.id="",this.points=Ie(5)}getAllPointsAt(e,t){return[[this,this.points,t]]}applyProps(e){var t=e,{id:i,target:r,text:n,color:a,backgroundColor:l,fontSize:u=18,interactive:h,fontFamily:g="Arial, sans-serif"}=t,p=le(t,["id","target","text","color","backgroundColor","fontSize","interactive","fontFamily"]);p.font=`${u}px ${g}`,this.interactive=h||!1,typeof n<"u"&&(this.text=n||""),a&&(this.color=a),l&&(this.backgroundColor=l),i&&(this.id=i),r&&(this.points=ot.singleBox(r.width,r.height,r.x,r.y),this.display.points=this.points,this.display.width=r.width,this.display.height=r.height),this.props=A(A({},this.props),p),this.__revision++}},Ot=Math.pow,Ka=Math.sqrt,Po=Math.sin,Cg=Math.cos,To=Math.PI,Ja=1.70158,el=Ja*1.525,kg=Ja+1,Ag=2*To/3,Pg=2*To/4.5,tl=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},Er={linear:e=>e,easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-Ot(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-Ot(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-Ot(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-Ot(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-Ot(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-Ot(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-Ot(-2*e+2,5)/2},easeInSine:function(e){return 1-Cg(e*To/2)},easeOutSine:function(e){return Po(e*To/2)},easeInOutSine:function(e){return-(Cg(To*e)-1)/2},easeInExpo:function(e){return e===0?0:Ot(2,10*e-10)},easeOutExpo:function(e){return e===1?1:1-Ot(2,-10*e)},easeInOutExpo:function(e){return e===0?0:e===1?1:e<.5?Ot(2,20*e-10)/2:(2-Ot(2,-20*e+10))/2},easeInCirc:function(e){return 1-Ka(1-Ot(e,2))},easeOutCirc:function(e){return Ka(1-Ot(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-Ka(1-Ot(2*e,2)))/2:(Ka(1-Ot(-2*e+2,2))+1)/2},easeInBack:function(e){return kg*e*e*e-Ja*e*e},easeOutBack:function(e){return 1+kg*Ot(e-1,3)+Ja*Ot(e-1,2)},easeInOutBack:function(e){return e<.5?Ot(2*e,2)*((el+1)*2*e-el)/2:(Ot(2*e-2,2)*((el+1)*(e*2-2)+el)+2)/2},easeInElastic:function(e){return e===0?0:e===1?1:-Ot(2,10*e-10)*Po((e*10-10.75)*Ag)},easeOutElastic:function(e){return e===0?0:e===1?1:Ot(2,-10*e)*Po((e*10-.75)*Ag)+1},easeInOutElastic:function(e){return e===0?0:e===1?1:e<.5?-(Ot(2,20*e-10)*Po((20*e-11.125)*Pg))/2:Ot(2,-20*e+10)*Po((20*e-11.125)*Pg)/2+1},easeInBounce:function(e){return 1-tl(1-e)},easeOutBounce:tl,easeInOutBounce:function(e){return e<.5?(1-tl(1-2*e))/2:(1+tl(2*e-1))/2}},UE=class{constructor(e){this.runtime=e,this.pendingTransition={from:Ie(5),to:Ie(5),elapsed_time:0,done:!0,total_time:0,timingFunction:Er.easeInOutQuad,constrain:!1}}hasPending(){return!this.pendingTransition.done}getPendingTransition(){return this.pendingTransition}getPendingFrom(){return this.pendingTransition.from}customTransition(e){e(this.pendingTransition)}stopTransition(){this.pendingTransition.from=Ie(this.runtime.target),this.pendingTransition.to=Ie(this.runtime.target),this.pendingTransition.done=!0,this.pendingTransition.elapsed_time=0,this.pendingTransition.total_time=0}runTransition(e,t){if(!this.pendingTransition.done){let i=this.pendingTransition,r=i.total_time===0?0:(i.elapsed_time+t)/i.total_time,n=i.total_time===0?1:r===0?0:i.timingFunction(r);e[1]=i.from[1]+(i.to[1]-i.from[1])*n,e[2]=i.from[2]+(i.to[2]-i.from[2])*n,e[3]=i.from[3]+(i.to[3]-i.from[3])*n,e[4]=i.from[4]+(i.to[4]-i.from[4])*n,this.pendingTransition.elapsed_time+=t,this.pendingTransition.elapsed_time>=this.pendingTransition.total_time&&(this.pendingTransition.done=!0,this.pendingTransition.constrain&&this.constrainBounds({transition:{duration:this.pendingTransition.total_time===0?0:500,easing:Er.easeOutExpo}}))}}zoomTo(e,{origin:t,stream:i=!1,transition:r}={}){let n=this.runtime.getZoomedPosition(e,{origin:t}),a=Math.abs(1-e);this.applyTransition(n,r,{duration:2e3*a,easing:Er.easeOutExpo,constrain:!0},{stream:!1})}constrainBounds({transition:e,panPadding:t=0}={}){let[i,r]=this.runtime.constrainBounds(this.runtime.target,{panPadding:t});i&&(this.applyTransition(r,e,{duration:500,easing:Er.easeOutQuart,constrain:!1}),this.runtime.updateNextFrame())}applyTransition(e,t,i,{stream:r}={}){this.pendingTransition.from=Ie(this.runtime.target),this.pendingTransition.to=e,r||(this.pendingTransition.elapsed_time=0),this.pendingTransition.done=!1,this.pendingTransition.total_time=typeof(t==null?void 0:t.duration)<"u"?t.duration:typeof(i==null?void 0:i.duration)<"u"?i.duration:1e3,this.pendingTransition.constrain=typeof(t==null?void 0:t.constrain)<"u"?t.constrain:typeof(i==null?void 0:i.constrain)<"u"?i.constrain:!1,this.pendingTransition.timingFunction=(t==null?void 0:t.easing)||(i==null?void 0:i.easing)||Er.easeInOutSine}goToRegion(e,{transition:t}={}){let i=this.runtime.clampRegion(e);this.applyTransition(ot.singleBox(i.width,i.height,i.x,i.y),t,{duration:1e3,easing:Er.easeOutExpo,constrain:!0}),this.runtime.updateNextFrame()}},il=class{constructor(e,t,i,r=[],n){this.id=Ia(),this.ready=!1,this.transformBuffer=Ie(500),this.lastTarget=Ie(5),this.zoomBuffer=Ie(5),this.logNextRender=!1,this.pendingUpdate=!0,this.isCommitting=!1,this.firstRender=!0,this.mode="explore",this.controllers=[],this.controllersRunning=!1,this.controllerStopFunctions=[],this.maxScaleFactor=1,this._viewerToWorld={x:0,y:0},this._lastGoodScale=1,this.hooks={useFrame:[],useBeforeFrame:[],useAfterPaint:[],useAfterFrame:[]},this.hookOptions={filters:{grayscale:0,contrast:0,brightness:0,saturate:0,sepia:0,invert:0,hueRotate:0,blur:0}},this._viewport={x:0,y:0,width:0,height:0},this.setViewport=a=>{let l=Math.round(typeof a.x>"u"?this.target[1]:a.x),u=Math.round(typeof a.y>"u"?this.target[2]:a.y);a.width?this.target[3]=l+a.width:this.target[3]=this.target[3]-this.target[1]+l,a.height?this.target[4]=u+a.height:this.target[4]=this.target[4]-this.target[2]+u,Math.abs(this.target[1]-l)>.01&&(this.target[1]=l),Math.abs(this.target[2]-u)>.01&&(this.target[2]=u),this.pendingUpdate=!0},this.render=a=>{let l=a-this.lastTime;if(this.isCommitting||this.fpsLimit&&l<1e3/this.fpsLimit){this.stopId=window.requestAnimationFrame(this.render);return}this.lastTime=a,this.world.flushSubscriptions(),this.stopId=window.requestAnimationFrame(this.render),this.hook("useFrame",l);let u=this.pendingUpdate,h=this.renderer.pendingUpdate();if(this.transitionManager.hasPending()&&(this.transitionManager.runTransition(this.target,l),this.pendingUpdate=!0,this.updateControllerPosition()),!this.firstRender&&!u&&!h&&this.target[0]===this.lastTarget[0]&&this.target[1]===this.lastTarget[1]&&this.target[2]===this.lastTarget[2]&&this.target[3]===this.lastTarget[3]&&this.target[4]===this.lastTarget[4])return;this.hook("useBeforeFrame",l),this.renderer.beforeFrame(this.world,l,this.target,this.hookOptions);let g=this.getScaleFactor(),p=this.renderer.getPointsAt(this.world,this.target,this.aggregate,g),y=p.length;for(let _=0;_<y;_++){let T=p[_][0],L=p[_][1],O=p[_][2],E=O?jr(L,O,this.transformBuffer):L;this.renderer.prepareLayer(T,T.__parent&&O?jr(T.__parent.crop||T.__parent.points,O):E);let F=E.length/5;for(let z=0;z<F;z++){let U=z*5;E[U]!==0&&(this.renderer.paint(T,z,E[U+1],E[U+2],E[U+3]-E[U+1],E[U+4]-E[U+2]),this.hook("useAfterPaint",T))}this.renderer.finishLayer(T,L)}this.renderer.afterFrame(this.world,l,this.target,this.hookOptions),this.hook("useAfterFrame",l),this.lastTarget[0]=this.target[0],this.lastTarget[1]=this.target[1],this.lastTarget[2]=this.target[2],this.lastTarget[3]=this.target[3],this.lastTarget[4]=this.target[4],this.firstRender=!1,this.pendingUpdate=!1,this.logNextRender=!1,this.renderer.isReady()&&(this.ready=!0,this.world.trigger("ready")),this.world.flushSubscriptions();let S=this.world.getScheduledUpdates(this.target,g),C=S.length;if(C>0)for(let _=0;_<C;_++){let T=S[C-_-1]();T?T.then(()=>{this.pendingUpdate=!0}):this.pendingUpdate=!0}},this.renderer=e,this.world=t,this.options=A({maxOverZoom:1,maxUnderZoom:1,visibilityRatio:1.5},n||{}),this.target=ot.projection(i),this.manualHomePosition=!1,this.pendingUpdate=!0,this.homePosition=ot.projection(this.world),this.manualFocalPosition=!1,this.focalPosition=this.target,this.updateFocalPosition(),this.transitionManager=new UE(this),this.aggregate=en(1),this.world.addLayoutSubscriber(a=>{a==="repaint"&&(this.pendingUpdate=!0),a==="recalculate-world-size"&&(this.manualHomePosition||(this.setHomePosition(),this.goHome()),this.updateFocalPosition())}),this.lastTime=performance.now(),this.controllers=r,this.render(this.lastTime),this.startControllers()}get x(){return this.target[1]}set x(e){this.target[1]=e}get y(){return this.target[2]}set y(e){this.target[2]=e}get x2(){return this.target[3]}set x2(e){this.target[3]=e}get y2(){return this.target[4]}set y2(e){this.target[4]=e}get width(){return this.target[3]-this.target[1]}set width(e){this.target[3]=this.target[1]+e}get height(){return this.target[4]-this.target[2]}set height(e){this.target[4]=this.target[2]=e}setHomePosition(e){this.homePosition.set(ot.projection(e||this.world)),this.pendingUpdate=!0}startControllers(){if(!this.controllersRunning){for(let e of this.controllers)this.controllerStopFunctions.push(e.start(this));this.controllersRunning=!0}}stopControllers(){if(this.controllersRunning){for(let e of this.controllerStopFunctions)e();this.controllersRunning=!1,this.controllerStopFunctions=[]}}updateControllerPosition(){for(let e of this.controllers)e.updatePosition(this.x,this.y,this.width,this.height)}triggerResize(){this.renderer.triggerResize&&this.renderer.triggerResize(),this.pendingUpdate=!0}addController(e){this.controllers.push(e),this.controllersRunning&&e.start(this),this.pendingUpdate=!0}cover(){return this.goHome({cover:!0})}getRendererScreenPosition(){return this.renderer.getRendererScreenPosition()}updateRendererScreenPosition(){this.pendingUpdate=!0,this.renderer.resize()}setOptions(e){this.options=A(A({},this.options),e)}goHome(e={}){if(this.world.width<=0||this.world.height<=0)return;let t=this.getScaleFactor(),i=e.position?{x:e.position[1],y:e.position[2],width:e.position[3]-e.position[1],height:e.position[4]-e.position[2]}:{x:this.homePosition[1],y:this.homePosition[2],width:this.homePosition[3]-this.homePosition[1],height:this.homePosition[4]-this.homePosition[2]},r=this.width*t,n=this.height*t,a=i.width/r,l=i.height/n,u=r/n;if(e.cover?a>l:a<l){let h=u*i.height,g=(h-i.width)/2;this.target[1]=Math.round(-g+i.x),this.target[2]=Math.round(i.y),this.target[3]=Math.round(h-g+i.x),this.target[4]=Math.round(i.height+i.y)}else{let h=i.width/u,g=(h-i.height)/2;this.target[1]=Math.round(i.x),this.target[2]=Math.round(i.y-g),this.target[3]=Math.round(i.x+i.width),this.target[4]=Math.round(i.y+h-g)}this.constrainBounds(this.target),this.updateControllerPosition()}resize(e,t,i,r){this.updateFocalPosition(e-t,i-r);let n=t/e,a=r/i;this.target[3]=this.target[1]+(this.target[3]-this.target[1])*n,this.target[4]=this.target[2]+(this.target[4]-this.target[2])*a,this.goHome({position:this.focalPosition}),this.renderer.resize(t,r),this.pendingUpdate=!0}updateFocalPosition(e,t){if(!this.manualFocalPosition){let i=this.width,r=this.height,n=Math.min(i,r),a=0,l=0,u=this.x+a,h=this.y+l;if(i<r){let g=this.height-this.width;this.focalPosition=ot.projection({x:u,y:h+g/2,width:n-a*2,height:n-l*2}),this.pendingUpdate=!0}else{let g=this.width-this.height;this.focalPosition=ot.projection({x:u+g/2,y:h,width:n-a*2,height:n-l*2}),this.pendingUpdate=!0}}}getViewport(){return this._viewport.x=this.target[1],this._viewport.y=this.target[2],this._viewport.width=this.target[3]-this.target[1],this._viewport.height=this.target[4]-this.target[2],this._viewport}constrainBounds(e,{panPadding:t=0,ref:i=!1}={}){let{minX:r,maxX:n,minY:a,maxY:l}=this.getBounds({target:e,padding:t}),u=!1,h=i?e:Ie(e),g=Math.round(e[3]-e[1]),p=Math.round(e[4]-e[2]);return r>e[1]&&(u=!0,h[1]=r,h[3]=r+g),a>e[2]&&(u=!0,h[2]=a,h[4]=a+p),n<e[1]&&(u=!0,h[1]=n,h[3]=n+g),l<e[2]&&(u=!0,h[2]=l,h[4]=l+p),[u,h]}getBounds(e){let t=e.target||this.target,i=e.padding,r=this.options.visibilityRatio,n=Math.abs(1-r);if(this.world.hasActiveZone()){let O=this.world.getActiveZone();if(O){let E=t[3]-t[1]<O.points[3]-O.points[1],F=t[4]-t[2]<O.points[4]-O.points[2];return{minX:E?O.points[1]-i:O.points[1]+(O.points[3]-O.points[1])/2-(t[3]-t[1])/2,maxX:F?O.points[2]-i:O.points[2]+(O.points[4]-O.points[2])/2-(t[4]-t[2])/2,minY:E?O.points[3]+i:O.points[1]+(O.points[3]-O.points[1])/2-(t[3]-t[1])/2,maxY:F?O.points[4]+i:O.points[2]+(O.points[4]-O.points[2])/2-(t[4]-t[2])/2}}}let a=t[3]-t[1],l=this.world.width,u=-a*n,h=l-a-u,g=t[4]-t[2],p=this.world.height,y=-g*n,S=p-g-y,C=Math.round(Math.max(u,h)),_=Math.round(Math.min(u,h)),T=Math.round(Math.max(y,S)),L=Math.round(Math.min(y,S));return{minX:_,maxX:C,minY:L,maxY:T}}getScaleFactor(e=!1){let t=this.renderer.getScale(this.target[3]-this.target[1],this.target[4]-this.target[2],e);return t===0?this._lastGoodScale:(this._lastGoodScale=t,t)}getZoomedPosition(e,{origin:t,fromPos:i}){var r;let n=i?{width:i[3]-i[1],height:i[4]-i[2]}:void 0,a=n?this.renderer.getScale(n.width,n.height):this.getScaleFactor(),l=n?n.width:this.width,u=n?n.height:this.height,h=(r=this.getRendererScreenPosition())==null?void 0:r.width,g=this.world.width,p=h?h/g:1,y=this.options.maxUnderZoom,S=Math.max(p||1,this.options.maxOverZoom),C=1/e,_=a*C;if(C<1){let L=l*a,O=u*a,E=this.world.width/L,F=this.world.height/O;if(E>F){let z=this.world.width*_,U=~~(l*a)*y;z<U&&(e=this.world.width*a/(l*a*y))}else{let z=this.world.height*_,U=~~(u*a)*y;z<U&&(e=this.world.height*a/(u*a*y))}}else _>S&&(e=a/S);let T=jr(this.target,wo(e,t?t.x:this.target[1]+(this.target[3]-this.target[1])/2,t?t.y:this.target[2]+(this.target[4]-this.target[2])/2),this.zoomBuffer);return this.constrainBounds(T,{ref:!0,panPadding:100}),T}clampRegion({x:e,y:t,width:i,height:r,padding:n=0}){let a=this.width,l=this.height,u=i/a<r/l,h=e-n,g=t-n,p=i+n*2,y=r+n*2;if(u){let C=y/l*a;return{x:h-(C-p)/2,y:g,width:C,height:y}}let S=p/a*l;return{x:h,y:g-(S-y)/2,width:p,height:S}}viewerToWorld(e,t){let i=this.getScaleFactor();return this._viewerToWorld.x=this.target[1]+e/i,this._viewerToWorld.y=this.target[2]+t/i,this._viewerToWorld}worldToViewer(e,t,i,r){let n=ot.singleBox(i,r,e,t);return xr(n,Nr(en(this.getScaleFactor()),Oi(-this.target[1],-this.target[2]))),{x:n[1],y:n[2],width:n[3]-n[1],height:n[4]-n[2],strand:n}}setScale(e,t){xr(this.target,wo(e,t?t.x:this.target[1]+(this.target[3]-this.target[1])/2,t?t.y:this.target[2]+(this.target[4]-this.target[2])/2)),this.pendingUpdate=!0}syncTo(e){let t=this.target;return this.target=e.target,this.pendingUpdate=!0,()=>{this.target=t}}stop(){return typeof this.stopId<"u"&&(window.cancelAnimationFrame(this.stopId),this.stopId=void 0),()=>{this.render(performance.now())}}reset(){this.renderer.reset()}selectZone(e){this.world.selectZone(e),this.pendingUpdate=!0}deselectZone(){this.world.deselectZone(),this.pendingUpdate=!0}hook(e,t){let i=this.hooks[e].length;if(i!==0)for(let r=0;r<i;r++)this.hooks[e][r](t)}registerHook(e,t){return this.hooks[e].push(t),()=>{this.hooks[e]=this.hooks[e].filter(i=>i!==t)}}updateNextFrame(){this.pendingUpdate=!0}},Io=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,WE=typeof AbortController=="function",rl=WE?AbortController:class{constructor(){this.signal=new Tg}abort(e=new Error("This operation was aborted")){this.signal.reason=e,this.signal.dispatchEvent({type:"abort",target:this.signal})}},HE=typeof AbortSignal=="function",qE=typeof rl.AbortSignal=="function",Tg=HE?AbortSignal:qE?rl.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(e){e.type==="abort"&&(this.aborted=!0,this.onabort(e),this._listeners.forEach(t=>t(e),this))}onabort(){}addEventListener(e,t){e==="abort"&&this._listeners.push(t)}removeEventListener(e,t){e==="abort"&&(this._listeners=this._listeners.filter(i=>i!==t))}},Rc=new Set,Lc=(e,t)=>{let i=`LRU_CACHE_OPTION_${e}`;nl(i)&&$c(i,`${e} option`,`options.${t}`,Ms)},Oc=(e,t)=>{let i=`LRU_CACHE_METHOD_${e}`;if(nl(i)){let{prototype:r}=Ms,{get:n}=Object.getOwnPropertyDescriptor(r,e);$c(i,`${e} method`,`cache.${t}()`,n)}},QE=(e,t)=>{let i=`LRU_CACHE_PROPERTY_${e}`;if(nl(i)){let{prototype:r}=Ms,{get:n}=Object.getOwnPropertyDescriptor(r,e);$c(i,`${e} property`,`cache.${t}`,n)}},Ig=(...e)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...e):console.error(...e)},nl=e=>!Rc.has(e),$c=(e,t,i,r)=>{Rc.add(e);let n=`The ${t} is deprecated. Please use ${i} instead.`;Ig(n,"DeprecationWarning",e,r)},an=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),Rg=e=>an(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?sl:null:null,sl=class extends Array{constructor(e){super(e),this.fill(0)}},VE=class{constructor(e){if(e===0)return[];let t=Rg(e);this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Ms=class{constructor(e={}){let{max:t=0,ttl:i,ttlResolution:r=1,ttlAutopurge:n,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:u,dispose:h,disposeAfter:g,noDisposeOnSet:p,noUpdateTTL:y,maxSize:S=0,maxEntrySize:C=0,sizeCalculation:_,fetchMethod:T,fetchContext:L,noDeleteOnFetchRejection:O,noDeleteOnStaleGet:E,allowStaleOnFetchRejection:F,allowStaleOnFetchAbort:z,ignoreFetchAbort:U}=e,{length:q,maxAge:G,stale:V}=e instanceof Ms?{}:e;if(t!==0&&!an(t))throw new TypeError("max option must be a nonnegative integer");let ae=t?Rg(t):Array;if(!ae)throw new Error("invalid max value: "+t);if(this.max=t,this.maxSize=S,this.maxEntrySize=C||this.maxSize,this.sizeCalculation=_||q,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=T||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=L,!this.fetchMethod&&L!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(t).fill(null),this.valList=new Array(t).fill(null),this.next=new ae(t),this.prev=new ae(t),this.head=0,this.tail=0,this.free=new VE(t),this.initialFill=1,this.size=0,typeof h=="function"&&(this.dispose=h),typeof g=="function"?(this.disposeAfter=g,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!O,this.allowStaleOnFetchRejection=!!F,this.allowStaleOnFetchAbort=!!z,this.ignoreFetchAbort=!!U,this.maxEntrySize!==0){if(this.maxSize!==0&&!an(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!an(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!u||!!V,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=an(r)||r===0?r:1,this.ttlAutopurge=!!n,this.ttl=i||G||0,this.ttl){if(!an(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let H="LRU_CACHE_UNBOUNDED";nl(H)&&(Rc.add(H),Ig("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",H,Ms))}V&&Lc("stale","allowStale"),G&&Lc("maxAge","ttl"),q&&Lc("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new sl(this.max),this.starts=new sl(this.max),this.setItemTTL=(i,r,n=Io.now())=>{if(this.starts[i]=r!==0?n:0,this.ttls[i]=r,r!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(i)&&this.delete(this.keyList[i])},r+1);a.unref&&a.unref()}},this.updateItemAge=i=>{this.starts[i]=this.ttls[i]!==0?Io.now():0};let e=0,t=()=>{let i=Io.now();if(this.ttlResolution>0){e=i;let r=setTimeout(()=>e=0,this.ttlResolution);r.unref&&r.unref()}return i};this.getRemainingTTL=i=>{let r=this.keyMap.get(i);return r===void 0?0:this.ttls[r]===0||this.starts[r]===0?1/0:this.starts[r]+this.ttls[r]-(e||t())},this.isStale=i=>this.ttls[i]!==0&&this.starts[i]!==0&&(e||t())-this.starts[i]>this.ttls[i]}updateItemAge(e){}setItemTTL(e,t,i){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new sl(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,t,i,r)=>{if(this.isBackgroundFetch(t))return 0;if(!an(i))if(r){if(typeof r!="function")throw new TypeError("sizeCalculation must be a function");if(i=r(t,e),!an(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.addItemSize=(e,t)=>{if(this.sizes[e]=t,this.maxSize){let i=this.maxSize-this.sizes[e];for(;this.calculatedSize>i;)this.evict(!0)}this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,t){}requireSize(e,t,i,r){if(i||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let t=this.tail;!(!this.isValidIndex(t)||((e||!this.isStale(t))&&(yield t),t===this.head));)t=this.prev[t]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let t=this.head;!(!this.isValidIndex(t)||((e||!this.isStale(t))&&(yield t),t===this.tail));)t=this.next[t]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())this.isBackgroundFetch(this.valList[e])||(yield[this.keyList[e],this.valList[e]])}*rentries(){for(let e of this.rindexes())this.isBackgroundFetch(this.valList[e])||(yield[this.keyList[e],this.valList[e]])}*keys(){for(let e of this.indexes())this.isBackgroundFetch(this.valList[e])||(yield this.keyList[e])}*rkeys(){for(let e of this.rindexes())this.isBackgroundFetch(this.valList[e])||(yield this.keyList[e])}*values(){for(let e of this.indexes())this.isBackgroundFetch(this.valList[e])||(yield this.valList[e])}*rvalues(){for(let e of this.rindexes())this.isBackgroundFetch(this.valList[e])||(yield this.valList[e])}[Symbol.iterator](){return this.entries()}find(e,t={}){for(let i of this.indexes())if(e(this.valList[i],this.keyList[i],this))return this.get(this.keyList[i],t)}forEach(e,t=this){for(let i of this.indexes())e.call(t,this.valList[i],this.keyList[i],this)}rforEach(e,t=this){for(let i of this.rindexes())e.call(t,this.valList[i],this.keyList[i],this)}get prune(){return Oc("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let t of this.rindexes({allowStale:!0}))this.isStale(t)&&(this.delete(this.keyList[t]),e=!0);return e}dump(){let e=[];for(let t of this.indexes({allowStale:!0})){let i=this.keyList[t],r=this.valList[t],n=this.isBackgroundFetch(r)?r.__staleWhileFetching:r;if(n===void 0)continue;let a={value:n};if(this.ttls){a.ttl=this.ttls[t];let l=Io.now()-this.starts[t];a.start=Math.floor(Date.now()-l)}this.sizes&&(a.size=this.sizes[t]),e.unshift([i,a])}return e}load(e){this.clear();for(let[t,i]of e){if(i.start){let r=Date.now()-i.start;i.start=Io.now()-r}this.set(t,i.value,i)}}dispose(e,t,i){}set(e,t,{ttl:i=this.ttl,start:r,noDisposeOnSet:n=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL}={}){if(a=this.requireSize(e,t,a,l),this.maxEntrySize&&a>this.maxEntrySize)return this.delete(e),this;let h=this.size===0?void 0:this.keyMap.get(e);if(h===void 0)h=this.newIndex(),this.keyList[h]=e,this.valList[h]=t,this.keyMap.set(e,h),this.next[this.tail]=h,this.prev[h]=this.tail,this.tail=h,this.size++,this.addItemSize(h,a),u=!1;else{this.moveToTail(h);let g=this.valList[h];t!==g&&(this.isBackgroundFetch(g)?g.__abortController.abort(new Error("replaced")):n||(this.dispose(g,e,"set"),this.disposeAfter&&this.disposed.push([g,e,"set"])),this.removeItemSize(h),this.valList[h]=t,this.addItemSize(h,a))}if(i!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),u||this.setItemTTL(h,i,r),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let t=this.head,i=this.keyList[t],r=this.valList[t];return this.isBackgroundFetch(r)?r.__abortController.abort(new Error("evicted")):(this.dispose(r,i,"evict"),this.disposeAfter&&this.disposed.push([r,i,"evict"])),this.removeItemSize(t),e&&(this.keyList[t]=null,this.valList[t]=null,this.free.push(t)),this.head=this.next[t],this.keyMap.delete(i),this.size--,t}has(e,{updateAgeOnHas:t=this.updateAgeOnHas}={}){let i=this.keyMap.get(e);return i!==void 0&&!this.isStale(i)?(t&&this.updateItemAge(i),!0):!1}peek(e,{allowStale:t=this.allowStale}={}){let i=this.keyMap.get(e);if(i!==void 0&&(t||!this.isStale(i))){let r=this.valList[i];return this.isBackgroundFetch(r)?r.__staleWhileFetching:r}}backgroundFetch(e,t,i,r){let n=t===void 0?void 0:this.valList[t];if(this.isBackgroundFetch(n))return n;let a=new rl;i.signal&&i.signal.addEventListener("abort",()=>a.abort(i.signal.reason));let l={signal:a.signal,options:i,context:r},u=(y,S=!1)=>{let{aborted:C}=a.signal,_=i.ignoreFetchAbort&&y!==void 0;return C&&!_&&!S?h(a.signal.reason):(this.valList[t]===p&&(y===void 0?p.__staleWhileFetching?this.valList[t]=p.__staleWhileFetching:this.delete(e):this.set(e,y,l.options)),y)},h=y=>{let{aborted:S}=a.signal,C=S&&i.allowStaleOnFetchAbort,_=C||i.allowStaleOnFetchRejection,T=_||i.noDeleteOnFetchRejection;if(this.valList[t]===p&&(!T||p.__staleWhileFetching===void 0?this.delete(e):C||(this.valList[t]=p.__staleWhileFetching)),_)return p.__staleWhileFetching;if(p.__returned===p)throw y},g=(y,S)=>{this.fetchMethod(e,n,l).then(C=>y(C),S),a.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(y(),i.allowStaleOnFetchAbort&&(y=C=>u(C,!0)))})},p=new Promise(g).then(u,h);return p.__abortController=a,p.__staleWhileFetching=n,p.__returned=null,t===void 0?(this.set(e,p,l.options),t=this.keyMap.get(e)):this.valList[t]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:t=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:y=this.ignoreFetchAbort,allowStaleOnFetchAbort:S=this.allowStaleOnFetchAbort,fetchContext:C=this.fetchContext,forceRefresh:_=!1,signal:T}={}){if(!this.fetchMethod)return this.get(e,{allowStale:t,updateAgeOnGet:i,noDeleteOnStaleGet:r});let L={allowStale:t,updateAgeOnGet:i,noDeleteOnStaleGet:r,ttl:n,noDisposeOnSet:a,size:l,sizeCalculation:u,noUpdateTTL:h,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:S,ignoreFetchAbort:y,signal:T},O=this.keyMap.get(e);if(O===void 0){let E=this.backgroundFetch(e,O,L,C);return E.__returned=E}else{let E=this.valList[O];if(this.isBackgroundFetch(E))return t&&E.__staleWhileFetching!==void 0?E.__staleWhileFetching:E.__returned=E;if(!_&&!this.isStale(O))return this.moveToTail(O),i&&this.updateItemAge(O),E;let F=this.backgroundFetch(e,O,L,C);return t&&F.__staleWhileFetching!==void 0?F.__staleWhileFetching:F.__returned=F}}get(e,{allowStale:t=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet}={}){let n=this.keyMap.get(e);if(n!==void 0){let a=this.valList[n],l=this.isBackgroundFetch(a);return this.isStale(n)?l?t?a.__staleWhileFetching:void 0:(r||this.delete(e),t?a:void 0):l?void 0:(this.moveToTail(n),i&&this.updateItemAge(n),a)}}connect(e,t){this.prev[t]=e,this.next[e]=t}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return Oc("del","delete"),this.delete}delete(e){let t=!1;if(this.size!==0){let i=this.keyMap.get(e);if(i!==void 0)if(t=!0,this.size===1)this.clear();else{this.removeItemSize(i);let r=this.valList[i];this.isBackgroundFetch(r)?r.__abortController.abort(new Error("deleted")):(this.dispose(r,e,"delete"),this.disposeAfter&&this.disposed.push([r,e,"delete"])),this.keyMap.delete(e),this.keyList[i]=null,this.valList[i]=null,i===this.tail?this.tail=this.prev[i]:i===this.head?this.head=this.next[i]:(this.next[this.prev[i]]=this.next[i],this.prev[this.next[i]]=this.prev[i]),this.size--,this.free.push(i)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return t}clear(){for(let e of this.rindexes({allowStale:!0})){let t=this.valList[e];if(this.isBackgroundFetch(t))t.__abortController.abort(new Error("deleted"));else{let i=this.keyList[e];this.dispose(t,i,"delete"),this.disposeAfter&&this.disposed.push([t,i,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Oc("reset","clear"),this.clear}get length(){return QE("length","size"),this.size}static get AbortController(){return rl}static get AbortSignal(){return Tg}},GE=Ms,Lg=/(-?[0-9]+(px|em)\s+|0\s+)(-?[0-9]+(px|em)\s+|0\s+)(-?[0-9]+(px|em)\s+|0\s+)?(-?[0-9]+(px|em)\s+|0\s+)?(.*)/g,Og={},YE=typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes("firefox"),ol={},XE=class{constructor(e,t){this.imagesPending=0,this.imagesLoaded=0,this.imageIdsLoaded=[],this.frameIsRendering=!1,this.pendingDrawCall=!1,this.firstMeaningfulPaint=!1,this.parallelTasks=8,this.frameTasks=0,this.loadingQueueOrdered=!0,this.loadingQueue=[],this.currentTask=Promise.resolve(),this.tasksRunning=0,this.averageJobTime=64,this.lastKnownScale=1,this.visible=[],this.previousVisible=[],this.drawCalls=[],this.invalidated=[],this._worker=()=>{if(this.loadingQueue.length){let i=this.loadingQueue.pop();i&&(this.tasksRunning++,this.frameTasks++,this.currentTask=i.task().then(()=>{this.tasksRunning--}).catch(()=>{this.tasksRunning--}))}},this._scheduled=0,this._doWork=()=>{this.loadingQueue.length===0&&this.tasksRunning===0&&this._scheduled&&(clearInterval(this._scheduled),this._scheduled=0);let i=this.parallelTasks||1;!this.firstMeaningfulPaint&&this.loadingQueue.length&&(i=this.loadingQueue.length);for(let r=0;r<=i;r++)this._worker()},this.canvas=e,this.rendererPosition=e.getBoundingClientRect(),this.ctx=e.getContext("2d",{alpha:!0}),this.ctx.imageSmoothingEnabled=!0,this.options=t||{},this.canvas.style.opacity="0",this.canvas.style.transition="opacity .3s",this.dpi=(t==null?void 0:t.dpi)||1,this.hostCache=t!=null&&t.lruCache?new GE({maxSize:1024*512*512,dispose:(i,r,n)=>{this.invalidated.push(r),i.width=0,i.height=0},sizeCalculation:(i,r)=>i.width*i.height}):{store:{},get(i){return this.store[i]},set(i,r){this.store[i]=r}}}getCanvasDims(){return{width:this.canvas.width/this.dpi,height:this.canvas.height/this.dpi}}resize(){this.rendererPosition=this.canvas.getBoundingClientRect()}isReady(){return this.firstMeaningfulPaint}afterFrame(e){if(this.clearTransform(),this.lastPaintedObject=void 0,this.frameIsRendering=!1,this.imagesPending=Math.max(0,this.imagesPending-this.imagesLoaded),this.imagesLoaded=0,this.loadingQueueOrdered||(this.loadingQueue=this.loadingQueue.sort((t,i)=>t.network&&t.scale===i.scale?i.distance-t.distance:t.scale<i.scale?-1:1),this.loadingQueueOrdered=!0),this.previousVisible=this.visible,this.pendingDrawCall=!!this.drawCalls.length,this.pendingDrawCall)for(let t=0;t<this.drawCalls.length;t++){let i=this.drawCalls.shift();i&&i()}this.doOffscreenWork(),this.options.debug&&this.stats&&this.stats.end()}doOffscreenWork(){this.frameTasks=0,this.loadingQueue.length&&(this._worker(),this.loadingQueue.length&&(this._scheduled||(this._scheduled=setInterval(this._doWork,0))))}getScale(e,t,i){if(Number.isNaN(e)||Number.isNaN(t))return this.lastKnownScale;let r=this.getCanvasDims(),n=r.width/e,a=r.height/t,l=(n<a?a:n)*(i&&this.dpi||1);return Number.isNaN(l)||(this.lastKnownScale=l),this.lastKnownScale}beforeFrame(e,t,i,r){var n;this.options.debug&&this.stats&&this.stats.begin(),this.frameIsRendering=!0,this.visible=[],this.options.beforeFrame&&this.options.beforeFrame(t);let a=this.getCanvasDims();if(this.ctx.globalAlpha=1,this.ctx.fillStyle=(n=this.canvas.dataset.background)!=null?n:"rgb(0, 0, 0)",this.ctx.fillRect(0,0,a.width,a.height),r.enableFilters&&(r.filters.brightness||r.filters.contrast||r.filters.grayscale||r.filters.invert||r.filters.sepia||r.filters.saturate||r.filters.hueRotate||r.filters.blur)){let l="";r.filters.brightness&&(l+=`brightness(${~~(100+r.filters.brightness*100)}%) `),r.filters.contrast&&(l+=`contrast(${~~(100+r.filters.contrast*100)}%) `),r.filters.grayscale&&(l+=`grayscale(${~~(r.filters.grayscale*100)}%) `),r.filters.invert&&(l+=`invert(${~~(r.filters.invert*100)}%) `),r.filters.sepia&&(l+=`sepia(${~~(r.filters.sepia*100)}%) `),r.filters.saturate&&(l+=`saturate(${~~(100+r.filters.saturate*100)}%) `),r.filters.hueRotate&&(l+=`hue-rotate(${r.filters.hueRotate}deg) `),r.filters.blur&&(l+=`blur(${r.filters.blur}px) `),this.ctx.filter=l}else this.ctx.filter="none"}applyTransform(e,t,i,r,n){let a=e.__owner.value;if(a&&a.rotation){this.ctx.save();let l=t+r/2,u=i+n/2;this.ctx.translate(l,u),this.ctx.rotate(a.rotation*Math.PI/180),this.ctx.translate(-l,-u),this.lastPaintedObject=a}}clearTransform(){this.lastPaintedObject&&(this.lastPaintedObject.rotation&&this.ctx.restore(),this.lastPaintedObject=void 0)}paint(e,t,i,r,n,a){let l=this.ctx.globalAlpha;if(e instanceof cr||e instanceof sn){if(e.display.rotation){this.ctx.save();let g=i+n/2,p=r+a/2;e.crop&&(g-=e.crop[t*5+1],p-=e.crop[t*5+2]),this.ctx.translate(g,p),this.ctx.rotate(e.display.rotation*Math.PI/180),this.ctx.translate(-g,-p)}if(this.visible.push(e),typeof e.style&&e.style.opacity!=="undefined"){if(!e.style.opacity)return;this.ctx.globalAlpha=e.style.opacity}try{let g=e.__host.canvas,p=this.getCanvasDims();if((g.indices.indexOf(t)===-1||this.invalidated.indexOf(g.canvases[t])!==-1)&&this.schedulePaintToCanvas(g,e,t,La({x:i+n/2,y:r+n/2},{x:p.width/2,y:p.height/2})),!this.firstMeaningfulPaint)return;let y=this.hostCache.get(g.canvases[t]);if(y)if(e.crop&&e.cropData){if(e.crop[t*5]){let S=[e.crop[t*5+1]/e.display.scale-e.display.points[t*5+1],e.crop[t*5+2]/e.display.scale-e.display.points[t*5+2],1+(e.crop[t*5+3]-e.crop[t*5+1])/e.display.scale,1+(e.crop[t*5+4]-e.crop[t*5+2])/e.display.scale];S[0]+=e.cropData.x/e.display.scale,S[1]+=e.cropData.y/e.display.scale;let C=e.x*this.lastKnownScale,_=e.y*this.lastKnownScale,T=[i+C,r+_,n,a];T[0]+=C,T[1]+=_,this.ctx.drawImage(y,S[0],S[1],S[2],S[3],T[0],T[1],T[2]+1,T[3]+1)}}else YE?this.ctx.drawImage(y,0,0,e.display.points[t*5+3]-e.display.points[t*5+1],e.display.points[t*5+4]-e.display.points[t*5+2],i,r,n+1,a+1):this.ctx.drawImage(y,0,0,e.display.points[t*5+3]-e.display.points[t*5+1],e.display.points[t*5+4]-e.display.points[t*5+2],i,r,n+Number.MIN_VALUE+.5,a+Number.MIN_VALUE+.5)}catch{}e.display.rotation&&this.ctx.restore()}let u=e instanceof Fs&&this.options.box,h=e instanceof Eg&&this.options.polygon;if((u||h)&&!e.props.className&&!e.props.html&&!e.props.href){if(this.visible.push(e),e.props.style){let g=Object.assign({},e.props.style||{},e.hovering?e.props.hoverStyles:{},e.pressing?e.props.pressStyles:{}),p=e.props.relativeStyle?1:n/e.width;typeof g.opacity<"u"&&(this.ctx.globalAlpha=g.opacity);let y=0;typeof g.borderWidth<"u"&&(y=parseInt(g.borderWidth,10)*p);let S=0;typeof g.outlineWidth<"u"&&(S=parseInt(g.outlineWidth,10)*p);let C=0;if(typeof g.outlineOffset<"u"&&(C=parseInt(g.outlineOffset,10)*p),g.borderColor&&(this.ctx.strokeStyle=g.borderColor),g.boxShadow){let _=g.boxShadow.split(/,(?![^(]*\))/);for(let T of _){let L=Og[T]||Lg.exec(T)||Lg.exec(T);Og[T]=L,L&&(this.ctx.save(),this.ctx.shadowOffsetX=parseInt(L[1])*this.dpi*p,this.ctx.shadowOffsetY=parseInt(L[3])*this.dpi*p,this.ctx.shadowBlur=parseInt(L[5])*this.dpi*p,this.ctx.shadowColor=L[9],this.ctx.fillStyle="rgba(0,0,0,1)",this.ctx.fillRect(i+y,r+y,n,a),this.ctx.restore())}}if(this.ctx.fillStyle=g.backgroundColor||"transparent",this.ctx.lineWidth=y,h){let _=e.shape,T=_.points||[],L=T.length;this.ctx.beginPath();for(let O=0;O<L;O++)this.ctx.lineTo(i+T[O][0]*this.lastKnownScale,r+T[O][1]*this.lastKnownScale);_.open||this.ctx.closePath(),y&&this.ctx.stroke(),_.open||this.ctx.fill()}else y&&this.ctx.strokeRect(i+y/2,r+y/2,n+y,a+y),this.ctx.fillRect(i+y,r+y,n,a);S&&(g.outlineColor&&(this.ctx.strokeStyle=g.outlineColor),this.ctx.lineWidth=S,this.ctx.strokeRect(i-S/2-C,r-S/2-C,n+y*2+S+C*2,a+y*2+S+C*2))}this.ctx.globalAlpha=l}}loadImage(e,t,i,r=!1){if(ol[e]&&ol[e].naturalWidth>0){t(ol[e]);return}try{let n=!1;r||setTimeout(()=>{n||this.loadImage(e,t,i,!0)},3e3);let a=document.createElement("img");a.decoding="auto",a.onload=function(){n=!0,t(a),ol[e]=a,a.onload=null},this.options.crossOrigin&&(a.crossOrigin="anonymous"),a.src=e,a.complete&&a.onload({}),a.width}catch(n){console.log("image error",n),i(n)}}schedulePaintToCanvas(e,t,i,r){this.imagesPending++,e.indices.push(i);let n=`${t.id}--${t.display.scale}-${i}`,a=this.invalidated.indexOf(n);a!==-1&&this.invalidated.splice(a,1),e.canvases[i]=n,t.__host.canvas.loading=!0,this.loadingQueueOrdered=!1,this.loadingQueue.push({id:n,scale:t.display.scale,network:!0,distance:r,task:()=>new Promise(l=>{if(this.visible.indexOf(t)===-1){this.imagesPending--,e.indices.splice(e.indices.indexOf(i),1),l();return}let u=t.getImageUrl(i);this.loadImage(u,h=>{this.loadingQueue.push({id:n,scale:t.display.scale,distance:r,task:()=>new Promise(g=>{this.imageIdsLoaded.includes(n)||(this.imagesLoaded++,this.imageIdsLoaded.push(n)),e.loaded.push(i),e.loaded.length===e.indices.length&&(e.loading=!1);let p=t.display.points.slice(i*5,i*5+5),y=document.createElement("canvas"),S=y.getContext("2d");y.width=p[3]-p[1],y.height=p[4]-p[2],this.hostCache.set(e.canvases[i],y),this.drawCalls.push(()=>{S.drawImage(h,0,0,p[3]-p[1],p[4]-p[2]),g()})})}),l()},h=>{this.imagesPending--,e.indices.splice(e.indices.indexOf(i),1),l()})})})}afterPaintLayer(e,t){}prepareLayer(e,t){e.__owner.value&&(e.cropData?(this.lastKnownScale*(1/e.display.scale),this.applyTransform(e,t[1],t[2],t[3]-t[1],t[4]-t[2])):this.applyTransform(e,t[1],t[2],t[3]-t[1],t[4]-t[2])),(!e.__host||!e.__host.canvas)&&(e instanceof cr||e instanceof sn)&&this.createImageHost(e)}finishLayer(){this.lastPaintedObject&&this.clearTransform()}createImageHost(e){e.__host=e.__host?e.__host:{},e.__host.canvas={canvas:void 0,canvases:[],indices:[],loaded:[],loading:!1}}getPointsAt(e,t,i,r){return e.getPointsAt(t,i,r)}getViewportBounds(e,t,i){let r=e.getActiveZone();if(r){let n=t[3]-t[1]<r.points[3]-r.points[1],a=t[4]-t[2]<r.points[4]-r.points[2];return{x1:n?r.points[1]-i:r.points[1]+(r.points[3]-r.points[1])/2-(t[3]-t[1])/2,y1:a?r.points[2]-i:r.points[2]+(r.points[4]-r.points[2])/2-(t[4]-t[2])/2,x2:n?r.points[3]+i:r.points[1]+(r.points[3]-r.points[1])/2-(t[3]-t[1])/2,y2:a?r.points[4]+i:r.points[2]+(r.points[4]-r.points[2])/2-(t[4]-t[2])/2}}return null}pendingUpdate(){let e=!this.pendingDrawCall&&this.drawCalls.length===0&&this.imagesPending===0&&this.loadingQueue.length===0&&this.tasksRunning===0;return!e&&this.visible.length===0&&setTimeout(()=>{this.canvas.style.opacity="1",this.firstMeaningfulPaint=!0},500),!this.firstMeaningfulPaint&&e&&this.visible.length?(this.canvas.style.opacity="1",this.firstMeaningfulPaint=e,!0):this.options.debug?!0:!e}getRendererScreenPosition(){return this.rendererPosition}reset(){this.loadingQueue=[],this.drawCalls=[]}},$g=class{constructor(e){this.renderers=[];for(let t of e)t&&this.renderers.push(t);this.length=this.renderers.length}afterFrame(e,t,i,r){for(let n=0;n<this.length;n++)this.renderers[n].afterFrame(e,t,i,r)}afterPaintLayer(e,t){for(let i=0;i<this.length;i++)this.renderers[i].afterPaintLayer(e,t)}beforeFrame(e,t,i,r){for(let n=0;n<this.length;n++)this.renderers[n].beforeFrame(e,t,i,r)}triggerResize(){for(let e=0;e<this.length;e++){let t=this.renderers[e];t.triggerResize&&t.triggerResize()}}getPointsAt(e,t,i,r){return this.renderers[0].getPointsAt(e,t,i,r)}getScale(e,t){return this.renderers[0].getScale(e,t)}getViewportBounds(e,t,i){return this.renderers[0].getViewportBounds(e,t,i)}getRendererScreenPosition(){return this.renderers[0].getRendererScreenPosition()}isReady(){for(let e=0;e<this.length;e++)if(!this.renderers[e].isReady())return!1;return!0}paint(e,t,i,r,n,a){for(let l=0;l<this.length;l++)this.renderers[l].paint(e,t,i,r,n,a)}pendingUpdate(){for(let e=0;e<this.length;e++)if(this.renderers[e].pendingUpdate())return!0;return!1}prepareLayer(e,t){for(let i=0;i<this.length;i++)this.renderers[i].prepareLayer(e,t)}finishLayer(e,t){for(let i=0;i<this.length;i++)this.renderers[i].finishLayer(e,t)}resize(e,t){for(let i=0;i<this.length;i++)this.renderers[i].resize(e,t)}reset(){for(let e=0;e<this.length;e++)this.renderers[e].reset()}},ZE=class{constructor(e){this.heightRatio=1,this.widthRatio=1,this.target=new Float32Array(5),this.delta=0,this.renderNextFrame=!0,this.canvas=e,this.initialWidth=e.width,this.initialHeight=e.height,this.context=e.getContext("2d"),this.context.globalAlpha=.5,this.aggregate=en(1)}isReady(){return!0}resize(){this.initialWidth=this.canvas.width,this.initialHeight=this.canvas.height,this.renderNextFrame=!0}afterFrame(e,t,i){if(this.renderNextFrame){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);let r=this.initialWidth/e.width,n=this.initialHeight/e.height,a=this.widthRatio>this.heightRatio?r:n;if(this.target=i,this.bounds){let l=e.getPointsAt(this.bounds,this.aggregate,a);for(let[u,h]of l)if(u instanceof cr&&u.__host.canvas){let g=h.length/5;for(let p=0;p<g;p++)u.__host.canvas.canvases[p]&&(h[p+1]*a,h[p+2]*a,(h[p+3]-h[p+1])*a,(h[p+4]-h[p+2])*a)}}e.getPoints().forEach((l,u,h)=>{if(u%5===0&&l){let g={x1:h[u+1]*a,y1:h[u+2]*a,x2:h[u+3]*a,y2:h[u+4]*a,width:(h[u+3]-h[u+1])*a,height:(h[u+4]-h[u+2])*a};this.context.strokeStyle="red",this.context.strokeRect(g.x1,g.y1,g.width,g.height)}}),i&&(this.context.strokeStyle="red",this.context.lineWidth=window.devicePixelRatio||1,this.context.strokeRect(i[1]*a,i[2]*a,(i[3]-i[1])*a,(i[4]-i[2])*a))}}getActiveZone(e){return null}getPointsAt(e,t,i,r){return e.getPointsAt(t,i,r)}getScale(e,t){return 1}beforeFrame(e,t){this.bounds=ot.singleBox(e.width,e.height)}drawImage(){}afterPaintLayer(e,t){}paint(e,t,i,r,n,a){this.renderNextFrame=!0}prepareLayer(e){}pendingUpdate(){return!1}hasActiveZone(){return!1}getViewportBounds(e,t,i){return null}getRendererScreenPosition(){return this.canvas.getBoundingClientRect()}finishLayer(){}reset(){}},Fg=!1,Fn,Fc,Mc,al,ll,Mg,ul,zc,Nc,jc,zg,Bc,Dc,Ng,jg;function Bi(){if(!Fg){Fg=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),i=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(Bc=/\b(iPhone|iP[ao]d)/.exec(e),Dc=/\b(iP[ao]d)/.exec(e),jc=/Android/i.exec(e),Ng=/FBAN\/\w+;/i.exec(e),jg=/Mobile/i.exec(e),zg=!!/Win64/.exec(e),t){Fn=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,Fn&&document&&document.documentMode&&(Fn=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(e);Mg=r?parseFloat(r[1])+4:Fn,Fc=t[2]?parseFloat(t[2]):NaN,Mc=t[3]?parseFloat(t[3]):NaN,al=t[4]?parseFloat(t[4]):NaN,al?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),ll=t&&t[1]?parseFloat(t[1]):NaN):ll=NaN}else Fn=Fc=Mc=ll=al=NaN;if(i){if(i[1]){var n=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);ul=n?parseFloat(n[1].replace("_",".")):!0}else ul=!1;zc=!!i[2],Nc=!!i[3]}else ul=zc=Nc=!1}}var Uc={ie:function(){return Bi()||Fn},ieCompatibilityMode:function(){return Bi()||Mg>Fn},ie64:function(){return Uc.ie()&&zg},firefox:function(){return Bi()||Fc},opera:function(){return Bi()||Mc},webkit:function(){return Bi()||al},safari:function(){return Uc.webkit()},chrome:function(){return Bi()||ll},windows:function(){return Bi()||zc},osx:function(){return Bi()||ul},linux:function(){return Bi()||Nc},iphone:function(){return Bi()||Bc},mobile:function(){return Bi()||Bc||Dc||jc||jg},nativeApp:function(){return Bi()||Ng},android:function(){return Bi()||jc},ipad:function(){return Bi()||Dc}},KE=Uc,cl=!!(typeof window<"u"&&window.document&&window.document.createElement),JE={canUseDOM:cl,canUseWorkers:typeof Worker<"u",canUseEventListeners:cl&&!!(window.addEventListener||window.attachEvent),canUseViewport:cl&&!!window.screen,isInWorker:!cl},eC=JE,Bg=eC,Dg;Bg.canUseDOM&&(Dg=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function tC(e,t){if(!Bg.canUseDOM||t&&!("addEventListener"in document))return!1;var i="on"+e,r=i in document;if(!r){var n=document.createElement("div");n.setAttribute(i,"return;"),r=typeof n[i]=="function"}return!r&&Dg&&e==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var iC=tC,rC=KE,nC=iC,Ug=10,Wg=40,Hg=800;function qg(e){var t=0,i=0,r=0,n=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),r=t*Ug,n=i*Ug,"deltaY"in e&&(n=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||n)&&e.deltaMode&&(e.deltaMode==1?(r*=Wg,n*=Wg):(r*=Hg,n*=Hg)),r&&!t&&(t=r<1?-1:1),n&&!i&&(i=n<1?-1:1),{spinX:t,spinY:i,pixelX:r,pixelY:n}}qg.getEventType=function(){return rC.firefox()?"DOMMouseScroll":nC("wheel")?"wheel":"mousewheel"};var sC=qg,oC=sC;function aC(e){return{x:e[1],y:e[2],width:e[3]-e[1],height:e[4]-e[2]}}var Qg="pan",Vg="scroll",lC="gesture",uC={zoomOutFactor:.8,zoomInFactor:1.25,maxZoomFactor:1,minZoomFactor:.05,zoomDuration:300,zoomWheelConstant:20,zoomClamp:.6,panBounceStiffness:120,panBounceDamping:15,panTimeConstant:240,panPower:.1,nudgeDistance:100,panPadding:0,devicePixelRatio:1,enableWheel:!0,enableClickToZoom:!0,ignoreSingleFingerTouch:!1,enablePanOnWait:!1,requireMetaKeyForWheelZoom:!1,panOnWaitDelay:40,onPanInSketchMode:()=>{},parentElement:null},Gg=(e={})=>({start:function(t){let{zoomWheelConstant:i,enableWheel:r,enableClickToZoom:n,ignoreSingleFingerTouch:a,enablePanOnWait:l,panOnWaitDelay:u,parentElement:h,requireMetaKeyForWheelZoom:g}=A(A({},uC),e),p={pointerStart:{x:0,y:0},isPressing:!1,mousemoveBuffer:Ie(5),multiTouch:{distance:0}};t.world.activatedEvents.push("onMouseUp","onMouseDown","onMouseMove","onTouchStart","onTouchEnd","onTouchMove");function y(){T=0,O="",F(),F(void 0,"notice"),L=0}function S(){t.world.constraintBounds(),y()}function C(H){if(H.which>1){p.isPressing=!1;return}t.mode==="explore"&&(H.preventDefault(),p.pointerStart.x=H.atlas.x,p.pointerStart.y=H.atlas.y,t.transitionManager.stopTransition(),p.isPressing=!0)}function _(){y(),p.isPressing&&(t.mode==="explore"&&t.world.constraintBounds(),p.isPressing=!1)}let T=0,L=0,O="";function E(H){if(t.mode==="explore"){if(H.atlasTouches.length===1&&(L=performance.now(),a==!1&&H.preventDefault(),p.pointerStart.x=H.atlasTouches[0].x,p.pointerStart.y=H.atlasTouches[0].y),H.atlasTouches.length===2){O=lC,H.preventDefault();let se=H.atlasTouches[0].x,ce=H.atlasTouches[1].x;p.pointerStart.x=(se+ce)/2;let he=H.atlasTouches[0].y,_e=H.atlasTouches[1].y;p.pointerStart.y=(he+_e)/2,T=La({x:H.touches[0].clientX,y:H.touches[0].clientY},{x:H.touches[1].clientX,y:H.touches[1].clientY})}t.transitionManager.stopTransition(),p.isPressing=!0}}function F(H,se="intent"){h&&(h.dataset[se]=H)}function z(H){let se=null,ce=null,he=0;if(p.isPressing&&H.touches.length===2){let _e=H.touches[0].clientX,me=H.touches[1].clientX;se=(_e+me)/2;let ye=H.touches[0].clientY,Re=H.touches[1].clientY;ce=(ye+Re)/2,he=La({x:H.touches[0].clientX,y:H.touches[0].clientY},{x:H.touches[1].clientX,y:H.touches[1].clientY})}if(F(O),p.isPressing&&H.touches.length===1){if(l&&(performance.now()-L<u&&O==""&&(O=Vg),O==""&&(O=Qg)),F(O),O==""&&a==!0||O==Vg){F("require-two-finger","notice");return}let _e=H.touches[0];se=_e.clientX,ce=_e.clientY}if(se!==null&&ce!==null){let _e=t.getRendererScreenPosition();if(_e){let{x:me,y:ye}=t.viewerToWorld(se-_e.x,ce-_e.y),Re=he&&T?he/T:1;t.transitionManager.customTransition(J=>{J.from=Ie(t.target),J.to=jr(J.from,Nr(Oi(p.pointerStart.x-me,p.pointerStart.y-ye),wo(1/Re,me,ye)),p.mousemoveBuffer),J.elapsed_time=0,J.total_time=0,J.timingFunction=Er.easeInOutExpo,J.done=!1})}T=he}O==Qg&&H.preventDefault()}function U(H){if(p.isPressing){let se=t.getRendererScreenPosition();if(se){let{x:ce,y:he}=t.viewerToWorld(H.clientX-se.x,H.clientY-se.y);t.transitionManager.customTransition(_e=>{_e.from=Ie(t.target),_e.to=jr(_e.from,Oi(p.pointerStart.x-ce,p.pointerStart.y-he),p.mousemoveBuffer),_e.elapsed_time=0,_e.total_time=0,_e.timingFunction=Er.easeInOutExpo,_e.done=!1})}}}function q(H){t.mode==="explore"&&t.world.zoomIn(H.atlas)}function G(H){let se=oC(H),ce=1+se.spinY/i;t.world.zoomTo(ce,H.atlas,!0)}function V(H){return g&&H.metaKey==!1?(F("meta-required","notice"),H.stopPropagation(),!1):!0}t.world.addEventListener("mouseup",S),t.world.addEventListener("touchend",S),t.world.addEventListener("touchstart",E),t.world.addEventListener("mousedown",C),window.addEventListener("touchend",_),window.addEventListener("mouseup",_),window.addEventListener("mousemove",U),h&&h.addEventListener("touchmove",z),n&&(t.world.activatedEvents.push("onClick"),t.world.addEventListener("click",q)),r&&(t.world.activatedEvents.push("onWheel"),g&&(h==null||h.addEventListener("wheel",V,{passive:!0,capture:!0})),t.world.addEventListener("wheel",G));let ae=t.world.addLayoutSubscriber((H,se)=>{if(H==="zone-changed"&&t.transitionManager.constrainBounds({transition:{duration:0}}),H==="zoom-to"&&se&&t.transitionManager.zoomTo(se.factor,{origin:se.point,stream:se.stream}),H==="go-home"){let ce=se.immediate?{duration:0}:void 0;t.transitionManager.goToRegion(aC(t.homePosition),{transition:ce})}if(H==="goto-region"&&se){let ce=se.immediate?{duration:0}:{};t.transitionManager.goToRegion(se,{transition:ce})}H==="constrain-bounds"&&t.transitionManager.constrainBounds({transition:se!=null&&se.immediate?{duration:0}:void 0})});return()=>{t.world.removeEventListener("mouseup",S),t.world.removeEventListener("touchend",S),t.world.removeEventListener("touchstart",E),t.world.removeEventListener("mousedown",C),window.removeEventListener("touchend",_),window.removeEventListener("mouseup",_),t.world.removeEventListener("mousemove",U),h&&(h.removeEventListener("touchmove",U),h.removeEventListener("wheel",V,{passive:!0,capture:!0})),n&&t.world.removeEventListener("click",q),r&&t.world.removeEventListener("wheel",G),ae()}},updatePosition(){}}),hl=K.createContext("explore");hl.displayName="Mode";var Wc=()=>Jt(hl);function Hc(e,t,i){var r,n,a,l,u;t==null&&(t=100);function h(){var p=Date.now()-l;p<t&&p>=0?r=setTimeout(h,t-p):(r=null,i||(u=e.apply(a,n),a=n=null))}var g=function(){a=this,n=arguments,l=Date.now();var p=i&&!r;return r||(r=setTimeout(h,t)),p&&(u=e.apply(a,n),a=n=null),u};return g.clear=function(){r&&(clearTimeout(r),r=null)},g.flush=function(){r&&(u=e.apply(a,n),a=n=null,clearTimeout(r),r=null)},g}Hc.debounce=Hc;var Yg=Hc;function Xg(e){let{debounce:t,scroll:i,polyfill:r,offsetSize:n}=e===void 0?{debounce:0,scroll:!1,offsetSize:!1}:e,a=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[l,u]=Me({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=Se({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),g=t?typeof t=="number"?t:t.scroll:null,p=t?typeof t=="number"?t:t.resize:null,y=Se(!1);de(()=>(y.current=!0,()=>void(y.current=!1)));let[S,C,_]=Ee(()=>{let E=()=>{if(!h.current.element)return;let{left:F,top:z,width:U,height:q,bottom:G,right:V,x:ae,y:H}=h.current.element.getBoundingClientRect(),se={left:F,top:z,width:U,height:q,bottom:G,right:V,x:ae,y:H};h.current.element instanceof HTMLElement&&n&&(se.height=h.current.element.offsetHeight,se.width=h.current.element.offsetWidth),Object.freeze(se),y.current&&!pC(h.current.lastBounds,se)&&u(h.current.lastBounds=se)};return[E,p?Yg(E,p):E,g?Yg(E,g):E]},[u,n,g,p]);function T(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",_,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null)}function L(){!h.current.element||(h.current.resizeObserver=new a(_),h.current.resizeObserver.observe(h.current.element),i&&h.current.scrollContainers&&h.current.scrollContainers.forEach(E=>E.addEventListener("scroll",_,{capture:!0,passive:!0})))}let O=E=>{!E||E===h.current.element||(T(),h.current.element=E,h.current.scrollContainers=Zg(E),L())};return hC(_,!!i),cC(C),de(()=>{T(),L()},[i,_,C]),de(()=>T,[]),[O,l,S]}function cC(e){de(()=>{let t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function hC(e,t){de(()=>{if(t){let i=e;return window.addEventListener("scroll",i,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",i,!0)}},[e,t])}function Zg(e){let t=[];if(!e||e===document.body)return t;let{overflow:i,overflowX:r,overflowY:n}=window.getComputedStyle(e);return[i,r,n].some(a=>a==="auto"||a==="scroll")&&t.push(e),[...t,...Zg(e.parentElement)]}var dC=["x","y","top","bottom","left","right","width","height"],pC=(e,t)=>dC.every(i=>e[i]===t[i]),dl=K.createContext(null);dl.displayName="Atlas";var pl=K.createContext(null);pl.displayName="Bounds";var fl,fC=typeof performance=="object"&&typeof performance.now=="function";if(fC){let e=performance;fl=()=>e.now()}else{let e=Date,t=e.now();fl=()=>e.now()-t}var Kg={exports:{}},Mn={};Mn.ConcurrentRoot=1,Mn.ContinuousEventPriority=4,Mn.DefaultEventPriority=16,Mn.DiscreteEventPriority=1,Mn.IdleEventPriority=536870912,Mn.LegacyRoot=0,Kg.exports=Mn;function Jg(e,t){e&&e.appendChild&&t&&e.appendChild(t)}function em(e,t){e&&e.removeChild&&t&&e.removeChild(t)}function gC(e,t){return em(e.world,t)}function mC(e,t,i){return tm(e.world,t,i)}function tm(e,t,i){e&&e instanceof il&&(e=e.world),e&&e.insertBefore&&e.insertBefore(t,i)}function qc(e,t,i){if(i&&(e.applyProps&&e.applyProps(i),e instanceof _r))for(let r of Ta){let n=r.slice(2).toLowerCase();i[r]!==t[r]&&(t[r]&&e.removeEventListener(n,t[r]),e.addEventListener(n,i[r]))}}function Qc(e,t){let i=Object.keys(t),r=!1;for(let n of i)if(Ta.indexOf(n)!==-1){let a=Cs[n];if(a){if(e.activatedEvents.indexOf(a)!==-1)continue;r=!0,e.activatedEvents.push(a)}}r&&e.triggerEventActivation()}var gl=new Map,im={};function vC(e,t,i,r,n){var a=t,l=le(a,["args"]);if(!(i instanceof il)&&n){let g=p=>p.return?g(p.return):p.stateNode&&p.stateNode.containerInfo;i=g(n)}let u,h=i.world;switch(e){case"world":u=on.withProps({width:l.width,height:l.height,viewingDirection:"left-to-right"}),u.activatedEvents=h.activatedEvents,u.eventHandlers=h.eventHandlers,u.subscriptions=h.subscriptions,u.triggerEventActivation(),h=u;break;case"box":u=new Fs;break;case"shape":u=new Eg;break;case"worldObject":case"world-object":u=new $s;break;case"worldImage":case"world-image":u=new cr;break;case"texture":u=new Ra;break;case"compositeImage":case"composite-image":u=new Ic({id:l.id,width:l.width,height:l.height,images:[],renderOptions:l.renderOptions});break;case"tiledImage":case"tiled-image":u=sn.fromTile(l.uri,l.display,l.tile,l.scaleFactor,void 0,l.format);break;case"paragraph":u=new Ao,u.text=l.children;break;default:return}return Qc(h,l),qc(u,{},l),u}function yC(e,t){if(t instanceof on)e.world=t;else if(t instanceof $s)e.world.appendChild(t);else if(t)throw new Error("Invalid root")}var Ro=(0,rx.default)({unstable_now:fl,now:fl,createInstance:vC,removeChild:em,appendChild:Jg,appendInitialChild:Jg,insertBefore:tm,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:typeof setTimeout<"u"?setTimeout:void 0,cancelTimeout:typeof clearTimeout<"u"?clearTimeout:void 0,setTimeout:typeof setTimeout<"u"?setTimeout:void 0,clearTimeout:typeof clearTimeout<"u"?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:yC,removeChildFromContainer:gC,createTextInstance(){},insertInContainerBefore:mC,prepareUpdate(e,t,i,r,n){return Qc(n.world,r),r},commitUpdate(e,t,i,r,n,a){e.applyProps&&t&&qc(e,r,t)},finalizeInitialChildren(e){return e==null?void 0:e.__handlers},getChildHostContext(){return im},getRootHostContext(){return im},prepareForCommit(e){return e.isCommitting=!0,null},preparePortalMount(){},hideInstance(e){e&&e.points&&(e.points[0]=0)},unhideInstance(e,t){e&&e.points&&(e.points[0]=1)},getPublicInstance(e){return e},hideTextInstance(){throw new Error("Text is not allowed in the react-three-fibre tree. You may have extraneous whitespace between components.")},resetAfterCommit(e){e.isCommitting=!1,e.pendingUpdate=!0,e.world&&e.world.needsRecalculate&&(e.world.recalculateWorldSize(),e.world.triggerRepaint())},shouldSetTextContent(){return!1},clearContainer(){return!1},supportsHydration:!1,supportsPersistence:!1,detachDeletedInstance(e){},afterActiveInstanceBlur(){},beforeActiveInstanceBlur(){},getCurrentEventPriority(){return console.log("getCurrentEventPriority"),Kg.exports.DefaultEventPriority},getInstanceFromNode(e){throw console.log("getInstanceFromNode",e),new Error("Not implemented")},getInstanceFromScope(e){throw console.log("getInstanceFromScope",e),new Error("Not implemented")},prepareScopeUpdate(e,t){throw console.log("prepareScopeUpdate",e,t),new Error("Not implemented")},logRecoverableError(){},requestPostPaintCallback(){}});Ro.injectIntoDevTools({bundleType:0,version:Pa,rendererPackageName:"@atlas-viewer/atlas"});function Vc(e,t){let i=gl.get(e);i&&Ro.updateContainer(null,i,null,()=>{gl.delete(e),t&&t(e)})}var rm={render(e,t){let i=gl.get(t);if(i)Ro.updateContainer(e,i,null);else{let r=Ro.createContainer(t,0,null,!1,null,"",()=>{},null);Ro.updateContainer(e,r,null),gl.set(t,r)}},unmountComponentAtNode(e,t){Vc(e,t)}},Lo=typeof window<"u"&&((sf=window.document)!=null&&sf.createElement||((of=window.navigator)==null?void 0:of.product)==="ReactNative")?Rt:de,bC=K.memo(({children:e,setIsReady:t,onCreated:i,bounds:r,preset:n,mode:a="explore"})=>{let l=De(function(u){let h=Se(!1),g=()=>{t(!0)};return de(()=>{if(n&&!h.current){n.runtime.goHome();let p=i&&i(n);return void(p&&p.then?p.then(g):g())}return()=>{}},[]),de(()=>{h.current=!0},[]),u.children},[n]);return Lo(()=>{if(n){let u=n.runtime;a!==u.mode&&(u.mode=a),rm.render(K.createElement(K.StrictMode,null,K.createElement(l,null,K.createElement(pl.Provider,{value:r},K.createElement(hl.Provider,{value:a},K.createElement(dl.Provider,{value:n},e))))),u)}},[n,a,e]),Lo(()=>{if(n){let u=n.runtime;return()=>{rm.unmountComponentAtNode(u)}}return()=>{}},[n]),null}),wC=class{constructor(e,t){this.fragmentShaderSource=`
    precision mediump float;

    uniform sampler2D u_image;
    varying vec2 v_texCoord;

    void main() {
        gl_FragColor = texture2D(u_image, v_texCoord);
    }
  `,this.vertexShaderSource=`
    attribute vec2 a_position;
    uniform vec2 u_resolution;
    varying vec4 v_color;
    uniform sampler2D u_texture;

    attribute vec2 a_texCoord;
    varying vec2 v_texCoord;

    void main() {

        // convert the position from pixels to 0.0 to 1.0
        vec2 zeroToOne = a_position / u_resolution;

        // convert from 0->1 to 0->2
        vec2 zeroToTwo = zeroToOne * 2.0;

        // convert from 0->2 to -1->+1 (clip space)
        vec2 clipSpace = zeroToTwo - 1.0;

        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
        
        v_texCoord = a_texCoord;
    }
  `,this.lastResize=0,this.lastKnownScale=1,this.canvas=e,this.rendererPosition=e.getBoundingClientRect(),this.gl=e.getContext("webgl2"),this.fragmentShader=this.createShader(this.gl.FRAGMENT_SHADER,this.fragmentShaderSource),this.vertexShader=this.createShader(this.gl.VERTEX_SHADER,this.vertexShaderSource),this.program=this.createProgram(this.vertexShader,this.fragmentShader),this.dpi=(t==null?void 0:t.dpi)||1,this.attributes={position:this.gl.getAttribLocation(this.program,"a_position"),texCoord:this.gl.getAttribLocation(this.program,"a_texCoord")},this.uniforms={resolution:this.gl.getUniformLocation(this.program,"u_resolution"),texture:this.gl.getUniformLocation(this.program,"u_texture")},this.buffers={position:this.createArrayBuffer(),texCoord:this.createArrayBuffer(new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]))},this.rectBuffer=new Float32Array(12),this.resize(),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(this.program),this.gl.enableVertexAttribArray(this.attributes.position)}resize(){this.resizeCanvasToDisplaySize(),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.rendererPosition=this.canvas.getBoundingClientRect()}isReady(){return!0}beforeFrame(e,t,i){this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.vertexAttribPointer(this.attributes.position,2,this.gl.FLOAT,!1,0,0),this.gl.uniform2f(this.uniforms.resolution,this.gl.canvas.width,this.gl.canvas.height),this.lastResize>1e3&&(this.lastResize=0,this.resizeCanvasToDisplaySize()),this.lastResize+=t}prepareLayer(e){(!e.__host||!e.__host.webgl)&&((e instanceof cr||e instanceof sn)&&this.createImageHost(e),e instanceof Ra&&this.createTextureHost(e))}createTextureHost(e){e.__host=e.__host?e.__host:{};let t=this.gl,i=this.gl.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1);let r;if(e instanceof Ra){let n=e.getTexture();n.source&&t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n.source),r=n}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),e.__host.webgl={height:e.height,width:e.width,texture:i,lastImage:r}}createImageHost(e){let t=[...new Array(e.points.length/5)];e.__host=e.__host?e.__host:{},e.__host.webgl={height:e.height,width:e.width,textures:t,loading:[],loaded:[],lastLevelRendered:-1,onLoad:(i,r)=>{let n=this.gl,a=this.gl.createTexture();n.bindTexture(n.TEXTURE_2D,a),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),e.__host.webgl.textures[i]=a,e.__host.webgl.loaded.push(i)}}}paint(e,t,i,r,n,a){if(e.type==="spacial-content"&&e.__host&&e.__host.webgl){if(e.getTexture){let u=e==null?void 0:e.getTexture();if(u&&e.__host.webgl.lastImage!==u.hash&&u.source&&!e.__host.webgl.error)try{let h=this.gl.RGBA,g=this.gl.RGBA,p=this.gl.UNSIGNED_BYTE;this.gl.bindTexture(this.gl.TEXTURE_2D,e.__host.webgl.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,h,g,p,u.source),e.__host.webgl.lastImage=u.hash}catch(h){e.__host.webgl.error=h}}if(e.__host.webgl.loading&&e.__host.webgl.loading.indexOf(t)===-1&&e.getImageUrl){e.__host.webgl.loading.push(t);let u=document.createElement("img");u.decoding="async",u.crossOrigin="anonymous",u.src=e.getImageUrl(t),u.onload=()=>(u.onload=null,e.__host.webgl.onLoad(t,u))}let l=e.__host.webgl.texture?e.__host.webgl.texture:e.__host.webgl.textures[t];l&&(this.gl.enableVertexAttribArray(this.attributes.texCoord),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffers.texCoord),this.gl.enableVertexAttribArray(this.attributes.texCoord),this.gl.vertexAttribPointer(this.attributes.texCoord,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffers.position),this.gl.enableVertexAttribArray(this.attributes.position),this.gl.vertexAttribPointer(this.attributes.position,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,l),this.gl.uniform1i(this.uniforms.texture,0),this.setRectangle(i,r,n,a),this.gl.drawArrays(this.gl.TRIANGLES,0,6))}}afterPaintLayer(e,t){}pendingUpdate(){return!0}getPointsAt(e,t,i,r){return e.getPointsAt(t,i,r)}afterFrame(){}getScale(e,t,i){if(Number.isNaN(e)||Number.isNaN(t))return this.lastKnownScale;let r=this.getCanvasDims(),n=r.width/e,a=r.height/t,l=(n<a?a:n)*(i&&this.dpi||1);return Number.isNaN(l)||(this.lastKnownScale=l),this.lastKnownScale}getCanvasDims(){return{width:this.canvas.width/this.dpi,height:this.canvas.height/this.dpi}}getViewportBounds(e,t,i){return null}createShader(e,t){let i=this.gl.createShader(e);if(i){if(this.gl.shaderSource(i,t),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))return i;let r=this.gl.getShaderInfoLog(i);if(this.gl.deleteShader(i),r)throw new Error(r)}throw new Error("Invalid shader")}createProgram(e,t){let i=this.gl.createProgram();if(i){if(this.gl.attachShader(i,e),this.gl.attachShader(i,t),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS))return i;let r=this.gl.getProgramInfoLog(i);if(this.gl.deleteProgram(i),r)throw new Error(r)}throw new Error("Invalid program")}resizeCanvasToDisplaySize(){let e=this.gl.canvas,t=e.clientWidth,i=e.clientHeight,r=e.width!==t||e.height!==i;return r&&(e.width=t,e.height=i),r}createArrayBuffer(e){let t=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),e&&this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.STATIC_DRAW),!t)throw new Error("Cannot create buffer");return t}setRectangle(e,t,i,r){this.gl.bufferData(this.gl.ARRAY_BUFFER,this.getRectangle(e,t,i,r),this.gl.STATIC_DRAW)}getRectangle(e,t,i,r){let n=e,a=e+i,l=t,u=t+r;return this.rectBuffer.set([n,l,a,l,n,u,n,u,a,l,a,u]),this.rectBuffer}getRendererScreenPosition(){return this.rendererPosition}finishLayer(){}reset(){}};function Gc(e,t){let i=t?e:JSON.stringify(e),r=5381,n=i.length;for(;n;)r=r*33^i.charCodeAt(--n);let a=(r>>>0).toString(16);return a.length%2?"0"+a:a}var nm=class{constructor(e){this.sheetPrefix=(e==null?void 0:e.sheetPrefix)||"a-",this.$element=document.createElement("style"),this.stylesheetClasses=[],this.activeStylesheetClasses=[],this.sheetsDidUpdate=!1,this.stylesheetEntries={}}getElement(){return this.$element}addStylesheet(e){let t=e.replace(/\s\s+/g," ").replace(/: /g,":").replace(/; /g,";").trim(),i=this.sheetPrefix+Gc(t,!0);return this.stylesheetClasses.indexOf(i)!==-1||(this.stylesheetClasses.push(i),this.activeStylesheetClasses.push(i),this.stylesheetEntries[i]=t,this.sheetsDidUpdate=!0),i}removeStylesheet(e){let t=this.sheetPrefix+Gc(e,!0);this.stylesheetClasses.indexOf(t)&&(this.stylesheetClasses=this.stylesheetClasses.filter(i=>i!==t)),this.sheetsDidUpdate=!0}clearClasses(){this.activeStylesheetClasses=[]}didUpdateActive(){if(this.activeStylesheetClasses.length){for(let e of this.activeStylesheetClasses)if(this.stylesheetClasses.indexOf(e)===-1)return!0;for(let e of this.stylesheetClasses)if(this.activeStylesheetClasses.indexOf(e)===-1)return!0}return!1}updateSheet(){(this.sheetsDidUpdate||this.didUpdateActive())&&(this.$element.innerText=this.activeStylesheetClasses.map(e=>`.${e}{${this.stylesheetEntries[e]}}`).join(""),this.sheetsDidUpdate=!1,this.stylesheetClasses=[...this.activeStylesheetClasses])}},sm=class{constructor(e,t){this.visible=[],this.previousVisible=[],this.htmlIds=[],this.firstMeaningfulPaint=!1,this.paintTx=1,this.zIndex=0,this.htmlContainer=e,this.htmlContainer.innerHTML="",this.rendererPosition=this.htmlContainer.getBoundingClientRect(),this.options=A({triggerResize:()=>{},box:!1,text:!1,sheetPrefix:"",inlineStyles:!1,background:""},t||{}),this.stylesheet=new nm({sheetPrefix:this.options.sheetPrefix}),this.options.inlineStyles||this.htmlContainer.appendChild(this.stylesheet.getElement()),this.options.background&&this.htmlContainer.classList.add(this.stylesheet.addStylesheet(`
        background: ${this.options.background};
      `)),this.classes={hostClassName:this.stylesheet.addStylesheet(`
        position: absolute;
        transform-origin: 0px 0px;
      `),interactive:this.stylesheet.addStylesheet("pointer-events: all"),nonInteractive:this.stylesheet.addStylesheet("pointer-events: none")},this.stylesheet.updateSheet()}createHtmlHost(e){if(this.htmlContainer&&(this.options.box||e.props.className||e.props.html||e.props.href)){let t=document.createElement(e.props.href?"a":"div");if(e.props.href){t.style.display="block",t.href=e.props.href;let i=e.props.hrefTarget||"_blank";t.target=i,i!=="_self"&&(t.rel="noopener noreferrer")}t.title=e.props.title||"",this.options.inlineStyles?(t.style.display="block",t.style.position="absolute",t.style.overflow="hidden",t.style.transformOrigin="0px 0px"):t.classList.add(this.classes.hostClassName),e.__host={element:t,revision:null,relative:!1},this.updateHtmlHost(e,e.width,e.height),e.__onCreate&&e.__onCreate()}}triggerResize(){this.options.triggerResize()}updateHtmlHost(e,t,i){if(e.__revision!==e.__host.revision){let r=e.__host.element,n=[this.classes.hostClassName];if(e.props.interactive?this.options.inlineStyles?r.style.pointerEvents="all":n.push(this.classes.interactive):this.options.inlineStyles?r.style.pointerEvents="none":n.push(this.classes.nonInteractive),e.props.href){r.style.display="block",r.href=e.props.href;let l=e.props.hrefTarget||"_blank";r.target=l,l!=="_self"?r.rel="noopener noreferrer":r.rel=""}else r.href&&r.removeAttribute("href");if(e.props.title&&(r.title=e.props.title||""),e.props.className&&(n.push(e.props.className),e.hovering&&n.push(`${e.props.className}--hover`),e.pressing&&n.push(`${e.props.className}--active`)),e.props.relativeStyle?(r.style.width=`${t||e.width}px`,r.style.height=`${i||e.height}px`):(r.style.width=`${e.width}px`,r.style.height=`${e.height}px`),e.props.style){Object.assign(r.style,e.props.style||{},e.hovering?e.props.hoverStyles||{}:{},e.pressing?e.props.pressStyles||{}:{});return}if(this.options.text&&e instanceof Ao){e.text&&(r.innerText=e.text),e.backgroundColor&&(r.style.backgroundColor=e.backgroundColor),e.color&&(r.style.color=e.color),e.props.font&&(r.style.font=e.props.font),e.props.textAlign&&(r.style.textAlign=e.props.textAlign),e.__host.revision=e.__revision;let l=n.join(" ");r.className=l,r.part=l}e instanceof Fs&&(this.options.box||e.props.className||e.props.html)&&(e.props.backgroundColor&&(r.style.backgroundColor=e.props.backgroundColor),e.props.border!==r.style.border&&(r.style.border=e.props.border));let a=n.join(" ");r.className=a,r.part=a}}afterFrame(e,t,i){this.stylesheet.updateSheet();for(let r of this.previousVisible)this.visible.indexOf(r)===-1&&this.htmlContainer&&r.__id&&this.htmlIds.indexOf(r.__id)!==-1&&this.htmlContainer.removeChild(r.__host.element);this.previousVisible=this.visible}afterPaintLayer(e,t){}beforeFrame(e,t,i){this.stylesheet.clearClasses(),this.paintTx++,this.zIndex=0,this.visible=[]}getPointsAt(e,t,i,r){return e.getPointsAt(t,i,r)}getScale(e,t){let i=this.rendererPosition.width/e,r=this.rendererPosition.height/t;return i<r?r:i}getViewportBounds(e,t,i){return null}isReady(){return!1}paint(e,t,i,r,n,a){if(this.zIndex++,(this.options.text&&e instanceof Ao||e instanceof Fs&&(this.options.box||e.props.className||e.props.html))&&e.__host.tx!==this.paintTx&&(this.visible.push(e),e.__host.tx=this.paintTx,this.htmlContainer)){this.updateHtmlHost(e,n,a);let l=n/e.width,u=e.__host.element;u.style.zIndex=`${this.zIndex}`,e.props.relativeStyle?u.style.transform=`translate(${Math.round(i)}px, ${Math.round(r)}px)`:u.style.transform=`translate(${Math.round(i)}px, ${Math.round(r)}px) scale(${l})`,this.previousVisible.indexOf(e)===-1&&this.htmlContainer.appendChild(u),this.htmlIds.indexOf(e.__id)===-1&&this.htmlIds.push(e.__id)}}pendingUpdate(){return!1}prepareLayer(e){e.__host||(e instanceof Ao||e instanceof Fs)&&this.createHtmlHost(e)}resize(e,t){typeof e<"u"&&typeof t<"u"&&(this.htmlContainer.style.width=`${e}px`,this.htmlContainer.style.height=`${t}px`),this.rendererPosition=this.htmlContainer.getBoundingClientRect()}getRendererScreenPosition(){return this.rendererPosition}finishLayer(){}reset(){}},ml=class{constructor(e,t,i){this.activatedEvents=[],this.eventHandlers=[],this.pointerMoveEvent=void 0,this.pointerEventState={isClicking:!1,isDragging:!1,isPressed:!1,mousedOver:[],itemsBeingDragged:[],mouseDownStart:{x:0,y:0},lastTouches:[]},this._realPointerMove=n=>{this.pointerMoveEvent=n},this.onWheelEvent=n=>{n.preventDefault(),this.onPointerEvent(n)},this.onTouchEvent=n=>{let a=Cs[n.type],l=[],u=n.touches.length;for(let h=0;h<u;h++){let g=n.touches.item(h);if(!g)continue;let{x:p,y}=this.runtime.viewerToWorld(g.clientX-this.bounds.left,g.clientY-this.bounds.top),S={id:g.identifier,x:p,y};l.push(S)}l.length&&this.assignToEvent(n,l[0].x,l[0].y),a!=="onTouchEnd"?(this.pointerEventState.lastTouches=l,n.atlasTouches=l,this.runtime.world.propagateTouchEvent(a,n,l)):(n.atlasTouches=[],this.runtime.world.propagateTouchEvent(a,n,this.pointerEventState.lastTouches),this.pointerEventState.lastTouches=[])},this.onPointerEvent=n=>{let a=Cs[n.type];if(a&&this.runtime.world.activatedEvents.indexOf(a)!==-1){let{x:l,y:u}=this.runtime.viewerToWorld(n.clientX-this.bounds.left,n.clientY-this.bounds.top);this.assignToEvent(n,l,u),this.runtime.world.propagatePointerEvent(a,n,l,u)}},this.onPointerDown=n=>{this.pointerEventState.isPressed=!0,this.pointerEventState.isClicking=!0,this.pointerEventState.mouseDownStart.x=n.clientX,this.pointerEventState.mouseDownStart.y=n.clientY,setTimeout(()=>{this.runtime&&(this.pointerEventState.isClicking=!1)},250),setTimeout(()=>{if(this.runtime&&this.pointerEventState.isPressed&&!this.pointerEventState.isDragging){let a=this.runtime.viewerToWorld(this.pointerEventState.mouseDownStart.x-this.bounds.left,this.pointerEventState.mouseDownStart.y-this.bounds.top);this.pointerEventState.isDragging=!0,this.pointerEventState.itemsBeingDragged=this.runtime.world.propagatePointerEvent("onDragStart",n,a.x,a.y)}},800),this.onPointerEvent(n)},this.onPointerUp=n=>{if(this.pointerEventState.isClicking){let{x:a,y:l}=this.runtime.viewerToWorld(n.clientX-this.bounds.left,n.clientY-this.bounds.top);this.assignToEvent(n,a,l),this.runtime.world.propagatePointerEvent("onClick",n,a,l)}if(this.pointerEventState.isDragging){for(let a of this.pointerEventState.itemsBeingDragged)a.dispatchEvent("onDragEnd",n);this.pointerEventState.isDragging=!1}this.pointerEventState.isClicking=!1,this.pointerEventState.isPressed=!1,this.pointerEventState.itemsBeingDragged=[],this.onPointerEvent(n)},this.onPointerMove=n=>{this.pointerMoveEvent=void 0;let{x:a,y:l}=this.runtime.viewerToWorld(n.clientX-this.bounds.left,n.clientY-this.bounds.top);if(Number.isNaN(a)||Number.isNaN(l))return;this.assignToEvent(n,a,l),this.runtime.world.propagatePointerEvent("onPointerMove",n,a,l);let u=this.runtime.world.propagatePointerEvent("onMouseMove",n,a,l),h=[],g=[];for(let p of u)h.push(p.id),g.push(p),this.pointerEventState.mousedOver.indexOf(p)===-1&&(p.dispatchEvent("onMouseEnter",n),p.dispatchEvent("onPointerEnter",n),p.dispatchEvent("onMouseOver",n),p.dispatchEvent("onPointerOver",n));for(let p of this.pointerEventState.mousedOver)h.indexOf(p.id)===-1&&(p.dispatchEvent("onMouseLeave",n),p.dispatchEvent("onPointerLeave",n),p.dispatchEvent("onMouseOut",n),p.dispatchEvent("onPointerOut",n));if(this.pointerEventState.isDragging)for(let p of this.pointerEventState.itemsBeingDragged)p.dispatchEvent("onDrag",n);if(this.pointerEventState.isPressed&&!this.pointerEventState.isDragging&&La(this.pointerEventState.mouseDownStart,{x:n.clientX,y:n.clientY})>50){let p=this.runtime.viewerToWorld(this.pointerEventState.mouseDownStart.x-this.bounds.left,this.pointerEventState.mouseDownStart.y-this.bounds.top);this.pointerEventState.isDragging=!0,this.pointerEventState.itemsBeingDragged=this.runtime.world.propagatePointerEvent("onDragStart",B(A({},n),{atlas:{x:p.x,y:p.y}}),p.x,p.y)}this.pointerEventState.mousedOver=g},this.element=e,this.runtime=t,this.unsubscribe=t.world.addLayoutSubscriber(this.layoutSubscriber.bind(this)),this.bounds=e.getBoundingClientRect(),this.listening=!1,this.options=A({simulationRate:0},i||{});let r=0;t.registerHook("useFrame",n=>{r+=n,r>this.options.simulationRate&&this.pointerMoveEvent&&(r=0,t.updateNextFrame())}),t.registerHook("useBeforeFrame",()=>{this.pointerMoveEvent&&this.onPointerMove(this.pointerMoveEvent)}),this.activateEvents()}updateBounds(){this.bounds=this.element.getBoundingClientRect(),this.runtime.updateRendererScreenPosition()}layoutSubscriber(e){e==="event-activation"&&this.listening==!1&&this.activateEvents()}assignToEvent(e,t,i){ml.eventPool.atlas.x=t,ml.eventPool.atlas.y=i,e.atlas=ml.eventPool.atlas}activateEvents(){this.listening=!0,this.element.addEventListener("pointermove",this._realPointerMove),this.element.addEventListener("pointerup",this.onPointerUp),this.element.addEventListener("pointerdown",this.onPointerDown),this.element.addEventListener("mousedown",this.onPointerEvent),this.element.addEventListener("mouseup",this.onPointerEvent),this.element.addEventListener("pointercancel",this.onPointerEvent),this.element.addEventListener("wheel",this.onWheelEvent),this.element.addEventListener("touchstart",this.onTouchEvent),this.element.addEventListener("touchcancel",this.onTouchEvent),this.element.addEventListener("touchend",this.onTouchEvent),this.element.addEventListener("touchmove",this.onTouchEvent)}normalizeEventName(e){return e.startsWith("on")?e.slice(2).toLowerCase():e.toLowerCase()}stop(){this.listening=!1,this.element.removeEventListener("pointermove",this._realPointerMove),this.element.removeEventListener("pointerup",this.onPointerUp),this.element.removeEventListener("pointerdown",this.onPointerDown),this.element.removeEventListener("mousedown",this.onPointerEvent),this.element.removeEventListener("mouseup",this.onPointerEvent),this.element.removeEventListener("pointercancel",this.onPointerEvent),this.element.removeEventListener("wheel",this.onWheelEvent),this.element.removeEventListener("touchstart",this.onTouchEvent),this.element.removeEventListener("touchcancel",this.onTouchEvent),this.element.removeEventListener("touchend",this.onTouchEvent),this.element.removeEventListener("touchmove",this.onTouchEvent),this.unsubscribe();for(let[e,t]of this.eventHandlers)this.element.removeEventListener(this.normalizeEventName(e),t)}},Yc=ml;Yc.eventPool={atlas:{x:0,y:0}};function om({interactive:e=!0,viewport:t,forceRefresh:i,canvasElement:r,overlayElement:n,controllerConfig:a,unstable_webglRenderer:l,dpi:u,debug:h,canvasBox:g=!0,polygon:p=!0,navigatorElement:y,runtimeOptions:S}){if(!r)throw new Error("Invalid container");r.style.userSelect="none";let C=e?Gg(A({minZoomFactor:.5,maxZoomFactor:3,enableClickToZoom:!1,parentElement:r},a||{})):void 0,_=new $g([l?new wC(r,{dpi:u}):new XE(r,{dpi:u,debug:h,box:g,polygon:p}),n?new sm(n,{box:l||!g,text:!0,triggerResize:i}):void 0,y?new ZE(y):void 0]),T=new il(_,new on(1024,1024),t,C?[C]:[],S),L=new Yc(r,T);return{name:"default-preset",em:L,runtime:T,renderer:_,controller:C,canvas:r,navigator:y,unmount(){Vc(T),T.stopControllers(),T.stop(),T.reset(),L&&L.stop()}}}var ln=1+Number.MIN_VALUE,xC=class{constructor(e,t){this.pending=!0,this.zIndex=0,this.lastKnownScale=1,this.currentlyVisible=[],this.previouslyVisible=[],this.container=e,this.rendererPosition=e.getBoundingClientRect();let{width:i,height:r}=this.rendererPosition;this.width=i,this.height=r,this.options=A({addPart:!1,setDraggableFalse:!1,imageClass:"",widthStylesheet:!1,sheetPrefix:"position-",background:"#000"},t||{}),this.stylesheet=new nm({sheetPrefix:this.options.sheetPrefix}),this.container.classList.add(this.stylesheet.addStylesheet(`
        background: ${this.options.background};
      `)),this.options.widthStylesheet&&this.container.appendChild(this.stylesheet.getElement())}isReady(){return!0}resize(){this.rendererPosition=this.container.getBoundingClientRect(),this.width=this.rendererPosition.width,this.height=this.rendererPosition.height}getRendererScreenPosition(){return this.rendererPosition}afterFrame(e,t,i){this.stylesheet.updateSheet();for(let r of this.previouslyVisible)this.currentlyVisible.indexOf(r)===-1&&this.container.removeChild(r);for(let r of this.currentlyVisible)this.previouslyVisible.indexOf(r)===-1&&this.container.appendChild(r);this.previouslyVisible=this.currentlyVisible,this.currentlyVisible=[]}afterPaintLayer(e,t){}beforeFrame(e,t,i){this.stylesheet.clearClasses(),this.zIndex=0}getPointsAt(e,t,i,r){return e.getPointsAt(t,i,r)}getScale(e,t){if(Number.isNaN(e)||Number.isNaN(t))return this.lastKnownScale;let i=this.width/e,r=this.height/t,n=i<r?r:i;return Number.isNaN(n)||(this.lastKnownScale=n),this.lastKnownScale}getViewportBounds(e,t,i){return null}createImage(){let e=document.createElement("img");return this.options.imageClass?(e.className=this.options.imageClass,this.options.addPart&&e.setAttribute("part",this.options.imageClass)):(e.style.position="absolute",e.style.pointerEvents="none",e.style.userSelect="none"),this.options.setDraggableFalse&&e.setAttribute("draggable","false"),e}paint(e,t,i,r,n,a){if(this.pending=!1,this.zIndex++,e instanceof cr){if(!e.__host){let u=this.createImage();u.src=e.uri,e.__host=u,this.container.appendChild(e.__host)}let l=e.__host;this.currentlyVisible.push(l),l.style.zIndex=`${this.zIndex}`,l.style.opacity=`${e.style.opacity}`,this.options.widthStylesheet?l.className=this.options.imageClass+" "+this.stylesheet.addStylesheet(`width:${(n+ln).toFixed(2)}px;height:${(a+ln).toFixed(2)}px;`):(l.style.width=`${n+ln}px`,l.style.height=`${a+ln}px`),l.style.transform=`translate(${i}px, ${r}px)`}if(e instanceof sn){if(e.__host||(e.__host={images:[]}),!e.__host.images[t]){let u=e.getImageUrl(t),h=this.createImage();h.src=u,e.__host.images[t]=h,this.container.appendChild(h)}let l=e.__host.images[t];l.style.zIndex=`${this.zIndex}`,l.style.opacity=`${e.style.opacity}`,this.currentlyVisible.push(l),this.options.widthStylesheet?l.className=this.options.imageClass+" "+this.stylesheet.addStylesheet(`width:${(n+ln).toFixed(2)}px;height:${(a+ln).toFixed(2)}px;`):(l.style.width=`${n+ln}px`,l.style.height=`${a+ln}px`),l.style.transform=`translate(${i}px, ${r}px)`}}pendingUpdate(){return this.pending}prepareLayer(e){}finishLayer(e){}reset(){}};function _C({interactive:e,viewport:t,forceRefresh:i,containerElement:r,overlayElement:n,controllerConfig:a}){if(!r)throw new Error("Invalid container");r.style.userSelect="none";let l=e?Gg(A({minZoomFactor:.5,maxZoomFactor:3,enableClickToZoom:!1,parentElement:r},a||{})):void 0,u=new xC(r,{addPart:!1,setDraggableFalse:!1,imageClass:"atlas-static-image"}),h=n?new $g([u,new sm(n,{box:!0,text:!0,triggerResize:i})]):u,g=new il(h,new on(1024,1024),t,l?[l]:[]),p=new Yc(r,g);return{name:"static-preset",em:p,runtime:g,renderer:h,controller:l,container:r,overlay:n,unmount(){Vc(g),g.stopControllers(),g.stop(),p&&p.stop()}}}var SC={"default-preset":om,"static-preset":_C},EC={};function CC(e,t){let i=Se(),r=Se(),n=Se(),a=Se(),l=Se({width:t.width,height:t.height,didUpdate:!0}),[u="default-preset",h=EC]=Array.isArray(e)?e||[]:[e],[g,p]=Me(null);Rt(()=>{let S=r.current,C=a.current,_=i.current,T=n.current,L=(SC[u]||om)(A({containerElement:C,canvasElement:S,overlayElement:_,navigatorElement:T,viewport:l.current,dpi:window.devicePixelRatio||1,forceRefresh:t.forceRefresh,unstable_webglRenderer:t.unstable_webglRenderer},h||{}));return p(L),()=>{L&&(L.unmount(),S&&(S.height=0,S.width=0),_&&(_.innerHTML=""),T&&(T.height=0,T.width=0))}},[u,h]);let y=Ee(()=>({canvas:r,overlay:i,container:a,navigator:n}),[]);return[u,g,l,y]}function kC(e){return Ee(()=>Gc(e),e)}var Oo=K.forwardRef((e,t)=>K.createElement("div",B(A({},e),{ref:t,part:e.className}))),am=["brightness","contrast","grayscale","hueRotate","invert","saturate","sepia","blur"],AC=e=>{var t=e,{htmlChildren:i,renderPreset:r,onCreated:n,mode:a="explore",resetWorldOnChange:l=!0,unstable_webglRenderer:u=!1,unstable_noReconciler:h=!1,hideInlineStyle:g=!1,controllerConfig:p,children:y,overlayStyle:S,containerStyle:C,enableNavigator:_,className:T,containerProps:L={},homePosition:O,homeOnResize:E,homeCover:F,background:z,runtimeOptions:U,debug:q,filters:G}=t,V=le(t,["htmlChildren","renderPreset","onCreated","mode","resetWorldOnChange","unstable_webglRenderer","unstable_noReconciler","hideInlineStyle","controllerConfig","children","overlayStyle","containerStyle","enableNavigator","className","containerProps","homePosition","homeOnResize","homeCover","background","runtimeOptions","debug","filters"]);let[ae,H]=Me(a),[se,ce]=Me(!1),he=Se(!1),[_e,me]=Me(0),ye=Ee(()=>(typeof r=="string"&&(r=[r,{}]),q?r?[r[0],A({debug:q},r[1]||{})]:["default-preset",{debug:q}]:r||"default-preset"),[r,q]),[Re,J,Ae]=Xg({scroll:!0}),Oe=Se(),Ge=Fe=>{Oe.current=Fe,Re(Fe)},[it,ie,Le,$t]=CC(ye,{width:V.width,height:V.height,forceRefresh:Ae,unstable_webglRenderer:u}),[Qt,Wt]=Me("");de(()=>{H(a)},[a]),de(()=>{ie&&ie.em&&ie.em.updateBounds()},[ie,J]),de(()=>{ie==null||ie.runtime.setOptions(U||{})},[U]),de(()=>{ie&&ie.runtime&&(ie.runtime.mode=ae),se&&ie&&(ie.ready=!0)},[ie,se,ae]),de(()=>{ie&&(F||(ie.runtime.manualHomePosition=!!O,ie.runtime.setHomePosition(O)))},[ie,F,O]),de(()=>{if(ie){let Fe=ie.runtime;Fe.resize(Le.current.width,V.width,Le.current.height,V.height),Le.current.width=V.width,Le.current.height=V.height,Fe.updateNextFrame(),Le.current.didUpdate=!0}},[ie,V.width,V.height]),de(()=>{if(G&&ie){let Fe=ie.runtime,We=!1;Fe.hookOptions.enableFilters=!0;for(let rt of am)G[rt]?G[rt]!==ie.runtime.hookOptions.filters[rt]&&(Fe.hookOptions.filters[rt]=G[rt],We=!0):Fe.hookOptions.filters[rt]&&(Fe.hookOptions.filters[rt]=0,We=!0);We&&Fe.updateNextFrame()}else if(ie){let Fe=ie.runtime;for(let We of am)Fe.hookOptions.filters[We]=0;Fe.hookOptions.enableFilters=!1,Fe.updateNextFrame()}},[ie,G]),Lo(()=>{if(ie&&(ie.overlay&&(ie.overlay.style.width=`${J.width}px`,ie.overlay.style.height=`${J.height}px`),ie.container&&(ie.container.style.width=`${J.width}px`,ie.container.style.height=`${J.height}px`),F)){let Fe=ie.runtime.world.width,We=ie.runtime.world.height,rt=Fe/We,Ue=Le.current.width,Ze=Le.current.height,at=Ue/Ze;if(rt>at){at=Ze/Ue,ie.runtime.manualHomePosition=!0;let tt=(Fe-We/at)/2;F==="start"&&(tt=0),F==="end"&&(tt=Fe-We/at),ie.runtime.setHomePosition({x:tt,y:0,width:We/at,height:We})}else{let tt=(We-Fe/at)/2;F==="start"&&(tt=0),F==="end"&&(tt=We-Fe/at),ie.runtime.manualHomePosition=!0,ie.runtime.setHomePosition({x:0,y:tt,width:Fe,height:Fe/at})}E&&ie.runtime.goHome({})}},[ie,J.height,J.width,F,_e]),Lo(()=>{let Fe=()=>{if(ie){let We=ie.runtime;Le.current.width!==V.width&&Le.current.height!==V.height&&(We.resize(Le.current.width,V.width,Le.current.height,V.height),Le.current.width=V.width,Le.current.height=V.height,We.updateNextFrame(),Le.current.didUpdate=!0)}};return window.addEventListener("resize",Fe),()=>window.removeEventListener("resize",Fe)},[ie,V.height,V.width]);let yt={width:120},Et=()=>{if(ie&&ie.navigator){let Fe=ie.runtime.world.height,We=ie.runtime.world.width,rt=window.devicePixelRatio||1,Ue=yt.width,Ze=yt.width/We*Fe;ie.navigator.width=Ue*rt,ie.navigator.height=Ze*rt,ie.navigator.style.width=Ue+"px",ie.navigator.style.height=Ze+"px"}};Lo(()=>{if(ie){Et();let Fe=ie.runtime;return Fe.world.addLayoutSubscriber(We=>{We==="recalculate-world-size"&&(Et(),Fe.resize(Le.current.width,V.width,Le.current.height,V.height),me(rt=>rt+1))})}return()=>{}},[ie,V.width,V.height]);let ai=De(function(Fe){let We=()=>{ce(!0)};return de(()=>{if(ie){ie.runtime.goHome();let rt=n&&n(ie);return void(rt&&rt.then?rt.then(We):We())}else throw new Error("Invalid configuration - no runtime found")},[]),Fe.children},[ie]);de(()=>{if(ie){let Fe=ie.runtime;if(l)return Fe.world.addLayoutSubscriber(We=>{We==="recalculate-world-size"&&Fe.goHome()})}return()=>{}},[ie,l]),de(()=>ie?ie.runtime.registerHook("useBeforeFrame",()=>{var Fe;if(Le.current.didUpdate&&ie.canvas){let We=window.devicePixelRatio||1,rt=Le.current.width,Ue=Le.current.height;ie.canvas.width=rt*We,ie.canvas.height=Ue*We,ie.canvas.style.width=rt+"px",ie.canvas.style.height=Ue+"px",(Fe=ie.canvas.getContext("2d"))==null||Fe.scale(We,We),ie&&ie.em&&ie.em.updateBounds(),Le.current.didUpdate=!1}}):()=>{},[ie,l]),de(()=>{let Fe=()=>{ie&&(H("sketch"),Wt("mode-sketch")),window.removeEventListener("keyup",Fe)},We=rt=>{if(rt.code==="Space"&&ie&&ie.runtime.mode==="sketch"){if(rt.target&&rt.target.tagName&&rt.target.tagName.toLowerCase()==="input")return;rt.preventDefault(),H("explore"),Wt("mode-explore"),window.addEventListener("keyup",Fe)}};return window.addEventListener("keydown",We),()=>{window.removeEventListener("keydown",We),window.removeEventListener("keyup",Fe)}},[ie]),he.current=!0;let ei=V,Ft=le(ei,["height","width"]),Xt=kC([V.width,V.height]),mt=!0;return ye&&Array.isArray(ye)&&ye.length>1&&ye[1].interactive===!1&&(mt=!1),z=z??"#000",Oe.current&&(z=getComputedStyle(Oe.current).getPropertyValue("--atlas-background")||z),K.createElement(Oo,{ref:Ge,className:["atlas",g?"":`atlas-width-${Xt}`,Qt,T,`atlas-${it}`].filter(Boolean).join(" ").trim(),style:A(A({},C),g?{}:{width:V.width,height:V.height})},it==="static-preset"?K.createElement(Oo,A({className:"atlas-static-container",ref:$t.container,tabIndex:0},L)):K.createElement("canvas",B(A(A({className:"atlas-canvas",part:"atlas-canvas",tabIndex:0},Ft),L),{ref:$t.canvas,"data-background":z})),K.createElement(Oo,{className:["atlas-overlay",mt?"atlas-overlay--interactive":""].filter(Boolean).join(" ").trim(),style:A({},S||{}),ref:$t.overlay},h?K.createElement(ai,null,K.createElement(pl.Provider,{value:J},K.createElement(hl.Provider,{value:ae},K.createElement(dl.Provider,{value:ie},y)))):K.createElement(bC,{bounds:J,preset:ie,mode:ae,setIsReady:ce,onCreated:n},y)),_?K.createElement(Oo,{className:"atlas-navigator"},K.createElement("canvas",{className:"atlas-navigator-canvas",part:"atlas-navigator-canvas",ref:$t.navigator})):null,g?K.createElement("style",null,`.atlas-width-${Xt} { width: ${V.width}px; height: ${V.height}px; }`):K.createElement("style",null,`
        .atlas { position: relative; display: flex; background: ${z}; z-index: var(--atlas-z-index, 10); -webkit-touch-callout: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
        .atlas-width-${Xt} { width: ${V.width}px; height: ${V.height}px; }
        .atlas-canvas { flex: 1 1 0px; }
        .atlas-canvas:focus, .atlas-static-container:focus { outline: none }
        .atlas-canvas:focus-visible, .atlas-canvas-container:focus-visible { outline: var(--atlas-focus, 2px solid darkorange) }
        .atlas-static-preset { touch-action: inherit; }
        .atlas-static-container { position: relative; overflow: hidden; flex: 1 1 0px; }
        .atlas-overlay { position: absolute; top: 0; left: 0; none; overflow: hidden; }
        /** setting the pointer events to none means that Atlas will own the touch and mousewheel events **/
        .atlas-overlay--interactive { pointer-events: none; }
        .atlas-static-image { position: absolute; user-select: none; transform-origin: 0px 0px; }
        .atlas-navigator { position: absolute; top: var(--atlas-navigator-top, 10px); right: var(--atlas-navigator-bottom, 10px); left: var(--atlas-navigator-left); bottom: var(--atlas-navigator-bottom); opacity: .8 }
        .atlas-navigator-canvas { width: 100%; }
      `),i)};function PC(e){return Number(e)==e?`${e}px`:e}var TC=e=>{var t=e,{resizeHash:i,aspectRatio:r,containerProps:n={}}=t,a=le(t,["resizeHash","aspectRatio","containerProps"]);let[l,u,h]=Xg(),g=a,{height:p,width:y}=g,S=le(g,["height","width"]);de(()=>{h()},[y,p,i,h]);let C=Ee(()=>r?{width:u.width,height:u.width*(1/r)}:u,[u,r]);return K.createElement(Oo,A({ref:l,className:"atlas-container"},n),C.width?K.createElement(AC,A({width:C.width||100,height:C.height||100},S),a.children):null,a.hideInlineStyle?null:K.createElement("style",null,`
          .atlas-container { 
            display: var(--atlas-container-display, block);
            flex: var(--atlas-container-flex, none);
            width: var(--atlas-container-width, ${y?`${y}px`:"100%"});
            height: var(--atlas-container-height, ${PC(p||(r?C.height:512))})  
          }
      `),a.htmlChildren)},vl=()=>Jt(dl),un=()=>{let e=vl();return e?e.runtime:void 0},Xc=(e,t=[])=>{let i=un();de(()=>i?i.registerHook("useAfterFrame",e):()=>{},t)},Zc=(e,t=[])=>{let i=un();de(()=>i?i.registerHook("useFrame",e):()=>{},t)},IC=()=>{let e=vl();return e&&e.canvas?e.canvas:void 0};function lm(){return Jt(pl)}var um=({onCreate:e})=>{let t=Se({x:0,y:0}),i=IC(),r=lm(),n=un(),[a,l]=Me(),[u,h]=Me(),g=Wc();return Zc(()=>{n&&a&&!u&&(n.pendingUpdate=!0)},[a,u]),Xc(()=>{if(a&&i&&n){let p=i.getContext("2d");if(p){let{x:y,y:S,width:C,height:_}=n.worldToViewer(a.x,a.y,(u?u.x:t.current.x)-a.x,(u?u.y:t.current.y)-a.y);p.lineWidth=u?3:1,p.strokeStyle="#fff",p.strokeRect(y,S,C,_),p.lineWidth=u?3:1,p.strokeStyle="#000",p.strokeRect(y+1,S+1,C-2,_-2)}}},[a,u]),de(()=>{let p=y=>{if(r&&n){let{x:S,y:C}=n.viewerToWorld(y.clientX-r.left,y.clientY-r.top);t.current.x=~~S,t.current.y=~~C}};return i?(i.addEventListener("mousemove",p),()=>i.removeEventListener("mousemove",p)):()=>{}},[r,i,n]),de(()=>{let p=y=>{g==="sketch"&&(l({x:Math.round(t.current.x),y:Math.round(t.current.y)}),h(void 0))};return i?(i.addEventListener("mousedown",p),()=>i.removeEventListener("mousedown",p)):()=>{}},[i,g]),de(()=>{let p=y=>{a&&!u&&h({x:Math.round(t.current.x),y:Math.round(t.current.y)})};return i?(i.addEventListener("mouseup",p),()=>i.removeEventListener("mouseup",p)):()=>{}},[i,a,u]),de(()=>{a&&u&&e({x:Math.min(a.x,u.x),y:Math.min(a.y,u.y),width:Math.abs(u.x-a.x),height:Math.abs(u.y-a.y)})},[a,e,u]),null};async function RC(e,t,i){if(Pa.startsWith("18.")){let r=await Promise.resolve().then(()=>Be(ef(),1)),n=r.default?r.default.createRoot:r.createRoot;i.current||(i.current=n(e)),i.current.render(t)}else if(typeof ReactDOM<"u"){let{render:r,unmountComponentAtNode:n}=ReactDOM;r(t,e),i.current={unmount(){n(e)}}}else{let r=await Promise.resolve().then(()=>(Qe(),_s)),n=r.default?r.default.render:r.render,a=r.default?r.default.unmountComponentAtNode:r.unmountComponentAtNode;n(t,e),i.current={unmount(){a(e)}}}}var LC=K.forwardRef((e,t)=>{var i=e,{children:r}=i,n=le(i,["children"]);let a=Se(),l=un(),u=Se(0),h=Se(),g=Se();return Zc(()=>{var p,y,S,C;if(n.relative){let _=a.current;if(_&&l){let T=l.getScaleFactor();u.current!==T&&(u.current=T,_.style.transformOrigin="0 0",_.style.transform=`scale(${1/u.current})`,_.style.width=`${u.current*100}%`,_.style.height=`${u.current*100}%`,a.current&&((y=(p=h.current)==null?void 0:p.__owner.value)!=null&&y.rotation)&&(_.style.transform=`scale(${1/u.current}) translate(50%, 50%) rotate(${((C=(S=h.current)==null?void 0:S.__owner.value)==null?void 0:C.rotation)||0}deg)  translate(-50%, -50%)`))}}},[n.relative]),Rt(()=>{let p=h.current;t&&p&&(typeof t=="function"?t(p):t.current=p);async function y(){if(p&&p.__host){let S=n.relative?K.createElement("div",{ref:a},r):r;await RC(p.__host.element,S,g)}}p&&p.__host?y():p&&(p.__onCreate=y)},[t,r,h,n.relative]),Rt(()=>()=>{g.current&&setTimeout(()=>{g.current.unmount()},0)},[]),K.createElement("box",B(A({html:!0},n),{ref:h}))});LC.displayName="HTMLPortal";var cm=(e,t,i=[])=>{let r=un(),n=r?r.world:void 0;de(()=>{if(r){let a=t,l=Cs[e];r.world.activatedEvents.push(l);let u=l.slice(2).toLowerCase();return r.world.addEventListener(u,a),()=>{r.world.removeEventListener(u,a)}}return()=>{}},[n,e,...i])};function hm(e,t){if(e===0)return[0,1];if(t===0)return[1,0];let i=Math.abs(e)/Math.abs(t);return[i,1-i]}function OC(){let e=Se({ctrl:!1,shift:!1,alt:!1});return Rt(()=>{function t(r){r.key==="Shift"&&(e.current.shift=!0),r.key==="Control"&&(e.current.ctrl=!0),r.key==="Alt"&&(e.current.alt=!0)}function i(r){r.key==="Shift"&&(e.current.shift=!1),r.key==="Control"&&(e.current.ctrl=!1),r.key==="Alt"&&(e.current.alt=!1)}return window.addEventListener("keydown",t),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",i)}},[]),e}var $C=(e,t)=>{let i=Wc(),r=un(),n=lm(),a=Se(),l=Se(null),u=Se(),[h,g]=Me(!1),p=Se(!1),y=Se({north:0,south:0,east:0,west:0}),S=OC(),C=De(E=>F=>{if(p.current=!0,g(!0),n&&r){let{top:z,left:U}=n,q=r.viewerToWorld(F.pageX-U,F.pageY-z);u.current={x:q.x,y:q.y},a.current=E}},[n,r]),_=Ee(()=>e.width/e.height,[e.width,e.height]),T=De(E=>{if(!Math.abs(E.north-E.south+(E.east-E.west)))return;let F=-E.west+E.east,z=-E.north+E.south,U=e.width+F,q=e.height+z;if(U/q>=_){let G=q*_,V=U-G,[ae,H]=hm(E.east,E.west);E.west=E.west+V*H,E.east=E.east-V*ae}else{let G=U/_,V=q-G,[ae,H]=hm(E.north,E.south);E.north=E.north+V*ae,E.south=E.south-V*H}},[e.width,e.height,_]);Zc(()=>{u&&r&&r.updateNextFrame()}),de(()=>{r&&r.updateNextFrame()},[r,h]);let L=De(E=>{var F;if(!r||!n||r.mode!=="sketch")return;let{top:z,left:U}=n,q=r.viewerToWorld(E.pageX-U,E.pageY-z),G=l.current,V=!e.maintainAspectRatio&&S.current.alt,ae=!V&&S.current.shift&&((F=a.current)==null?void 0:F.indexOf("-"))!==-1;if((a.current==="translate"||a.current==="east"||a.current==="north-east"||a.current==="south-east")&&(y.current.east=q.x-(u.current?u.current.x:0),V&&(y.current.west=-y.current.east)),(a.current==="translate"||a.current==="west"||a.current==="north-west"||a.current==="south-west")&&(y.current.west=q.x-(u.current?u.current.x:0),V&&(y.current.east=-y.current.west)),(a.current==="translate"||a.current==="north"||a.current==="north-east"||a.current==="north-west")&&(y.current.north=q.y-(u.current?u.current.y:0),V&&(y.current.south=-y.current.north)),(a.current==="translate"||a.current==="south"||a.current==="south-west"||a.current==="south-east")&&(y.current.south=q.y-(u.current?u.current.y:0),V&&(y.current.north=-y.current.south)),(e.maintainAspectRatio||ae)&&T(y.current),G){let H=y.current.west,se=y.current.north,ce=e.width+y.current.east,he=e.height+y.current.south;G.points[1]=Math.min(H,ce),G.points[2]=Math.min(se,he),G.points[3]=Math.max(H,ce),G.points[4]=Math.max(se,he),r.updateNextFrame()}},[r,e.width,e.height,e.maintainAspectRatio,n]);cm("mousemove",L,[e.width,e.height,n]),cm("pointermove",L,[e.width,e.height,n]);let O=Se();return de(()=>{O.current=()=>{if(p.current){let E=y.current.west,F=y.current.north,z=e.width+y.current.east,U=e.height+y.current.south,q=Math.min(E,z),G=Math.min(F,U),V=Math.max(E,z),ae=Math.max(F,U),H={x:(e.x||0)+q,y:(e.y||0)+G,width:V-q||1,height:ae-G||1};e.maintainAspectRatio,t(H),a.current=void 0,u.current=void 0,y.current.east=0,y.current.west=0,y.current.north=0,y.current.south=0,p.current=!1,g(!1)}}},[t,e.height,e.width,e.x,e.y]),de(()=>{let E=()=>{O.current&&O.current()};return window.addEventListener("pointerup",E),window.addEventListener("touchend",E),()=>{window.removeEventListener("pointerup",E),window.removeEventListener("touchend",E)}},[]),{portalRef:l,mode:i,mouseEvent:C,onPointerMoveCallback:L,isEditing:h}};function dm(e,t){return e?t?B(A(A({},e),t||{}),{":hover":e[":hover"]?Object.assign(e[":hover"]||{},t[":hover"]||{}):t[":hover"],":active":e[":active"]?Object.assign(e[":active"]||{},t[":active"]||{}):t[":hover"]}):e:t}Xe(),Xe();var FC=0;function ni(e,t,i,r,n){var a,l,u={};for(l in t)l=="ref"?a=t[l]:u[l]=t[l];var h={type:e,props:u,key:i,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--FC,__source:n,__self:r};if(typeof e=="function"&&(a=e.defaultProps))for(l in a)u[l]===void 0&&(u[l]=a[l]);return Ce.vnode&&Ce.vnode(h),h}var MC={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:[],motivation:null,label:null,thumbnail:[],summary:null,requiredStatement:null,metadata:[],rights:null,provider:[],items:[],seeAlso:[],homepage:[],logo:[],rendering:[],service:[]},zC={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:[],motivation:null,thumbnail:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:[],rights:null,navDate:null,provider:[],items:[],annotations:[],seeAlso:[],homepage:[],logo:[],partOf:[],rendering:[],service:[],duration:0,height:0,width:0},NC={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:[],motivation:null,thumbnail:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:[],rights:null,navDate:null,provider:[],items:[],annotations:[],seeAlso:[],homepage:[],logo:[],partOf:[],rendering:[],service:[],services:[]},jC={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:[],behavior:[],homepage:[],items:[],label:null,logo:[],metadata:[],motivation:null,navDate:null,provider:[],partOf:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:[],requiredStatement:null,rights:null,seeAlso:[],service:[],services:[],start:null,structures:[],summary:null,thumbnail:[],viewingDirection:"left-to-right"},BC={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:[],motivation:null,thumbnail:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:[],rights:null,navDate:null,provider:[],items:[],annotations:[],seeAlso:[],homepage:[],logo:[],partOf:[],rendering:[],service:[],start:null,supplementary:null,viewingDirection:"left-to-right"},DC={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:[],seeAlso:[],homepage:[]},pm=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];function UC(e){if(typeof e>"u"||e===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(e))throw new Error("Array is not a valid entity");if(typeof e!="object")throw new Error(`${typeof e} is not a valid entity`);if(typeof e.type=="string"){let t=pm.indexOf(e.type);if(t!==-1)return pm[t]}if(e.profile)return"Service";throw new Error("Resource type is not known")}var fm=class{constructor(e,t={}){Ve(this,"traversals"),Ve(this,"options"),this.traversals=A({collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[]},e),this.options=A({allowUndefinedReturn:!1},t)}static all(e){return new fm({collection:[e],manifest:[e],canvas:[e],annotationCollection:[e],annotationPage:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e]})}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=e.thumbnail.map(t=>this.traverseType(t,this.traversals.contentResource))),e.provider&&(e.provider=e.provider.map(t=>this.traverseAgent(t))),e}traverseLinking(e){return e.seeAlso&&(e.seeAlso=e.seeAlso.map(t=>this.traverseType(t,this.traversals.contentResource))),e.service&&(e.service=e.service.map(t=>this.traverseType(t,this.traversals.service))),e.services&&(e.services=e.services.map(t=>this.traverseType(t,this.traversals.service))),e.logo&&(e.logo=e.logo.map(t=>this.traverseType(t,this.traversals.contentResource))),e.homepage&&(e.homepage=e.homepage.map(t=>this.traverseType(t,this.traversals.contentResource))),e.partOf&&(e.partOf=e.partOf.map(t=>typeof t=="string"||!t.type?this.traverseType(t,this.traversals.contentResource):t.type==="Canvas"?this.traverseType(t,this.traversals.canvas):t.type==="AnnotationCollection"?this.traverseType(t,this.traversals.annotationCollection):this.traverseType(t,this.traversals.contentResource))),e.start&&(e.start=e.start?this.traverseType(e.start,this.traversals.canvas):null),e.rendering&&(e.rendering=e.rendering.map(t=>this.traverseType(t,this.traversals.contentResource))),e.supplementary&&(e.supplementary=e.supplementary.map(t=>this.traverseType(t,this.traversals.contentResource))),e}traverseCollectionItems(e){return e.items&&e.items.map(t=>t.type==="Collection"?this.traverseCollection(t):this.traverseManifest(t)),e}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(e))))),this.traversals.collection)}traverseManifestItems(e){return e.items&&(e.items=e.items.map(t=>this.traverseCanvas(t))),e}traverseManifestStructures(e){return e.structures&&(e.structures=e.structures.map(t=>this.traverseRange(t))),e}traverseManifest(e){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e)))))),this.traversals.manifest)}traverseCanvasItems(e){return e.items=(e.items||[]).map(t=>this.traverseAnnotationPage(t)),e}traverseInlineAnnotationPages(e){return typeof e=="string"||!e||e.annotations&&(e.annotations=e.annotations.map(t=>this.traverseAnnotationPage(t))),e}traverseCanvas(e){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))))),this.traversals.canvas)}traverseAnnotationPageItems(e){return e.items&&(e.items=e.items.map(t=>this.traverseAnnotation(t))),e}traverseAnnotationPage(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(e))),this.traversals.annotationPage)}traverseAnnotationBody(e){return Array.isArray(e.body)?e.body=e.body.map(t=>this.traverseContentResource(t)):e.body&&(e.body=this.traverseContentResource(e.body)),e}traversePosterCanvas(e){return e.posterCanvas&&(e.posterCanvas=this.traverseType(e.posterCanvas,this.traversals.canvas)),e.placeholderCanvas&&(e.placeholderCanvas=this.traverseType(e.placeholderCanvas,this.traversals.canvas)),e.accompanyingCanvas&&(e.accompanyingCanvas=this.traverseType(e.accompanyingCanvas,this.traversals.canvas)),e}traverseAnnotation(e){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(e)),this.traversals.annotation)}traverseContentResourceLinking(e){return typeof e=="string"||!e||e&&e.service&&(e.service=(e.service||[]).map(t=>this.traverseType(t,this.traversals.service))),e}traverseContentResource(e){return e.type==="Choice"&&(e.items=e.items.map(t=>this.traverseContentResource(t))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(e)),this.traversals.contentResource)}traverseRangeRanges(e){return e.items&&(e.items=e.items.map(t=>typeof t=="string"?this.traverseCanvas({id:t,type:"Canvas"}):t.type==="Manifest"?this.traverseManifest(t):this.traverseRange(t))),e}traverseRange(e){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(e)))),this.traversals.range)}traverseAgent(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.agent)}traverseType(e,t){return t.reduce((i,r)=>{let n=r(i);return typeof n>"u"&&!this.options.allowUndefinedReturn?i:n},e)}traverseService(e){return this.traverseType(e,this.traversals.service)}traverseUnknown(e){let t=UC(e);switch(t){case"Collection":return this.traverseCollection(e);case"Manifest":return this.traverseManifest(e);case"Canvas":return this.traverseCanvas(e);case"AnnotationPage":return this.traverseAnnotationPage(e);case"Annotation":return this.traverseAnnotation(e);case"ContentResource":return this.traverseContentResource(e);case"Range":return this.traverseRange(e);case"Service":return this.traverseService(e);case"Agent":return this.traverseAgent(e);default:throw new Error(`Unknown or unsupported resource type of ${t}`)}}},gm=["sc:Collection","sc:Manifest","sc:Canvas","oa:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];function WC(e){if(typeof e>"u"||e===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(e))throw new Error("Array is not a valid entity");if(typeof e!="object")throw new Error(`${typeof e} is not a valid entity`);if(typeof e["@type"]=="string"){let t=gm.indexOf(e["@type"]);if(t!==-1)return gm[t]}if(e.profile)return"Service";if(e.format||e["@type"])return"ContentResource";throw new Error("Resource type is not known")}var mm=class{constructor(e,t={}){Ve(this,"traversals"),Ve(this,"options"),this.traversals=A({collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[]},e),this.options=A({convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1},t)}static all(e){return new mm({collection:[e],manifest:[e],canvas:[e],annotationList:[e],sequence:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e],layer:[e]})}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(e))),this.traversals.collection)}traverseCollectionItems(e){if(this.options.mergeMemberProperties){let t=[...(e.manifests||[]).map(i=>typeof i=="string"?{"@id":i,"@type":"sc:Manifest"}:i),...(e.collections||[]).map(i=>typeof i=="string"?{"@id":i,"@type":"sc:Collection"}:i),...e.members||[]];delete e.collections,delete e.manifests,e.members=t}return e.manifests&&(e.manifests=e.manifests.map(t=>this.traverseManifest(typeof t=="string"?{"@id":t,"@type":"sc:Manifest"}:t))),e.collections&&(e.collections=e.collections.map(t=>this.traverseCollection(typeof t=="string"?{"@id":t,"@type":"sc:Collection"}:t))),e.members&&(e.members=e.members.map(t=>typeof t=="string"?t:this.traverseUnknown(t))),e}traverseManifest(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e))),this.traversals.manifest)}traverseManifestItems(e){return e.sequences&&(e.sequences=e.sequences.map(t=>this.traverseSequence(t))),e.structures&&(e.structures=e.structures.map(t=>this.traverseRange(t))),e}traverseSequence(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(e))),this.traversals.sequence)}traverseSequenceItems(e){return e.canvases&&(e.canvases=e.canvases.map(t=>this.traverseCanvas(t))),e}traverseCanvas(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))),this.traversals.canvas)}traverseCanvasItems(e){return e.images&&(e.images=e.images.map(t=>this.traverseAnnotation(t))),e.otherContent&&(e.otherContent=e.otherContent.map(t=>this.traverseAnnotationList(t))),e}traverseRange(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(e))),this.traversals.range)}traverseRangeItems(e){if(this.options.mergeMemberProperties){let t=[...(e.ranges||[]).map(i=>typeof i=="string"?{"@id":i,"@type":"sc:Range"}:i),...(e.canvases||[]).map(i=>typeof i=="string"?{"@id":i,"@type":"sc:Canvas"}:i),...e.members||[]];delete e.ranges,delete e.canvases,e.members=t.length?t.map(i=>this.traverseUnknown(i)):void 0}return e}traverseAnnotationList(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationListItems(e))),this.traversals.annotationList)}traverseAnnotationListItems(e){return e.resources&&(e.resources=e.resources.map(t=>this.traverseAnnotation(t))),e}traverseAnnotation(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(e))),this.traversals.annotation)}traverseAnnotationItems(e){return e.resource&&(e.resource=this.traverseContentResource(e.resource)),e.on,e}traverseLayer(e){return this.traverseType(this.traverseLinking(this.traverseLayerItems(e)),this.traversals.layer)}traverseLayerItems(e){return e.otherContent&&(e.otherContent=e.otherContent.map(t=>this.traverseAnnotationList(t))),e}traverseChoice(e){return this.traverseType(this.traverseChoiceItems(e),this.traversals.choice)}traverseChoiceItems(e){return e.default&&e.default!=="rdf:nil"&&(e.default=this.traverseContentResource(e.default)),e.item&&e.item!=="rdf:nil"&&(e.item=e.item.map(t=>this.traverseContentResource(t))),e}traverseService(e){return this.traverseType(this.traverseLinking(e),this.traversals.service)}traverseContentResource(e){return e["@type"]==="oa:Choice"?this.traverseChoice(e):this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.contentResource)}traverseUnknown(e){if(!e["@type"]||typeof e=="string")return e;switch(WC(e)){case"sc:Collection":return this.traverseCollection(e);case"sc:Manifest":return this.traverseManifest(e);case"sc:Canvas":return this.traverseCanvas(e);case"sc:Sequence":return this.traverseSequence(e);case"sc:Range":return this.traverseRange(e);case"oa:Annotation":return this.traverseAnnotation(e);case"oa:AnnotationList":return this.traverseAnnotationList(e);case"sc:Layer":return this.traverseLayer(e);case"Service":return this.traverseService(e);case"oa:Choice":return this.traverseChoice(e);case"ContentResource":return this.traverseContentResource(e)}return e.profile?this.traverseService(e):e}traverseImageResource(e){let t=Array.isArray(e),i=Array.isArray(e)?e:[e],r=[];for(let n of i)typeof n=="string"?r.push(this.traverseContentResource({"@id":n,"@type":"dctypes:Image"})):r.push(this.traverseContentResource(n));return!t&&!this.options.convertPropsToArray?r[0]:r}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=this.traverseImageResource(e.thumbnail)),e.logo&&(e.logo=this.traverseImageResource(e.logo)),e}traverseOneOrMoreServices(e){let t=Array.isArray(e),i=Array.isArray(e)?e:[e],r=[];for(let n of i)r.push(this.traverseService(n));return!t&&!this.options.convertPropsToArray?r[0]:r}traverseLinking(e){return e.related&&(e.related=this.traverseOneOrManyType(e.related,this.traversals.contentResource)),e.rendering&&(e.rendering=this.traverseOneOrManyType(e.rendering,this.traversals.contentResource)),e.service&&(e.service=this.traverseOneOrMoreServices(e.service)),e.seeAlso&&(e.seeAlso=this.traverseOneOrManyType(e.seeAlso,this.traversals.contentResource)),e.within&&(typeof e.within=="string"||(e.within=this.traverseOneOrManyType(e.within,this.traversals.contentResource))),e.startCanvas&&(typeof e.startCanvas=="string"?e.startCanvas=this.traverseType({"@id":e.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):e.startCanvas&&this.traverseType(e.startCanvas,this.traversals.canvas)),e.contentLayer&&(typeof e.contentLayer=="string"?e.contentLayer=this.traverseLayer({"@id":e.contentLayer,"@type":"sc:Layer"}):e.contentLayer=this.traverseLayer(e.contentLayer)),e}traverseOneOrManyType(e,t){if(!Array.isArray(e))if(this.options.convertPropsToArray)e=[e];else return this.traverseType(e,t);return e.map(i=>this.traverseType(i,t))}traverseType(e,t){return t.reduce((i,r)=>{let n=r(i);return typeof n>"u"&&!this.options.allowUndefinedReturn?i:n},e)}},HC="http://library.stanford.edu/iiif/image-api/compliance.html#level0",vm="http://library.stanford.edu/iiif/image-api/compliance.html#level1",ym="http://library.stanford.edu/iiif/image-api/compliance.html#level2",qC="http://library.stanford.edu/iiif/image-api/conformance.html#level0",bm="http://library.stanford.edu/iiif/image-api/conformance.html#level1",wm="http://library.stanford.edu/iiif/image-api/conformance.html#level2",QC="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",xm="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",_m="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",VC="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",Sm="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",Em="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",GC="http://iiif.io/api/image/1/level0.json",YC="http://iiif.io/api/image/1/profiles/level0.json",Cm="http://iiif.io/api/image/1/level1.json",km="http://iiif.io/api/image/1/profiles/level1.json",Am="http://iiif.io/api/image/1/level2.json",Pm="http://iiif.io/api/image/1/profiles/level2.json",XC="http://iiif.io/api/image/2/level0.json",ZC="http://iiif.io/api/image/2/profiles/level0.json",Tm="http://iiif.io/api/image/2/level1.json",Im="http://iiif.io/api/image/2/profiles/level1.json",Rm="http://iiif.io/api/image/2/level2.json",Lm="http://iiif.io/api/image/2/profiles/level2.json",KC="level0",Om="level1",$m="level2",JC="http://iiif.io/api/image/2/level0",Fm="http://iiif.io/api/image/2/level1",Mm="http://iiif.io/api/image/2/level2",ek=[Fm,Mm,vm,ym,bm,wm,xm,_m,Sm,Em,Cm,km,Am,Pm,Tm,Im,Rm,Lm,Om,$m],tk=[JC,Fm,Mm,HC,vm,ym,qC,bm,wm,QC,xm,_m,VC,Sm,Em,GC,YC,Cm,km,Am,Pm,XC,ZC,Tm,Im,Rm,Lm,KC,Om,$m],Kc={attributionLabel:"Attribution",lang:"none",providerId:"http://example.org/provider",providerName:"Unknown"};function zn(e,t="none"){if(!e)return{};let i=Array.isArray(e)?e:[e],r={};for(let n of i){if(typeof n=="string"){r[t]=r[t]?r[t]:[],r[t].push(n||"");continue}if(!n["@language"]){r[t]=r[t]?r[t]:[],r[t].push(n["@value"]||"");continue}let a=n["@language"];r[a]=r[a]?r[a]:[],r[a].push(n["@value"]||"")}return r}function zm(e){if(Array.isArray(e))return zm(e.find(t=>typeof t=="string"));if(tk.indexOf(e)!==-1)return"level2";if(ek.indexOf(e)!==-1)return"level1";if(typeof e=="string")return e}function ik(e){let t=Array.isArray(e)?e:[e];for(let i of t)switch(i){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}function rk(e){switch(e){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}function nk(e){return Array.isArray(e)?e:[e]}function sk(e){for(let t of["sc","oa","dcterms","dctypes","iiif"])if(e.startsWith(`${t}:`))return e.slice(t.length+1);return e}var ok=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function Jc(e){let t=e["@id"]||e.id,i=e["@type"]||e.type,r=e.profile||void 0,n=e["@context"]||void 0;if(r){let a=rk(r);if(a)return a}if(n){let a=ik(n);if(a)return a}if(i){if(Array.isArray(i)){if(i.indexOf("oa:CssStylesheet")!==-1)return"CssStylesheet";if(i.indexOf("cnt:ContentAsText")!==-1)return"TextualBody";i=i[0]}for(let a of["sc","oa","dcterms","dctypes","iiif"])if(i.startsWith(`${a}:`)){i=i.slice(a.length+1);break}switch(i){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(i&&ok.indexOf(i)!==-1)return i;if(e.format){if(e.format.startsWith("image/"))return"Image";if(e.format.startsWith("text/")||e.format==="application/pdf")return"Text";if(e.format.startsWith("application/"))return"Dataset"}return t&&(t.endsWith(".jpg")||t.endsWith(".png")||t.endsWith(".jpeg"))?"Image":i||"unknown"}var ak=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm;function lk(e){let t=e.match(ak);return t?t[0]:e}function uk(e,t="Rights/License",i="none"){let r=null,n=[],a=Array.isArray(e)?e:[e];for(let l of a){let u=l?lk(l):void 0;if(u&&(u.indexOf("creativecommons.org")!==-1||u.indexOf("rightsstatements.org")!==-1)){u.startsWith("https://")?r=`http://${u.slice(8)}`:r=u;continue}u&&n.push({label:{[i]:[t]},value:{[i]:[u]}})}return[r,n]}var ck=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function hk(e){if(e){let t=Array.isArray(e)?e:[e],i=[];for(let r of t)r==="http://iiif.io/api/presentation/2/context.json"&&i.push("http://iiif.io/api/presentation/3/context.json"),ck.indexOf(r)===-1&&i.push(r);if(t.length)return i.length===1?i[0]:i}}function dk(e){return e?e.map(t=>({label:zn(t.label),value:zn(t.value)})):[]}function Wr(e){for(let t in e)(typeof e[t]>"u"||e[t]===null)&&delete e[t];return e}var Nm=0;function jm(e,t){let i=encodeURI(e.id||e["@id"]||"").trim();return i&&t?`${i}/${t}`:i||(Nm++,`http://example.org/${e["@type"]}${t?`/${t}`:""}/${Nm}`)}function Hr(e){let t=[...e.behavior||[]];return e.viewingHint&&t.push(e.viewingHint),{"@context":e["@context"]?hk(e["@context"]):void 0,id:(e["@id"]||jm(e)).trim(),type:Jc(e),behavior:t.length?t:void 0,height:e.height?e.height:void 0,width:e.width?e.width:void 0,motivation:e.motivation?sk(e.motivation):void 0,viewingDirection:e.viewingDirection,profile:e.profile,format:e.format?e.format:void 0,duration:void 0,timeMode:void 0}}function Cr(e){let[t,i]=uk(e.license),r=[...e.metadata?dk(e.metadata):[],...i];return{rights:t,metadata:r.length?r:void 0,label:e.label?zn(e.label):void 0,requiredStatement:e.attribution?{label:zn(Kc.attributionLabel),value:zn(e.attribution)}:void 0,navDate:e.navDate,summary:e.description?zn(e.description):void 0,thumbnail:e.thumbnail}}function pk(e){if(!e.within)return;let t=Array.isArray(e.within)?e.within:[e.within],i=[];for(let r of t)if(typeof r=="string"){if(r)switch(e["@type"]){case"sc:Manifest":i.push({id:r,type:"Collection"});break}}else r["@id"]&&i.push({id:r["@id"],type:Jc(r)});return i.length?i:void 0}function cn(e){let t=e.related?Array.isArray(e.related)?e.related:[e.related]:[],i=e.contentLayer;return{provider:e.logo||t.length?[{id:Kc.providerId,type:"Agent",homepage:t.length?[t[0]]:void 0,logo:e.logo?Array.isArray(e.logo)?e.logo:[e.logo]:void 0,label:zn(Kc.providerName)}]:void 0,partOf:pk(e),rendering:e.rendering,seeAlso:e.seeAlso,start:e.startCanvas,service:e.service?nk(e.service):void 0,supplementary:i?[i]:void 0}}function fk(e){return Wr(B(A(A(A({},Hr(e)),Cr(e)),cn(e)),{items:e.members}))}function gk(e){let t=[],i=[];for(let n of e.sequences||[])n.canvases.length&&t.push(...n.canvases),n.behavior&&i.push(...n.behavior);let r=Hr(e);return i.length&&(r.behavior?r.behavior.push(...i):r.behavior=i),Wr(B(A(A(A({},r),Cr(e)),cn(e)),{items:t,structures:e.structures}))}function mk(e){return Wr(B(A(A(A({},Hr(e)),Cr(e)),cn(e)),{items:e.images&&e.images.length?[{id:jm(e,"annotation-page"),type:"AnnotationPage",items:e.images}]:void 0}))}function vk(e){return Wr(B(A(A(A({},Hr(e)),Cr(e)),cn(e)),{items:e.resources}))}function yk(e){return!e.canvases||e.canvases.length===0?{canvases:[],behavior:[]}:{canvases:e.canvases,behavior:e.viewingHint?[e.viewingHint]:[]}}function bk(e){return Wr(B(A(A(A({},Hr(e)),Cr(e)),cn(e)),{target:typeof e.on=="string"?encodeURI(e.on).trim():e.on,body:e.resource}))}function wk(e){let t=e;return Wr(A(A(A({},Hr(t)),Cr(t)),cn(t)))}function xk(e){let t=[];return e.default&&e.default!=="rdf:nil"&&t.push(e.default),e.item&&e.item!=="rdf:nil"&&t.push(...e.item),B(A(A({},Hr(e)),Cr(e)),{items:t})}function _k(e){return Wr(B(A(A(A({},Hr(e)),Cr(e)),cn(e)),{items:e.members}))}function Sk(e){let t=e,{"@id":i,"@type":r,"@context":n,profile:a}=t,l=le(t,["@id","@type","@context","profile"]);return i&&(l.id=i),l.type=Jc(e),l.type==="unknown"&&(l.type="Service"),a&&(l.profile=zm(a)),Wr(A(A({},l),Cr(l)))}function Ek(e){return Wr(A(A(A({},Hr(e)),Cr(e)),cn(e)))}var Ck=new mm({collection:[fk],manifest:[gk],canvas:[mk],annotationList:[vk],sequence:[yk],annotation:[bk],contentResource:[wk],choice:[xk],range:[_k],service:[Sk],layer:[Ek]});function kk(e){return e&&e["@context"]&&(e["@context"]==="http://iiif.io/api/presentation/2/context.json"||e["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")!==-1||e["@context"]==="http://www.shared-canvas.org/ns/context.json")||e["@context"]==="http://iiif.io/api/image/2/context.json"?Ck.traverseUnknown(e):e}function Ak(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function Bm(e,t){if(typeof e=="string")return{id:e,type:t};if(!e.id)throw new Error(`Invalid resource does not have an ID (${t})`);return e}function Pk(e){return(t,i)=>{let r=e[t]?e[t]:{};return n=>{let a=Bm(n,i||t);return a&&a.id&&t?(r[a.id]=r[a.id]?Object.assign({},r[a.id],a):Object.assign({},a),{id:a.id,type:t==="ContentResource"?t:a.type}):a}}}function Tk(e){return(t,i)=>r=>{let{id:n,type:a}=Bm(r,i||t);if(typeof n>"u")throw new Error("Found invalid entity without an ID.");return t==="ContentResource"?e[n]=t:e[n]=a,r}}function Ik(e){let t=JSON.stringify(e),i=5381,r=t.length;for(;r;)i=i*33^t.charCodeAt(--r);let n=(i>>>0).toString(16);return n.length%2?"0"+n:n}function eh(e){return t=>typeof t=="string"?{id:t,type:e}:t.id?t.type?t:A({type:e},t):A({id:Ik(t),type:e},t)}function zs(e){return t=>A(A({},e),t)}function Ns(e){return Array.isArray(e)?e:[e]}function Rk(e){return e.body&&(e.body=Ns(e.body)),e.seeAlso&&(e.seeAlso=Ns(e.seeAlso)),e.body&&(e.body=Ns(e.body)),e.audience&&(e.audience=Ns(e.audience)),e.accessibility&&(e.accessibility=Ns(e.accessibility)),e.motivation&&(e.motivation=Ns(e.motivation)),e}function Dm(e){let t=kk(e),i=Ak(),r={},n=Pk(i),a=Tk(r),l=new fm({collection:[zs(NC),a("Collection"),n("Collection")],manifest:[zs(jC),a("Manifest"),n("Manifest")],canvas:[zs(zC),a("Canvas"),n("Canvas")],annotationPage:[eh("AnnotationPage"),zs(MC),a("AnnotationPage"),n("AnnotationPage")],annotation:[eh("Annotation"),Rk,a("Annotation"),n("Annotation")],contentResource:[eh("ContentResource"),a("ContentResource"),n("ContentResource")],range:[zs(BC),a("Range","Canvas"),n("Range","Canvas")],agent:[zs(DC),a("Agent"),n("Agent")]}).traverseUnknown(t);return{entities:i,resource:l,mapping:r}}var Nn="__$UNSET$__",Um="__$UNWRAP$__";function Lk(e,t){let i=e.requests[t],r=e.mapping[t];if(!(!r||i&&i.resourceUri&&!e.entities[r][i.resourceUri]))return e.entities[r][i?i.resourceUri:t]}function Ok(e){let t={};for(let[i,r]of e){if(i===Um&&r!==Nn)return r;r!==Nn&&typeof r<"u"&&r!==null&&(t[i]=r)}return t}function Wm(e,t,i){if(!t.type||!t.id)throw new Error("Unknown entity");if(!i[t.type])throw new Error(`Serializer not found for ${t.type}`);function r(n){let a=i[n.type];if(!a)return Nn;let l=Lk(e,n.id)||(n.id&&n.type?n:null);if(!l)return Nn;let u=a(l,e,{isTopLevel:t.id===n.id}),h=u.next();for(;!h.done;){let g=h.value,p=Nn;if(g)if(Array.isArray(g)){let y=[];for(let S of g)y.push(r(S));p=y}else p=r(g);h=u.next(p)}return h.value===Nn?Nn:Ok(h.value)}return r(t)}function js(e){if(!e)return;let t=Object.keys(e);if(t.length!==0){if(t.length===1){let i=t[0];if(!i)return"";let r=(e[i]||[]).join("");return i==="@none"||i==="none"||i==="en"?r:{"@language":i,"@value":r}}return t.map(i=>({"@language":i,"@value":(e[i]||[]).join("")}))}}function Hm(e){return Array.isArray(e)?e.map(t=>Hm(t)):typeof e=="string"?e:e.type&&e.type==="Canvas"?e.id:e}function hn(e,t=!1){if(e)return e.length>1&&!t?e:e[0]||void 0}function $k(e){if(e){if(typeof e=="string")return{"@id":e};if("@id"in e){let t=A({},e);return delete t["@type"],t}return{"@context":"http://iiif.io/api/image/2/context.json","@id":e.id,profile:`http://iiif.io/api/image/2/profiles/${e.profile}.json`}}}function jn(e,t){return[["@id",e.id],["@type",t],["format",e.format],["height",e.height],["width",e.width],["viewingDirection",e.viewingDirection!=="left-to-right"?e.viewingDirection:void 0]]}function*Bn(e){let t=e.provider?yield e.provider[0]:void 0;return[["label",js(e.label)],["metadata",e.metadata&&e.metadata.length?e.metadata.map(i=>({label:js(i.label)||"",value:js(i.value)||""})):void 0],["description",js(e.summary)],["thumbnail",hn(yield e.thumbnail)],["navDate",e.navDate],["logo",t?hn(t.logo):void 0],["homepage",t?t.homepage:void 0],["attribution",e.requiredStatement?js(e.requiredStatement.value):void 0]]}function*$o(e){return[["seeAlso",hn(yield e.seeAlso)],["service",hn((e.service||[]).map($k))],["rendering",hn(yield e.rendering)],["startCanvas",e.start?e.start.id:void 0]]}var qm={Manifest:function*(e){return[...jn(e,"sc:Manifest"),...yield*Bn(e),...yield*$o(e),["sequences",[{"@id":`${e.id}/sequence0`,"@type":"sc:Sequence",canvases:yield e.items}]],["structures",yield e.structures]]},Canvas:function*(e){let t=(yield e.items)[0];return[...jn(e,"sc:Canvas"),...yield*Bn(e),...yield*$o(e),["images",t?[t.resources]:void 0],["annotations",e.annotations&&e.annotations.length?hn(yield e.annotations):void 0]]},AnnotationPage:function*(e){return[...jn(e,"sc:AnnotationList"),...yield*Bn(e),["resources",e.items&&e.items.length?hn(yield e.items):void 0]]},Annotation:function*(e){return[["@id",e.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",Hm(e.target)],["resource",hn(yield e.body,!0)]]},ContentResource:function*(e){switch(e.type){case"Image":return[...jn(e,"dctypes:Image"),...yield*Bn(e),...yield*$o(e)];case"Text":case"Dataset":default:return[...jn(e,void 0),...yield*Bn(e)]}},AnnotationCollection:function*(e){return[["@id",e.id],["@type","sc:Layer"],["label",js(e.label)]]},Collection:function*(e){return[...jn(e,"sc:Collection"),...yield*Bn(e),...yield*$o(e),["members",yield*e.items]]},Range:function*(e){let t=[],i=[];if(e.items)for(let r of e.items){let n=yield r;t.push({"@id":r.id,"@type":r.type,label:n?n.label:void 0,within:e.id}),r.type==="Canvas"&&i.push(r.id)}return[...jn(e,"sc:Range"),...yield*Bn(e),...yield*$o(e),["canvases",i.length===t.length?i:void 0],["members",i.length!==t.length?t:void 0]]}};function Dn(e){return[["id",e.id],["type",e.type],["format",e.format],["profile",e.profile],["height",e.height],["width",e.width],["duration",e.duration||void 0],["viewingDirection",e.viewingDirection!=="left-to-right"?e.viewingDirection:void 0],["behavior",e.behavior&&e.behavior.length?e.behavior:void 0],["timeMode",e.timeMode],["motivation",e.motivation]]}function fi(e){if(!(!e||e.length===0))return e}function Qm(e){if(e&&e.type&&e.type==="ImageService2"){let t=e,{id:i,type:r,profile:n}=t,a=le(t,["id","type","profile"]);return A({"@id":i,"@type":r,profile:n.startsWith("http")?n:`http://iiif.io/api/image/2/${n}.json`},a)}return e}function Vm(e){if(!(!e||e.length===0))return e.map(Qm)}function*Un(e){return[["label",e.label],["metadata",fi(e.metadata)],["summary",e.summary],["requiredStatement",e.requiredStatement],["rights",e.rights],["navDate",e.navDate],["language",e.language],["thumbnail",fi(yield e.thumbnail)],["placeholderCanvas",yield e.placeholderCanvas],["accompanyingCanvas",yield e.accompanyingCanvas],["provider",fi(yield e.provider)]]}function*Wn(e){return[["seeAlso",fi(yield e.seeAlso)],["service",Vm(e.service)],["services",Vm(e.services)],["rendering",fi(yield e.rendering)],["supplementary",fi(yield e.supplementary)],["homepage",fi(yield e.homepage)],["logo",fi(yield e.logo)],["partOf",fi(yield e.partOf)],["start",e.start]]}var Gm={Manifest:function*(e,t,{isTopLevel:i}){return i?[["@context","http://iiif.io/api/presentation/3/context.json"],...Dn(e),...yield*Un(e),...yield*Wn(e),["items",yield e.items],["structures",fi(yield e.structures)],["annotations",fi(yield e.annotations)]]:[...Dn(e),...yield*Un(e)]},Canvas:function*(e){return[...Dn(e),...yield*Un(e),...yield*Wn(e),["items",yield e.items],["annotations",fi(yield e.annotations)]]},Agent:function*(e){return[["id",e.id],["type","Agent"],["label",e.label],...yield*Wn(e)]},AnnotationPage:function*(e){return[...Object.entries(e).map(([t,i])=>[t,Array.isArray(i)?fi(i):i]).filter(([t,i])=>t!=="items"),...yield*Wn(e),["items",yield e.items]]},Service:function*(e){return[[Um,Qm(e)]]},Annotation:function*(e){return[...Object.entries(e).map(([t,i])=>[t,Array.isArray(i)?fi(i):i]).filter(([t])=>t!=="body"),["body",yield e.body]]},ContentResource:function*(e){return[...Dn(e),...yield*Un(e),...yield*Wn(e),["annotations",fi(yield e.annotations)]]},AnnotationCollection:function*(e){return[["id",e.id],["type","AnnotationCollection"],["label",e.label]]},Collection:function*(e,t,{isTopLevel:i}){return i?[["@context","http://iiif.io/api/presentation/3/context.json"],...Dn(e),...yield*Un(e),...yield*Wn(e),["items",fi(yield e.items)]]:[...Dn(e),...yield*Un(e)]},Range:function*(e){let t=[];for(let i of e.items)i.type==="Range"?t.push(yield i):t.push(i);return[...Dn(e),...yield*Un(e),...yield*Wn(e),["items",t],["annotations",fi(yield e.annotations)]]}},gi=Be(pc(),1);function Fk(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ym(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function Xm(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Ym(Object(i),!0).forEach(function(r){Fk(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ym(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function Ei(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Zm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),th=function(){return Math.random().toString(36).substring(7).split("").join(".")},yl={INIT:"@@redux/INIT"+th(),REPLACE:"@@redux/REPLACE"+th(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+th()}};function Mk(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ih(e,t,i){var r;if(typeof t=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(Ei(0));if(typeof t=="function"&&typeof i>"u"&&(i=t,t=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(Ei(1));return i(ih)(e,t)}if(typeof e!="function")throw new Error(Ei(2));var n=e,a=t,l=[],u=l,h=!1;function g(){u===l&&(u=l.slice())}function p(){if(h)throw new Error(Ei(3));return a}function y(T){if(typeof T!="function")throw new Error(Ei(4));if(h)throw new Error(Ei(5));var L=!0;return g(),u.push(T),function(){if(L){if(h)throw new Error(Ei(6));L=!1,g();var O=u.indexOf(T);u.splice(O,1),l=null}}}function S(T){if(!Mk(T))throw new Error(Ei(7));if(typeof T.type>"u")throw new Error(Ei(8));if(h)throw new Error(Ei(9));try{h=!0,a=n(a,T)}finally{h=!1}for(var L=l=u,O=0;O<L.length;O++){var E=L[O];E()}return T}function C(T){if(typeof T!="function")throw new Error(Ei(10));n=T,S({type:yl.REPLACE})}function _(){var T,L=y;return T={subscribe:function(O){if(typeof O!="object"||O===null)throw new Error(Ei(11));function E(){O.next&&O.next(p())}E();var F=L(E);return{unsubscribe:F}}},T[Zm]=function(){return this},T}return S({type:yl.INIT}),r={dispatch:S,subscribe:y,getState:p,replaceReducer:C},r[Zm]=_,r}function zk(e){Object.keys(e).forEach(function(t){var i=e[t],r=i(void 0,{type:yl.INIT});if(typeof r>"u")throw new Error(Ei(12));if(typeof i(void 0,{type:yl.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ei(13))})}function bl(e){for(var t=Object.keys(e),i={},r=0;r<t.length;r++){var n=t[r];typeof e[n]=="function"&&(i[n]=e[n])}var a=Object.keys(i),l;try{zk(i)}catch(u){l=u}return function(u,h){if(u===void 0&&(u={}),l)throw l;for(var g=!1,p={},y=0;y<a.length;y++){var S=a[y],C=i[S],_=u[S],T=C(_,h);if(typeof T>"u")throw h&&h.type,new Error(Ei(14));p[S]=T,g=g||T!==_}return g=g||a.length!==Object.keys(u).length,g?p:u}}function Hn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,n){return function(){return r(n.apply(void 0,arguments))}})}function wl(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return function(){var n=r.apply(void 0,arguments),a=function(){throw new Error(Ei(15))},l={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=t.map(function(h){return h(l)});return a=Hn.apply(void 0,u)(n.dispatch),Xm(Xm({},n),{},{dispatch:a})}}}var Km="@iiif/IMPORT_ENTITIES",Jm="@iiif/MODIFY_ENTITY_FIELD",ev="@iiif/REORDER_ENTITY_FIELD",tv="@iiif/ADD_REFERENCE",iv="@iiif/REMOVE_REFERENCE",rv=(0,gi.createAction)(Km)(),Nk=(0,gi.createAction)(Jm)(),jk=(0,gi.createAction)(ev)(),Bk=(0,gi.createAction)(tv)(),Dk=(0,gi.createAction)(iv)(),Uk={importEntities:rv,modifyEntityField:Nk,reorderEntityField:jk,addReference:Bk,removeReference:Dk},nv="@iiif/ADD_MAPPING",sv="@iiif/ADD_MAPPINGS",Wk=(0,gi.createAction)(nv)(),Hk=(0,gi.createAction)(sv)(),ov="@iiif/SET_META_VALUE",av="@iiif/SET_META_VALUE_DYNAMIC",lv="@iiif/UNSET_META_VALUE",qk=(0,gi.createAction)(ov)(),Qk=(0,gi.createAction)(av)(),Vk=(0,gi.createAction)(lv)(),uv={setMetaValue:qk,setMetaValueDynamic:Qk,unsetMetaValue:Vk},rh="RESOURCE_ERROR",cv="RESOURCE_LOADING",nh="RESOURCE_READY",hv="@iiif/REQUEST_RESOURCE",dv="@iiif/REQUEST_ERROR",pv="@iiif/REQUEST_MISMATCH",fv="@iiif/REQUEST_COMPLETE",gv="@iiif/REQUEST_OFFLINE_RESOURCE",Gk=(0,gi.createAction)(hv)(),mv=(0,gi.createAction)(dv)(),Yk=(0,gi.createAction)(pv)(),Xk=(0,gi.createAction)(fv)();(0,gi.createAction)(gv)();var sh="@iiif/BATCH",vv="@iiif/BATCH_IMPORT",oh=(0,gi.createAction)(sh)();(0,gi.createAction)(vv)();var Zk=(e,t)=>{let{entities:i,resource:r,mapping:n}=Dm(t);if(r.id===void 0)return[mv({id:e,message:"ID is not defined in resource."})];let a=[rv({entities:i}),Hk({mapping:n})];return r.id!==e&&(a.push(Wk({id:e,type:r.type})),a.push(Yk({requestId:e,actualId:r.id}))),a.push(Xk({id:e})),a},yv=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Kk(e,t){return!!(e===t||yv(e)&&yv(t))}function bv(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Kk(e[i],t[i]))return!1;return!0}function ah(e,t){let i=e.iiif.requests[t],r=e.iiif.mapping[t];if(!(!r||!e.iiif.entities[r][i.resourceUri]))return e.iiif.entities[r][i.resourceUri]}function wv(e,t,{waitTimeout:i=30}={}){return async(r,n)=>{let a=e.getState(),l=a.iiif.requests[r];if(l)switch(l.loadingState){case rh:break;case cv:{let u,h=!1;try{let g=await Promise.race([new Promise((p,y)=>{h||(u=e.subscribe(()=>{let S=e.getState();if(S.iiif.requests[r].loadingState===rh){y();return}if(S.iiif.requests[r].loadingState===nh){let C=ah(S,r);C?p(C):y()}}))}),new Promise((p,y)=>setTimeout(()=>{h=!0,y()},i*60))]);if(u&&u(),g)return g}catch{u&&u();break}break}case nh:{let u=ah(a,r);if(u)return u;break}}e.dispatch(Gk({id:r}));try{let u=await t(r,n);!u.id&&!u["@id"]&&(u["@type"]&&(u["@id"]=r),u.id=r);let h=Zk(r,u);return e.dispatch(oh({actions:h})),ah(e.getState(),r)}catch(u){throw e.dispatch(mv({id:r,message:u.toString()})),u}}}function Jk(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}var eA=(e={},t)=>{switch(t.type){case nv:return B(A({},e),{[t.payload.id]:t.payload.type});case sv:return A(A({},e),t.payload.mapping);default:return e}};function lh(e,t,i,r){return!(!e[i]||!e[i][t]||!e[i][t][r]||!Array.isArray(e[i][t][r]))}var tA=(e=Jk(),t)=>{var i;switch(t.type){case Jm:{if(!e[t.payload.type]||!e[t.payload.type][t.payload.id])return e;let r=e[t.payload.type][t.payload.id];return typeof r=="string"?e:B(A({},e),{[t.payload.type]:B(A({},e[t.payload.type]),{[t.payload.id]:B(A({},r),{[t.payload.key]:t.payload.value})})})}case ev:{if(!lh(e,t.payload.id,t.payload.type,t.payload.key))return e;let r=e[t.payload.type][t.payload.id];if(typeof r=="string")return e;let n=Array.from(r[t.payload.key]),[a]=n.splice(t.payload.startIndex,1);return n.splice(t.payload.endIndex,0,a),B(A({},e),{[t.payload.type]:B(A({},e[t.payload.type]),{[t.payload.id]:B(A({},r),{[t.payload.key]:n})})})}case Km:{let r=Object.keys(t.payload.entities),n=A({},e);for(let a of r)n[a]=A(A({},e[a]||{}),t.payload.entities[a]||{});return n}case tv:{if(!lh(e,t.payload.id,t.payload.type,t.payload.key))return e;let r=e[t.payload.type][t.payload.id],n=Array.from(r[t.payload.key]);return n.splice(t.payload.index||n.length+1,0,t.payload.reference),B(A({},e),{[t.payload.type]:B(A({},e[t.payload.type]),{[t.payload.id]:B(A({},r),{[t.payload.key]:n})})})}case iv:{if(!lh(e,t.payload.id,t.payload.type,t.payload.key))return e;let r=e[t.payload.type][t.payload.id],n=Array.from(r[t.payload.key]),a=t.payload.index||n.findIndex(l=>l&&l.id===t.payload.reference.id);return a===-1||((i=n[a])==null?void 0:i.id)!==t.payload.reference.id?e:(n.splice(a,1),B(A({},e),{[t.payload.type]:B(A({},e[t.payload.type]),{[t.payload.id]:B(A({},r),{[t.payload.key]:n})})}))}default:return e}},iA=(e={},t)=>{switch(t.type){case hv:case gv:return B(A({},e),{[t.payload.id]:{requestUri:t.payload.id,loadingState:cv,uriMismatch:!1,resourceUri:t.payload.id}});case pv:return B(A({},e),{[t.payload.requestId]:B(A({},e[t.payload.requestId]||{}),{uriMismatch:!0,resourceUri:t.payload.actualId}),[t.payload.actualId]:{requestUri:t.payload.requestId,loadingState:e[t.payload.requestId].loadingState,uriMismatch:!0,resourceUri:t.payload.actualId}});case dv:return B(A({},e),{[t.payload.id]:B(A({},e[t.payload.id]||{}),{loadingState:rh,error:t.payload.message})});case fv:return B(A({},e),{[t.payload.id]:B(A({},e[t.payload.id]||{}),{loadingState:nh,error:void 0})})}return e},rA=(e={},t)=>{let{id:i,updateValue:r,value:n,meta:a,key:l}=t&&t.payload||{};switch(t.type){case ov:return B(A({},e),{[i]:B(A({},e[i]||{}),{[a]:B(A({},e[i]?e[i][a]||{}:{}),{[l]:n})})});case av:return B(A({},e),{[i]:B(A({},e[i]||{}),{[a]:B(A({},e[i]?e[i][a]||{}:{}),{[l]:e[i]&&e[i][a]?r(e[i][a][l]):r(void 0)})})});case lv:return e[i]&&e[i][a]&&e[i][a][l]?B(A({},e),{[i]:B(A({},e[i]||{}),{[a]:B(A({},e[i]?e[i][a]||{}:{}),{[l]:void 0})})}):e;default:return e}};function nA(e){return(t,i)=>i&&i.type===sh?i.payload.actions.reduce(e,t):i&&i.type===vv?i.payload.state:e(t,i)}var sA=bl({mapping:eA,entities:tA,requests:iA,meta:rA}),oA=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Hn;function aA(e={}){let{enableDevtools:t=!0,iiifStoreName:i="iiif",defaultState:r={},extraMiddleware:n=[],customReducers:a={}}=e,l=bl(A({[i]:sA},a));return ih(nA(l),r,t?oA(wl(...n)):Hn(wl(...n)))}function lA(e){return{all:e=e||new Map,on:function(t,i){var r=e.get(t);r?r.push(i):e.set(t,[i])},off:function(t,i){var r=e.get(t);r&&(i?r.splice(r.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var r=e.get(t);r&&r.slice().map(function(n){n(i)}),(r=e.get("*"))&&r.slice().map(function(n){n(t,i)})}}}var uh=class{constructor(e,t){Ve(this,"options"),Ve(this,"store"),Ve(this,"emitter"),Ve(this,"isBatching",!1),Ve(this,"batchQueue",[]),Ve(this,"remoteFetcher"),Ve(this,"staticFetcher"),Ve(this,"defaultFetcher",i=>fetch(i).then(r=>r.json())),Ve(this,"middleware",i=>r=>n=>{if(n.type===sh){for(let u of n.payload.actions)this.emitter.emit(u.type,{realAction:u,state:i.getState()});let l=r(n);for(let u of n.payload.actions)this.emitter.emit(`after:${n.type}`,{action:n,state:l});return l}this.emitter.emit(n.type,{action:n,state:i.getState()});let a=r(n);return this.emitter.emit(`after:${n.type}`,{action:n,state:a}),a}),this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},e||{}),this.store=t||aA({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter=lA(),this.remoteFetcher=wv(this.store,this.options.customFetcher),this.staticFetcher=wv(this.store,(i,r)=>r)}batch(e){this.isBatching=!0;try{e(this),this.store.dispatch(oh({actions:this.batchQueue}))}catch(t){throw this.batchQueue=[],this.isBatching=!1,t}this.batchQueue=[],this.isBatching=!1}async asyncBatch(e){this.isBatching=!0;try{await e(this),this.store.dispatch(oh({actions:this.batchQueue}))}catch(t){throw this.batchQueue=[],this.isBatching=!1,t}this.batchQueue=[],this.isBatching=!1}modifyEntityField(e,t,i){this.dispatch(Uk.modifyEntityField({id:e.id,type:e.type,key:t,value:i}))}dispatch(e){this.isBatching?this.batchQueue.push(e):this.store.dispatch(e)}serialize(e,t){return Wm(this.getState().iiif,e,t)}toPresentation2(e){return this.serialize(e,qm)}toPresentation3(e){return this.serialize(e,Gm)}hydrate(e,t){return this.get(e,t,{skipSelfReturn:!1})}get(e,t,i={}){typeof t!="string"&&(i=t||{},t=void 0);let{skipSelfReturn:r=!0}=i||{};if(Array.isArray(e))return e.map(h=>this.get(h,i));let n=this.getState();if(typeof e=="string"){let h=t||n.iiif.mapping[e];if(!h)return r?null:{id:e,type:"unknown"};e={id:e,type:h}}let a=t||e.type,l=e.id,u=n.iiif.entities[a];if(!u){let h=n.iiif.requests[l];return h&&h.resourceUri!==l?this.get(h.resourceUri,i):r?null:e}return u[e.id]||(r?null:e)}select(e){return e(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(e,t){let i=typeof e=="string"?e:e.id;return this.load(i,t)}loadCollection(e,t){let i=typeof e=="string"?e:e.id;return this.load(i,t)}load(e,t){let i=typeof e=="string"?e:e.id;return t?this.staticFetcher(i,t):this.remoteFetcher(i)}areInputsEqual(e,t){return bv(e,t)}subscribe(e,t,i){typeof i>"u"&&(typeof t>"u"||t===!1||t===!0)&&(i=t,t=e,e=n=>n);let r=i?null:e(this.store.getState());return i||t(r,this),this.store.subscribe(()=>{let n=this.store.getState(),a=e(n);bv(r,a)||t(a,this),r=a})}async ensureLoaded(e){let t=typeof e=="string"?e:e.id;this.requestStatus(t)||await this.load(t)}requestStatus(e){return this.select(t=>t.iiif.requests[e])}getResourceMeta(e,t){let i=this.getState().iiif.meta[e];if(i)return t?i[t]:i}setMetaValue([e,t,i],r){this.dispatch(typeof r=="function"?uv.setMetaValueDynamic({id:e,meta:t,key:i,updateValue:r}):uv.setMetaValue({id:e,meta:t,key:i,value:r}))}};function uA(){return typeof self<"u"?self:typeof window<"u"?window:typeof Lu<"u"?Lu:{}}function xv(e){let t=uA();try{let r=t.IIIF_VAULT;if(r)return r}catch{}let i=new uh(e);try{t.IIIF_VAULT=i}catch{}return i}var mi=Be(pc(),1);Be(ef(),1);var cA=Object.defineProperty,hA=Object.defineProperties,dA=Object.getOwnPropertyDescriptors,_v=Object.getOwnPropertySymbols,pA=Object.prototype.hasOwnProperty,fA=Object.prototype.propertyIsEnumerable,Sv=(e,t,i)=>t in e?cA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ev=(e,t)=>{for(var i in t||(t={}))pA.call(t,i)&&Sv(e,i,t[i]);if(_v)for(var i of _v(t))fA.call(t,i)&&Sv(e,i,t[i]);return e},Cv=(e,t)=>hA(e,dA(t)),gA=/&?(xywh=)?(pixel:|percent:|pct:)?([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?)/,mA=/&?(t=)(npt:)?([0-9]+(.[0-9]+)?)?(,([0-9]+(.[0-9]+)?))?/;function ch(e){if(Array.isArray(e))return e.reduce((t,i)=>{let{selector:r,selectors:n}=ch(i);return r&&(t.selector||(t.selector=r),t.selectors.push(...n)),t},{selector:null,selectors:[]});if(!e)return{selector:null,selectors:[]};if(typeof e=="string"){let[t,i]=e.split("#");return i?ch({type:"FragmentSelector",value:i}):{selector:null,selectors:[]}}if(e.type==="PointSelector"&&(e.t||e.t===0)){let t={type:"TemporalSelector",temporal:{startTime:e.t}};return{selector:t,selectors:[t]}}if(e.type==="FragmentSelector"){let t=gA.exec(e.value);if(t){let r={type:"BoxSelector",spatial:{unit:t[2]==="percent:"||t[2]==="pct:"?"percent":"pixel",x:parseFloat(t[3]),y:parseFloat(t[4]),width:parseFloat(t[5]),height:parseFloat(t[6])}};return{selector:r,selectors:[r]}}let i=e.value.match(mA);if(i){let r={type:"TemporalSelector",temporal:{startTime:i[4]?parseFloat(i[4]):0,endTime:i[7]?parseFloat(i[7]):void 0}};return{selector:r,selectors:[r]}}return{selector:null,selectors:[]}}return{selector:null,selectors:[]}}function Fo(e,t={}){if(Array.isArray(e))return Fo(e[0]);if(typeof e=="string"){let[i,r]=e.split("#");return r?Fo({type:"SpecificResource",source:{id:i,type:"Unknown"},selector:{type:"FragmentSelector",value:r}}):{type:"SpecificResource",source:{id:i,type:t.typeMap&&t.typeMap[i]||"Unknown"},selector:null,selectors:[]}}if(e.type==="Choice"||e.type==="List"||e.type==="Composite"||e.type==="Independents")return Fo(e.items[0]);if(e.type==="SpecificResource"){e.source.type==="Canvas"&&e.source.partOf&&typeof e.source.partOf=="string"&&(e.source.partOf=[{id:e.source.partOf,type:"Manifest"}]);let{selector:i,selectors:r}=e.selector?ch(e.selector):{selector:null,selectors:[]};return{type:"SpecificResource",source:e.source,selector:i,selectors:r}}if(e.id){e.type==="Canvas"&&e.partOf&&typeof e.partOf=="string"&&(e.partOf=[{id:e.partOf,type:"Manifest"}]);let[i,r]=e.id.split("#");return r?Fo({type:"SpecificResource",source:Cv(Ev({},e),{id:i}),selector:{type:"FragmentSelector",value:r}}):{type:"SpecificResource",source:Cv(Ev({},e),{id:i}),selector:null,selectors:[]}}return{type:"SpecificResource",source:e,selector:null,selectors:[]}}function qn(e){return e.endsWith("info.json")?e:e.endsWith("/")?`${e}info.json`:`${e}/info.json`}var vA="http://library.stanford.edu/iiif/image-api/compliance.html#level0",kv="http://library.stanford.edu/iiif/image-api/compliance.html#level1",Av="http://library.stanford.edu/iiif/image-api/compliance.html#level2",yA="http://library.stanford.edu/iiif/image-api/conformance.html#level0",Pv="http://library.stanford.edu/iiif/image-api/conformance.html#level1",Tv="http://library.stanford.edu/iiif/image-api/conformance.html#level2",bA="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",Iv="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",Rv="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",wA="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",Lv="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",Ov="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",xA="http://iiif.io/api/image/1/level0.json",_A="http://iiif.io/api/image/1/profiles/level0.json",$v="http://iiif.io/api/image/1/level1.json",Fv="http://iiif.io/api/image/1/profiles/level1.json",Mv="http://iiif.io/api/image/1/level2.json",zv="http://iiif.io/api/image/1/profiles/level2.json",SA="http://iiif.io/api/image/2/level0.json",EA="http://iiif.io/api/image/2/profiles/level0.json",Nv="http://iiif.io/api/image/2/level1.json",jv="http://iiif.io/api/image/2/profiles/level1.json",Bv="http://iiif.io/api/image/2/level2.json",Dv="http://iiif.io/api/image/2/profiles/level2.json",CA="level0",Uv="level1",Wv="level2",kA="http://iiif.io/api/image/2/level0",Hv="http://iiif.io/api/image/2/level1",qv="http://iiif.io/api/image/2/level2",Qv=[qv,Av,Tv,Rv,Ov,Mv,zv,Bv,Dv,Wv],Vv=[...Qv,Hv,kv,Pv,Iv,Lv,$v,Fv,Nv,jv,Uv],AA=[kA,Hv,qv,vA,kv,Av,yA,Pv,Tv,bA,Iv,Rv,wA,Lv,Ov,xA,_A,$v,Fv,Mv,zv,SA,EA,Nv,jv,Bv,Dv,CA,Uv,Wv],PA={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},TA={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},IA={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]};function RA(e){return Qv.indexOf(e)!==-1?IA:Vv.indexOf(e)!==-1?TA:PA}function LA(e){let t=e?Array.isArray(e.profile)?e.profile:[e.profile]:[],i={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let r of t)if(typeof r=="string"&&(r=RA(r)),!!r){if(r.formats)for(let n of r.formats)i.extraFormats.indexOf(n)===-1&&i.extraFormats.push(n);if(r.qualities)for(let n of r.qualities)i.extraQualities.indexOf(n)===-1&&i.extraQualities.push(n);if(r.supports)for(let n of r.supports)i.extraFeatures.indexOf(n)===-1&&i.extraFeatures.push(n);if(r.maxHeight&&(i.maxHeight=r.maxHeight),r.maxWidth&&(i.maxWidth=r.maxWidth),r.maxArea&&(i.maxArea=r.maxArea),r.extraFormats)for(let n of r.extraFormats)i.extraFormats.indexOf(n)===-1&&i.extraFormats.push(n);if(r.extraQualities)for(let n of r.extraQualities)i.extraQualities.indexOf(n)===-1&&i.extraQualities.push(n);if(r.extraFeatures)for(let n of r.extraFeatures)i.extraFeatures.indexOf(n)===-1&&i.extraFeatures.push(n);r.maxHeight&&(i.maxHeight=r.maxHeight),r.maxWidth&&(i.maxWidth=r.maxWidth),r.maxArea&&(i.maxArea=r.maxArea)}if(e.extraFormats)for(let r of e.extraFormats)i.extraFormats.indexOf(r)===-1&&i.extraFormats.push(r);if(e.extraFeatures)for(let r of e.extraFeatures)i.extraFeatures.indexOf(r)===-1&&i.extraFeatures.push(r);if(e.extraQualities)for(let r of e.extraQualities)i.extraQualities.indexOf(r)===-1&&i.extraQualities.push(r);return i}function OA(e){try{if(e==="full")return{full:!0};if(e==="square")return{square:!0};let t=e.startsWith("pct:"),i=e.substr(t?4:0).split(",").map(r=>parseFloat(r));return{x:i[0],y:i[1],w:i[2],h:i[3],percent:t}}catch{throw new Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+e)}}function $A(e){let t={upscaled:!1,max:!1,confined:!1};if(e[0]==="^"&&(t.upscaled=!0,e=e.slice(1)),e==="max"||e==="full")return t.max=!0,t.serialiseAsFull=e==="full",t;if(e[0]==="!"&&(t.confined=!0,e=e.slice(1)),e[0]==="p")return t.percentScale=parseFloat(e.slice(4)),t;let i=e.split(",").map(r=>r.trim());return i.length&&(i[0]!==""&&(t.width=parseInt(i[0],10)),i[1]!==""?(t.height=parseInt(i[1],10),t.version=2):t.version=3),t}function FA(e){let t={angle:0};if(e[0]==="!"&&(t.mirror=!0,e=e.substr(1)),t.angle=parseFloat(e)%360,Number.isNaN(t.angle))throw new Error(`Invalid rotation ${e}`);return t}function MA(e,t=""){let i=e.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!i)throw new Error(`Invalid or unknown input ${e}`);let r=i[2],n=i[3],a=i[4];if(a[0]==="/"&&(a=a.substr(1)),t.length>0){if(t[0]==="/"&&(t=t.substr(1)),t!==a.substr(0,t.length))throw new Error(`Path does not start with prefix (path: ${a}, prefix: ${t})`);a=a.substr(t.length)}return{scheme:r,server:n,path:a,prefix:t}}function zA(e,t=""){let{path:i,scheme:r,server:n,prefix:a}=MA(e,t),l=i.split("/").reverse(),[u,h,g,p,...y]=l,S=y.reverse().filter(Boolean).join("/");if(l.length===1||u==="")return{type:"base",scheme:r,server:n,prefix:a,identifier:S};if(u==="info.json"){let[,..._]=l;return{type:"info",scheme:r,server:n,prefix:a,identifier:_.reverse().filter(Boolean).join("/")}}let C=u.split(".");return{type:"image",scheme:r,server:n,prefix:a,identifier:S,originalPath:i,region:OA(p),size:$A(g),rotation:FA(h),quality:C[0],format:C[1]}}function NA(e){let t=zA(qn(e.id));if(t.type!=="info")throw new Error("Invalid service URL");let i=LA(e);return{identifier:t.identifier,originalPath:"",server:t.server,prefix:t.prefix,scheme:t.scheme,type:"image",quality:i.extraQualities.indexOf("default")===-1?i.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}function jA(e,t,i){let r=i.length,n=[];for(let a=0;a<r;a++){let l=i[a].width;n.push(e/l)}return n}function BA(e,t,i){let r=i.length,n=[];for(let a=0;a<r;a++){let l=i[a];n.push({width:Math.floor(e/l),height:Math.floor(t/l)})}return n}function jt(e){if(e["@id"])return e["@id"];if(e.id)return e.id}function xl(e){if(!e||!e.profile||!jt(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let i of t)if(typeof i=="string"&&AA.indexOf(i)!==-1)return!0;return!1}function DA(e){if(!xl(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let i of t)if(typeof i=="string"){if(Vv.indexOf(i)!==-1)return!0}else{let r=[...i.supports||[],...i.extraFeatures||[]];if(r.indexOf("regionByPx")!==-1&&(r.indexOf("sizeByW")!==-1||r.indexOf("sizeByWh")!==-1))return!0}return!1}function _l(e,t){if(t&&t.profile){let i=t.profile;if(i){let r=Array.isArray(i)?i:[i];return r.includes(`level${e}`)||r.includes(`http://iiif.io/api/image/2/level${e}.json`)||r.includes(`http://iiif.io/api/image/1/level${e}.json`)||r.includes(`http://iiif.io/api/image/1/profiles/level${e}.json`)}}return!1}function hh(e){return xl(e)?_l(0,e)?0:_l(1,e)?1:_l(2,e)?2:null:null}function Gv(e){return(e["@context"]?Array.isArray(e["@context"])?e["@context"]:[e["@context"]]:[]).indexOf("http://iiif.io/api/image/3/context.json")!==-1}function UA(e){if(!DA(e))return[];let t=[],i=Array.isArray(e.profile)?e.profile:[e.profile],r=i.length;for(let n=0;n<r;n++){let a=i[n];if(typeof a!="string"&&(a.maxHeight||a.maxWidth))return[{id:jt(e),type:"variable",minWidth:0,minHeight:0,maxHeight:a.maxHeight||a.maxWidth,maxWidth:a.maxWidth||a.maxHeight,level:hh(e),version:e["@context"]==="http://iiif.io/api/image/3/context.json"?3:2}]}if(e.tiles){let n=e.tiles.length;for(let a=0;a<n;a++){let l=e.tiles[a];(l.height||l.width)&&t.push({id:jt(e),type:"variable",minHeight:0,minWidth:0,maxHeight:l.height||l.width,maxWidth:l.width,level:hh(e),version:Gv(e)?3:2})}}return t}function Yv(e){let t=/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/,i=e.match(t);if(i){let r=i[1],n=parseInt(i[4],10),a=parseInt(i[5],10),l=i[7];if((r==="max"||r==="full")&&n&&a&&l)return{type:"fixed",id:e,height:a,width:n}}return{type:"unknown",id:e}}function WA(e){if(e["@type"])return e["@type"];if(e.type)return e.type}function dh(e){if(typeof e=="string")return Yv(e);let t=WA(e);if(t!=="Image"&&t!=="sc:Image")return null;let i=e,r=jt(i);return r?r&&i.width&&i.height?{id:r,type:"fixed",width:i.width,height:i.height,unsafe:!0}:Yv(r):null}function HA(e){return xl(e)?(e&&e.sizes?e.sizes:[]).map(t=>({id:jt(e),type:"fixed-service",height:t.height,width:t.width,level:hh(e),version:Gv(e)?3:2})):[]}function Xv(e){let t=[],i=e.length;for(let r=0;r<i;r++){let n=HA(e[r]);n.length&&t.push(...n);let a=UA(e[r]);a.length&&t.push(...a)}return t}function ph(e){let t=e.service?Array.isArray(e.service)?e.service:[e.service]:[],i=t.length,r=[];for(let n=0;n<i;n++)xl(t[n])&&r.push(t[n]);return r}function qA(e,t=!0,i){let r=[],n=dh(e);if(n===null)return r;let a=e;if(r.push(n),t&&a&&a.width&&a.height){let l=[],u=ph(a);for(let h of u){let g={id:jt(h),width:a.width,height:a.height};if(i.canLoadSync(g)){let p=i.loadServiceSync(g);p&&(p.height||(p.height=a.height),p.width||(p.width=a.width),l.push(...Xv([p])))}}if(l.length)return r.push(...l),r}return a.service&&r.push(...Xv(a.service)),r}function QA({x:e=0,y:t=0,w:i,h:r,full:n,square:a,percent:l}){if(n)return"full";if(a)return"square";if(typeof i>"u"||typeof r>"u")throw new Error("RegionParameter: invalid region");let u=`${e},${t},${i},${r}`;return l?`pct:${u}`:u}function VA({max:e,percentScale:t,upscaled:i,confined:r,width:n,height:a,serialiseAsFull:l,version:u}){let h=[];return i&&h.push("^"),e?(h.push(l?"full":"max"),h.join("")):(r&&h.push("!"),t&&h.push(`pct:${t}`),n&&h.push(`${n}`),h.push(","),a&&u===3&&h.push(`${a}`),h.join(""))}function GA(e){return`${e.mirror?"!":""}${(e.angle||0)%360}`}var YA=Object.defineProperty,XA=Object.defineProperties,ZA=Object.getOwnPropertyDescriptors,Zv=Object.getOwnPropertySymbols,KA=Object.prototype.hasOwnProperty,JA=Object.prototype.propertyIsEnumerable,Kv=(e,t,i)=>t in e?YA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Qn=(e,t)=>{for(var i in t||(t={}))KA.call(t,i)&&Kv(e,i,t[i]);if(Zv)for(var i of Zv(t))JA.call(t,i)&&Kv(e,i,t[i]);return e},Vn=(e,t)=>XA(e,ZA(t));function eP(e,t){let i=e.prefix.startsWith("/")?e.prefix.substr(1):e.prefix,r=`${e.scheme}://${e.server}/${i?`${i}/`:""}${e.identifier}`;if(e.type==="base")return r;if(e.type==="info")return`${r}/info.json`;let{size:n}=e,{region:a,rotation:l,format:u,quality:h}=e;if(t){let g=t["@context"]?Array.isArray(t["@context"])?t["@context"]:[t["@context"]]:[],p=g.indexOf("http://iiif.io/api/image/2/context.json")!==-1,y=g.indexOf("http://iiif.io/api/image/3/context.json")!==-1;if((n.width===t.width&&!n.height||n.height===t.height&&!n.width||n.width===t.width&&n.height===t.height)&&(n=Vn(Qn({},n),{max:!0})),p&&(n.max&&!n.serialiseAsFull&&(n=Vn(Qn({},n),{serialiseAsFull:!0})),!n.max&&n.width&&n.height&&(n=Vn(Qn({},n),{height:void 0})),n=Vn(Qn({},n),{version:2})),y){if(n.max&&n.serialiseAsFull&&(n=Vn(Qn({},n),{serialiseAsFull:!1})),n.width&&!n.height&&t.width&&t.height){let S=t.height/t.width;n=Vn(Qn({},n),{height:Math.ceil(n.width*S)})}n=Vn(Qn({},n),{version:3})}}return[r,QA(a),VA(n),GA(l),`${h}.${u}`].filter(Boolean).join("/")}function fh(e,t,i){let r=NA({"@context":e.version===3?"http://iiif.io/api/image/3/context.json":"http://iiif.io/api/image/2/context.json",id:qn(jt(e)),profile:e.level===null||typeof e.level>"u"?"level0":`level${e.level}}`,type:e.version===3?"ImageService3":"ImageService2"});if(r.type!=="image")throw new Error("Invalid service");return r.size.max=!1,r.size.width=t,r.size.height=i,{id:eP(r),type:"fixed",width:t,height:i||e.height/(e.width||1)*t,unsafe:e.width>t}}function Bs(e){let t=e.replace(/(https?:\/\/)?(www.)?/i,"");return t.indexOf("/")!==-1?t.split("/")[0]:t}function tP(e,t,i){let r=e.width?e.width:e.maxWidth;return i.height<=e.maxHeight&&i.width<=e.maxWidth&&i.height>=e.minHeight&&i.width>=e.minWidth&&(!t||Math.abs(i.width-r)<Math.abs(t.width-r))}function iP(e,t){let i=[],r=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},e),n=(p,y=0)=>r.explain?i.push(new Array(y).fill(0).map(S=>"    ").join("")+p().trim()):void 0,a=[],l=[],u=null;n(()=>`Using configuration: ${JSON.stringify(r,null,2)}`);let h=(p,y)=>{if(n(()=>"Swapping choice",3),tP(r,y,p)){if(r.preferFixedSize&&p.unsafe){n(()=>`We found an image that was marked as unsafe, but it was the best size. (${p.id})`,4),l.push(p);return}r.returnAllOptions&&y&&l.push(y),n(()=>`We found a new image that was the best size. (${p.id})`,4),u=p}else r.returnAllOptions&&l.push(p)};n(()=>`The input shows we have ${t.length} list(s) of candidates to choose from.`);let g=t.length;for(let p=0;p<g;p++){let y=t[p]();n(()=>`Candidate group ${p}: ${JSON.stringify(y,null,2)}`,1);let S=y.length;n(()=>`Checking candidate list number ${p} and found ${S} potential ways of creating image(s)`,1);for(let C=0;C<S;C++){let _=y[C];if(n(()=>`-> Checking candidate ${C}`,1),_.type==="unknown"&&r.atAnyCost&&(n(()=>`We've found an unknown image type, adding this to the "last resort" list`,2),a.push(_)),_.type==="fixed"&&(_.unsafe?(n(()=>`We've found an unsafe fixed image type, adding this to the "last resort" list`,2),a.push(_)):(n(()=>"We've found a fixed size image, checking if it matches the request",2),h(_,u))),_.type==="fixed-service")if(r.unsafeImageService){n(()=>"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)",2);let T=fh(_,r.width,r.height);h(T,u)}else{n(()=>"Checking for an image from the tile source 3",2);let T=fh(_,_.width,_.height);h(T,u)}if(_.type==="variable"&&_.maxWidth){let T=fh({id:_.id,type:"fixed-service",width:_.maxWidth,height:_.maxWidth,level:_.level,version:_.version},_.maxWidth);h(T,u)}}if(u&&!r.returnAllOptions){if(u.unsafe||r.allowUnsafe)continue;n(()=>`We found a match in choice list number ${p}, no searching any more`);break}}return r.atAnyCost&&l.length===0?(n(()=>u?`We found an image! ${u.id} of type ${u.type}`:'We found no images, but "atAnyCost" is set, so returning that'),{best:u||a[0],fallback:a.slice(1),log:i}):r.returnAllOptions?(n(()=>"Returning all options that we have found"),{best:r.atAnyCost?u||l[0]||a[0]:u||l[0],fallback:[...l,...a],log:i}):(n(()=>"Returning the best image that we found, and a fallback"),{best:u||l[0]||null,fallback:u?l:l.slice(1),log:i})}var rP=Object.defineProperty,nP=Object.defineProperties,sP=Object.getOwnPropertyDescriptors,Jv=Object.getOwnPropertySymbols,oP=Object.prototype.hasOwnProperty,aP=Object.prototype.propertyIsEnumerable,ey=(e,t,i)=>t in e?rP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,lP=(e,t)=>{for(var i in t||(t={}))oP.call(t,i)&&ey(e,i,t[i]);if(Jv)for(var i of Jv(t))aP.call(t,i)&&ey(e,i,t[i]);return e},uP=(e,t)=>nP(e,sP(t));function cP(e,t,i){let r=e>t?e:t,n=i.length,a=[];for(let l=0;l<n;l++){let u=i[l],h=u.scaleFactors[0],g=r/h,p=[h];for(;g>=u.width;)h=h*2,p.push(h),g=g/2;a.push(uP(lP({},u),{scaleFactors:p}))}return a}function hP(e,t){if(e.length!==t.length)return!1;if(e.length===0&&t.length===0)return!0;let i=e.length,r=!0;for(let a=0;a<i;a++){let l=e[a],u=t[a];if(l.width!==u.width||l.height!==u.height){r=!1;break}}if(r)return!0;let n=0;for(let a=0;a<i;a++)for(let l=0;l<i;l++)if(e[a].width===t[l].width&&e[a].height===t[l].height){n++;break}return n===i}function ty(e){return _l(0,e)}var Gn=(e,t,i)=>new Promise((r,n)=>{var a=h=>{try{u(i.next(h))}catch(g){n(g)}},l=h=>{try{u(i.throw(h))}catch(g){n(g)}},u=h=>h.done?r(h.value):Promise.resolve(h.value).then(a,l);u((i=i.apply(e,t)).next())}),gh=class{constructor(e={}){this.config={verificationsRequired:1,approximateServices:!1,enableFetching:!0,disableThrottling:!1},this.fetchingCount=0,this.imageServices={},this.knownImageServers={},this.config=Object.assign(this.config,e)}setConfig(e){Object.assign(this.config,e)}sample(e,t,i=!0){let r=Bs(jt(e)),n=qn(jt(e)),a=this.knownImageServers[r];return this.imageServices[n]=Object.assign(e,{real:!0}),!a&&e.tiles&&!ty(e)?(this.knownImageServers[r]={verifications:0,malformed:!1,root:r,preLoaded:i,sampledId:jt(e),verified:!1,server:null,result:{context:e["@context"]||[],sampledProfile:e.profile,resourceServiceRatio:t&&e.height?t.height/e.height:1,sampledSizes:e.sizes||[],sizeRatios:jA(e.width,e.height,e.sizes||[]),sampledTiles:e.tiles||[]}},!0):this.verify(e)}preLoad(e,t=!0){this.knownImageServers[e.root]=e,t&&(this.knownImageServers[e.root].malformed=!1,this.knownImageServers[e.root].verifications=this.config.verificationsRequired)}predict(e,t=!1,i=!1){let r=e==null?void 0:e.source,n=Bs(jt(e)),a=this.knownImageServers[n],l=qn(jt(e));return this.imageServices[l]?this.imageServices[l]:!this.config.approximateServices||!a||!a.result||!(r!=null&&r.height||e.height)||!(r!=null&&r.width||e.width)||!i&&(a.malformed||a.verifications<this.config.verificationsRequired)||ty(e.source)?null:(this.imageServices[l]||(this.imageServices[l]={"@context":a.result.context,"@id":jt(e),id:jt(e),protocol:"http://iiif.io/api/image",tiles:(r==null?void 0:r.tiles)||cP(e.width,e.height,a.result.sampledTiles),sizes:(r==null?void 0:r.sizes)||BA(Math.round(e.width/a.result.resourceServiceRatio),Math.round(e.height/a.result.resourceServiceRatio),a.result.sizeRatios),profile:(r==null?void 0:r.profile)||a.result.sampledProfile,height:(r==null?void 0:r.height)||e.height,width:(r==null?void 0:r.width)||e.width,real:!1}),this.imageServices[l])}getThumbnailFromResource(e,t){return Gn(this,arguments,function*(i,r,n=!0,a=[]){let l=i?yield this.getImageCandidates(i,n):[];return iP(r,[()=>a,()=>l])})}getImageCandidates(e,t=!0){return Gn(this,null,function*(){let i=e;if(t&&i&&i.height&&i.width){let r=ph(i);for(let n of r){let a={id:jt(n),width:n.width?n.width:i.width,height:n.height?n.height:i.height,source:n};yield this.loadService(a)}}return qA(e,t,this)})}verify(e){return Gn(this,null,function*(){let t=this.predict(e,!1,!0),i=yield this.fetchService(jt(e));if(!t)return!1;let r=t.height===i.height&&t.width===i.width&&t["@context"]===i["@context"]&&hP(t.sizes||[],i.sizes||[]);if(r){let n=Bs(jt(e));this.knownImageServers[n]&&(this.knownImageServers[n].verifications+=1,this.knownImageServers[n].verifications>=this.config.verificationsRequired&&(this.knownImageServers[n].verified=!0))}return r})}canLoadSync(e){let t=typeof e=="string"?e:jt(e),i=qn(t);if(this.imageServices[i])return!0;let r=this.knownImageServers[Bs(t)];return r&&!r.malformed&&r.verifications>=this.config.verificationsRequired}markAsMalformed(e){return Gn(this,null,function*(){return this.knownImageServers[Bs(jt(e))].malformed=!0,this.loadService(e,!0)})}fetchService(e,t=!1){return Gn(this,null,function*(){let i=qn(e);if(this.imageServices[i]&&(!t||this.imageServices[i].real))return this.imageServices[i];if(!this.config.enableFetching)throw new Error("Fetching is not enabled");let r=yield this.fetch(i).then(n=>n.json());return!r.id&&r["@id"]&&(r.id=r["@id"]),r.id!==e&&(r.id=e,r["@id"]&&(r["@id"]=e)),this.imageServices[i]=Object.assign(r,{real:!0}),this.imageServices[i]})}fetch(e,t){return Gn(this,null,function*(){return fetch(e,t)})}loadService(e,t=!1){return Gn(this,null,function*(){if(!this.config.disableThrottling){let n=!0;for(;n;)if(this.fetchingCount>=this.config.verificationsRequired)yield new Promise(a=>setTimeout(a,500));else{n=!1;break}}let i=this.knownImageServers[Bs(jt(e))];if(i&&!i.malformed&&!t){yield i.result;let n=this.loadServiceSync(e);if(n)return n}this.fetchingCount++;let r=yield this.fetchService(jt(e),t);return this.fetchingCount--,r.real&&this.sample(r,e),r})}loadServiceSync(e){let t=qn(jt(e));return this.imageServices[t]?this.imageServices[t]:this.config.approximateServices?this.predict(e):null}};new gh;var dP=Object.defineProperty,pP=Object.defineProperties,fP=Object.getOwnPropertyDescriptors,iy=Object.getOwnPropertySymbols,gP=Object.prototype.hasOwnProperty,mP=Object.prototype.propertyIsEnumerable,ry=(e,t,i)=>t in e?dP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,si=(e,t)=>{for(var i in t||(t={}))gP.call(t,i)&&ry(e,i,t[i]);if(iy)for(var i of iy(t))mP.call(t,i)&&ry(e,i,t[i]);return e},Ci=(e,t)=>pP(e,fP(t)),vP={collection:void 0,manifest:void 0,range:void 0,canvas:void 0,annotation:void 0,annotationPage:void 0},ny=K.createContext(vP),Yn=()=>Jt(ny);function Sl({value:e,children:t}){let i=Yn(),r=Ee(()=>si(si({},i),e),[e,i]);return ni(ny.Provider,{value:r,children:t})}var mh=K.createContext({vault:null,setVaultInstance:e=>{}});function dn({vault:e,vaultOptions:t,useGlobal:i,resources:r,children:n}){let[a,l]=Me(()=>e||(i?xv(t):t?new uh(t):new uh));return ni(mh.Provider,{value:{vault:a,setVaultInstance:l},children:ni(Sl,{value:r||{},children:n})})}var Bt=()=>{let{vault:e}=Jt(mh);if(e===null)throw new Error("Vault not found. Ensure you have your provider set up correctly.");return e};function yP(e,{noCache:t=!1}={}){let i=typeof e=="string"?e:e.id,r=Bt(),[n,a]=Me(i),[l,u]=Me(void 0),h=Ee(()=>r.get(i,{skipSelfReturn:!0})||void 0,[i,r]),[g,p]=Me(h);return de(()=>{(async()=>{try{let y=h&&!t?h:await r.load(i),S=y?y.id||y["@id"]:null;y&&n!==S&&a(S),p(y)}catch(y){u(y)}})()},[i,t]),{isLoaded:!!g,id:n,requestId:i,error:l,resource:g,cached:!!(g&&g===h)}}function El(e,t){let{id:i,isLoaded:r,error:n,resource:a,requestId:l,cached:u}=yP(e,t);return{id:i,isLoaded:r,error:n,manifest:a,requestId:l,cached:u}}function Cl({manifest:e,children:t}){return ni(Sl,{value:{manifest:e},children:t})}function vh({canvas:e,children:t}){return ni(Sl,{value:{canvas:e},children:t})}function ki(e,t=[]){let i=Bt(),[r,n]=Me(()=>e(i.getState(),i));return de(()=>i.subscribe(a=>e(a,i),a=>{n(a)},!1),t),r}var sy=K.createContext([]);function oy(){let e=Jt(sy);return ki(t=>e.map(i=>t.iiif.entities.Canvas[i]).filter(Boolean),[e])}function pn(e={},t=[]){let{id:i,selector:r}=e,n=Yn();Bt();let a=i||n.manifest,l=ki(u=>a?u.iiif.entities.Manifest[a]:void 0,[a]);return Ee(()=>{if(l)return r?r(l):l},[l,r,...t])}function yh({range:e,children:t}){return ni(Sl,{value:{range:e},children:t})}function ay(e,t){let i=[];for(let r of t.items)if(r.type==="Canvas"&&(r.id.indexOf("#")!==-1?i.push({id:r.id.split("#")[0],type:"Canvas"}):i.push(r)),r.type==="Range"&&i.push(...ay(e,e.get(r))),r.type==="SpecificResource"){let n=typeof r.source=="string"?r.source:r.source.id;i.push({id:n,type:"Canvas"})}return i}function bP(e,t,{disablePaging:i,skipNonPaged:r}={}){let n=t.behavior,a=n.includes("paged"),l=a?!1:n.includes("continuous"),u=a||l?!1:n.includes("individuals"),h=t.type==="Manifest"?t.items:ay(e,t);if(l)return[h,[h.map((_,T)=>T)]];if(u||!a||i)return[h,h.map((_,T)=>[T])];let g=[],p=[],y=()=>{p.length&&(g.push([...p]),p=[])},S=0,C=!1;for(let _=0;_<h.length;_++){let T=e.get(h[_]);if(T.behavior.includes("non-paged")){_===S&&S++,r||(y(),g.push([_]),y());continue}if(_===S||T.behavior.includes("facing-pages")){p.length&&(C=!0),y(),g.push([_]),y();continue}if(p.push(_),C){y(),C=!1;continue}p.length>1&&y()}return p.length&&y(),[h,g]}function bh(e={},t=[]){let{id:i,selector:r}=e,n=Yn(),a=i||n.range,l=ki(u=>a?u.iiif.entities.Range[a]:void 0,[a]);return Ee(()=>{if(l)return r?r(l):l},[l,r,...t])}function wP({startCanvas:e,disablePaging:t}){var i;let r=Bt(),n=pn(),a=bh(),[l,u]=Me(void 0),h=a||n;if(!h)throw new Error("Nothing selected");let[g,p]=Ee(()=>bP(r,h,{disablePaging:t}),[r,h]),y=De(T=>{let L=p.findIndex(O=>O.includes(T));u(L===-1?0:L)},[g,p]),S=De(T=>{let L=g.findIndex(O=>O.id===T);L!==-1?y(L):u(0)},[g,p]),C=De(()=>{u(T=>T>=p.length?T:T+1)},[p]),_=De(()=>{u(T=>T<=0?0:T-1)},[p]);return typeof l>"u"&&(e?S(e):u(0)),{visibleItems:((i=p[l])==null?void 0:i.map(T=>g[T].id))||[],cursor:l,items:g,sequence:p,setSequenceIndex:u,setCanvasIndex:y,setCanvasId:S,next:C,previous:_}}var Mo=()=>{},ly=ri({setCurrentCanvasId:Mo,setCurrentCanvasIndex:Mo,nextCanvas:Mo,previousCanvas:Mo,items:[],sequence:[],setSequenceIndex:Mo,currentSequenceIndex:0});function xP(e){let t=pn(),{cursor:i,visibleItems:r,next:n,sequence:a,items:l,setCanvasIndex:u,setCanvasId:h,previous:g,setSequenceIndex:p}=wP({startCanvas:e.startCanvas,disablePaging:e.pagingEnabled===!1}),y=Ee(()=>({sequence:a,items:l,setCurrentCanvasId:h,nextCanvas:n,previousCanvas:g,totalCanvases:l.length,setCurrentCanvasIndex:u,setSequenceIndex:p,currentSequenceIndex:i}),[a,l,h,n,g,l,u,p,i]);return t?ni(ly.Provider,{value:y,children:ni(sy.Provider,{value:r,children:ni(vh,{canvas:r[0],children:e.children})})}):(console.warn("The manifest passed to the provider is not a valid IIIF manifest."),ni("div",{children:"Sorry, something went wrong."}))}function _P(e){let t=El(e.manifest);if(!t)return console.warn("The manifest passed to the provider is not a valid IIIF manifest."),ni("div",{children:"Sorry, something went wrong."});if(!t.isLoaded)return ni("div",{children:"Loading..."});let i=ni(xP,Ci(si({},e),{children:e.children}));return ni(Cl,{manifest:t.id,children:e.rangeId?ni(yh,{range:e.rangeId,children:i}):i})}function SP(){return Jt(ly)}var EP="@iiif/IMPORT_ENTITIES",CP="@iiif/MODIFY_ENTITY_FIELD",kP="@iiif/REORDER_ENTITY_FIELD",AP="@iiif/ADD_REFERENCE",PP="@iiif/REMOVE_REFERENCE",TP=(0,mi.createAction)(EP)(),IP=(0,mi.createAction)(CP)(),RP=(0,mi.createAction)(kP)(),LP=(0,mi.createAction)(AP)(),OP=(0,mi.createAction)(PP)(),wh={importEntities:TP,modifyEntityField:IP,reorderEntityField:RP,addReference:LP,removeReference:OP},$P="@iiif/ADD_MAPPING",FP="@iiif/ADD_MAPPINGS";(0,mi.createAction)($P)(),(0,mi.createAction)(FP)();var MP="@iiif/SET_META_VALUE",zP="@iiif/SET_META_VALUE_DYNAMIC",NP="@iiif/UNSET_META_VALUE";(0,mi.createAction)(MP)(),(0,mi.createAction)(zP)(),(0,mi.createAction)(NP)();var jP="@iiif/REQUEST_RESOURCE",BP="@iiif/REQUEST_ERROR",DP="@iiif/REQUEST_MISMATCH",UP="@iiif/REQUEST_COMPLETE",WP="@iiif/REQUEST_OFFLINE_RESOURCE";(0,mi.createAction)(jP)(),(0,mi.createAction)(BP)(),(0,mi.createAction)(DP)(),(0,mi.createAction)(UP)(),(0,mi.createAction)(WP)();var HP="@iiif/BATCH",qP="@iiif/BATCH_IMPORT";(0,mi.createAction)(HP)(),(0,mi.createAction)(qP)();function QP(){let e=Bt().getStore();return Ee(()=>t=>e.dispatch(t),[e])}function uy(e){return typeof e!="string"&&e&&e.bindToVault}function VP(){let e=Bt(),t=Se([]),i=QP(),r=Ee(()=>`vault://annotation-page/${new Date().getTime()}/${Math.round(Math.random()*1e9).toString(16)}`,[]);Rt(()=>{let u={id:r,type:"AnnotationPage",behavior:[],motivation:null,label:null,thumbnail:[],summary:null,requiredStatement:null,metadata:[],rights:null,provider:[],items:[],seeAlso:[],homepage:[],logo:[],rendering:[],service:[]};i(wh.importEntities({entities:{AnnotationPage:{[u.id]:u}}}))},[r]);let n=ki(u=>r?u.iiif.entities.AnnotationPage[r]:null,[r]),a=De((u,h)=>{if(r){if(uy(u)){let y=u;y.__vault||y.bindToVault(e),u=typeof y.source=="string"?y.source:y.source.id,t.current[u]=y}else typeof u!="string"&&(u=u.id);let g=e.get({id:r,type:"AnnotationPage"}),p=e.get({id:u,type:"Annotation"});g&&p&&(g.items.find(y=>y.id===p.id)||i(wh.addReference({id:r,type:"AnnotationPage",key:"items",reference:{id:u,type:"Annotation"},index:h})))}},[r]),l=De(u=>{r&&(uy(u)?u=typeof u.source=="string"?u.source:u.source.id:typeof u!="string"&&(u=u.id),t.current[u]&&t.current[u].beforeRemove(),e.get({id:r,type:"AnnotationPage"})&&i(wh.removeReference({id:r,type:"AnnotationPage",key:"items",reference:{id:u,type:"Annotation"}})))},[r]);return[n,{addAnnotation:a,removeAnnotation:l}]}ri(null),ri(null),K.createContext(null),K.createContext(null);function GP(e){return{addEventListener(t,i,r,n){if(t)return e.setMetaValue([t.id,"eventManager",i],a=>{let l=a||[];for(let u of l)if(u.callback===r)return l;return[...l,{callback:r,scope:n}]}),r},removeEventListener(t,i,r){!t||e.setMetaValue([t.id,"eventManager",i],n=>(n||[]).filter(a=>a.callback!==r))},getListenersAsProps(t,i){let r=typeof t=="string"?{id:t}:t;if(!r||!r.id)return{};let n=e.getResourceMeta(r.id,"eventManager"),a={};if(n&&r)for(let l of Object.keys(n))a[l]=u=>{let h=e.get(r);for(let{callback:g,scope:p}of n[l]||[])(!p||i&&p.indexOf(i)!==-1)&&g(u,h)};return a}}}function kl(e,t){let i=Bt(),r=Ee(()=>GP(i),[i]),n=ki(()=>e&&e.id?i.getResourceMeta(e.id,"eventManager"):null,[e]);return Ee(()=>e?r.getListenersAsProps(e,t):{},[n,e,i,t])}function cy(e){return{applyStyles(t,i,r){let n=typeof t=="string"?t:t.id;return e.setMetaValue([n,"styles",i],r)},getAppliedStyles(t){let i=typeof t=="string"?t:t.id;return e.getResourceMeta(i,"styles")}}}function Xn(e,t){let i=Bt(),r=Ee(()=>cy(i),[i]);return ki(()=>{if(!e)return null;let n=r.getAppliedStyles(e.id);return n?t?n[t]:n:void 0},[e,t])}var YP=Object.defineProperty,XP=Object.defineProperties,ZP=Object.getOwnPropertyDescriptors,hy=Object.getOwnPropertySymbols,KP=Object.prototype.hasOwnProperty,JP=Object.prototype.propertyIsEnumerable,dy=(e,t,i)=>t in e?YP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,py=(e,t)=>{for(var i in t||(t={}))KP.call(t,i)&&dy(e,i,t[i]);if(hy)for(var i of hy(t))JP.call(t,i)&&dy(e,i,t[i]);return e},fy=(e,t)=>XP(e,ZP(t)),eT=/&?(xywh=)?(pixel:|percent:|pct:)?([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?)/,tT=/&?(t=)(npt:)?([0-9]+(.[0-9]+)?)?(,([0-9]+(.[0-9]+)?))?/;function Al(e){if(Array.isArray(e))return e.reduce((t,i)=>{let{selector:r,selectors:n}=Al(i);return r&&(t.selector||(t.selector=r),t.selectors.push(...n)),t},{selector:null,selectors:[]});if(!e)return{selector:null,selectors:[]};if(typeof e=="string"){let[t,i]=e.split("#");return i?Al({type:"FragmentSelector",value:i}):{selector:null,selectors:[]}}if(e.type==="PointSelector"&&(e.t||e.t===0)){let t={type:"TemporalSelector",temporal:{startTime:e.t}};return{selector:t,selectors:[t]}}if(e.type==="FragmentSelector"){let t=eT.exec(e.value);if(t){let r={type:"BoxSelector",spatial:{unit:t[2]==="percent:"||t[2]==="pct:"?"percent":"pixel",x:parseFloat(t[3]),y:parseFloat(t[4]),width:parseFloat(t[5]),height:parseFloat(t[6])}};return{selector:r,selectors:[r]}}let i=e.value.match(tT);if(i){let r={type:"TemporalSelector",temporal:{startTime:i[4]?parseFloat(i[4]):0,endTime:i[7]?parseFloat(i[7]):void 0}};return{selector:r,selectors:[r]}}return{selector:null,selectors:[]}}return{selector:null,selectors:[]}}function qr(e,t={}){if(Array.isArray(e))return qr(e[0]);if(typeof e=="string"){let[i,r]=e.split("#");return r?qr({type:"SpecificResource",source:{id:i,type:"Unknown"},selector:{type:"FragmentSelector",value:r}}):{type:"SpecificResource",source:{id:i,type:t.typeMap&&t.typeMap[i]||"Unknown"},selector:null,selectors:[]}}if(e.type==="Choice"||e.type==="List"||e.type==="Composite"||e.type==="Independents")return qr(e.items[0]);if(e.type==="SpecificResource"){e.source.type==="Canvas"&&e.source.partOf&&typeof e.source.partOf=="string"&&(e.source.partOf=[{id:e.source.partOf,type:"Manifest"}]);let{selector:i,selectors:r}=e.selector?Al(e.selector):{selector:null,selectors:[]};return{type:"SpecificResource",source:e.source,selector:i,selectors:r}}if(e.id){e.type==="Canvas"&&e.partOf&&typeof e.partOf=="string"&&(e.partOf=[{id:e.partOf,type:"Manifest"}]);let[i,r]=e.id.split("#");return r?qr({type:"SpecificResource",source:fy(py({},e),{id:i}),selector:{type:"FragmentSelector",value:r}}):{type:"SpecificResource",source:fy(py({},e),{id:i}),selector:null,selectors:[]}}return{type:"SpecificResource",source:e,selector:null,selectors:[]}}function xh(e={},t=[]){let{id:i,selector:r}=e,n=Yn(),a=Bt(),l=i||n.annotation,u=ki(g=>l?g.iiif.entities.Annotation[l]:void 0,[l]),h=ki(g=>u&&u.body?u.body.map(p=>p?g.iiif.entities[p.type][p.id]:null).filter(Boolean):[],[u]);return Ee(()=>{if(!u)return;let g=Ci(si({},u),{body:h,target:qr(u.target,{typeMap:a.getState().iiif.mapping})});return r?r(g):g},[u,r,h,...t])}function fn(e={},t=[]){let{id:i,selector:r}=e,n=Yn(),a=i||n.canvas,l=ki(u=>a?u.iiif.entities.Canvas[a]:void 0,[a]);return Ee(()=>{if(l)return r?r(l):l},[l,r,...t])}function gy(e){return e.type==="SpecificResource"?[e.source,{selector:e.selector}]:[e,{selector:null}]}function iT(e,t,i){let r=[],n=null,a=[];for(let l of t){let u=e.get(l.body,{skipSelfReturn:!1});for(let h of u){if(!h)continue;let[g,{selector:p}]=gy(h),y=(g.type||"unknown").toLowerCase();if(y==="choice"){let S=e.get(g.items),C=i.length?i.map(_=>S.find(T=>T.id===_)).filter(Boolean):[S[0]];C.length===0&&C.push(S[0]),n={type:"single-choice",items:S.map(_=>({id:_.id,label:_.label,selected:C.indexOf(_)!==-1})),label:h.label},u.push(...C);continue}r.indexOf(y)===-1&&r.push(y),a.push({annotationId:l.id,type:y,resource:g,target:l.target,selector:p})}}return{types:r,items:a,choice:n}}function my(e,t){let{selector:i,source:r}=Fo(t);if(r.id!==e.id)return[null,r];let n={type:"BoxSelector",spatial:{x:0,y:0,width:e.width,height:e.height}};return[i?i.type==="TemporalSelector"?{type:"TemporalBoxSelector",temporal:i.temporal,spatial:n.spatial}:i:null,r]}var rT={makeChoice:()=>{}},_h={type:"unknown"},oi=e=>({type:"unknown",reason:e,annotations:{pages:[]}}),nT=(e,t)=>({type:"empty",width:e,height:t,annotations:{pages:[]},image:null,images:[]});function sT(e,t){var i;let r=(i=e==null?void 0:e.iiif)==null?void 0:i.meta[t];return r?r.annotationPageManager:null}function oT(e,t){return ki(i=>{let r=[];if(!e)return r;let n=Object.keys(i.iiif.entities.AnnotationPage);for(let a of n)if(!t||t.indexOf(a)!==-1){let l=sT(i,a);l&&l.views&&l.views[e]&&r.push(a)}return r},[e,t])}function aT({canvas:e,manifest:t,all:i,canvases:r}){let n=[];if(t)for(let a of t.annotations)n.indexOf(a.id)===-1&&n.push(a.id);if(i){if(r&&r.length)for(let a of r)for(let l of a.annotations)n.indexOf(l.id)===-1&&n.push(l.id)}else if(e)for(let a of e.annotations)n.indexOf(a.id)===-1&&n.push(a.id);return n}function lT(e,t){var i;let r=(i=e==null?void 0:e.iiif)==null?void 0:i.meta[t];return r?r.annotationPageManager:null}function Sh(e,t={}){let i=Bt(),r=pn(),n=fn(),a=oy(),l=Ee(()=>aT({all:t.all,manifest:r,canvas:n,canvases:a}),[t.all,n,a,r]),u=oT(e,t.all?void 0:l),h=De(p=>{!e||i.setMetaValue([p,"annotationPageManager","views"],y=>y&&!y[e]?y:Ci(si({},y||{}),{[e]:!1}))},[e,i]),g=De((p,y={})=>{if(!e)return;let S=i.getState(),C=[];if(y!=null&&y.deselectOthers){let _=Object.keys(S.iiif.entities.AnnotationPage);for(let T of _){let L=lT(S,T);L&&L.views&&L.views[e]&&C.push(T)}}for(let _ of C)h(_);i.setMetaValue([p,"annotationPageManager","views"],_=>_&&_[e]?_:Ci(si({},_||{}),{[e]:!0}))},[e,h,i]);return{availablePageIds:l,enabledPageIds:u,setPageEnabled:g,setPageDisabled:h}}function uT(e,t){return ki((i,r)=>r.get(e.map(n=>({id:n,type:t}))),[e,t])}var vy=K.createContext(new gh);function Eh(){return Jt(vy)}function yy(){let e=Eh(),[t,i]=Me({}),r=Se(!1);return de(()=>()=>{r.current=!0},[]),[De((n,{height:a,width:l})=>{if(n){let u=n.id||n["@id"],h=e.loadServiceSync({id:u,width:n.width||l,height:n.height||a,source:n});h?n=h:t[u]||(r.current||i(g=>Ci(si({},g),{[u]:"loading"})),e.loadService({id:u,width:n.width||l,height:n.height||a}).then(()=>{r.current||i(g=>Ci(si({},g),{[u]:"done"}))}))}return n},[e,t]),t]}function cT(e={}){let t=xh(),i=fn(e.canvasId?{id:e.canvasId}:void 0);return ki((r,n)=>{if(!i)return[];if(t&&e.enableSingleAnnotation)return[t];let a=n.get(i.items),l=[];for(let u of a)l.push(...n.get(u.items));return l},[i])}function hT(e,t=[]){let i=Bt(),r=cT({enableSingleAnnotation:e==null?void 0:e.enableSingleAnnotation}),[n,a]=Me((e==null?void 0:e.defaultChoices)||[]),l=Ee(()=>iT(i,r,n),[i,r,n,...t]),u={makeChoice:De((h,{deselectOthers:g=!0,deselect:p=!1}={})=>{if(l.choice){if(l.choice.type!=="single-choice")throw new Error("Complex choice not supported yet");a(y=>{if(p){let C=y.filter(_=>_!==h);if(C.length===0){let _=l.items[0].resource.id;return _?[_]:[]}return C}if(g)return[h];let S=[...y];if(S.length===0&&l.items.length){let C=l.items[0].resource.id;C&&S.push(C)}return y.indexOf(h)!==-1?y:[...y,h]})}},[l.choice])};return[l,u]}function dT(e,t,i){let r=[];for(let n of t.items){let a=n.resource&&n.resource.type==="SpecificResource"?n.resource.source:n.resource;if(!a.id)return oi("No resource Identifier");let l;if(a.service){let _=ph(a);_[0]&&(l=i(_[0],e))}let u={type:"BoxSelector",spatial:{x:0,y:0,width:e.width,height:e.height}},[h,g]=my(e,n.target);if(g.id!==e.id)continue;let p={type:"BoxSelector",spatial:{x:0,y:0,width:e.width,height:e.height}},y=n.resource.type==="SpecificResource"?qr(n.resource):null,S=y&&y.selector&&(y.selector.type==="BoxSelector"||y.selector.type==="TemporalBoxSelector")?{type:"BoxSelector",spatial:{x:y.selector.spatial.x,y:y.selector.spatial.y,width:y.selector.spatial.width,height:y.selector.spatial.height}}:p;l&&!l.id&&(l.id=l["@id"]);let C={id:a.id,type:"Image",annotationId:n.annotationId,width:h?a.width:e.width,height:h?a.height:e.height,service:l,sizes:l&&l.sizes?l.sizes:a.width&&a.height?[{width:a.width,height:a.height}]:[],target:h&&h.type!=="PointSelector"?h:u,selector:S};r.push(C)}return{type:"images",image:r[0],images:r,choice:t.choice}}var pT=["model/gltf-binary"];function fT(e,t){let i=t.items[0].resource;return i.format?pT.indexOf(i.format)===-1?oi(`3D format: ${i.format} is unsupported`):{type:"3d-model",model:i}:oi("Unknown format")}function gT(e,t){var i;if(!e.duration)return oi("No duration on canvas");if(t.items.length>1)return oi("Only one audio source supported");let r=(i=t.items[0])==null?void 0:i.resource;return r?r.format?{type:"media",media:{annotationId:t.items[0].annotationId,duration:e.duration,url:r.id,type:"Sound",target:{type:"TemporalSelector",temporal:{startTime:0,endTime:e.duration}},format:r.format,selector:{type:"TemporalSelector",temporal:{startTime:0,endTime:e.duration}}},annotations:{pages:[]}}:oi("Audio does not have format"):oi("Unknown audio")}function mT(e,t){var i;let r=t.items.filter(a=>a.type==="video");if(!e.duration)return oi("No duration on canvas");if(r.length>1)return oi("Only one video source supported");let n=(i=r[0])==null?void 0:i.resource;return n?n.format?{type:"media",media:{annotationId:t.items[0].annotationId,duration:e.duration,url:n.id,type:"Video",items:[],target:{type:"TemporalSelector",temporal:{startTime:0,endTime:e.duration}},format:n.format,selector:{type:"TemporalSelector",temporal:{startTime:0,endTime:e.duration}}},annotations:{pages:[]}}:oi("Video does not have format"):oi("Unknown video")}function by(e,t={},i){let r=e.language||i||"none";switch(e.type){case"TextualBody":{typeof e.value<"u"&&(t[r]=e.value);break}case"List":case"Composite":case"Choice":e.items&&e.items.forEach(n=>by(n,t,r))}return t}function vT(e,t){let i=[];return t.items.forEach(r=>{if(r.resource){let[n]=my(e,r.target);i.push({annotationId:r.annotationId,text:by(r.resource),target:n})}}),{type:"textual-content",items:i}}function yT(e){let t=pn(),i=fn(),r=Bt(),[n,a]=yy(),{enabledPageIds:l}=Sh((e==null?void 0:e.annotationPageManagerId)||(t==null?void 0:t.id)||(i==null?void 0:i.id),{all:!1}),u=uT(l,"AnnotationPage"),h=(e==null?void 0:e.strategies)||["empty","images","media","textual-content","complex-timeline"],[g,p]=hT(e,[a]),y=Ee(()=>{if(!i)return _h;if(g.types.length===0)return h.indexOf("empty")!==-1?nT(i.width,i.height):_h;if(g.types.length!==1)if(g.types.length===2&&g.types.indexOf("text")!==-1)g.types=g.types.filter(C=>C!=="text");else return h.indexOf("complex-timeline")===-1?oi("Complex timeline not supported"):oi("ComplexTimelineStrategy not yet supported");let S=g.types[0];return S==="image"?h.indexOf("images")===-1?oi("Image not supported"):dT(i,g,n):S==="Model"||S==="model"?h.indexOf("3d-model")===-1?oi("3D not supported"):fT(i,g):S==="textualbody"?h.indexOf("textual-content")===-1?oi("Textual content not supported"):vT(i,g):S==="sound"||S==="audio"?h.indexOf("media")===-1?oi("Media not supported"):gT(i,g):S==="video"?h.indexOf("media")===-1?oi("Media not supported"):mT(i,g):_h},[i,g,r,p.makeChoice]);return Ee(()=>y.type==="unknown"?[y,rT]:[Ci(si({},y),{annotations:{pages:u}}),p],[y,u])}var bT=(e,t=[])=>{let i=Bt();de(()=>{e(i)},[i,...t])};function wT(e,t={}){let i=t.imageServiceLoader||new gh;async function r(n,a,l,u=[],h){if(typeof n=="string")return{best:dh(n),fallback:[],log:[]};let g=e.get(n);if(typeof g=="string")return{best:dh(g),fallback:[],log:[]};switch(g.type){case"Annotation":{let p=g.body,y=e.get(p[0]);return h&&!y.width&&(y.width=h.width,y.height=h.height),await i.getThumbnailFromResource(y,a,l,u)}case"Canvas":{let p=g;if(p.thumbnail&&p.thumbnail.length){let y=e.get(p.thumbnail[0]),S=await i.getImageCandidates(y,l);S&&S.length&&u.push(...S)}return r(p.items[0],a,l,u,{width:p.width,height:p.height})}case"AnnotationPage":return r(g.items[0],a,l,u,h);case"Choice":return r(g.items[0],a,l,u,h);case"Collection":{let p=g.items[0];return r(p,a,l,u,h)}case"Manifest":{let p=g.items[0];return r(p,a,l,u,h)}case"SpecificResource":case"Image":case"Dataset":case"Sound":case"Text":case"TextualBody":case"Video":return h&&!g.width&&(g.width=h.width,g.height=h.height),i.getThumbnailFromResource(g,a,l,u);case"Service":case"Range":case"AnnotationCollection":case"CanvasReference":case"ContentResource":return{best:void 0,fallback:[],log:[]}}return{best:void 0,fallback:[],log:[]}}return{getBestThumbnailAtSize:r}}function xT(e,t,{canvasId:i,manifestId:r}={}){let n=Bt(),a=Eh(),l=Ee(()=>wT(n,{imageServiceLoader:a}),[n,a]),[u,h]=Me(),g=pn(r?{id:r}:void 0),p=fn(i?{id:i}:void 0),y=p||g,S=Se(!1);if(de(()=>(S.current=!1,()=>{S.current=!0}),[]),!y)throw new Error("Must be called under a manifest or canvas context.");return bT(C=>{l.getBestThumbnailAtSize(y,e,t).then(_=>{_.best&&!S.current&&h(_.best)})},[y]),u}function _T(e){return{isMuted:!1,playRequested:!1,isPlaying:!1,isFinished:!1,volume:100,duration:e}}function ST(e,t){switch(t.type){case"FINISHED":return Ci(si({},e),{isFinished:!0,isPlaying:!1,playRequested:!1});case"PLAY_PAUSE":return Ci(si({},e),{isFinished:!1,isPlaying:!e.isPlaying});case"PLAY_REQUESTED":return Ci(si({},e),{isFinished:!1,playRequested:!0});case"PAUSE":return Ci(si({},e),{isPlaying:!1});case"PLAY":return Ci(si({},e),{isFinished:!1,playRequested:!1,isPlaying:!0});case"MUTE":return Ci(si({},e),{isMuted:!0});case"SET_VOLUME":return Ci(si({},e),{volume:t.volume,isMuted:t.volume===0});case"TOGGLE_MUTE":return Ci(si({},e),{isMuted:!e.isMuted});case"UNMUTE":return Ci(si({},e),{isMuted:!1})}return e}function ET(e){let t=Math.round(e);return`${Math.floor(t/60)}:${`${t%60}`.padStart(2,"0")}`}function wy(e){let[t,i]=xs(ST,_T(e.duration)),r=Se(null),n=Se(null),a=Se(null),l=Se(!1),u=De(()=>{n.current&&r.current&&(n.current.innerHTML=ET(r.current.currentTime),a.current&&(a.current.style.width=`${r.current.currentTime/e.duration*100}%`),l.current!==r.current.muted&&(l.current=r.current.muted,i(r.current.muted?{type:"MUTE"}:{type:"UNMUTE"})))},[e.duration]),h=De(()=>{r.current&&(i({type:"PLAY_REQUESTED"}),r.current.play().then(()=>{i({type:"PLAY"})}),u())},[u]),g=De(()=>{r.current&&(r.current.duration>0&&r.current.paused?h():p())},[u]),p=De(()=>{r.current&&(r.current.pause(),i({type:"PAUSE"}),u())},[u]),y=De(()=>{r.current&&(r.current.muted=!r.current.muted,i(r.current.muted?{type:"MUTE"}:{type:"UNMUTE"}))},[]),S=De(()=>{r.current&&(r.current.muted=!0,i({type:"MUTE"}))},[]),C=De(()=>{r.current&&(r.current.muted=!1,i({type:"UNMUTE"}))},[]),_=De(O=>{r.current&&(r.current.muted=!1,r.current.volume=O/100,i({type:"SET_VOLUME",volume:O}))},[]),T=De(O=>{r.current&&(r.current.currentTime=Math.max(0,Math.min(O*e.duration,e.duration)),u())},[]),L=De(O=>{r.current&&(r.current.currentTime=Math.max(0,Math.min(O,e.duration)),u())},[]);return de(()=>{let O=setInterval(()=>{u()},350);return()=>clearInterval(O)},[u,e.duration]),de(()=>{let O=()=>{i({type:"FINISHED"})},E=r.current;return E==null||E.addEventListener("ended",O),()=>E==null?void 0:E.removeEventListener("ended",O)},[]),[{element:r,currentTime:n,progress:a},t,{play:h,pause:p,playPause:g,mute:S,unmute:C,toggleMute:y,setVolume:_,setDurationPercent:T,setTime:L}]}var CT=ri(null),kT=ri(null),AT=ri(null);function PT({actions:e,state:t,children:i,currentTime:r,progress:n,element:a}){return ni(AT.Provider,{value:{currentTime:r,progress:n,element:a},children:ni(kT.Provider,{value:e,children:ni(CT.Provider,{value:t,children:i})})})}function TT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xy(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IT(e,t,i){return t&&xy(e.prototype,t),i&&xy(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}K.createContext(),function(){function e(){TT(this,e),this.usedNamespaces={}}return IT(e,[{key:"addUsedNamespaces",value:function(t){var i=this;t.forEach(function(r){i.usedNamespaces[r]||(i.usedNamespaces[r]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function RT(e={},t=[]){let{id:i,selector:r}=e,n=Yn(),a=i||n.annotationPage,l=ki(u=>a?u.iiif.entities.AnnotationPage[a]:void 0,[a]);return Ee(()=>{if(l)return r?r(l):l},[l,...t])}function Pl(){let e=Jt(mh);return e&&e.vault?e.vault:xv()}function LT(){let e=Bt();return Ee(()=>cy(e),[e])}Qe();async function OT(e){if(!e)return null;switch(e){case"static":return{render:"static",interactive:!1,viewport:!0};case"responsive":return{render:"static",interactive:!1,viewport:!1};case"zoom":return{render:"canvas",interactive:!0,viewport:!0}}if(e.startsWith("http"))return fetch(e).then(t=>t.json());if(e.startsWith("#")){let t=document.getElementById(e.slice(1));if(t)try{return JSON.parse(t.innerText)}catch{console.error("Invalid JSON on element",t)}}return null}function $T(e,t){let[i,r]=Me(!1),[n,a]=Me({}),l=e&&!n.__loaded,u=!!((!e||n.__loaded)&&i);return Rt(()=>{let h=[];return e&&OT(e).then(g=>{if(g){let p=g,{media:y}=p,S=le(p,["media"]),C=Object.keys(y||{}),_=C.map(L=>({query:L,mql:window.matchMedia(L)})),T=()=>{if(!_.length||!y)return A({__loaded:!0},S);let L=_.filter(({mql:E})=>E.matches),O=A(A({__loaded:!0},S),L.reduce((E,F)=>Object.assign(E,y[F.query]),{}));if(t)for(let E of L)t(E.query,O);return O};for(let L of C){let O=window.matchMedia(L),E=()=>{let F=T();a(F)};O.addEventListener("change",E),h.push(()=>{O.removeEventListener("change",E)})}a(T())}else a({__loaded:!0})}).catch(()=>{a({__loaded:!0})}),()=>{h.forEach(g=>g())}},[u,e]),{internalConfig:n,isReady:u,isConfigBlocking:l,setIsReady:r}}Qe(),Qe();function je(e,{parse:t,defaultValue:i}={}){let r=Se(),[n,a]=Me(()=>t?t(e):e),l=De(u=>{let h=t?t(u):u;typeof i<"u"&&typeof h>"u"&&(h=i),(r.current||n)!==h&&(a(h),r.current=h)},[]);return Rt(()=>{l(e)},[e]),[n,l,a,r]}function FT({max:e,percentScale:t,upscaled:i,confined:r,width:n,height:a}){let l=[];return i&&l.push("^"),e?(l.push("max"),l.join("")):(r&&l.push("!"),t&&l.push(`pct:${t}`),n&&l.push(`${n}`),l.push(","),a&&l.push(`${a}`),l.join(""))}function MT(e){let t={upscaled:!1,max:!1,confined:!1};if(e[0]==="^"&&(t.upscaled=!0,e=e.slice(1)),(e==="max"||e==="full")&&(t.max=!0),e[0]==="!"&&(t.confined=!0,e=e.slice(1)),e[0]==="p")return t.percentScale=parseFloat(e.slice(4)),t;let i=e.split(",").map(r=>r.trim());return i[0]!==""&&(t.width=parseInt(i[0],10)),i[1]!==""&&(t.height=parseInt(i[1],10)),t}function Tl(e){return e==null||e<0?0:e}function Il(e){return zT(typeof e=="string"?e:JSON.stringify(e))}function Rl(e,t){if(e=e.trim(),e[0]==="{")return t?Promise.resolve(JSON.parse(e)):JSON.parse(e);if(e.startsWith("http")){if(!t)throw new Error("Cannot fetch remote fetch with async=false in parseContentState");return fetch(e).then(i=>i.json())}return Rl(NT(e),t)}function zT(e){let t=encodeURIComponent(e);return(typeof btoa>"u"?Buffer.from(t,"utf-8").toString("base64"):btoa(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function NT(e){let t=jT(e).replace(/-/g,"+").replace(/_/g,"/"),i=typeof atob>"u"?Buffer.from(t,"base64").toString("utf-8"):atob(t);return decodeURIComponent(i).trim()}function jT(e){let t=e.length%4;if(t===1)throw new Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");return e+(t?"====".slice(0,4-t):"")}function Ds(e){if(!e)throw new Error("Content state is empty");Array.isArray(e)||(e=[e]);let t="vault://virtual-annotation/"+new Date().getTime(),i=["contentState"],r=[];for(let n of e){if(typeof n=="string")throw new Error("Content state is a [String] type and cannot be inferred");if(n.type==="Annotation"){if(t=n.id,Array.isArray(n.motivation))for(let l of n.motivation)i.indexOf(l)===-1&&i.push(l);if(Array.isArray(n.target))for(let l of n.target){let u=qr(l);r.push(u)}else{let l=qr(n.target);r.push(l)}continue}let a=qr(n);r.push(a)}return{id:t,type:"Annotation",motivation:["contentState",...e.motivation||[]],target:r,extensions:{}}}function BT(e){if(!e)return[];typeof e=="string"&&(e=e.split("|")),Array.isArray(e)||(e=[e]);let t=[];for(let i of e)typeof i=="string"&&(i=MT(i)),t.push(i);return t}function Ch(e){if(typeof e=="string"){let t=e.match(/^(pct|pixel|percent)?:?([0-9,\s]+)/);if(t)return Ch({type:"FragmentSelector",value:`xywh=${t[1]?t[1]==="pixel"?"pixel:":"percent:":""}${t[2]}`})}return e?Al(e):void 0}function _y(e){return e?Array.isArray(e)?e:e.indexOf(",")!==-1?e.split(",").map(t=>t.trim()):[e]:[]}function DT(e){let t=_y(e),i=[];for(let r of t){let[n,a]=r.split("#");if(a){let l=a.match(/opacity=([01]?\.[0-9]+)/);if(l){let u=parseFloat(l[1]);if(u<1&&u>=0){i.push({id:n,opacity:u});continue}}}i.push({id:n})}return i}function dt(e,t){return typeof e>"u"?t:typeof e=="string"?e.toLowerCase()==="true":t?typeof e>"u"?t:!1:e}function kr(e,t){return typeof e>"u"||e===null||e===""?t:(typeof e=="string"&&(e=parseInt(""+e,10)),typeof e<"u"&&!Number.isNaN(e)?e:t)}function Ll(e){if(!e)return null;if(typeof e=="string"&&e.startsWith("http"))return{type:"remote-content-state",id:e};try{return Ds(typeof e=="string"?Rl(e):e)}catch{return null}}var UT=class{constructor(e,t){this._className="",this.onChange=e||(()=>{}),this.className=Array.isArray(t)?t.join(" "):t||""}set className(e){this._className=e}get className(){return this._className}add(e){this.className.split(" ").includes(e.trim())||(this.className+=" "+e.trim())}remove(e){this.className=this.className.split(" ").filter(t=>t&&t!==e).join(" ")}toggle(e,t){let i=this.className.split(" ");t&&!i.includes(e)&&(this.className+=" "+e.trim())}contains(e){return this.className.split(" ").includes(e.trim())}getClassName(){return this.className}};function kh(e){return{addEventListener(t,i,r,n){if(t)return e.setMetaValue([t.id,"eventManager",i],a=>{let l=a||[];for(let u of l)if(u.callback===r)return l;return[...l,{callback:r,scope:n}]}),r},removeEventListener(t,i,r){!t||e.setMetaValue([t.id,"eventManager",i],n=>(n||[]).filter(a=>a.callback!==r))},getListenersAsProps(t,i){let r=typeof t=="string"?{id:t}:t;if(!r||!r.id)return{};let n=e.getResourceMeta(r.id,"eventManager"),a={};if(n&&r)for(let l of Object.keys(n))a[l]=u=>{let h=e.get(r);for(let{callback:g,scope:p}of n[l]||[])(!p||i&&p.indexOf(i)!==-1)&&g(u,h)};return a}}}function Ah(e){return{applyStyles(t,i,r){let n=typeof t=="string"?t:t.id;return e.setMetaValue([n,"styles",i],r)},getAppliedStyles(t){let i=typeof t=="string"?t:t.id;return e.getResourceMeta(i,"styles")}}}function Zn(e){return e.endsWith("info.json")?e:e.endsWith("/")?`${e}info.json`:`${e}/info.json`}var WT="http://library.stanford.edu/iiif/image-api/compliance.html#level0",Sy="http://library.stanford.edu/iiif/image-api/compliance.html#level1",Ey="http://library.stanford.edu/iiif/image-api/compliance.html#level2",HT="http://library.stanford.edu/iiif/image-api/conformance.html#level0",Cy="http://library.stanford.edu/iiif/image-api/conformance.html#level1",ky="http://library.stanford.edu/iiif/image-api/conformance.html#level2",qT="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",Ay="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",Py="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",QT="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",Ty="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",Iy="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",VT="http://iiif.io/api/image/1/level0.json",GT="http://iiif.io/api/image/1/profiles/level0.json",Ry="http://iiif.io/api/image/1/level1.json",Ly="http://iiif.io/api/image/1/profiles/level1.json",Oy="http://iiif.io/api/image/1/level2.json",$y="http://iiif.io/api/image/1/profiles/level2.json",YT="http://iiif.io/api/image/2/level0.json",XT="http://iiif.io/api/image/2/profiles/level0.json",Fy="http://iiif.io/api/image/2/level1.json",My="http://iiif.io/api/image/2/profiles/level1.json",zy="http://iiif.io/api/image/2/level2.json",Ny="http://iiif.io/api/image/2/profiles/level2.json",ZT="level0",jy="level1",By="level2",KT="http://iiif.io/api/image/2/level0",Dy="http://iiif.io/api/image/2/level1",Uy="http://iiif.io/api/image/2/level2",Wy=[Uy,Ey,ky,Py,Iy,Oy,$y,zy,Ny,By],Hy=[...Wy,Dy,Sy,Cy,Ay,Ty,Ry,Ly,Fy,My,jy],JT=[KT,Dy,Uy,WT,Sy,Ey,HT,Cy,ky,qT,Ay,Py,QT,Ty,Iy,VT,GT,Ry,Ly,Oy,$y,YT,XT,Fy,My,zy,Ny,ZT,jy,By],e2={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},t2={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},i2={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]};function r2(e){return Wy.indexOf(e)!==-1?i2:Hy.indexOf(e)!==-1?t2:e2}function n2(e){let t=e?Array.isArray(e.profile)?e.profile:[e.profile]:[],i={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let r of t)if(typeof r=="string"&&(r=r2(r)),!!r){if(r.formats)for(let n of r.formats)i.extraFormats.indexOf(n)===-1&&i.extraFormats.push(n);if(r.qualities)for(let n of r.qualities)i.extraQualities.indexOf(n)===-1&&i.extraQualities.push(n);if(r.supports)for(let n of r.supports)i.extraFeatures.indexOf(n)===-1&&i.extraFeatures.push(n);if(r.maxHeight&&(i.maxHeight=r.maxHeight),r.maxWidth&&(i.maxWidth=r.maxWidth),r.maxArea&&(i.maxArea=r.maxArea),r.extraFormats)for(let n of r.extraFormats)i.extraFormats.indexOf(n)===-1&&i.extraFormats.push(n);if(r.extraQualities)for(let n of r.extraQualities)i.extraQualities.indexOf(n)===-1&&i.extraQualities.push(n);if(r.extraFeatures)for(let n of r.extraFeatures)i.extraFeatures.indexOf(n)===-1&&i.extraFeatures.push(n);r.maxHeight&&(i.maxHeight=r.maxHeight),r.maxWidth&&(i.maxWidth=r.maxWidth),r.maxArea&&(i.maxArea=r.maxArea)}if(e.extraFormats)for(let r of e.extraFormats)i.extraFormats.indexOf(r)===-1&&i.extraFormats.push(r);if(e.extraFeatures)for(let r of e.extraFeatures)i.extraFeatures.indexOf(r)===-1&&i.extraFeatures.push(r);if(e.extraQualities)for(let r of e.extraQualities)i.extraQualities.indexOf(r)===-1&&i.extraQualities.push(r);return i}function s2(e){try{if(e==="full")return{full:!0};if(e==="square")return{square:!0};let t=e.startsWith("pct:"),i=e.substr(t?4:0).split(",").map(r=>parseFloat(r));return{x:i[0],y:i[1],w:i[2],h:i[3],percent:t}}catch{throw new Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+e)}}function o2(e){let t={upscaled:!1,max:!1,confined:!1};if(e[0]==="^"&&(t.upscaled=!0,e=e.slice(1)),e==="max"||e==="full")return t.max=!0,t.serialiseAsFull=e==="full",t;if(e[0]==="!"&&(t.confined=!0,e=e.slice(1)),e[0]==="p")return t.percentScale=parseFloat(e.slice(4)),t;let i=e.split(",").map(r=>r.trim());return i.length&&(i[0]!==""&&(t.width=parseInt(i[0],10)),i[1]!==""&&(t.height=parseInt(i[1],10))),t}function a2(e){let t={angle:0};if(e[0]==="!"&&(t.mirror=!0,e=e.substr(1)),t.angle=parseFloat(e)%360,Number.isNaN(t.angle))throw new Error(`Invalid rotation ${e}`);return t}function l2(e,t=""){let i=e.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!i)throw new Error(`Invalid or unknown input ${e}`);let r=i[2],n=i[3],a=i[4];if(a[0]==="/"&&(a=a.substr(1)),t.length>0){if(t[0]==="/"&&(t=t.substr(1)),t!==a.substr(0,t.length))throw new Error(`Path does not start with prefix (path: ${a}, prefix: ${t})`);a=a.substr(t.length)}return{scheme:r,server:n,path:a,prefix:t}}function u2(e,t=""){let{path:i,scheme:r,server:n,prefix:a}=l2(e,t),l=i.split("/").reverse(),[u,h,g,p,...y]=l,S=y.reverse().filter(Boolean).join("/");if(l.length===1||u==="")return{type:"base",scheme:r,server:n,prefix:a,identifier:S};if(u==="info.json"){let[,..._]=l;return{type:"info",scheme:r,server:n,prefix:a,identifier:_.reverse().filter(Boolean).join("/")}}let C=u.split(".");return{type:"image",scheme:r,server:n,prefix:a,identifier:S,originalPath:i,region:s2(p),size:o2(g),rotation:a2(h),quality:C[0],format:C[1]}}function c2(e){let t=u2(Zn(e.id));if(t.type!=="info")throw new Error("Invalid service URL");let i=n2(e);return{identifier:t.identifier,originalPath:"",server:t.server,prefix:t.prefix,scheme:t.scheme,type:"image",quality:i.extraQualities.indexOf("default")===-1?i.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}function h2(e,t,i){let r=i.length,n=[];for(let a=0;a<r;a++){let l=i[a].width;n.push(e/l)}return n}function d2(e,t,i){let r=i.length,n=[];for(let a=0;a<r;a++){let l=i[a];n.push({width:Math.floor(e/l),height:Math.floor(t/l)})}return n}function Dt(e){if(e["@id"])return e["@id"];if(e.id)return e.id}function Ph(e){if(!e||!e.profile||!Dt(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let i of t)if(typeof i=="string"&&JT.indexOf(i)!==-1)return!0;return!1}function p2(e){if(!Ph(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let i of t)if(typeof i=="string"){if(Hy.indexOf(i)!==-1)return!0}else{let r=[...i.supports||[],...i.extraFeatures||[]];if(r.indexOf("regionByPx")!==-1&&(r.indexOf("sizeByW")!==-1||r.indexOf("sizeByWh")!==-1))return!0}return!1}function f2(e){if(!p2(e))return[];let t=[],i=Array.isArray(e.profile)?e.profile:[e.profile],r=i.length;for(let n=0;n<r;n++){let a=i[n];if(typeof a!="string"&&(a.maxHeight||a.maxWidth))return[{id:Dt(e),type:"variable",minWidth:0,minHeight:0,maxHeight:a.maxHeight||a.maxWidth,maxWidth:a.maxWidth||a.maxHeight}]}if(e.tiles){let n=e.tiles.length;for(let a=0;a<n;a++){let l=e.tiles[a];(l.height||l.width)&&t.push({id:Dt(e),type:"variable",minHeight:0,minWidth:0,maxHeight:l.height||l.width,maxWidth:l.width})}}return t}function qy(e){let t=/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/,i=e.match(t);if(i){let r=i[1],n=parseInt(i[4],10),a=parseInt(i[5],10),l=i[7];if((r==="max"||r==="full")&&n&&a&&l)return{type:"fixed",id:e,height:a,width:n}}return{type:"unknown",id:e}}function g2(e){if(e["@type"])return e["@type"];if(e.type)return e.type}function Th(e){if(typeof e=="string")return qy(e);let t=g2(e);if(t!=="Image"&&t!=="sc:Image")return null;let i=e,r=Dt(i);return r?r&&i.width&&i.height?{id:r,type:"fixed",width:i.width,height:i.height,unsafe:!0}:qy(r):null}function m2(e){return Ph(e)?(e&&e.sizes?e.sizes:[]).map(t=>({id:Dt(e),type:"fixed-service",height:t.height,width:t.width})):[]}function Qy(e){let t=[],i=e.length;for(let r=0;r<i;r++){let n=m2(e[r]);n.length&&t.push(...n);let a=f2(e[r]);a.length&&t.push(...a)}return t}function Vy(e){let t=e.service?Array.isArray(e.service)?e.service:[e.service]:[],i=t.length,r=[];for(let n=0;n<i;n++)Ph(t[n])&&r.push(t[n]);return r}function v2(e,t=!0,i){let r=[],n=Th(e);if(n===null)return r;let a=e;if(r.push(n),t&&a.width&&a.height){let l=[],u=Vy(a);for(let h of u){let g={id:Dt(h),width:a.width,height:a.height};if(i.canLoadSync(g)){let p=i.loadServiceSync(g);p&&(p.height||(p.height=a.height),p.width||(p.width=a.width),l.push(...Qy([p])))}}if(l.length)return r.push(...l),r}return a.service&&r.push(...Qy(a.service)),r}function y2({x:e=0,y:t=0,w:i,h:r,full:n,square:a,percent:l}){if(n)return"full";if(a)return"square";if(typeof i>"u"||typeof r>"u")throw new Error("RegionParameter: invalid region");let u=`${e},${t},${i},${r}`;return l?`pct:${u}`:u}function b2({max:e,percentScale:t,upscaled:i,confined:r,width:n,height:a,serialiseAsFull:l}){let u=[];return i&&u.push("^"),e?(u.push(l?"full":"max"),u.join("")):(r&&u.push("!"),t&&u.push(`pct:${t}`),n&&u.push(`${n}`),u.push(","),a&&u.push(`${a}`),u.join(""))}function w2(e){return`${e.mirror?"!":""}${(e.angle||0)%360}`}var x2=Object.defineProperty,_2=Object.defineProperties,S2=Object.getOwnPropertyDescriptors,Gy=Object.getOwnPropertySymbols,E2=Object.prototype.hasOwnProperty,C2=Object.prototype.propertyIsEnumerable,Yy=(e,t,i)=>t in e?x2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,zo=(e,t)=>{for(var i in t||(t={}))E2.call(t,i)&&Yy(e,i,t[i]);if(Gy)for(var i of Gy(t))C2.call(t,i)&&Yy(e,i,t[i]);return e},No=(e,t)=>_2(e,S2(t));function k2(e,t){let i=e.prefix.startsWith("/")?e.prefix.substr(1):e.prefix,r=`${e.scheme}://${e.server}/${i?`${i}/`:""}${e.identifier}`;if(e.type==="base")return r;if(e.type==="info")return`${r}/info.json`;let{region:n,size:a,rotation:l,format:u,quality:h}=e;if(t){let g=t["@context"]?Array.isArray(t["@context"])?t["@context"]:[t["@context"]]:[],p=g.indexOf("http://iiif.io/api/image/2/context.json")!==-1,y=g.indexOf("http://iiif.io/api/image/3/context.json")!==-1;if((a.width===t.width&&!a.height||a.height===t.height&&!a.width||a.width===t.width&&a.height===t.height)&&(a=No(zo({},a),{max:!0})),p&&(a.max&&!a.serialiseAsFull&&(a=No(zo({},a),{serialiseAsFull:!0})),!a.max&&a.width&&a.height&&(a=No(zo({},a),{height:void 0}))),y&&(a.max&&a.serialiseAsFull&&(a=No(zo({},a),{serialiseAsFull:!1})),a.width&&!a.height&&t.width&&t.height)){let S=t.height/t.width;a=No(zo({},a),{height:Math.ceil(a.width*S)})}}return[r,y2(n),b2(a),w2(l),`${h}.${u}`].filter(Boolean).join("/")}function Ih(e,t,i){let r=c2({id:Zn(Dt(e)),profile:"level2",type:"ImageService2"});if(r.type!=="image")throw new Error("Invalid service");return r.size.max=!1,r.size.width=t,r.size.height=i,{id:k2(r),type:"fixed",width:t,height:i||e.height/(e.width||1)*t,unsafe:e.width>t}}function Us(e){let t=e.replace(/(https?:\/\/)?(www.)?/i,"");return t.indexOf("/")!==-1?t.split("/")[0]:t}function A2(e,t,i){let r=e.width?e.width:e.maxWidth;return i.height<=e.maxHeight&&i.width<=e.maxWidth&&i.height>=e.minHeight&&i.width>=e.minWidth&&(!t||Math.abs(i.width-r)<Math.abs(t.width-r))}function P2(e,t){let i=[],r=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},e),n=[],a=[],l=null,u=(g,p)=>{if(A2(r,p,g)){if(r.preferFixedSize&&g.unsafe){a.push(g);return}r.returnAllOptions&&p&&a.push(p),l=g}else r.returnAllOptions&&a.push(g)},h=t.length;for(let g=0;g<h;g++){let p=t[g](),y=p.length;for(let S=0;S<y;S++){let C=p[S];if(C.type==="unknown"&&r.atAnyCost&&n.push(C),C.type==="fixed"&&(C.unsafe?n.push(C):u(C,l)),C.type==="fixed-service")if(r.unsafeImageService){let _=Ih(C,r.width,r.height);u(_,l)}else{let _=Ih(C,C.width,C.height);u(_,l)}if(C.type==="variable"&&C.maxWidth){let _=Ih({id:C.id,type:"fixed-service",width:C.maxWidth,height:C.maxWidth},C.maxWidth);u(_,l)}}if(l&&!r.returnAllOptions){if(l.unsafe||r.allowUnsafe)continue;break}}return r.atAnyCost&&a.length===0?{best:l||n[0],fallback:n.slice(1),log:i}:r.returnAllOptions?{best:r.atAnyCost?l||a[0]||n[0]:l||a[0],fallback:[...a,...n],log:i}:{best:l||a[0]||null,fallback:l?a:a.slice(1),log:i}}var T2=Object.defineProperty,I2=Object.defineProperties,R2=Object.getOwnPropertyDescriptors,Xy=Object.getOwnPropertySymbols,L2=Object.prototype.hasOwnProperty,O2=Object.prototype.propertyIsEnumerable,Zy=(e,t,i)=>t in e?T2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,$2=(e,t)=>{for(var i in t||(t={}))L2.call(t,i)&&Zy(e,i,t[i]);if(Xy)for(var i of Xy(t))O2.call(t,i)&&Zy(e,i,t[i]);return e},F2=(e,t)=>I2(e,R2(t));function M2(e,t,i){let r=e>t?e:t,n=i.length,a=[];for(let l=0;l<n;l++){let u=i[l],h=u.scaleFactors[0],g=r/h,p=[h];for(;g>=u.width;)h=h*2,p.push(h),g=g/2;a.push(F2($2({},u),{scaleFactors:p}))}return a}function z2(e,t){if(e.length!==t.length)return!1;if(e.length===0&&t.length===0)return!0;let i=e.length,r=!0;for(let a=0;a<i;a++){let l=e[a],u=t[a];if(l.width!==u.width||l.height!==u.height){r=!1;break}}if(r)return!0;let n=0;for(let a=0;a<i;a++)for(let l=0;l<i;l++)if(e[a].width===t[l].width&&e[a].height===t[l].height){n++;break}return n===i}function Ky(e){if(e&&e.profile){let t=e.profile;if(t){let i=Array.isArray(t)?t:[t];return i.includes("level0")||i.includes("http://iiif.io/api/image/2/level0.json")||i.includes("http://iiif.io/api/image/1/level0.json")||i.includes("http://iiif.io/api/image/1/profiles/level0.json")}}return!1}var Kn=(e,t,i)=>new Promise((r,n)=>{var a=h=>{try{u(i.next(h))}catch(g){n(g)}},l=h=>{try{u(i.throw(h))}catch(g){n(g)}},u=h=>h.done?r(h.value):Promise.resolve(h.value).then(a,l);u((i=i.apply(e,t)).next())}),N2=class{constructor(){this.config={verificationsRequired:1,approximateServices:!0,enableFetching:!0,disableThrottling:!1},this.fetchingCount=0,this.imageServices={},this.knownImageServers={}}setConfig(e){Object.assign(this.config,e)}sample(e,t,i=!0){let r=Us(Dt(e)),n=Zn(Dt(e)),a=this.knownImageServers[r];return this.imageServices[n]=Object.assign(e,{real:!0}),!a&&e.tiles&&!Ky(e)?(this.knownImageServers[r]={verifications:0,malformed:!1,root:r,preLoaded:i,sampledId:Dt(e),verified:!1,server:null,result:{context:e["@context"]||[],sampledProfile:e.profile,resourceServiceRatio:t&&e.height?t.height/e.height:1,sampledSizes:e.sizes||[],sizeRatios:h2(e.width,e.height,e.sizes||[]),sampledTiles:e.tiles||[]}},!0):this.verify(e)}preLoad(e,t=!0){this.knownImageServers[e.root]=e,t&&(this.knownImageServers[e.root].malformed=!1,this.knownImageServers[e.root].verifications=this.config.verificationsRequired)}predict(e,t=!1,i=!1){let r=e==null?void 0:e.source,n=Us(Dt(e)),a=this.knownImageServers[n];if(!a||!a.result||!i&&(a.malformed||a.verifications<this.config.verificationsRequired)||Ky(e.source))return null;let l=Zn(Dt(e));return this.imageServices[l]||(this.imageServices[l]={"@context":a.result.context,"@id":Dt(e),id:Dt(e),protocol:"http://iiif.io/api/image",tiles:(r==null?void 0:r.tiles)||M2(e.width,e.height,a.result.sampledTiles),sizes:(r==null?void 0:r.sizes)||d2(Math.round(e.width/a.result.resourceServiceRatio),Math.round(e.height/a.result.resourceServiceRatio),a.result.sizeRatios),profile:(r==null?void 0:r.profile)||a.result.sampledProfile,height:(r==null?void 0:r.height)||e.height,width:(r==null?void 0:r.width)||e.width,real:!1}),this.imageServices[l]}getThumbnailFromResource(e,t){return Kn(this,arguments,function*(i,r,n=!0,a=[]){let l=yield this.getImageCandidates(i,n);return P2(r,[()=>a,()=>l])})}getImageCandidates(e,t=!0){return Kn(this,null,function*(){let i=e;if(t&&i.height&&i.width){let r=Vy(i);for(let n of r){let a={id:Dt(n),width:n.width?n.width:i.width,height:n.height?n.height:i.height,source:n};yield this.loadService(a)}}return v2(e,t,this)})}verify(e){return Kn(this,null,function*(){let t=this.predict(e,!1,!0),i=yield this.fetchService(Dt(e));if(!t)return!1;let r=t.height===i.height&&t.width===i.width&&t["@context"]===i["@context"]&&z2(t.sizes||[],i.sizes||[]);if(r){let n=Us(Dt(e));this.knownImageServers[n].verifications+=1,this.knownImageServers[n].verifications>=this.config.verificationsRequired&&(this.knownImageServers[n].verified=!0)}return r})}canLoadSync(e){let t=typeof e=="string"?e:Dt(e),i=Zn(t);if(this.imageServices[i])return!0;let r=this.knownImageServers[Us(t)];return r&&!r.malformed&&r.verifications>=this.config.verificationsRequired}markAsMalformed(e){return Kn(this,null,function*(){return this.knownImageServers[Us(Dt(e))].malformed=!0,this.loadService(e,!0)})}fetchService(e,t=!1){return Kn(this,null,function*(){let i=Zn(e);if(this.imageServices[i]&&(!t||this.imageServices[i].real))return this.imageServices[i];if(!this.config.enableFetching)throw new Error("Fetching is not enabled");let r=yield this.fetch(i).then(n=>n.json());return!r.id&&r["@id"]&&(r.id=r["@id"]),r.id!==e&&(r.id=e,r["@id"]&&(r["@id"]=e)),this.imageServices[i]=Object.assign(r,{real:!0}),this.imageServices[i]})}fetch(e,t){return Kn(this,null,function*(){return fetch(e,t)})}loadService(e,t=!1){return Kn(this,null,function*(){if(!this.config.disableThrottling){let n=!0;for(;n;)if(this.fetchingCount>=this.config.verificationsRequired)yield new Promise(a=>setTimeout(a,500));else{n=!1;break}}let i=this.knownImageServers[Us(Dt(e))];if(i&&!i.malformed&&!t){yield i.result;let n=this.loadServiceSync(e);if(n)return n}this.fetchingCount++;let r=yield this.fetchService(Dt(e),t);return this.fetchingCount--,r.real&&this.sample(r,e),r})}loadServiceSync(e){let t=Zn(Dt(e));return this.imageServices[t]?this.imageServices[t]:this.predict(e)}};function j2(e,t={}){let i=t.imageServiceLoader||new N2;async function r(n,a,l,u=[],h){if(typeof n=="string")return{best:Th(n),fallback:[],log:[]};let g=e.get(n);if(typeof g=="string")return{best:Th(g),fallback:[],log:[]};switch(g.type){case"Annotation":{let p=g.body,y=e.get(p[0]);return h&&!y.width&&(y.width=h.width,y.height=h.height),await i.getThumbnailFromResource(y,a,l,u)}case"Canvas":{let p=g;if(p.thumbnail&&p.thumbnail.length){let y=e.get(p.thumbnail[0]),S=await i.getImageCandidates(y,l);S&&S.length&&u.push(...S)}return r(p.items[0],a,l,u,{width:p.width,height:p.height})}case"AnnotationPage":return r(g.items[0],a,l,u,h);case"Choice":return r(g.items[0],a,l,u,h);case"Collection":{let p=g.items[0];return r(p,a,l,u,h)}case"Manifest":{let p=g.items[0];return r(p,a,l,u,h)}case"SpecificResource":case"Image":case"Dataset":case"Sound":case"Text":case"TextualBody":case"Video":return h&&!g.width&&(g.width=h.width,g.height=h.height),i.getThumbnailFromResource(g,a,l,u);case"Service":case"Range":case"AnnotationCollection":case"CanvasReference":case"ContentResource":return{best:void 0,fallback:[],log:[]}}return{best:void 0,fallback:[],log:[]}}return{getBestThumbnailAtSize:r}}function B2(e,t,i=[],r=!1){if(!e||!t||t.length===0)return;if(t.length===1)return t[0];if(t.indexOf(e)!==-1)return e;let n=e.indexOf("-")!==-1?e.slice(0,e.indexOf("-")):null;if(n&&t.indexOf(n)!==-1)return n;for(let a of i)if(t.indexOf(a)!==-1)return a;if(!r){let a=t.map(l=>l.indexOf("-")!==-1?l.slice(0,l.indexOf("-")):null).indexOf(e);if(a!==-1)return t[a];for(let l of i){let u=l.indexOf("-")!==-1?l.slice(0,l.indexOf("-")):null,h=u?t.indexOf(u):-1;if(h!==-1)return t[h]}}return t.indexOf("none")!==-1?"none":t.indexOf("@none")!==-1?"@none":t[0]}function D2(e,t,i={}){let{strictFallback:r=!1,defaultText:n="",separator:a=`
`,fallbackLanguages:l=[],closest:u}=i,h=Object.keys(e||{}),g=u?t:B2(t,h,l,r);if(!e)return n;if(typeof e=="string")return e;let p=g?e[g]:void 0;return p?typeof p=="string"?p:p.join(a):""}function Ar(e,t={}){return D2(e,typeof navigator<"u"?navigator.language:void 0,t)}var U2=function(){function e(t,i){var r=[],n=!0,a=!1,l=void 0;try{for(var u=t[Symbol.iterator](),h;!(n=(h=u.next()).done)&&(r.push(h.value),!(i&&r.length===i));n=!0);}catch(g){a=!0,l=g}finally{try{!n&&u.return&&u.return()}finally{if(a)throw l}}return r}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),jo=Math.PI*2,Rh=function(e,t,i,r,n,a,l){var u=e.x,h=e.y;u*=t,h*=i;var g=r*u-n*h,p=n*u+r*h;return{x:g+a,y:p+l}},W2=function(e,t){var i=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=Math.cos(e),n=Math.sin(e),a=Math.cos(e+t),l=Math.sin(e+t);return[{x:r-n*i,y:n+r*i},{x:a+l*i,y:l-a*i},{x:a,y:l}]},Jy=function(e,t,i,r){var n=e*r-t*i<0?-1:1,a=e*i+t*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},H2=function(e,t,i,r,n,a,l,u,h,g,p,y){var S=Math.pow(n,2),C=Math.pow(a,2),_=Math.pow(p,2),T=Math.pow(y,2),L=S*C-S*T-C*_;L<0&&(L=0),L/=S*T+C*_,L=Math.sqrt(L)*(l===u?-1:1);var O=L*n/a*y,E=L*-a/n*p,F=g*O-h*E+(e+i)/2,z=h*O+g*E+(t+r)/2,U=(p-O)/n,q=(y-E)/a,G=(-p-O)/n,V=(-y-E)/a,ae=Jy(1,0,U,q),H=Jy(U,q,G,V);return u===0&&H>0&&(H-=jo),u===1&&H<0&&(H+=jo),[F,z,ae,H]},q2=function(e){var t=e.px,i=e.py,r=e.cx,n=e.cy,a=e.rx,l=e.ry,u=e.xAxisRotation,h=u===void 0?0:u,g=e.largeArcFlag,p=g===void 0?0:g,y=e.sweepFlag,S=y===void 0?0:y,C=[];if(a===0||l===0)return[];var _=Math.sin(h*jo/360),T=Math.cos(h*jo/360),L=T*(t-r)/2+_*(i-n)/2,O=-_*(t-r)/2+T*(i-n)/2;if(L===0&&O===0)return[];a=Math.abs(a),l=Math.abs(l);var E=Math.pow(L,2)/Math.pow(a,2)+Math.pow(O,2)/Math.pow(l,2);E>1&&(a*=Math.sqrt(E),l*=Math.sqrt(E));var F=H2(t,i,r,n,a,l,p,S,_,T,L,O),z=U2(F,4),U=z[0],q=z[1],G=z[2],V=z[3],ae=Math.abs(V)/(jo/4);Math.abs(1-ae)<1e-7&&(ae=1);var H=Math.max(Math.ceil(ae),1);V/=H;for(var se=0;se<H;se++)C.push(W2(G,V)),G+=V;return C.map(function(ce){var he=Rh(ce[0],a,l,T,_,U,q),_e=he.x,me=he.y,ye=Rh(ce[1],a,l,T,_,U,q),Re=ye.x,J=ye.y,Ae=Rh(ce[2],a,l,T,_,U,q),Oe=Ae.x,Ge=Ae.y;return{x1:_e,y1:me,x2:Re,y2:J,x:Oe,y:Ge}})},Q2=G2,Lh={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},V2=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function G2(e){var t=[];return e.replace(V2,function(i,r,n){var a=r.toLowerCase();for(n=X2(n),a=="m"&&n.length>2&&(t.push([r].concat(n.splice(0,2))),a="l",r=r=="m"?"l":"L");;){if(n.length==Lh[a])return n.unshift(r),t.push(n);if(n.length<Lh[a])throw new Error("malformed path data");t.push([r].concat(n.splice(0,Lh[a])))}}),t}var Y2=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function X2(e){var t=e.match(Y2);return t?t.map(Number):[]}var Z2=K2;function K2(e){var t=0,i=0,r=0,n=0;return e.map(function(a){a=a.slice();var l=a[0],u=l.toUpperCase();if(l!=u)switch(a[0]=u,l){case"a":a[6]+=r,a[7]+=n;break;case"v":a[1]+=n;break;case"h":a[1]+=r;break;default:for(var h=1;h<a.length;)a[h++]+=r,a[h++]+=n}switch(u){case"Z":r=t,n=i;break;case"H":r=a[1];break;case"V":n=a[1];break;case"M":r=t=a[1],n=i=a[2];break;default:r=a[a.length-2],n=a[a.length-1]}return a})}function J2(e){let t=Q2(e),i=Z2(t),r,n=0,a=0,l=0,u=0,h,g,p=0,y=0,S=[];for(let C=0;C<i.length;C++){let _=i[C],T=_[0];switch(T){case"M":n=_[1],a=_[2];break;case"H":_=["L",_[1],a];break;case"V":_=["L",n,_[1]];break;case"S":{let L=p,O=y;(r==="C"||r=="S")&&(L+=L-l,O+=O-u),_=["C",L,O,_[1],_[2],_[3],_[4]]}break;case"T":r==="Q"||r=="T"?(h=p*2-h,g=y*2-g):(h=p,g=y),_=["Q",h,g,_[1],_[2]];break;case"Q":h=_[1],g=_[2];break;case"A":{let L=q2({px:p,py:y,cx:_[6],cy:_[7],rx:_[1],ry:_[2],xAxisRotation:_[3],largeArcFlag:_[4],sweepFlag:_[5]});if(!L.length)continue;for(let[O,E]of L.entries())_=["C",E.x1,E.y1,E.x2,E.y2,E.x,E.y],O<L.length-1&&S.push(_);_=_}break;case"Z":_=["L",n,a];break}r=T,p=_[_.length-2],y=_[_.length-1],["C","Q","A"].indexOf(T)>-1?(l=_[_.length-4],u=_[_.length-3]):(l=p,u=y),S.push(_)}return S}function eI(e,t,i,r=1){return new e0(e,t,i).subdivide(r)}function tI(e,t,i,r,n=1){return new t0(new Float64Array([e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y])).subdivide(n)}function iI(e){return e.x*e.x+e.y*e.y}function Bo(e){return e/(1-.67+Math.pow(Math.pow(.67,4)+.25*e*e,.25))}function Ws(e){return e*(1-.39+Math.sqrt(.39*.39+.25*e*e))}var e0=class{constructor(e,t,i){this.start=e,this.control=t,this.end=i}eval(e){let t=1-e;return{x:this.start.x*t*t+2*this.control.x*t*e+this.end.x*e*e,y:this.start.y*t*t+2*this.control.y*t*e+this.end.y*e*e}}mapToBasic(){let{x:e,y:t}=this.start,{x:i,y:r}=this.control,{x:n,y:a}=this.end,l=2*i-e-n,u=2*r-t-a,h=(i-e)*l+(r-t)*u,g=(n-i)*l+(a-r)*u,p=(n-e)*u-(a-t)*l,y=h/p,S=g/p,C=Math.abs(p)/(Math.hypot(l,u)*Math.abs(S-y));return{x0:e,x2:n,scale:C,cross:p}}subdivide(e){let t=this.mapToBasic(),i=Bo(t.x0),r=Bo(t.x2),n=.5*Math.abs(r-i)*Math.sqrt(t.scale/e),a=Math.ceil(n),l=Ws(i),u=Ws(r),h=[0];for(let g=1;g<a;g++){let p=(Ws(i+(r-i)*g/a)-l)/(u-l);h.push(p)}return h.push(1),h.map(g=>this.eval(g))}},t0=class{constructor(e){this.c=e}weightsum(e,t,i,r){let n=e*this.c[0]+t*this.c[2]+i*this.c[4]+r*this.c[6],a=e*this.c[1]+t*this.c[3]+i*this.c[5]+r*this.c[7];return{x:n,y:a}}eval(e){let t=1-e,i=t*t*t,r=3*t*t*e,n=3*t*e*e,a=e*e*e;return this.weightsum(i,r,n,a)}deriv(e){let t=1-e,i=-3*t*t,r=3*e*e,n=-6*e*t-i,a=6*e*t-r;return this.weightsum(i,n,a,r)}midpoint_quadbez(){let e=this.weightsum(-.25,.75,.75,-.25);return new e0({x:this.c[0],y:this.c[1]},e,{x:this.c[6],y:this.c[7]})}subsegment(e,t){let i=new Float64Array(8),r=this.eval(e),n=this.eval(t);i[0]=r.x,i[1]=r.y;let a=(t-e)/3,l=this.deriv(e);i[2]=r.x+a*l.x,i[3]=r.y+a*l.y;let u=this.deriv(t);return i[4]=n.x-a*u.x,i[5]=n.y-a*u.y,i[6]=n.x,i[7]=n.y,new t0(i)}subdivide(e){let t=.1*e,i=e-t,r=Math.sqrt(i),n=iI(this.weightsum(1,-3,3,-1)),a=Math.ceil(Math.pow(n/(432*t*t),1/6)),l=[],u=0;for(let C=0;C<a;C++){let _=C/a,T=(C+1)/a,L=this.subsegment(_,T).midpoint_quadbez(),O=L.mapToBasic(),E=Bo(O.x0),F=Bo(O.x2),z=Math.sqrt(O.scale),U=Math.abs(F-E)*z;if(Math.sign(O.x0)!=Math.sign(O.x2)){let q=r/z,G=r*Math.abs(F-E)/Bo(q);U=Math.max(U,G)}l.push({quad:L,a0:E,a2:F,val:U}),u+=U}let h=.5*u/r,g=Math.ceil(h),p=[{x:this.c[0],y:this.c[1]}],y=0,S=0;for(let C=1;C<g;C++){let _=u*C/g;for(;y+l[S].val<_;)y+=l[S].val,S++;let T=l[S].a0,L=l[S].a2,O=Ws(T),E=Ws(L),F=T+(L-T)*(_-y)/l[S].val,z=(Ws(F)-O)/(E-O);p.push(l[S].quad.eval(z))}return p.push({x:this.c[6],y:this.c[7]}),p}},rI=/&?(xywh=)?(pixel:|percent:|pct:)?([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?)/,nI=/&?(t=)(npt:)?([0-9]+(.[0-9]+)?)?(,([0-9]+(.[0-9]+)?))?/,i0=/^rgba\((\d+),(\d+),(\d+),([0-9.]+)\)$/;function Oh(e,{domParser:t,svgPreprocessor:i}={}){var r,n;if(Array.isArray(e))return e.reduce((a,l)=>{let{selector:u,selectors:h}=Oh(l);return u&&(a.selector||(a.selector=u),a.selectors.push(...h)),a},{selector:null,selectors:[]});if(!e)return{selector:null,selectors:[]};if(typeof e=="string"){let[a,l]=e.split("#");return l?Oh({type:"FragmentSelector",value:l}):{selector:null,selectors:[]}}if(e.type==="PointSelector"&&(e.t||e.t===0)){let a={type:"TemporalSelector",temporal:{startTime:e.t}};return{selector:a,selectors:[a]}}if(e.type==="FragmentSelector"){let a=rI.exec(e.value);if(a){let u={type:"BoxSelector",spatial:{unit:a[2]==="percent:"||a[2]==="pct:"?"percent":"pixel",x:parseFloat(a[3]),y:parseFloat(a[4]),width:parseFloat(a[5]),height:parseFloat(a[6])}};return{selector:u,selectors:[u]}}let l=e.value.match(nI);if(l){let u={type:"TemporalSelector",temporal:{startTime:l[4]?parseFloat(l[4]):0,endTime:l[7]?parseFloat(l[7]):void 0}};return{selector:u,selectors:[u]}}return{selector:null,selectors:[]}}if(e.type==="SvgSelector"&&"value"in e){t||(typeof window<"u"?t=new window.DOMParser:console.warn("No DOMParser available, cannot parse SVG selector, `points`, `spatial` and `style` will be unavailable and the SVG will not be normalized."));let a=[],l,u,h=(r=i==null?void 0:i(e.value))!=null?r:e.value,g;if(t){let y=t.parseFromString(e.value,"image/svg+xml").querySelector("svg");if(!y)return console.warn(`Illegal SVG selector: ${e.value}`),{selector:null,selectors:[]};let S=r0(y);S&&(a=S.points,g=S.shapeType,l=[Math.min(...a.map(C=>C[0])),Math.min(...a.map(C=>C[1])),Math.max(...a.map(C=>C[0])),Math.max(...a.map(C=>C[1]))],{style:u,svg:h}=(n=aI(S.element))!=null?n:{svg:h})}let p={type:"SvgSelector",svg:h,svgShape:g,style:u,points:a.length?a:void 0,spatial:l?{unit:"pixel",x:l[0],y:l[1],width:l[2]-l[0],height:l[3]-l[1]}:void 0};return{selector:p,selectors:[p]}}return{selector:null,selectors:[]}}function sI(e){let t=e.map(r=>r[0]).reduce((r,n)=>(r[n]+=1,r),{C:0,Q:0,L:0,M:0}),i=new Set(e.map(r=>r[0]));if(t.C>0||t.Q>0)return"path";if(t.L>0&&(i.size===1||i.size===2&&i.has("M"))){if(t.L===4)return"rect";let r=e.slice(-1)[0];return e[0][0]==="M"&&r[0]==="L"&&r[1]==e[0][1]&&r[2]===e[0][2]||r[1]===0&&r[2]===0?"polygon":"polyline"}return"path"}function r0(e){var t,i,r,n,a,l,u,h,g,p,y,S,C,_,T,L,O;for(let E of Array.from(e.children))switch(E==null?void 0:E.tagName.toLowerCase()){case"g":{let F=r0(E);if(F)return F}continue;case"path":{let F=E.getAttribute("d");if(!F)continue;let z=J2(F);return{element:E,points:oI(z),shapeType:sI(z)}}case"circle":{let F=parseFloat((t=E.getAttribute("cx"))!=null?t:"0"),z=parseFloat((i=E.getAttribute("cy"))!=null?i:"0"),U=parseFloat((r=E.getAttribute("r"))!=null?r:"0");if(!U)continue;let q=[];for(let G=0;G<=360;G+=12){let V=G*Math.PI/180;q.push([F+U*Math.cos(V),z+U*Math.sin(V)])}return{element:E,points:q,shapeType:"circle"}}case"ellipse":{let F=parseFloat((n=E.getAttribute("cx"))!=null?n:"0"),z=parseFloat((a=E.getAttribute("cy"))!=null?a:"0"),U=parseFloat((l=E.getAttribute("rx"))!=null?l:"0"),q=parseFloat((u=E.getAttribute("ry"))!=null?u:"0");if(!U&&!q)continue;let G=[];for(let V=0;V<=360;V+=12){let ae=Math.tan(V/360*Math.PI),H=U*(1-ae**2)/(1+ae**2),se=q*2*ae/(1+ae**2);G.push([F+H,z+se])}return{element:E,points:G,shapeType:"ellipse"}}case"line":{let F=parseFloat((h=E.getAttribute("x0"))!=null?h:"0"),z=parseFloat((g=E.getAttribute("y0"))!=null?g:"0"),U=parseFloat((p=E.getAttribute("x1"))!=null?p:"0"),q=parseFloat((y=E.getAttribute("y1"))!=null?y:"0");if(F===U&&z===q)continue;return{element:E,points:[[F,z],[U,q]],shapeType:"polyline"}}case"polygon":case"polyline":{let F=(C=(S=E.getAttribute("points"))==null?void 0:S.split(" ").map(U=>U.split(",").map(parseFloat)))!=null?C:[];if(!F.length)continue;let z="polyline";return E.tagName.toLowerCase()==="polygon"&&(F.push(F[0]),z="polygon"),{element:E,points:F,shapeType:z}}case"rect":{let F=parseFloat((_=E.getAttribute("x"))!=null?_:"0"),z=parseFloat((T=E.getAttribute("y"))!=null?T:"0"),U=parseFloat((L=E.getAttribute("width"))!=null?L:"0"),q=parseFloat((O=E.getAttribute("height"))!=null?O:"0");if(!U||!q)continue;return{element:E,points:[[F,z],[F+U,z],[F+U,z+q],[F,z+q],[F,z]],shapeType:"rect"}}default:continue}return null}function oI(e){var t;let i=[];for(let r=0;r<e.length;r++){let n=(t=i[i.length-1])!=null?t:[0,0],a=e[r];switch(a[0]){case"M":case"L":i.push([a[1],a[2]]);continue;case"C":i.push(...tI({x:n[0],y:n[1]},{x:a[1],y:a[2]},{x:a[3],y:a[4]},{x:a[5],y:a[6]}).map(l=>[l.x,l.y]).slice(1));continue;case"Q":i.push(...eI({x:n[0],y:n[1]},{x:a[1],y:a[2]},{x:a[3],y:a[4]}).map(l=>[l.x,l.y]).slice(1));continue}}return i}function aI(e){let t={};if(e.hasAttribute("fill")?(t.fill=e.getAttribute("fill"),e.removeAttribute("fill")):e.style.fill&&(t.fill=e.style.fill),t.fill){let r=i0.exec(t.fill);r&&(t.fillOpacity=parseFloat(r[4]),t.fill=`rgb(${r[1]}, ${r[2]}, ${r[3]})`)}if(e.hasAttribute("fill-opacity")?(t.fillOpacity=parseFloat(e.getAttribute("fill-opacity")),e.removeAttribute("fill-opacity")):e.style.fillOpacity&&(t.fillOpacity=parseFloat(e.style.fillOpacity)),e.hasAttribute("stroke")?(t.stroke=e.getAttribute("stroke"),e.removeAttribute("stroke")):e.style.stroke&&(t.stroke=e.style.stroke),t.stroke){let r=i0.exec(t.stroke);r&&(t.strokeOpacity=parseFloat(r[4]),t.stroke=`rgb(${r[1]}, ${r[2]}, ${r[3]})`)}e.hasAttribute("stroke-opacity")?(t.strokeOpacity=parseFloat(e.getAttribute("stroke-opacity")),e.removeAttribute("stroke-opacity")):e.style.strokeOpacity&&(t.strokeOpacity=parseFloat(e.style.strokeOpacity)),e.hasAttribute("stroke-width")?(t.strokeWidth=e.getAttribute("stroke-width"),e.removeAttribute("stroke-width")):e.style.strokeWidth&&(t.strokeWidth=e.style.strokeWidth),e.hasAttribute("stroke-dasharray")?(t.strokeDasharray=e.getAttribute("stroke-dasharray"),e.removeAttribute("stroke-dasharray")):e.style.strokeDasharray&&(t.strokeDasharray=e.style.strokeDasharray);let i=e;for(;i.tagName.toLowerCase()!=="svg";)if(i=i.parentElement,i===null)throw new Error("Could not find root SVG element");return{svg:i.outerHTML,style:Object.keys(t).length>0?t:void 0}}function lI(e){return e.type==="SpecificResource"?[e.source,{selector:e.selector}]:[e,{selector:null}]}function uI(e){function t(n){let a=n?typeof n=="string"?e.get(n):n:null;if(!a)return[];let l=e.get(a.items),u=[];for(let h of l)u.push(...e.get(h.items));return u}function i(n,a=[]){let l=Array.isArray(n)?n:t(n),u=[],h=null,g=[];for(let p of l){if(p.type!=="Annotation")throw new Error("getPaintables() accept either a canvas or list of annotations");let y=e.get(p.body);for(let S of y){let[C,{selector:_}]=lI(S),T=(C.type||"unknown").toLowerCase();if(T==="choice"){let L=e.get(C.items),O=a.length?a.map(E=>L.find(F=>F.id===E)).filter(Boolean):[L[0]];O.length===0&&O.push(L[0]),h={type:"single-choice",items:L.map(E=>({id:E.id,label:E.label,selected:O.indexOf(E)!==-1})),label:S.label},y.push(...O);continue}u.indexOf(T)===-1&&u.push(T),g.push({type:T,resource:C,target:p.target,selector:_})}}return{types:u,items:g,choice:h}}function r(n){let{choice:a}=i(n);return a}return{getAllPaintingAnnotations:t,getPaintables:i,extractChoices:r}}function n0(e,t){for(let i of t.items){if(i.type==="Canvas")return i;if(i.type==="Range"){let r=n0(e,e.get(i));if(r)return r}}return null}function cI(e,t,i){for(let r of t.structures){let n=s0(e,e.get(r),i);if(n)return n}return null}function s0(e,t,i){var r;for(let n of t.items){let a=(r=n.id)==null?void 0:r.split("#")[0];if(n.type==="SpecificResource"&&n.source===i||n.type==="Canvas"&&i===a)return t;if(n.type==="Range"){let l=s0(e,e.get(n),i);if(l)return l}}return null}var hI=class{constructor(e){this.__vault=null,this.__eventsHelper=null,this.__stylesHelper=null,this.__e={},this.htmlProps={},this.handlers=[],this.__annotation=typeof e=="string"?{id:e,type:"Annotation"}:{id:e.id,type:"Annotation"},this.classList=new UT(t=>{this.__stylesHelper&&this.__stylesHelper.applyStyles(this.__annotation,"html",B(A({},this.htmlProps),{className:t}))}),this.source=e}get className(){return this.classList.getClassName()}set className(e){this.classList.className=e}set href(e){this.__stylesHelper&&this.__stylesHelper.applyStyles(this.__annotation,"html",{href:e}),this.htmlProps.href=e}set title(e){this.__stylesHelper&&this.__stylesHelper.applyStyles(this.__annotation,"html",{title:e}),this.htmlProps.title=e}set target(e){this.__stylesHelper&&this.__stylesHelper.applyStyles(this.__annotation,"html",{target:e}),this.htmlProps.target=e}applyStyle(e){this.style=dm(this.style,e),this.__stylesHelper&&this.__stylesHelper.applyStyles(this.__annotation,"atlas",this.style)}addEventListener(e,t){this.__eventsHelper&&this.__eventsHelper.addEventListener(this.__annotation,e,t),this.handlers.push([e,t])}removeEventListener(e,t){this.__eventsHelper&&this.__eventsHelper.removeEventListener(this.__annotation,e,t),this.handlers=this.handlers.filter(i=>i[0]===e&&i[1]===t)}bindToVault(e){this.__vault=e,this.__eventsHelper=kh(e),this.__stylesHelper=Ah(e);for(let[t,i]of this.handlers)this.__eventsHelper.addEventListener(this.__annotation,t,i);this.__stylesHelper.applyStyles(this.__annotation,"atlas",this.style),this.__stylesHelper.applyStyles(this.__annotation,"html",B(A({},this.htmlProps),{className:this.classList.getClassName()}))}getSource(){return this.source}getAnnotation(){return this.__annotation}beforeRemove(){if(this.onBeforeRemove&&this.onBeforeRemove(),this.__vault){if(this.__eventsHelper)for(let[e,t]of this.handlers)this.__eventsHelper.removeEventListener(this.__annotation,e,t);this.__vault=null}}};Qe();var vi=Be(pc(),1),o0="@iiif/IMPORT_ENTITIES",a0="@iiif/MODIFY_ENTITY_FIELD",l0="@iiif/REORDER_ENTITY_FIELD",u0="@iiif/ADD_REFERENCE",c0="@iiif/REMOVE_REFERENCE",h0=(0,vi.createAction)(o0)(),dI=(0,vi.createAction)(a0)(),pI=(0,vi.createAction)(l0)(),fI=(0,vi.createAction)(u0)(),gI=(0,vi.createAction)(c0)(),mI={importEntities:h0,modifyEntityField:dI,reorderEntityField:pI,addReference:fI,removeReference:gI},d0="@iiif/ADD_MAPPING",p0="@iiif/ADD_MAPPINGS",vI=(0,vi.createAction)(d0)(),yI=(0,vi.createAction)(p0)(),f0="@iiif/SET_META_VALUE",g0="@iiif/SET_META_VALUE_DYNAMIC",m0="@iiif/UNSET_META_VALUE",bI=(0,vi.createAction)(f0)(),wI=(0,vi.createAction)(g0)(),xI=(0,vi.createAction)(m0)(),v0={setMetaValue:bI,setMetaValueDynamic:wI,unsetMetaValue:xI},$h="RESOURCE_ERROR",y0="RESOURCE_LOADING",Fh="RESOURCE_READY",b0="@iiif/REQUEST_RESOURCE",w0="@iiif/REQUEST_ERROR",x0="@iiif/REQUEST_MISMATCH",_0="@iiif/REQUEST_COMPLETE",S0="@iiif/REQUEST_OFFLINE_RESOURCE",_I=(0,vi.createAction)(b0)(),E0=(0,vi.createAction)(w0)(),SI=(0,vi.createAction)(x0)(),EI=(0,vi.createAction)(_0)();(0,vi.createAction)(S0)();var Mh="@iiif/BATCH",C0="@iiif/BATCH_IMPORT",zh=(0,vi.createAction)(Mh)();(0,vi.createAction)(C0)();var CI=(e,t)=>{let{entities:i,resource:r,mapping:n}=Dm(t);if(r.id===void 0)return[E0({id:e,message:"ID is not defined in resource."})];let a=[h0({entities:i}),yI({mapping:n})];return r.id!==e&&(a.push(vI({id:e,type:r.type})),a.push(SI({requestId:e,actualId:r.id}))),a.push(EI({id:e})),a},k0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function kI(e,t){return!!(e===t||k0(e)&&k0(t))}function A0(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!kI(e[i],t[i]))return!1;return!0}function Nh(e,t){let i=e.iiif.requests[t],r=e.iiif.mapping[t];if(!(!r||!e.iiif.entities[r][i.resourceUri]))return e.iiif.entities[r][i.resourceUri]}function P0(e,t,{waitTimeout:i=30}={}){return async(r,n)=>{let a=e.getState(),l=a.iiif.requests[r];if(l)switch(l.loadingState){case $h:break;case y0:{let u,h=!1;try{let g=await Promise.race([new Promise((p,y)=>{h||(u=e.subscribe(()=>{let S=e.getState();if(S.iiif.requests[r].loadingState===$h){y();return}if(S.iiif.requests[r].loadingState===Fh){let C=Nh(S,r);C?p(C):y()}}))}),new Promise((p,y)=>setTimeout(()=>{h=!0,y()},i*60))]);if(u&&u(),g)return g}catch{u&&u();break}break}case Fh:{let u=Nh(a,r);if(u)return u;break}}e.dispatch(_I({id:r}));try{let u=await t(r,n);!u.id&&!u["@id"]&&(u["@type"]&&(u["@id"]=r),u.id=r);let h=CI(r,u);return e.dispatch(zh({actions:h})),Nh(e.getState(),r)}catch(u){throw e.dispatch(E0({id:r,message:u.toString()})),u}}}function AI(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}var PI=(e={},t)=>{switch(t.type){case d0:return B(A({},e),{[t.payload.id]:t.payload.type});case p0:return A(A({},e),t.payload.mapping);default:return e}};function jh(e,t,i,r){return!(!e[i]||!e[i][t]||!e[i][t][r]||!Array.isArray(e[i][t][r]))}function TI(e,t){let i={},r=[];for(let[n,a]of Object.entries(e||{})){r.push(n);let l=(t||{})[n];if(!l||l.length===0){i[n]=a;continue}i[n]=l}for(let[n,a]of Object.entries(t||{}))r.indexOf(n)===-1&&(i[n]=a);return i}var II=(e=AI(),t)=>{var i;switch(t.type){case a0:{if(!e[t.payload.type]||!e[t.payload.type][t.payload.id])return e;let r=e[t.payload.type][t.payload.id];return typeof r=="string"?e:B(A({},e),{[t.payload.type]:B(A({},e[t.payload.type]),{[t.payload.id]:B(A({},r),{[t.payload.key]:t.payload.value})})})}case l0:{if(!jh(e,t.payload.id,t.payload.type,t.payload.key))return e;let r=e[t.payload.type][t.payload.id];if(typeof r=="string")return e;let n=Array.from(r[t.payload.key]),[a]=n.splice(t.payload.startIndex,1);return n.splice(t.payload.endIndex,0,a),B(A({},e),{[t.payload.type]:B(A({},e[t.payload.type]),{[t.payload.id]:B(A({},r),{[t.payload.key]:n})})})}case o0:{let r=Object.keys(t.payload.entities),n=A({},e);for(let a of r){let l=t.payload.entities[a],u=A({},e[a]||{}),h=!1,g=Object.keys(l||{})||[];if(l&&g){for(let p of g)h=!0,u[p]=e[a][p]?TI(e[a][p],l[p]):l[p];h&&(n[a]=u)}}return n}case u0:{if(!jh(e,t.payload.id,t.payload.type,t.payload.key))return e;let r=e[t.payload.type][t.payload.id],n=Array.from(r[t.payload.key]);return n.splice(t.payload.index||n.length+1,0,t.payload.reference),B(A({},e),{[t.payload.type]:B(A({},e[t.payload.type]),{[t.payload.id]:B(A({},r),{[t.payload.key]:n})})})}case c0:{if(!jh(e,t.payload.id,t.payload.type,t.payload.key))return e;let r=e[t.payload.type][t.payload.id],n=Array.from(r[t.payload.key]),a=t.payload.index||n.findIndex(l=>l&&l.id===t.payload.reference.id);return a===-1||((i=n[a])==null?void 0:i.id)!==t.payload.reference.id?e:(n.splice(a,1),B(A({},e),{[t.payload.type]:B(A({},e[t.payload.type]),{[t.payload.id]:B(A({},r),{[t.payload.key]:n})})}))}default:return e}},RI=(e={},t)=>{switch(t.type){case b0:case S0:return B(A({},e),{[t.payload.id]:{requestUri:t.payload.id,loadingState:y0,uriMismatch:!1,resourceUri:t.payload.id}});case x0:return B(A({},e),{[t.payload.requestId]:B(A({},e[t.payload.requestId]||{}),{uriMismatch:!0,resourceUri:t.payload.actualId}),[t.payload.actualId]:{requestUri:t.payload.requestId,loadingState:e[t.payload.requestId].loadingState,uriMismatch:!0,resourceUri:t.payload.actualId}});case w0:return B(A({},e),{[t.payload.id]:B(A({},e[t.payload.id]||{}),{loadingState:$h,error:t.payload.message})});case _0:return B(A({},e),{[t.payload.id]:B(A({},e[t.payload.id]||{}),{loadingState:Fh,error:void 0})})}return e},LI=(e={},t)=>{let{id:i,updateValue:r,value:n,meta:a,key:l}=t&&t.payload||{};switch(t.type){case f0:return B(A({},e),{[i]:B(A({},e[i]||{}),{[a]:B(A({},e[i]?e[i][a]||{}:{}),{[l]:n})})});case g0:return B(A({},e),{[i]:B(A({},e[i]||{}),{[a]:B(A({},e[i]?e[i][a]||{}:{}),{[l]:e[i]&&e[i][a]?r(e[i][a][l]):r(void 0)})})});case m0:return e[i]&&e[i][a]&&e[i][a][l]?B(A({},e),{[i]:B(A({},e[i]||{}),{[a]:B(A({},e[i]?e[i][a]||{}:{}),{[l]:void 0})})}):e;default:return e}};function OI(e){return(t,i)=>i&&i.type===Mh?i.payload.actions.reduce(e,t):i&&i.type===C0?i.payload.state:e(t,i)}var $I=bl({mapping:PI,entities:II,requests:RI,meta:LI}),FI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Hn;function MI(e={}){let{enableDevtools:t=!0,iiifStoreName:i="iiif",defaultState:r={},extraMiddleware:n=[],customReducers:a={}}=e,l=bl(A({[i]:$I},a));return ih(OI(l),r,t?FI(wl(...n)):Hn(wl(...n)))}function zI(e){return{all:e=e||new Map,on:function(t,i){var r=e.get(t);r?r.push(i):e.set(t,[i])},off:function(t,i){var r=e.get(t);r&&(i?r.splice(r.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var r=e.get(t);r&&r.slice().map(function(n){n(i)}),(r=e.get("*"))&&r.slice().map(function(n){n(t,i)})}}}var NI=class{constructor(e,t){Ve(this,"options"),Ve(this,"store"),Ve(this,"emitter"),Ve(this,"isBatching",!1),Ve(this,"batchQueue",[]),Ve(this,"remoteFetcher"),Ve(this,"staticFetcher"),Ve(this,"defaultFetcher",i=>fetch(i).then(r=>r.json())),Ve(this,"middleware",i=>r=>n=>{if(n.type===Mh){for(let u of n.payload.actions)this.emitter.emit(u.type,{realAction:u,state:i.getState()});let l=r(n);for(let u of n.payload.actions)this.emitter.emit(`after:${n.type}`,{action:n,state:l});return l}this.emitter.emit(n.type,{action:n,state:i.getState()});let a=r(n);return this.emitter.emit(`after:${n.type}`,{action:n,state:a}),a}),this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},e||{}),this.store=t||MI({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter=zI(),this.remoteFetcher=P0(this.store,this.options.customFetcher),this.staticFetcher=P0(this.store,(i,r)=>r)}batch(e){this.isBatching=!0;try{e(this),this.store.dispatch(zh({actions:this.batchQueue}))}catch(t){throw this.batchQueue=[],this.isBatching=!1,t}this.batchQueue=[],this.isBatching=!1}async asyncBatch(e){this.isBatching=!0;try{await e(this),this.store.dispatch(zh({actions:this.batchQueue}))}catch(t){throw this.batchQueue=[],this.isBatching=!1,t}this.batchQueue=[],this.isBatching=!1}modifyEntityField(e,t,i){this.dispatch(mI.modifyEntityField({id:e.id,type:e.type,key:t,value:i}))}dispatch(e){this.isBatching?this.batchQueue.push(e):this.store.dispatch(e)}serialize(e,t){return Wm(this.getState().iiif,e,t)}toPresentation2(e){return this.serialize(e,qm)}toPresentation3(e){return this.serialize(e,Gm)}hydrate(e,t){return this.get(e,t,{skipSelfReturn:!1})}get(e,t,i={}){typeof t!="string"&&(i=t||{},t=void 0);let{skipSelfReturn:r=!0}=i||{};if(Array.isArray(e))return e.map(h=>this.get(h,i));let n=this.getState();if(typeof e=="string"){let h=t||n.iiif.mapping[e];if(!h)return r?null:{id:e,type:"unknown"};e={id:e,type:h}}let a=t||e.type,l=e.id,u=n.iiif.entities[a];if(!u){let h=n.iiif.requests[l];return h&&h.resourceUri!==l?this.get(h.resourceUri,i):r?null:e}return u[e.id]||(r?null:e)}select(e){return e(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(e,t){let i=typeof e=="string"?e:e.id;return this.load(i,t)}loadCollection(e,t){let i=typeof e=="string"?e:e.id;return this.load(i,t)}load(e,t){let i=typeof e=="string"?e:e.id;return t?this.staticFetcher(i,t):this.remoteFetcher(i)}areInputsEqual(e,t){return A0(e,t)}subscribe(e,t,i){typeof i>"u"&&(typeof t>"u"||t===!1||t===!0)&&(i=t,t=e,e=n=>n);let r=i?null:e(this.store.getState());return i||t(r,this),this.store.subscribe(()=>{let n=this.store.getState(),a=e(n);r!==a&&!A0(r,a)&&t(a,this),r=a})}async ensureLoaded(e){let t=typeof e=="string"?e:e.id;this.requestStatus(t)||await this.load(t)}requestStatus(e){return this.select(t=>t.iiif.requests[e])}getResourceMeta(e,t){let i=this.getState().iiif.meta[e];if(i)return t?i[t]:i}setMetaValue([e,t,i],r){this.dispatch(typeof r=="function"?v0.setMetaValueDynamic({id:e,meta:t,key:i,updateValue:r}):v0.setMetaValue({id:e,meta:t,key:i,value:r}))}};function jI(){return typeof self<"u"?self:typeof window<"u"?window:typeof Lu<"u"?Lu:{}}function Bh(e){let t=jI();try{let r=t.IIIF_VAULT;if(r)return r}catch{}let i=new NI(e);try{t.IIIF_VAULT=i}catch{}return i}var Jn=I0(),T0=I0();function I0(e){let t={},i=(n,a)=>{var l;return t[n]===void 0&&(t[n]=[]),(l=t[n])==null||l.push(a),()=>{r(n,a)}},r=(n,a)=>{var l,u,h;let g=(u=(l=t[n])==null?void 0:l.indexOf(a))!=null?u:-1;(h=t[n])==null||h.splice(g>>>0,1)};return{on:i,off:r,once:(n,a)=>{let l=u=>{a(u),r(n,l)};i(n,l)},emit:(n,a)=>{var l;(l=t[n])==null||l.forEach(u=>{try{u(a)}catch(h){e==null||e.onError(h)}})}}}function Ol(e){let t=Se(),i=.75,r=1/.75,n=Pl(),a=e.vault||n||Bh(),l=Eh(),u=Se({}),{isReady:h,isConfigBlocking:g,setIsReady:p,internalConfig:y}=$T(e.preset,(ve,ze)=>{t.current?t.current.dispatchEvent(new CustomEvent("media",{detail:{query:ve,config:ze}})):u.current[ve]=ze}),S=Ee(()=>kh(a),[a]),C=Ee(()=>Ah(a),[a]),_=Ee(()=>j2(a,{imageServiceLoader:l}),[a,l]),[T]=je(e.nested||y.nested,{parse:dt,defaultValue:!1}),[L]=je(e.x||y.x,{parse:kr,defaultValue:0}),[O]=je(e.y||y.y,{parse:kr,defaultValue:0}),E=Se(),[F]=je(e.render||y.render,{defaultValue:"canvas"}),[z]=je(e.class),[U]=je(e.virtualSizes||y.virtualSizes,{parse:BT}),[q]=je(e.height||y.height,{parse:kr}),[G]=je(e.width||y.width,{parse:kr}),[V]=je(e.a11yRole||void 0),[ae]=je(e.a11yTitle||void 0),[H]=je(e.interactive||y.interactive,{parse:dt,defaultValue:!0}),[se]=je(e.background),[ce]=je(e.viewport||y.viewport,{parse:dt,defaultValue:!0}),[he]=je(e.responsive||y.responsive,{parse:dt,defaultValue:!0}),[_e]=je(e.moveEvents||y.moveEvents,{parse:dt,defaultValue:!1}),[me]=je(e.granularMoveEvents||y.granularMoveEvents,{parse:dt,defaultValue:!1}),[ye]=je(e.clickToEnableZoom||e.clickToEnableZoom,{parse:dt,defaultValue:!0}),[Re]=je(e.disableKeyboardNavigation||y.disableKeyboardNavigation,{parse:dt,defaultValue:!1}),[J]=je(e.debug||y.debug,{parse:dt}),[Ae]=je(e.enablePanOnWait||y.enablePanOnWait,{parse:dt,defaultValue:void 0}),[Oe]=je(e.ignoreSingleFingerTouch||y.ignoreSingleFingerTouch,{parse:dt,defaultValue:void 0}),[Ge]=je(e.requireMetaKeyForWheelZoom||y.requireMetaKeyForWheelZoom,{parse:dt,defaultValue:!1}),[it]=je(e.panOnWaitDelay||y.panOnWaitDelay,{parse:kr,defaultValue:40}),[ie]=je(e.enableNavigator||y.enableNavigator,{parse:dt}),[Le,$t,Qt,Wt]=je(e.target||e.region||y.target||y.region,{parse:Ch}),[yt,Et,,ai]=je(e.rotation,{parse:kr}),[ei,Ft,,Xt]=je(e.highlight||y.highlight,{parse:Ch}),[mt]=je(e.styleId||y.styleId),[Fe]=je(e.highlightCssClass||y.highlightCssClass,{defaultValue:"canvas-panel-highlight"}),[We,,,rt]=je(e.preferredFormats||y.preferredFormats,{parse:_y}),[Ue]=je(e.homeCover,{parse:ve=>ve==="false"?!1:ve==="true"?!0:ve==="start"?"start":ve==="end"?"end":!1}),[Ze,at]=je(e.atlasMode||y.atlasMode),[tt,Mi]=Me(""),[es,ts]=Me(""),[is]=je(e.stylesheet||y.stylesheet),Di=Se({}),[Nl,Vh]=Me("");function Gh(ve,ze={}){return je(e[ve]||y[ve],ze)}function Ho(){if(t.current&&E.current){let ve=t.current.getBoundingClientRect(),ze=E.current.world.height||1,bt=E.current.world.width||1;return bt/ze<1?ve.height/ze:ve.width/bt}return-1}let Qs=Se({});de(()=>{let ve=Jn.on("onResetSeen",()=>{Qs.current={}}),ze=te=>{let ke=te.choice;if(t!=null&&t.current&&ke&&ke.items){let nt=ke.items;nt.sort((Pr,Qo)=>Pr.id<Qo.id?-1:Pr.id>Qo.id?1:0);let Ct=nt.map(Pr=>Pr.id).join(""),pt=nt.map(Pr=>Pr.selected).join("");if(Qs.current[Ct]&&Qs.current[Ct]==pt)return;Qs.current[Ct]=pt,ke.partOf=te.partOf,t.current.dispatchEvent(new CustomEvent("choice",{detail:{choice:ke}}))}},bt=te=>{t!=null&&t.current&&t.current.dispatchEvent(new ErrorEvent("cp-load-error",{message:te.message,error:te.error}))},Ht=T0.on("onErrorEvent",bt),Vt=Jn.on("onChoiceChange",ze);return()=>{Ht(),ve(),Vt()}},[]),de(()=>{if(E.current&&t.current){let ve=A({},qo(E.current));tt=="queued"&&ve&&(ve==null?void 0:ve.scaleFactor)<1&&ve.scaleFactor>0&&t.current!=null&&(Mi("fired"),setTimeout(()=>{var ze;(ze=t.current)==null||ze.dispatchEvent(new CustomEvent("world-ready",{detail:ve}))},100))}},[h,t.current,Nl,tt]),de(()=>{var ve;let ze=E.current,bt=(ve=E.current)==null?void 0:ve.transitionManager;if(ze&&bt&&h){let Ht=!1,Vt=0;return ze.world.addLayoutSubscriber(async(te,ke)=>{if(te!=="repaint"&&t.current){if(["recalculate-world-size","zoom-to","go-home","goto-region"].includes(te)){if(te=="recalculate-world-size"&&Mi("queued"),bt.hasPending()){if(Ht)return;Ht=!0,await new Promise(Pr=>setTimeout(Pr,bt.pendingTransition.total_time-bt.pendingTransition.elapsed_time)),Ht=!1}let nt=Ho(),Ct=Math.abs(nt-ze._lastGoodScale)<2e-4;Ct?Vt++:Vt=0;let pt={detail:A(B(A({source:te,minZoomCount:Vt},qo(ze)),{isMin:Ct,isMax:Math.abs(ze.maxScaleFactor-ze._lastGoodScale)<2e-4}),ke||{})};t.current.dispatchEvent(new CustomEvent("zoom",pt));return}t.current.dispatchEvent(new CustomEvent(te,{detail:ke}))}})}return()=>{}},[h,Nl]);function qo(ve){let ze=ve._lastGoodScale,bt=Ho(),Ht=ve.getZoomedPosition(r,{}),Vt=ve.getZoomedPosition(i,{}),te={width:Math.round(Vt[3]),height:Math.round(Vt[4])},ke={width:Math.round(Ht[3]),height:Math.round(Ht[4])},nt={width:Math.round(ve.target[3]),height:Math.round(ve.target[4])},Ct=2,pt=nt.height+Ct<ke.height&&nt.width+Ct<ke.width;return{canZoomIn:nt.height>te.height&&nt.width>te.width,canZoomOut:pt,scaleFactor:ve.getScaleFactor(),current:ze,max:ve.maxScaleFactor,min:bt,worldHeight:ve.world.height,worldWidth:ve.world.width}}de(()=>{var ve;let ze=E.current,bt=(ve=E.current)==null?void 0:ve.transitionManager;if(h&&ze&&_e){let Ht=-1,Vt=-1,te=!1;return ze.registerHook("useAfterFrame",async()=>{if(t.current&&(ze.target[1]!==Ht||ze.target[2]!==Vt)){if(!me&&bt){if(te)return;bt.hasPending()&&(te=!0,await new Promise(ke=>setTimeout(ke,bt.pendingTransition.total_time-bt.pendingTransition.elapsed_time)),te=!1)}t.current.dispatchEvent(new CustomEvent("move",{detail:{x:ze.x,y:ze.y,width:ze.width,height:ze.height,points:ze.target,lastX:Ht,lastY:Vt}})),Ht=ze.x,Vt=ze.y}})}return()=>{}},[h,_e]);function jl(ve){Rt(()=>{e.__registerPublicApi&&e.__registerPublicApi(ve)},[])}return jl(ve=>{t.current=ve;let ze,bt,Ht=!1;if(ye){ze=ke=>{ke.stopPropagation()};let te=()=>{ze&&!Ht&&(Ht=!0,ve.addEventListener("wheel",ze,{capture:!0}),ve.addEventListener("touchstart",ze,{capture:!0}))};bt=()=>{ze&&Ht&&(Ht=!1,ve.removeEventListener("wheel",ze,{capture:!0}),ve.removeEventListener("touchstart",ze,{capture:!0}))},te(),document.addEventListener("click",ke=>{document.activeElement!==ve&&te()})}ve.addEventListener("click",te=>{bt&&bt();let ke=te.composedPath()[0];ke&&ve!==document.activeElement&&ke.focus()});let Vt=Object.keys(u.current);if(Vt.length){for(let te of Vt)ve.dispatchEvent(new CustomEvent("media",{detail:{query:te,config:u.current[te]}}));u.current={}}return{vault:a,events:S,styles:C,thumbnailHelper:_,imageServiceLoader:l,getRotation:()=>ai.current,setRotation:te=>{ve.setAttribute("rotation",te.toString())},getHighlight:()=>Xt.current,setHighlight:te=>{typeof te=="string"?ve.setAttribute("highlight",te):Ft(te)},getTarget:()=>Wt.current,setTarget:te=>{typeof te=="string"?ve.setAttribute("target",te):$t(te)},setDefaultChoiceIds:te=>{ve.setAttribute("choice-id",te.join(","))},getPosition(){var te,ke,nt,Ct;return{x:(te=E.current)==null?void 0:te.x,y:(ke=E.current)==null?void 0:ke.y,width:(nt=E.current)==null?void 0:nt.width,height:(Ct=E.current)==null?void 0:Ct.height}},getMaxZoom(){var te;return((te=E.current)==null?void 0:te.maxScaleFactor)||1},getMinZoom(){return Ho()||0},makeChoice(te,ke){Jn.emit("onMakeChoice",{id:te,options:ke})},zoomIn(te){E.current&&E.current.world.trigger("zoom-to",{point:te,factor:i})},zoomOut(te){E.current&&E.current.world.trigger("zoom-to",{point:te,factor:r})},zoomBy(te,ke){E.current&&E.current.world.trigger("zoom-to",{point:ke,factor:te})},zoomTo(te,ke,nt){E.current&&E.current.world.zoomTo(te,ke,nt)},withAtlas(te){E.current?te(E.current):Di.current=B(A({},Di.current),{[new Date().getTime()]:ke=>te(ke)})},goHome(te=!1){E.current?E.current.world.goHome(te):Di.current=B(A({},Di.current),{viewport:ke=>ke.world.goHome(te)})},getZoom(){var te;return(te=E.current)==null?void 0:te._lastGoodScale},getScaleInformation(){let te=E.current;if(te!=null)return A({},qo(te))},goToTarget(te,ke={}){E.current?E.current.world.gotoRegion(A(A({},te),ke)):Di.current=B(A({},Di.current),{viewport:nt=>{nt.world.gotoRegion(A(A({},te),ke))}})},setFps(te){E.current?E.current.fpsLimit=te:Di.current=B(A({},Di.current),{setFps:ke=>{ke.fpsLimit=te}})},clearTarget(){$t(void 0),E.current?E.current.world.goHome(!0):Di.current=B(A({},Di.current),{viewport:te=>{te.world.goHome(!0)}})},setPreferredFormats(te){ve.setAttribute("preferred-formats",te.join(","))},getPreferredFormats(){return rt.current||[]},setMode(te){ve.setAttribute("atlas-mode",te)},applyStyles(te,ke){C.applyStyles(typeof te=="string"?{id:te}:te,"atlas",ke)},applyHTMLProperties(te,ke){C.applyStyles(typeof te=="string"?{id:te}:te,"html",ke)},setClassName(te,ke){C.applyStyles(typeof te=="string"?{id:te}:te,"html",{className:ke})},createAnnotationDisplay(te){return new hI(te)},getThumbnail(te,ke,nt){return _.getBestThumbnailAtSize(te,ke,nt)},addVaultEventListener(te,ke,nt,Ct){return S.addEventListener(te,ke,nt,Ct)},removeVaultEventListener(te,ke,nt){S.removeEventListener(te,ke,nt)},getListenersAsProps(te,ke){return S.getListenersAsProps(te,ke)}}}),de(()=>{if(E.current){let ve=Object.values(Di.current);for(let ze of ve)ze(E.current);Di.current={}}},[h]),Rt(()=>{if(mt){let ve=document.getElementById(mt);ve&&ts(ve.innerText)}},[h,mt]),Rt(()=>{if(t.current&&!Re){let ve=bt=>{var Ht,Vt,te;if(E.current&&E.current.transitionManager){let ke=E.current.transitionManager,nt=ke.pendingTransition.done?E.current.target:ke.pendingTransition.to,Ct=Math.min(nt[3]-nt[1],nt[4]-nt[2])*.1,pt;switch(bt.key){case"=":{(Ht=E.current.world)==null||Ht.zoomIn();return}case"-":{(Vt=E.current.world)==null||Vt.zoomOut();return}case"0":{(te=E.current.world)==null||te.goHome();return}case"ArrowRight":{bt.preventDefault(),pt=nt.slice(0),pt[1]=pt[1]+Ct,pt[3]=pt[3]+Ct;break}case"ArrowLeft":{bt.preventDefault(),pt=nt.slice(0),pt[1]=pt[1]-Ct,pt[3]=pt[3]-Ct;break}case"ArrowUp":{bt.preventDefault(),pt=nt.slice(0),pt[2]=pt[2]-Ct,pt[4]=pt[4]-Ct;break}case"ArrowDown":{bt.preventDefault(),pt=nt.slice(0),pt[2]=pt[2]+Ct,pt[4]=pt[4]+Ct;break}}pt&&ke.applyTransition(pt,{duration:500,easing:Er.easeOutExpo,constrain:!0})}},ze=t.current;return ze.addEventListener("keydown",ve),()=>{ze.removeEventListener("keydown",ve)}}return()=>{}},[Re]),{atlasProps:Ee(()=>({children:null,nested:T,responsive:he,viewport:ce,enableNavigator:ie,onCreated:ve=>{Mi(""),p(!0),Vh(ve.runtime.id),E.current=ve.runtime},homePosition:Le&&Le.selector&&Le.selector.type==="BoxSelector"?Le.selector.spatial:void 0,renderPreset:F==="static"?["static-preset",{interactive:H}]:["default-preset",{interactive:H,unstable_webglRenderer:F==="webgl",controllerConfig:{ignoreSingleFingerTouch:Oe,enablePanOnWait:Ae,requireMetaKeyForWheelZoom:Ge,panOnWaitDelay:it}}],width:G||void 0,height:q||(he?void 0:512),role:V,title:ae}),[he,ce,Le,F,ie,y,V,ae]),background:se,isReady:h,isConfigBlocking:g,setIsReady:p,internalConfig:y,target:Le,setParsedTarget:Qt,highlight:ei,highlightCssClass:Fe,preferredFormats:We,render:F,interactive:H,mode:Ze,setMode:at,virtualSizes:U,styleId:mt,responsive:he,viewport:ce,debug:J,enableNavigator:ie,height:q,width:G,className:z,inlineStyles:es,inlineStyleSheet:is,vault:a,nested:T,x:L,y:O,rotation:yt,homeCover:Ue,useProp:Gh,useRegisterWebComponentApi:jl,runtime:E,webComponent:t}}Xe(),Qe();var Dh=ri(!1);function BI(e){let t=vl();return de(()=>{t&&e.onCreated(t)},[t]),null}function Uh(e){var t=e,{children:i,onCreated:r,responsive:n,viewport:a,nested:l}=t,u=le(t,["children","onCreated","responsive","viewport","nested"]);let[h,g]=Me(!1),p=Jt(Dh);return l||p?$(et,null,r?$(BI,{onCreated:r}):null,i):$(Dh.Provider,{value:!0},$(TC,B(A({},u),{onCreated:y=>{if(g(!0),r)return y.runtime.updateNextFrame(),r(y)},unstable_noReconciler:!0}),$(Dh.Provider,{value:!0},h?i:null)))}Xe();function R0(e){var t=e,{children:i}=t,r=le(t,["children"]);let n=Pl(),{setIsReady:a,atlasProps:l,isReady:u,className:h}=Ol(r);return $(dn,{vault:n},$(Uh,A({onCreated:()=>{a(!0)},viewport:!0,className:h||""},l),u?$("slot",null,i):null))}if(typeof window<"u"){let e={shadow:!0,onConstruct(t){t._props={__registerPublicApi:i=>{Object.assign(t,i(t))}}}};In(R0,"atlas-viewer",[],e),In(R0,"layout-container",[],e)}Xe(),Qe(),Xe(),Qe();var L0=()=>()=>({}),Wh=ri(L0);function Do(e,t){let i=Se(),r=Jt(Wh)||L0;i.current!==t&&r(e),i.current=t}Xe();var DI=Be(tf());Qe(),Xe(),Xe(),Qe();var O0=ri(null);function gn({displayName:e,component:t,customConstructor:i}){let r=pi(function(n,a){var l=n,{children:u}=l,h=le(l,["children"]);let[g,p]=Me(),y=vl(),S=Jt(O0),C=Se(h);return de(()=>(y&&y.runtime&&p(i?i(h):new t),()=>{}),[]),de(()=>{if(y&&y.runtime&&g){let _=y.runtime,T=y.runtime.world,L=S||T;L.appendChild(g),a&&(typeof a=="function"?a(g):a.current=g),g instanceof on&&(_.world=g),g instanceof $s||(_.pendingUpdate=!0,_.world&&_.world.needsRecalculate&&(_.world.recalculateWorldSize(),_.world.triggerRepaint()));let O=L,E=g;return()=>{E&&(O.removeChild(E),_.pendingUpdate=!0,_.world&&_.world.needsRecalculate&&(_.world.recalculateWorldSize(),_.world.triggerRepaint()))}}return()=>{}},[g,y==null?void 0:y.runtime]),de(()=>{g&&y&&y.runtime&&(Qc(y.runtime.world,h),qc(g,C.current,h),C.current=h,y.runtime.pendingUpdate=!0,y.runtime.world&&(y.runtime.world.needsRecalculate=!0,y.runtime.world.needsRecalculate&&(y.runtime.world.recalculateWorldSize(),y.runtime.world.triggerRepaint())))},[g,h]),g?$(O0.Provider,{value:g},u):null});return r.displayName=e,ec(r)}Xe(),Qe();var UI=Object.defineProperty,WI=(e,t,i)=>t in e?UI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,$l=(e,t,i)=>(WI(e,typeof t!="symbol"?t+"":t,i),i);function mn(e){return e.endsWith("info.json")?e:e.endsWith("/")?`${e}info.json`:`${e}/info.json`}var HI="http://library.stanford.edu/iiif/image-api/compliance.html#level0",$0="http://library.stanford.edu/iiif/image-api/compliance.html#level1",F0="http://library.stanford.edu/iiif/image-api/compliance.html#level2",qI="http://library.stanford.edu/iiif/image-api/conformance.html#level0",M0="http://library.stanford.edu/iiif/image-api/conformance.html#level1",z0="http://library.stanford.edu/iiif/image-api/conformance.html#level2",QI="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",N0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",j0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",VI="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",B0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",D0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",GI="http://iiif.io/api/image/1/level0.json",YI="http://iiif.io/api/image/1/profiles/level0.json",U0="http://iiif.io/api/image/1/level1.json",W0="http://iiif.io/api/image/1/profiles/level1.json",H0="http://iiif.io/api/image/1/level2.json",q0="http://iiif.io/api/image/1/profiles/level2.json",XI="http://iiif.io/api/image/2/level0.json",ZI="http://iiif.io/api/image/2/profiles/level0.json",Q0="http://iiif.io/api/image/2/level1.json",V0="http://iiif.io/api/image/2/profiles/level1.json",G0="http://iiif.io/api/image/2/level2.json",Y0="http://iiif.io/api/image/2/profiles/level2.json",KI="level0",X0="level1",Z0="level2",JI="http://iiif.io/api/image/2/level0",K0="http://iiif.io/api/image/2/level1",J0="http://iiif.io/api/image/2/level2",eR="https://iiif.io/api/image/1.1/compliance/#level0",eb="https://iiif.io/api/image/1.1/compliance/#level1",tb="https://iiif.io/api/image/1.1/compliance/#level2",ib=[J0,F0,z0,j0,D0,H0,q0,G0,Y0,Z0,tb],rb=[...ib,K0,$0,M0,N0,B0,U0,W0,Q0,V0,X0,eb],tR=[JI,K0,J0,HI,$0,F0,qI,M0,z0,QI,N0,j0,VI,B0,D0,GI,YI,U0,W0,H0,q0,XI,ZI,Q0,V0,G0,Y0,KI,X0,Z0,eR,eb,tb],iR={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},rR={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},nR={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]};function sR(e){return ib.indexOf(e)!==-1?nR:rb.indexOf(e)!==-1?rR:iR}function oR(e){let t=e?Array.isArray(e.profile)?e.profile:[e.profile]:[],i={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let r of t)if(typeof r=="string"&&(r=sR(r)),!!r){if(r.formats)for(let n of r.formats)i.extraFormats.indexOf(n)===-1&&i.extraFormats.push(n);if(r.qualities)for(let n of r.qualities)i.extraQualities.indexOf(n)===-1&&i.extraQualities.push(n);if(r.supports)for(let n of r.supports)i.extraFeatures.indexOf(n)===-1&&i.extraFeatures.push(n);if(r.maxHeight&&(i.maxHeight=r.maxHeight),r.maxWidth&&(i.maxWidth=r.maxWidth),r.maxArea&&(i.maxArea=r.maxArea),r.extraFormats)for(let n of r.extraFormats)i.extraFormats.indexOf(n)===-1&&i.extraFormats.push(n);if(r.extraQualities)for(let n of r.extraQualities)i.extraQualities.indexOf(n)===-1&&i.extraQualities.push(n);if(r.extraFeatures)for(let n of r.extraFeatures)i.extraFeatures.indexOf(n)===-1&&i.extraFeatures.push(n);r.maxHeight&&(i.maxHeight=r.maxHeight),r.maxWidth&&(i.maxWidth=r.maxWidth),r.maxArea&&(i.maxArea=r.maxArea)}if(e.extraFormats)for(let r of e.extraFormats)i.extraFormats.indexOf(r)===-1&&i.extraFormats.push(r);if(e.extraFeatures)for(let r of e.extraFeatures)i.extraFeatures.indexOf(r)===-1&&i.extraFeatures.push(r);if(e.extraQualities)for(let r of e.extraQualities)i.extraQualities.indexOf(r)===-1&&i.extraQualities.push(r);return i}function aR(e){try{if(e==="full")return{full:!0};if(e==="square")return{square:!0};let t=e.startsWith("pct:"),i=e.substr(t?4:0).split(",").map(r=>parseFloat(r));return{x:i[0],y:i[1],w:i[2],h:i[3],percent:t}}catch{throw new Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+e)}}function lR(e){let t={upscaled:!1,max:!1,confined:!1};if(e[0]==="^"&&(t.upscaled=!0,e=e.slice(1)),e==="max"||e==="full")return t.max=!0,t.serialiseAsFull=e==="full",t;if(e[0]==="!"&&(t.confined=!0,e=e.slice(1)),e[0]==="p")return t.percentScale=parseFloat(e.slice(4)),t;let i=e.split(",").map(r=>r.trim());return i.length&&typeof i[0]<"u"&&(i[0]!==""&&(t.width=parseInt(i[0],10)),typeof i[1]<"u"&&i[1]!==""?(t.height=parseInt(i[1],10),t.version=2):t.version=3),t}function uR(e){let t={angle:0};if(e[0]==="!"&&(t.mirror=!0,e=e.substr(1)),t.angle=parseFloat(e)%360,Number.isNaN(t.angle))throw new Error(`Invalid rotation ${e}`);return t}function nb(e,t=""){let i=e.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!i)throw new Error(`Invalid or unknown input ${e}`);let r=i[2],n=i[3],a=i[4];if(a[0]==="/"&&(a=a.substring(1)),t.length>0){if(t[0]==="/"&&(t=t.substring(1)),t!==a.substring(0,t.length))throw new Error(`Path does not start with prefix (path: ${a}, prefix: ${t})`);a=a.substring(t.length)}return{scheme:r,server:n,path:a,prefix:t}}function cR(e,t=""){let{path:i,scheme:r,server:n,prefix:a}=nb(e,t),l=(i||"").split("/").reverse(),[u,h,g,p,...y]=l,S=y.reverse().filter(Boolean).join("/");if(l.length===1||u==="")return{type:"base",scheme:r,server:n,prefix:a,identifier:S};if(u==="info.json"){let[,..._]=l;return{type:"info",scheme:r,server:n,prefix:a,identifier:_.reverse().filter(Boolean).join("/")}}let C=(u||"").split(".");if(typeof C[1]>"u"||typeof C[0]>"u"||typeof p>"u"||typeof g>"u"||typeof h>"u")throw new Error("Invalid image request");return{type:"image",scheme:r,server:n,prefix:a,identifier:S,originalPath:i,region:aR(p),size:lR(g),rotation:uR(h),quality:C[0],format:C[1]}}function hR(e){let t=cR(mn(e.id));if(t.type!=="info")throw new Error("Invalid service URL");let i=oR(e);return{identifier:t.identifier,originalPath:"",server:t.server,prefix:t.prefix,scheme:t.scheme,type:"image",quality:i.extraQualities.indexOf("default")===-1?i.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}function dR(e,t,i){let r=i.length,n=[];for(let a=0;a<r;a++){let l=i[a];if(l){let u=l.width;n.push(e/u)}}return n}function pR(e,t,i){let r=i.length,n=[];for(let a=0;a<r;a++){let l=i[a];l&&n.push({width:Math.floor(e/l),height:Math.floor(t/l)})}return n}function Ut(e){if(e["@id"])return e["@id"];if(e.id)return e.id}function Fl(e){if(!e||!e.profile||!Ut(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let i of t)if(typeof i=="string"&&tR.indexOf(i)!==-1)return!0;return!1}function fR(e){if(!Fl(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let i of t)if(typeof i=="string"){if(rb.indexOf(i)!==-1)return!0}else{let r=[...i.supports||[],...i.extraFeatures||[]];if(r.indexOf("regionByPx")!==-1&&(r.indexOf("sizeByW")!==-1||r.indexOf("sizeByWh")!==-1))return!0}return!1}function Ml(e,t){if(t&&t.profile){let i=t.profile;if(i){let r=Array.isArray(i)?i:[i];return r.includes(`level${e}`)||r.includes(`http://iiif.io/api/image/2/level${e}.json`)||r.includes(`http://iiif.io/api/image/1/level${e}.json`)||r.includes(`http://iiif.io/api/image/1/profiles/level${e}.json`)}}return!1}function Hh(e){return Fl(e)?Ml(0,e)?0:Ml(1,e)?1:Ml(2,e)?2:null:null}function sb(e){return(e["@context"]?Array.isArray(e["@context"])?e["@context"]:[e["@context"]]:[]).indexOf("http://iiif.io/api/image/3/context.json")!==-1}function gR(e){if(!fR(e))return[];let t=[],i=Array.isArray(e.profile)?e.profile:[e.profile],r=i.length;for(let n=0;n<r;n++){let a=i[n];if(a&&typeof a!="string"&&(a.maxHeight||a.maxWidth))return[{id:Ut(e),type:"variable",minWidth:0,minHeight:0,maxHeight:a.maxHeight||a.maxWidth,maxWidth:a.maxWidth||a.maxHeight,level:Hh(e),version:e["@context"]==="http://iiif.io/api/image/3/context.json"?3:2}]}if(e.tiles){let n=e.tiles.length;for(let a=0;a<n;a++){let l=e.tiles[a];l&&(l.height||l.width)&&t.push({id:Ut(e),type:"variable",minHeight:0,minWidth:0,maxHeight:l.height||l.width,maxWidth:l.width,level:Hh(e),version:sb(e)?3:2})}}return t}function ob(e){let t=/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/,i=e.match(t);if(i&&i[4]&&i[5]){let r=i[1],n=parseInt(i[4],10),a=parseInt(i[5],10),l=i[7];if((r==="max"||r==="full")&&n&&a&&l)return{type:"fixed",id:e,height:a,width:n}}return{type:"unknown",id:e}}function mR(e){if(e["@type"])return e["@type"];if(e.type)return e.type}function vR(e){if(typeof e=="string")return ob(e);let t=mR(e);if(t!=="Image"&&t!=="sc:Image")return null;let i=e,r=Ut(i);return r?r&&i.width&&i.height?{id:r,type:"fixed",width:i.width,height:i.height,unsafe:!0}:ob(r):null}function yR(e){return Fl(e)?(e&&e.sizes?e.sizes:[]).map(t=>({id:Ut(e),type:"fixed-service",height:t.height,width:t.width,level:Hh(e),version:sb(e)?3:2})):[]}function ab(e){let t=[],i=e.length;for(let r=0;r<i;r++){let n=e[r];if(!n)continue;let a=yR(n);a.length&&t.push(...a);let l=gR(n);l.length&&t.push(...l)}return t}function lb(e){let t=e.service?Array.isArray(e.service)?e.service:[e.service]:[],i=t.length,r=[];for(let n=0;n<i;n++)Fl(t[n])&&r.push(t[n]);return r}function bR(e,t=!0,i){let r=[],n=vR(e);if(n===null)return r;let a=e;if(r.push(n),t&&a&&a.width&&a.height){let l=[],u=lb(a);for(let h of u){let g={id:Ut(h),width:a.width,height:a.height};if(i.canLoadSync(g)){let p=i.loadServiceSync(g);p&&(p.height||(p.height=a.height),p.width||(p.width=a.width),l.push(...ab([p])))}}if(l.length)return r.push(...l),r}return a.service&&r.push(...ab(a.service)),r}function wR({x:e=0,y:t=0,w:i,h:r,full:n,square:a,percent:l}){if(n)return"full";if(a)return"square";if(typeof i>"u"||typeof r>"u")throw new Error("RegionParameter: invalid region");let u=`${e},${t},${i},${r}`;return l?`pct:${u}`:u}function xR({max:e,percentScale:t,upscaled:i,confined:r,width:n,height:a,serialiseAsFull:l,version:u}){let h=[];return i&&h.push("^"),e?(h.push(l?"full":"max"),h.join("")):(r&&h.push("!"),t&&h.push(`pct:${t}`),n&&h.push(`${n}`),h.push(","),a&&u===3&&h.push(`${a}`),h.join(""))}function _R(e){return`${e.mirror?"!":""}${(e.angle||0)%360}`}function ub(e,t){let i=e.prefix.startsWith("/")?e.prefix.substr(1):e.prefix,r=`${e.scheme}://${e.server}/${i?`${i}/`:""}${e.identifier}`;if(e.type==="base")return r;if(e.type==="info")return`${r}/info.json`;let{size:n}=e,{region:a,rotation:l,format:u,quality:h}=e;if(t){let g=t["@context"]?Array.isArray(t["@context"])?t["@context"]:[t["@context"]]:[],p=t.profile,y=g.indexOf("http://iiif.io/api/image/2/context.json")!==-1||p==="level2",S=g.indexOf("http://iiif.io/api/image/3/context.json")!==-1;if((n.width===t.width&&!n.height||n.height===t.height&&!n.width||n.width===t.width&&n.height===t.height)&&(n=B(A({},n),{max:!0})),y&&(n.max&&!n.serialiseAsFull&&(n=B(A({},n),{serialiseAsFull:!0})),!n.max&&n.width&&n.height&&(n=B(A({},n),{height:void 0})),n=B(A({},n),{version:2})),S){if(n.max&&n.serialiseAsFull&&(n=B(A({},n),{serialiseAsFull:!1})),n.width&&!n.height&&t.width&&t.height){let C=t.height/t.width;n=B(A({},n),{height:Math.ceil(n.width*C)})}n=B(A({},n),{version:3})}}return[r,wR(a),xR(n),_R(l),`${h}.${u}`].filter(Boolean).join("/")}function qh(e,t,i){let r=hR({"@context":e.version===3?"http://iiif.io/api/image/3/context.json":"http://iiif.io/api/image/2/context.json",id:mn(Ut(e)),profile:e.level===null||typeof e.level>"u"?"level0":`level${e.level}`,type:e.version===3?"ImageService3":"ImageService2"});if(r.type!=="image")throw new Error("Invalid service");return r.size.max=!1,r.size.width=t,r.size.height=i,{id:ub(r),type:"fixed",width:t,height:i||e.height/(e.width||1)*t,unsafe:e.width>t}}function Hs(e){let t=e.replace(/(https?:\/\/)?(www.)?/i,"");return t.indexOf("/")!==-1?t.split("/")[0]:t}function SR(e,t,i){let r=e.width?e.width:e.maxWidth;return i.height<=e.maxHeight&&i.width<=e.maxWidth&&i.height>=e.minHeight&&i.width>=e.minWidth&&(!t||Math.abs(i.width-r)<Math.abs(t.width-r))}function ER(e,t){let i=[],r=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},e),n=(p,y=0)=>r.explain?i.push(new Array(y).fill(0).map(S=>"    ").join("")+p().trim()):void 0,a=[],l=[],u=null;n(()=>`Using configuration: ${JSON.stringify(r,null,2)}`);let h=(p,y)=>{if(n(()=>"Swapping choice",3),SR(r,y,p)){if(r.preferFixedSize&&p.unsafe){n(()=>`We found an image that was marked as unsafe, but it was the best size. (${p.id})`,4),l.push(p);return}r.returnAllOptions&&y&&l.push(y),n(()=>`We found a new image that was the best size. (${p.id})`,4),u=p}else r.returnAllOptions&&l.push(p)};n(()=>`The input shows we have ${t.length} list(s) of candidates to choose from.`);let g=t.length;for(let p=0;p<g;p++){let y=t[p]();n(()=>`Candidate group ${p}: ${JSON.stringify(y,null,2)}`,1);let S=y.length;n(()=>`Checking candidate list number ${p} and found ${S} potential ways of creating image(s)`,1);for(let C=0;C<S;C++){let _=y[C];if(n(()=>`-> Checking candidate ${C}`,1),_.type==="unknown"&&r.atAnyCost&&(n(()=>`We've found an unknown image type, adding this to the "last resort" list`,2),a.push(_)),_.type==="fixed"&&(_.unsafe?(n(()=>`We've found an unsafe fixed image type, adding this to the "last resort" list`,2),a.push(_)):(n(()=>"We've found a fixed size image, checking if it matches the request",2),h(_,u))),_.type==="fixed-service")if(r.unsafeImageService){n(()=>"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)",2);let T=qh(_,r.width,r.height);h(T,u)}else{n(()=>"Checking for an image from the tile source 3",2);let T=qh(_,_.width,_.height);h(T,u)}if(_.type==="variable"&&_.maxWidth){let T=qh({id:_.id,type:"fixed-service",width:_.maxWidth,height:_.maxWidth,level:_.level,version:_.version},_.maxWidth);h(T,u)}}if(u&&!r.returnAllOptions){if(u.unsafe||r.allowUnsafe)continue;n(()=>`We found a match in choice list number ${p}, no searching any more`);break}}return r.atAnyCost&&l.length===0?(n(()=>u?`We found an image! ${u.id} of type ${u.type}`:'We found no images, but "atAnyCost" is set, so returning that'),{best:u||a[0]||null,fallback:a.slice(1),log:i}):r.returnAllOptions?(n(()=>"Returning all options that we have found"),{best:(r.atAnyCost?u||l[0]||a[0]:u||l[0])||null,fallback:[...l,...a],log:i}):(n(()=>"Returning the best image that we found, and a fallback"),{best:u||l[0]||null,fallback:u?l:l.slice(1),log:i})}function CR(e,t,i){let r=e>t?e:t,n=i.length,a=[];for(let l=0;l<n;l++){let u=i[l];if(!u||u.scaleFactors.length===0)continue;let h=u.scaleFactors[0];if(!h)continue;let g=r/h,p=[h];for(;g>=u.width;)h=h*2,p.push(h),g=g/2;a.push(B(A({},u),{scaleFactors:p}))}return a}function kR(e,t){if(e.length!==t.length)return!1;if(e.length===0&&t.length===0)return!0;let i=e.length,r=!0;for(let a=0;a<i;a++){let l=e[a],u=t[a];if(l.width!==u.width||l.height!==u.height){r=!1;break}}if(r)return!0;let n=0;for(let a=0;a<i;a++)for(let l=0;l<i;l++)if(e[a].width===t[l].width&&e[a].height===t[l].height){n++;break}return n===i}function cb(e){return Ml(0,e)}var hb=class{constructor(e={}){$l(this,"config",{verificationsRequired:1,approximateServices:!1,enableFetching:!0,disableThrottling:!1}),$l(this,"fetchingCount",0),$l(this,"imageServices",{}),$l(this,"knownImageServers",{}),this.config=Object.assign(this.config,e)}setConfig(e){Object.assign(this.config,e)}sample(e,t,i=!0){let r=Hs(Ut(e)),n=mn(Ut(e)),a=this.knownImageServers[r];return this.imageServices[n]=Object.assign(e,{real:!0}),!a&&e.tiles&&!cb(e)?(this.knownImageServers[r]={verifications:0,malformed:!1,root:r,preLoaded:i,sampledId:Ut(e),verified:!1,server:null,result:{context:e["@context"]||[],sampledProfile:e.profile,resourceServiceRatio:t&&e.height?t.height/e.height:1,sampledSizes:e.sizes||[],sizeRatios:dR(e.width,e.height,e.sizes||[]),sampledTiles:e.tiles||[]}},!0):this.verify(e)}preLoad(e,t=!0){this.knownImageServers[e.root]=e,t&&(this.knownImageServers[e.root].malformed=!1,this.knownImageServers[e.root].verifications=this.config.verificationsRequired)}predict(e,t=!1,i=!1){let r=e==null?void 0:e.source,n=Hs(Ut(e)),a=this.knownImageServers[n],l=mn(Ut(e));return this.imageServices[l]?this.imageServices[l]||null:!this.config.approximateServices||!a||!a.result||!(r!=null&&r.height||e.height)||!(r!=null&&r.width||e.width)||!i&&(a.malformed||a.verifications<this.config.verificationsRequired)||cb(e.source)?null:(this.imageServices[l]||(this.imageServices[l]={"@context":a.result.context,"@id":Ut(e),id:Ut(e),protocol:"http://iiif.io/api/image",tiles:(r==null?void 0:r.tiles)||CR(e.width,e.height,a.result.sampledTiles),sizes:(r==null?void 0:r.sizes)||pR(Math.round(e.width/a.result.resourceServiceRatio),Math.round(e.height/a.result.resourceServiceRatio),a.result.sizeRatios),profile:(r==null?void 0:r.profile)||a.result.sampledProfile,height:(r==null?void 0:r.height)||e.height,width:(r==null?void 0:r.width)||e.width,real:!1}),this.imageServices[l]||null)}async getThumbnailFromResource(e,t,i=!0,r=[]){let n=e?await this.getImageCandidates(e,i):[];return ER(t,[()=>r,()=>n])}async getImageCandidates(e,t=!0){let i=e;if(t&&i&&i.height&&i.width){let r=lb(i);for(let n of r){let a={id:Ut(n),width:n.width?n.width:i.width,height:n.height?n.height:i.height,source:n};await this.loadService(a)}}return bR(e,t,this)}async verify(e){let t=this.predict(e,!1,!0),i=await this.fetchService(Ut(e));if(!t)return!1;let r=t.height===i.height&&t.width===i.width&&t["@context"]===i["@context"]&&kR(t.sizes||[],i.sizes||[]);if(r){let n=Hs(Ut(e)),a=this.knownImageServers[n];a&&(a.verifications+=1,a.verifications>=this.config.verificationsRequired&&(a.verified=!0))}return r}canLoadSync(e){let t=typeof e=="string"?e:Ut(e),i=mn(t);if(this.imageServices[i])return!0;let r=this.knownImageServers[Hs(t)];return!!(r&&!r.malformed&&r.verifications>=this.config.verificationsRequired)}async markAsMalformed(e){return this.knownImageServers[Hs(Ut(e))].malformed=!0,this.loadService(e,!0)}async fetchService(e,t=!1){let i=mn(e),r=this.imageServices[i];if(r&&(!t||r.real))return r;if(!this.config.enableFetching)throw new Error("Fetching is not enabled");let n=await this.fetch(i).then(a=>a.json());return!n.id&&n["@id"]&&(n.id=n["@id"]),n.id!==e&&(n.id=e,n["@id"]&&(n["@id"]=e)),this.imageServices[i]=Object.assign(n,{real:!0}),this.imageServices[i]}async fetch(e,t){return fetch(e,t)}async loadService(e,t=!1){if(!this.config.disableThrottling){let n=!0;for(;n;)if(this.fetchingCount>=this.config.verificationsRequired)await new Promise(a=>setTimeout(a,500));else{n=!1;break}}let i=this.knownImageServers[Hs(Ut(e))];if(i&&!i.malformed&&!t){await i.result;let n=this.loadServiceSync(e);if(n)return n}this.fetchingCount++;let r=await this.fetchService(Ut(e),t);return this.fetchingCount--,r.real&&this.sample(r,e),r}loadServiceSync(e){let t=mn(Ut(e));return this.imageServices[t]?this.imageServices[t]:this.config.approximateServices?this.predict(e):null}};new hb;var AR=e=>{var t=e,{height:i,tiles:r,width:n,x:a,y:l,style:u,skipSizes:h=!1,skipThumbnail:g=!1,rotation:p=0,useFloorCalc:y=!1,viewport:S,tileFormat:C,children:_}=t,T=le(t,["height","tiles","width","x","y","style","skipSizes","skipThumbnail","rotation","useFloorCalc","viewport","tileFormat","children"]);let L=n/r.width,O=r.imageService.tiles||[],E=r.imageService.sizes||[],F=r.imageService.id||r.imageService["@id"],z=Ee(()=>{let q=F;return q&&q.endsWith("/info.json")?q.slice(0,-1*10):q},[F]),U=u&&typeof u.opacity<"u"&&u.opacity!==1;return $(qs,A({key:z,scale:L,height:r.height,width:r.width,x:a,rotation:p,y:l},T),$(PR,{key:"composite-"+z,id:z,width:r.width,height:r.height,renderOptions:U?{renderLayers:1,renderSmallestFallback:!1}:S?{renderLayers:1,renderSmallestFallback:!0}:{renderLayers:2,renderSmallestFallback:!0}},_,r.thumbnail&&!U&&!g?$(Uo,{uri:r.thumbnail.id,target:{width:r.width,height:r.height},display:{width:r.thumbnail.width,height:r.thumbnail.height},style:u}):null,h?null:E.map((q,G)=>{let{prefix:V,server:ae,scheme:H,path:se}=nb(z);return $(Uo,{key:G,uri:ub({scheme:H,server:ae,prefix:V,identifier:se,originalPath:"",type:"image",region:{full:!0},size:{max:!1,upscaled:!1,confined:!1,width:q.width,height:q.height},rotation:{angle:0,mirror:!1},format:"jpg",quality:"default"},r.imageService),target:{width:r.width,height:r.height},display:{width:q.width,height:q.height},style:u})}),O.map(q=>(q.scaleFactors||[]).map(G=>$(TR,{key:`${q}-${G}`,uri:z,display:{width:r.width,height:r.height},tile:q,scaleFactor:G,style:u,format:C,useFloorCalc:y})))))};gn({displayName:"Atlas.World",component:on,customConstructor:e=>new on(e.width,e.height)});var qs=gn({displayName:"Atlas.WorldObject",component:$s}),db=gn({displayName:"Atlas.Box",component:Fs}),Uo=gn({displayName:"Atlas.SingleImage",component:cr});gn({displayName:"Atlas.ImageTexture",component:Ra});var PR=gn({displayName:"Atlas.CompositeResource",component:Ic,customConstructor:e=>new Ic({id:e.id,width:e.width,height:e.height,images:[],renderOptions:e.renderOptions})}),TR=gn({displayName:"Atlas.TiledImage",component:sn,customConstructor:e=>sn.fromTile(e.uri,e.display,e.tile,e.scaleFactor,void 0,e.format,e.useFloorCalc)});gn({displayName:"Atlas.Text",component:Ao}),Xe(),Qe(),Xe(),Qe(),Qe(),Qe(),Xe(),Qe();var Qh=pi((e,t)=>{var i=e,{children:r}=i,n=le(i,["children"]);let a=Se(),l=un(),u=Se(0),h=Se(),[g,p]=xs(y=>y+1,0);return Xc(()=>{if(n.relative){let y=a.current;if(y&&l){let S=l.getScaleFactor();u.current!==S&&(u.current=S,y.style.transformOrigin="0 0",y.style.transform=`scale(${1/u.current})`,y.style.width=`${u.current*100}%`,y.style.height=`${u.current*100}%`)}}},[n.relative]),Rt(()=>{let y=h.current;if(!y){let S=setTimeout(p,100);return()=>{clearTimeout(S)}}return t&&y&&(typeof t=="function"?t(y):t.current=y),y&&y.__host?n.relative?Es($("div",{ref:a},r),y.__host.element):Es(r,y.__host.element):y&&(y.__onCreate=()=>{n.relative?Es($("div",{ref:a},r),y.__host.element):Es(r,y.__host.element)}),()=>{}},[g,t,r,h,n.relative]),$(db,A({html:!0,ref:h},n))});Xe();var IR=e=>{var t=e,{handleSize:i=9,resizable:r,onSave:n,children:a}=t,l=le(t,["handleSize","resizable","onSave","children"]);let{portalRef:u,mode:h,mouseEvent:g,isEditing:p}=$C({x:l.x||0,y:l.y||0,width:l.width,height:l.height},n),y=Ee(()=>g("translate"),[g]),S=Ee(()=>g("east"),[g]),C=Ee(()=>g("west"),[g]),_=Ee(()=>g("south"),[g]),T=Ee(()=>g("north"),[g]),L=Ee(()=>g("south-east"),[g]),O=Ee(()=>g("south-west"),[g]),E=Ee(()=>g("north-east"),[g]),F=Ee(()=>g("north-west"),[g]);return $(et,null,$(qs,A({},l),a,$(Qh,{ref:u,target:{x:0,y:0,height:l.height,width:l.width},relative:!0,interactive:!1},h==="sketch"&&r?$(et,null,$("div",{onMouseDown:y,onTouchStart:y,style:{display:"block",width:"100%",height:"100%",border:"1px dashed #999",boxSizing:"border-box",pointerEvents:p?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"east",onTouchStart:S,onMouseDown:S,style:{cursor:"e-resize",position:"absolute",background:"#fff",height:i*2,width:i,right:0,top:"50%",transform:`translate(${i/2}px, -${i}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:p?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"west",onMouseDown:C,style:{cursor:"w-resize",position:"absolute",background:"#fff",height:i*2,width:i,left:0,top:"50%",transform:`translate(-${i/2}px, -${i}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:p?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"north",onMouseDown:T,style:{cursor:"n-resize",position:"absolute",background:"#fff",height:i,width:i*2,left:"50%",top:0,transform:`translate(-${i}px, -${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid rgba(0,0,0,.5)",pointerEvents:p?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"south",onMouseDown:_,style:{cursor:"s-resize",position:"absolute",background:"#fff",height:i,width:i*2,left:"50%",bottom:0,transform:`translate(-${i}px, ${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:p?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"north-east",onMouseDown:E,style:{cursor:"ne-resize",position:"absolute",background:"#fff",height:i,width:i,right:0,top:0,transform:`translate(${i/2}px, -${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:p?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"south-east",onMouseDown:L,style:{cursor:"se-resize",position:"absolute",background:"#fff",height:i,width:i,bottom:0,right:0,transform:`translate(${i/2}px, ${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:p?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"south-west",onMouseDown:O,style:{cursor:"sw-resize",position:"absolute",background:"#fff",height:i,width:i,bottom:0,left:0,transform:`translate(-${i/2}px, ${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:p?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"north-west",onMouseDown:F,style:{cursor:"nw-resize",position:"absolute",background:"#fff",height:i,width:i,top:0,left:0,transform:`translate(-${i/2}px, -${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:p?"none":h==="sketch"?"initial":"none"}})):null)))};Xe();var Wo=e=>{var t=e,{children:i,interactive:r,region:n,onClick:a,onSave:l,isEditing:u,className:h,style:g}=t,p=le(t,["children","interactive","region","onClick","onSave","isEditing","className","style"]);let y=Wc(),S=typeof r>"u"?typeof a=="function":r,C=De(_=>{l&&l(A({id:n.id,x:n.x,y:n.y,height:n.height,width:n.width},_))},[l,n.id,n.x,n.y,n.height,n.width]);return $(IR,{x:n.x,y:n.y,width:n.width,height:n.height,resizable:u,onSave:C,onClick:y==="explore"&&a?_=>{a(n)}:()=>{}},$(db,A({html:!0,className:h,interactive:S,relativeStyle:!0,target:{x:0,y:0,width:n.width,height:n.height},style:g},p)),i)};Xe(),Qe(),Xe();function pb({annotationId:e,interactive:t,relative:i}){var r;let n=xh({id:e}),a={fill:"rgba(0,0,0,0)"},l={fill:"rgba(0,0,0,0)"};if(!((r=n==null?void 0:n.motivation)!=null&&r.includes("supplementing"))||!n.body)return null;let u=(Array.isArray(n.body)?n.body:[n.body]).filter(g=>g.type==="TextualBody"),h=n.target.selector;return h?$(et,null,$("rect",{x:i?0:h.spatial.x,y:i?0:h.spatial.y,width:h.spatial.width,height:h.spatial.height,style:l}),$("text",{x:i?0:h.spatial.x,y:(i?0:h.spatial.y)+h.spatial.height*.75,textLength:h.spatial.width,fontSize:`${h.spatial.height}px`,lengthAdjust:"spacingAndGlyphs",className:"text-line-segment",part:"text-line-segment",style:B(A({},a),{pointerEvents:t?"initial":void 0})},u[0].value||"")):null}function RR({annotation:e,textSelectionEnabled:t}){var i;let r=Bt();return!((i=e==null?void 0:e.motivation)!=null&&i.includes("supplementing"))||!e.body?null:$(Qh,{target:B(A({},e.target.selector.spatial),{x:0,y:0}),interactive:t},$(dn,{vault:r},$("svg",{height:e.target.selector.spatial.height,width:e.target.selector.spatial.width,style:{userSelect:t?"text":void 0}},$(pb,{annotationId:e.id,interactive:t,relative:!0}))))}var LR=({id:e,style:t,className:i,interactive:r,textSelectionEnabled:n})=>{let a=xh({id:e}),l=Xn(a,"atlas"),u=Xn(a,"html"),h=kl(a,["atlas"]),g=fn(),p=Ee(()=>dm(t,l),[t,l]);return g&&a&&a.target&&a.target.selector&&a.target.selector.type==="BoxSelector"&&a.target.source&&a.target.source.id===g.id?$(Wo,A({id:a.id,isEditing:!0,region:a.target.selector.spatial,style:p,className:(u==null?void 0:u.className)||i,interactive:!!(u!=null&&u.href||r),href:(u==null?void 0:u.href)||null,title:(u==null?void 0:u.title)||null,hrefTarget:(u==null?void 0:u.target)||null},h),$(RR,{annotation:a,textSelectionEnabled:n})):null},fb=({className:e,page:t,textSelectionEnabled:i})=>{var r;let n=Xn(t,"atlas"),a=Xn(t,"html");return ki(l=>t.id?l.iiif.entities.AnnotationPage[t.id]:null,[]),$(et,null,(r=t.items)==null?void 0:r.map(l=>$(LR,{key:l.id,id:l.id,style:n,className:(a==null?void 0:a.className)||e,textSelectionEnabled:i})))};Xe(),Qe();function OR(){let e=un(),[t,i]=Me(),[r,n]=Me();return Xc(()=>{e&&(!t||e.focalPosition[1]!==t[1]||e.focalPosition[2]!==t[2]||e.focalPosition[3]!==t[3]||e.focalPosition[4]!==t[4])&&i(new Float32Array(e.focalPosition)),e&&(!r||e.homePosition[1]!==r[1]||e.homePosition[2]!==r[2]||e.homePosition[3]!==r[3]||e.homePosition[4]!==r[4])&&n(new Float32Array(e.homePosition))},[t,r]),$(et,null,t?$(Wo,{id:"focal",onClick:()=>{},onSave:()=>{},isEditing:!1,className:"test",region:{id:"focal",x:t[1],y:t[2],width:t[3]-t[1],height:t[4]-t[2]},style:{backgroundColor:"rgba(0, 0, 244, 0.5)"}}):null,r?$(Wo,{id:"home",onClick:()=>{},onSave:()=>{},isEditing:!1,className:"test",region:{id:"home",x:r[1],y:r[2],width:r[3]-r[1],height:r[4]-r[2]},style:{backgroundColor:"rgba(0, 200, 0, 0.5)"}}):null)}Qe(),Xe();function $R(e,t){let i=mn(e.id||e["@id"]||"").slice(0,-10);return!i||t.percentScale||!t.width||t.confined||!e.height||!e.width?[null,{height:0,width:0}]:[[i,"full",FT(t),"0","default.jpg"].join("/"),{width:t.width||1,height:t.confined?e.height/e.width*t.width:t.height||e.height/e.width*t.width}]}Qe(),Qe();function gb({id:e,image:t,thumbnail:i,isStatic:r,virtualSizes:n=[],x:a=0,y:l=0,rotation:u=0,annotations:h,tileFormat:g,skipSizes:p,annotationId:y,skipThumbnail:S,useFloorCalc:C}){var _,T,L,O;let E=Xn(y?{id:y,type:"Annotation"}:void 0,"atlas"),F=Xn({id:e,type:"ContentResource"},"atlas"),z=Ee(()=>A(A({},E),F),[E,F]),U=kl(y?{id:y,type:"Annotation"}:void 0,["atlas"]),q=kl({id:e,type:"ContentResource"},["atlas"]);return $(K.Fragment,null,t.service?$(et,{key:"service"},$(AR,A(A({viewport:r,tiles:{id:t.service.id,height:t.height!==t.service.height&&t.service.height!==void 0?t.service.height:t.height,width:t.width!==t.service.width&&t.service.width!==void 0?t.service.width:t.width,imageService:t.service,thumbnail:!S&&i&&i.type==="fixed"?i:void 0},skipSizes:p,skipThumbnail:S,x:((_=t.target)==null?void 0:_.spatial.x)+a,y:((T=t.target)==null?void 0:T.spatial.y)+l,rotation:u,useFloorCalc:C,width:(L=t.target)==null?void 0:L.spatial.width,height:(O=t.target)==null?void 0:O.spatial.height,style:z,tileFormat:g},U),q),t.service&&n.map(G=>{if(t.service){let[V,{height:ae,width:H}]=$R(t.service,G);return V?$(Uo,{priority:!0,style:z,key:V,uri:V,target:t.target.spatial,display:{height:ae,width:H}}):null}return null})),h):$(et,{key:"no-service"},$(Uo,A(A({style:z,uri:t.id,target:t.target.spatial,display:t.width&&t.height?{width:t.width,height:t.height}:void 0},U),q)),h))}Xe(),Qe();function FR(){let[e,{addAnnotation:t,removeAnnotation:i}]=VP(),r=Bt(),n=LT(),a=Se([]),l=e==null?void 0:e.id,u=Ee(()=>kh(r),[r]);return Do(()=>({annotations:{add(h){t(h)},get(h){if(l){let g=(r.get({id:l,type:"AnnotationPage"}).items||[]).find(p=>p.id===h);return g?r.get(g):null}return null},getSource(h){return a.current[h]||null},getAll(){if(l){let h=r.get({id:l,type:"AnnotationPage"});return h?r.get(h.items)||[]:[]}return[]},remove(h){i(h)},applyStyles(h){l&&n.applyStyles(l,"atlas",h)},addEventListener(h,g){if(l)return u.addEventListener({id:l,type:"AnnotationPage"},h,g)},applyHTMLProperties(h){l&&n.applyStyles(l,"html",h)}}}),l),[e,{addAnnotation:t,removeAnnotation:i}]}Qe();var mb=ri(null);function MR(){let e=Jt(mb);return[e.fullPage,{addAnnotation:e.addAnnotation,removeAnnotation:e.removeAnnotation}]}function vb({children:e}){let[t,{addAnnotation:i,removeAnnotation:r}]=FR();return $(mb.Provider,{value:Ee(()=>({fullPage:t,addAnnotation:i,removeAnnotation:r}),[t])},e)}Xe();function zR({media:e,children:t}){let[{element:i,currentTime:r,progress:n},a,l]=wy({duration:e.duration});return Do(u=>(u.mediaActions=l,u.mediaElement=i,u.setMediaProgressElement=h=>{n.current=h},u.dispatchEvent(new Event("media-displayed")),u.dispatchEvent(new Event("audio-displayed")),{}),e.url),$(PT,{state:a,actions:l,currentTime:r,progress:n,element:i},$("video",{ref:i,src:e.url}),t)}Xe();function NR({media:e}){let[{element:t,currentTime:i,progress:r},n,a]=wy({duration:e.duration}),l=a.playPause;return Do(u=>(u.mediaActions=a,u.mediaElement=t,u.setMediaProgressElement=h=>{r.current=h},u.dispatchEvent(new Event("media-displayed")),u.dispatchEvent(new Event("audio-displayed")),{}),e.url),$("div",{className:"video-container",part:"video-container",onClick:l},$("style",null,`
            .video-container {
              position: absolute;
              top: 0;
              bottom: 0;
              left: 0;
              right: 0;
              background: #000;
              z-index: 13;
              display: flex;
              justify-content: center;
              pointer-events: visible;
            }
          `),$("video",{ref:t,src:e.url,style:{width:"100%",objectFit:"contain"}}))}Xe();function jR({annotationPageId:e,selectionEnabled:t}){let i=RT({id:e}),r=fn(),n=Bt(),a=Xn(i,"text-lines");return!i||!i.items||!r?null:$(qs,A({},{x:0,y:0,width:r.width,height:r.height}),$(Qh,{target:{x:0,y:0,width:r.width,height:r.height}},$(dn,{vault:n},$("svg",{tabindex:0,"aria-name":"","aria-live":"off","aria-atomic":"true","aria-relevant":"all","aria-expanded":"true",role:"article",style:B(A({},a),{userSelect:"text"}),width:r.width,height:r.height},i.items.map(l=>$(pb,{key:`line-${l.id}`,annotationId:l.id,interactive:t}))))))}function BR(e,t){let i=[],r={};for(let n of e){let a={},l=[],u=t.get(n),h=(u==null?void 0:u.items)||[];for(let g of h){let p=t.get(g);if(p.motivation)for(let y of p.motivation)l.includes(y)||l.push(y),a[y]=a[y]?a[y]:[],a[y].push(p.id)}i.push({typeMap:a,allTypes:l,id:n});for(let g of l)r[g]=r[g]||[],r[g].push(n)}return{pagesWithTypes:i,pageMapping:r}}function yb({x:e,y:t,highlight:i,annoMode:r,onCreated:n,debug:a,virtualSizes:l,highlightCssClass:u,defaultChoices:h,isStatic:g,textSelectionEnabled:p,textEnabled:y,disableThumbnail:S,skipSizes:C,rotation:_,useFloorCalc:T}){var L;let O=pn(),E=fn(),F=kl(E,["deep-zoom"]),[z]=MR(),U=Bt(),q=Ee(()=>Ah(U),[U]),[G,V]=yT({strategies:["images","media"],defaultChoices:h==null?void 0:h.map(({id:me})=>me)}),ae=Sh((O==null?void 0:O.id)||(E==null?void 0:E.id)),H=ki((me,ye)=>ae.availablePageIds.map(Re=>ye.get(Re)),[...ae.availablePageIds]);de(()=>{let me=uI(U);if(E!=null&&E.id){let ye=(h==null?void 0:h.map(({id:J})=>J))||[],Re=me.getAllPaintingAnnotations(E.id);for(let J of Re){if(J.type!=="Annotation")throw new Error("getPaintables() accept either a canvas or list of annotations");let Ae=Array.from(Array.isArray(J.body)?J.body:[J.body]);for(let Oe of Ae){let[Ge,{selector:it}]=gy(Oe),ie=U.get(Ge);if((ie.type||"unknown").toLowerCase()!=="choice")continue;let Le=U.get(ie.items),$t=ye.length?ye.map(Wt=>Le.find(yt=>yt.id===Wt)).filter(Boolean):[Le[0]];$t.length===0&&$t.push(Le[0]);let Qt={type:"single-choice",items:Le.map(Wt=>({id:Wt.id,label:Wt.label,selected:$t.indexOf(Wt)!==-1})),label:Ge.label};Jn.emit("onChoiceChange",{choice:Qt,partOf:{canvasId:E.id,choiceId:ie.id,manifestId:O==null?void 0:O.id}})}}me.extractChoices(E.id)}},[E==null?void 0:E.id,V,h]);let se=Ee(()=>BR(ae.availablePageIds,U),H),ce=(L=se.pageMapping.supplementing)!=null&&L.length?se.pageMapping.supplementing[0]:null;de(()=>{let me=Jn.on("onMakeChoice",ye=>{V.makeChoice(ye.id,ye.options)});return()=>{me()}},[V]),de(()=>{if(y){let me=[];for(let ye of ae.availablePageIds)U.requestStatus(ye)||me.push(U.load(ye))}},[E==null?void 0:E.id,y]),de(()=>{if(h)for(let me of h)typeof me.opacity<"u"&&q.applyStyles({id:me.id},"atlas",{opacity:me.opacity})},[h]);let he=xT({maxWidth:256,maxHeight:256});if(!E)return null;if(G.type==="media"){if(G.media.type!=="Sound"&&G.media.type!=="Video")throw new Error("Unknown media type");return $(qs,A({key:G.type,height:E.height||1e3,width:E.width||1e3,x:e,y:t},F),G.media.type==="Sound"?$(zR,{media:G.media}):null,G.media.type==="Video"?$(NR,{media:G.media}):null)}if(G.type==="unknown"){if(he&&he.type==="fixed")return $(qs,{height:E.height,width:E.width,x:e,y:t},$(Uo,{uri:he.id,target:{x:0,y:0,width:E.width,height:E.height},display:he.width&&he.height?{width:he.width,height:he.height}:void 0}));throw new Error("Unknown image strategy")}let _e=$(et,null,r?$(um,{onCreate:me=>{n&&n(me)}}):null,i&&i.selector&&i.selector.type==="BoxSelector"?$(Wo,{id:"highlight",isEditing:!0,onClick:()=>{},onSave:()=>{},region:i.selector.spatial,style:u?void 0:{border:"3px solid red"},className:u}):null,z?$(fb,{page:z,textSelectionEnabled:p}):null,G.annotations&&G.annotations.pages?G.annotations.pages.map(me=>$(fb,{key:me.id,page:me,textSelectionEnabled:p})):null,a?$(OR,null):null,y&&ce?$(jR,{annotationPageId:ce,selectionEnabled:p}):null);return $(qs,A({key:G.type,height:E.height,width:E.width,x:e,y:t},F),G.type==="images"?G.images.map((me,ye)=>$(gb,{isStatic:g,key:me.id,image:me,id:me.id,rotation:_,annotationId:me.annotationId,thumbnail:ye===0&&!S?he:void 0,virtualSizes:l,annotations:_e,skipSizes:C,skipThumbnail:S,useFloorCalc:T})):null)}Qe(),Xe(),Qe();function zl({error:e,resetErrorBoundary:t,aspectRatio:i,height:r=512,width:n}){let a=i?{paddingTop:`${i*100}%`}:{height:r,width:n},l="img";return de(()=>{console.error(e),T0.emit("onErrorEvent",{message:e==null?void 0:e.message,error:e})},[e]),$("slot",{name:"fallback"},$("div",{role:"alert",style:A({background:"#000",color:"#fff",display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center",fontFamily:"monospace"},a)},$("div",{style:{padding:"1em",textAlign:"center"}},$(l,{className:"img-oops",part:"image-oops",width:11*3,height:8*3,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAICAYAAAAvOAWIAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAC6ADAAQAAAABAAAACAAAAADGHiDWAAAAO0lEQVQYGWP4DwQMQACjQWxkABOH0TgVwjRhKIQLwFRAaZg4jEaTphKXEWYOPmsYgQCmjnQPwnXiYQAAP/M3zvinPKAAAAAASUVORK5CYII="}),$("h2",null,"Unable to load image"),$("pre",null,e==null?void 0:e.message),t?$("button",{style:{color:"#fff",border:"2px solid #fff",background:"#000",fontFamily:"monospace",padding:"0.25em 1em"},onClick:t},"Try again"):null,$("style",null,".img-oops { border: 3px solid white; padding: 15px; image-rendering: auto; image-rendering: crisp-edges; image-rendering: pixelated; margin-bottom: 10px; }"))))}function DR(e,t){var i=e,{unit:r}=i,n=le(i,["unit"]);return r==="percent"?{x:t.width*(n.x/100),y:t.height*(n.y/100),width:t.width*(n.width/100),height:t.height*(n.height/100)}:n}Xe(),Qe();var UR=vh;function WR(e){let t=oy(),i=SP(),r=bh(),n=Se(!1),a=Se();Do(h=>(a.current=h,h.sequence=i,n.current||(n.current=!0,h.dispatchEvent(new CustomEvent("sequence",{detail:i}))),{}),[i]),de(()=>{a.current&&(Jn.emit("onResetSeen"),a.current.dispatchEvent(new CustomEvent("sequence-change",{detail:{index:i.currentSequenceIndex,total:i.sequence.length}})))},[i.currentSequenceIndex,r]);let l=0,u=t.map((h,g)=>{let p=l;return l+=h.width+(e.margin||0),$(UR,{key:h.id,canvas:h.id},$(yb,B(A({key:h.id},e),{x:p})))});return $(et,null,u)}var HR=DI.ErrorBoundary;function bb(e){let t=Bt(),i=Yn(),r=fn(),n=pn(),a=Sh((n==null?void 0:n.id)||(r==null?void 0:r.id)),[l,u]=Me(!1),h=e.rotation||0,g=!e.displayOptions.viewport&&r?e.displayOptions.homePosition?e.displayOptions.homePosition.width/e.displayOptions.homePosition.height:r.width/r.height:void 0;Do(_=>a?(_.annotationPageManager||(_.annotationPageManager={}),_.annotationPageManager.availablePageIds=a.availablePageIds,_.annotationPageManager.enabledPageIds=a.enabledPageIds,_.annotationPageManager.setPageEnabled=a.setPageEnabled,_.annotationPageManager.setPageDisabled=a.setPageDisabled,{}):{},[a.availablePageIds,a.enabledPageIds,a.setPageEnabled,a.setPageDisabled].join("/")),Rt(()=>{e.followAnnotations!==!1&&a.availablePageIds.map(_=>{t.requestStatus(_)||t.load(_)})},[a.availablePageIds,e.followAnnotations]),ki(_=>i.canvas?_.iiif.entities.Canvas[i.canvas]:null,[]);let[p,y]=Ee(()=>{let _=e.displayOptions,{width:T,height:L,homePosition:O,containerProps:E}=_,F=le(_,["width","height","homePosition","containerProps"]),z=e.displayOptions.homePosition&&r?DR(e.displayOptions.homePosition,r):null;return z&&(F.homePosition=z),T&&(F.width=T),L&&(F.height=L),[F,E]},[e.displayOptions,r]),S=_=>{_.altKey&&_.code==="KeyB"&&u(!0)},C=e.renderMultiple?WR:yb;return $(HR,{fallbackRender:_=>$(zl,A({height:p.height,width:p.width,aspectRatio:g},_))},$(Uh,B(A({key:e.renderMultiple?"":r==null?void 0:r.id,aspectRatio:g,containerProps:A({onKeyDown:S},y||{}),className:e.className,background:e.background},p),{mode:l?"sketch":e.mode,homeCover:e.homeCover,homeOnResize:!!e.homeCover}),$(C,{isStatic:!e.interactive,debug:e.debug,virtualSizes:e.virtualSizes,highlight:e.highlight,highlightCssClass:e.highlightCssClass,annoMode:l,defaultChoices:e.defaultChoices,disableThumbnail:e.disableThumbnail,skipSizes:e.skipSizes,rotation:h,useFloorCalc:e.useFloorCalc,onCreated:_=>{n&&r&&_&&navigator.clipboard.writeText(Il({id:`${r.id}#xywh=${_.x},${_.y},${_.width},${_.height}`,type:"Canvas",partOf:[{id:n.id,type:"Manifest"}]})),u(!1)},x:e.x,y:e.y,textSelectionEnabled:e.textSelectionEnabled,textEnabled:e.textEnabled,margin:e.margin}),e.children))}Xe();function qR(e){return $("svg",A({width:"1em",height:"1em",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#000"},e),$("g",{transform:"translate(1 1)",strokeWidth:2,fill:"none",fillRule:"evenodd"},$("circle",{strokeOpacity:.5,cx:18,cy:18,r:18}),$("path",{d:"M36 18c0-9.94-8.06-18-18-18"},$("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}))))}Xe(),Qe();var QR=({manifestId:e,children:t})=>{let{manifest:i,isLoaded:r,error:n}=El(e,{});return de(()=>{n&&console.error(n)},[n]),n?$(zl,{error:new Error(`Unable to load Manifest: ${e} 
 
 ${n.toString()}`)}):!r||!i?$(qR,null):$(Cl,{manifest:i.id},t)};Qe();var wb=["width","height","target","region","highlight","highlight-css-class","disable-keyboard-navigation","click-to-enable-zoom","preferred-formats","atlas-mode","style-id","debug","preset","responsive","interactive","class","move-events","granular-move-events","a11y-title","a11y-role"],VR=[...wb,"manifest-id","canvas-id","choice-id","text-selection-enabled","disable-thumbnail","text-enabled","follow-annotations","iiif-content","home-cover","rotation","background"],GR=e=>{let{vault:t,webComponent:i,runtime:r,atlasProps:n,isConfigBlocking:a,setParsedTarget:l,highlight:u,highlightCssClass:h,preferredFormats:g,virtualSizes:p,viewport:y,debug:S,mode:C,interactive:_,x:T,y:L,homeCover:O,className:E,inlineStyles:F,inlineStyleSheet:z,useProp:U,useRegisterWebComponentApi:q,setMode:G,background:V}=Ol(e),[ae,H]=Me(void 0),se=Se([]),[ce,he]=Me(),[_e,,me]=U("iiifContent",{parse:Ll}),[ye,Re,,J]=U("canvasId"),[Ae,Oe,,Ge]=U("rotation",{parse:kr,defaultValue:0}),[it,ie,,Le]=U("manifestId"),[$t]=U("followAnnotations",{parse:dt,defaultValue:!0}),[Qt,,,Wt]=U("choiceId",{parse:DT}),[yt]=U("textSelectionEnabled",{parse:dt,defaultValue:!0}),[Et]=U("disableThumbnail",{parse:dt,defaultValue:!1}),[ai]=U("skipSizes",{parse:dt,defaultValue:!1}),[ei]=U("textEnabled",{parse:dt,defaultValue:!1}),[Ft]=U("useFloorCalc",{parse:dt,defaultValue:!1}),Xt=_e&&_e.type!=="remote-content-state"?_e:null,mt=_e&&_e.type==="remote-content-state"?_e.id:null,Fe=De(Ue=>{i.current&&(Jn.emit("onResetSeen"),i.current.dispatchEvent(new CustomEvent("canvas-change",{detail:{canvas:Ue}})))},[]),We=De(Ue=>{if(ae){let Ze={id:`${ye}#xywh=${Tl(Ue.x)},${Tl(Ue.y)},${Ue.width},${Ue.height}`,type:"Canvas",partOf:[{id:it,type:"Manifest"}]},at={contentState:Ze,normalisedContentState:Ds(Ze),encodedContentState:Il(Ze),selection:{type:"BoxSelector",spatial:Ue}};se.current.push(at),ae(at)}},[ae,it,ye]);if(q(Ue=>({vault:t,setCanvas:Ze=>{Ue.setAttribute("canvas-id",Ze)},setManifest:Ze=>{Ue.setAttribute("manifest-id",Ze)},setDefaultChoiceIds:Ze=>{Ue.setAttribute("choice-id",Ze.join(","))},getDefaultChoiceIds(){return(Wt.current||[]).map(({id:Ze})=>Ze)},getCanvasId(){return J.current},getContentState(){var Ze,at,tt,Mi;let es=Le!=null&&Le.current?Le==null?void 0:Le.current:it,ts={id:`${J!=null&&J.current?J==null?void 0:J.current:ye}#xywh=${(Ze=r.current)==null?void 0:Ze.x},${(at=r.current)==null?void 0:at.y},${(tt=r.current)==null?void 0:tt.width},${(Mi=r.current)==null?void 0:Mi.height}`,type:"Canvas",partOf:[{id:es,type:"Manifest"}]};return{contentState:ts,normalisedContentState:Ds(ts),encodedContentState:Il(ts)}},getPosition(){var Ze,at,tt,Mi;return{x:(Ze=r.current)==null?void 0:Ze.x,y:(at=r.current)==null?void 0:at.y,width:(tt=r.current)==null?void 0:tt.width,height:(Mi=r.current)==null?void 0:Mi.height}},getManifestId(){return Le.current},disableTextSelection(){Ue.setAttribute("text-selection-enabled","false")},enableTextSelection(){Ue.setAttribute("text-selection-enabled","true")},enableText(){Ue.setAttribute("text-enabled","true")},disableText(){Ue.setAttribute("text-enabled","true")},easingFunctions(){return Er},getContentStateStack(){return se.current},transition(Ze){var at,tt;(at=r.current)!=null&&at.transitionManager&&Ze((tt=r.current)==null?void 0:tt.transitionManager)},enableContentStateSelection(Ze){G("sketch"),H(at=>at||Ze)},disableContentStateSelection(){H(void 0),G("explore"),se.current=[]},setContentStateFromText(Ze,at=!1){if(Ze==null||Ze.trim()==="")return;let tt=Ds(Rl(Ze));tt.immediate=at;let Mi=tt.target[0];J.current===Mi.source.id?r.current&&tt.target&&tt.target[0]&&tt.target[0].selector&&tt.target[0].selector.type==="BoxSelector"&&r.current.world.gotoRegion(B(A({},tt.target[0].selector.spatial),{immediate:at})):me(tt)}})),Rt(()=>{mt&&!ce&&fetch(mt).then(Ue=>Ue.json()).then(Ue=>{me(Ll(Ue))}).catch(Ue=>{console.error(Ue),he(new Error(`Failed to load content state from ${mt} 

 ${Ue.toString()}`))})},[mt,ce]),Rt(()=>{if(Xt&&Xt.target.length){let Ue=Xt.target[0];if(Ue.type==="SpecificResource"&&Ue.source.type==="Canvas"){let Ze=(Ue.source.partOf||[]).find(at=>at.type==="Manifest");if(Re(Ue.source.id),Ze&&ie(Ze.id),Ue.selector&&r.current&&i.current)if(Ue.selector.type==="BoxSelector"){let{x:at,y:tt,width:Mi,height:es}=Ue.selector.spatial;r.current.world.gotoRegion({x:at,y:tt,width:Mi,height:es,immediate:Xt.immediate})}else l(Ue)}}},[Xt]),de(()=>{Fe(ye)},[ye]),a)return null;if(ce)return $(zl,{error:ce,resetErrorBoundary:()=>he(null)});let rt=ye?$(vh,{canvas:ye},$(bb,{key:`${ye}-${y?"v1":"v0"}`,interactive:_,defaultChoices:Qt,followAnnotations:$t,className:E,highlight:u,debug:S,background:V,virtualSizes:p,highlightCssClass:h,canvasId:ye,displayOptions:n,mode:C,rotation:Ae||0,x:T,y:L,textEnabled:ei,textSelectionEnabled:yt,disableThumbnail:Et,skipSizes:ai,homeCover:O,useFloorCalc:Ft},$("slot",{name:"atlas"}),ae?$(um,{onCreate:We}):null),$("slot",null)):null;return $(Wh.Provider,{value:e.__registerPublicApi},$(dn,{vault:t},$(vb,null,it?$(QR,{manifestId:it},rt):rt)),F?$("style",null,F):null,z?$("link",{rel:"stylesheet",href:z}):null)};typeof window<"u"&&In(GR,"canvas-panel",VR,{shadow:!0,onConstruct(e){Object.defineProperty(e,"vault",{get(){return e._props.vault},set(t){e._props.vault=t}}),e._props={__registerPublicApi:t=>{Object.assign(e,t(e))}}}}),Xe(),Qe();var YR=Be(tf()),XR=YR.ErrorBoundary;function ZR(e){let{atlasProps:t,isConfigBlocking:i,setIsReady:r,preferredFormats:n,virtualSizes:a,height:l,width:u,className:h,inlineStyles:g,inlineStyleSheet:p,viewport:y,vault:S,useProp:C,interactive:_,x:T,y:L,homeCover:O,background:E,highlight:F,highlightCssClass:z}=Ol(e),[U]=C("src"),[q]=C("nested",{parse:dt}),[G]=C("rotation",{parse:kr}),[V,ae]=C("tileFormat"),[H]=C("skipSizes",{parse:dt}),[se]=C("disableThumbnail",{parse:dt}),[ce,he]=yy(),_e=he[U],me=Ee(()=>{let Re=ce({id:U},{});return Re&&Re.preferredFormats&&Re.preferredFormats.length===1&&ae(Re.preferredFormats[0]),Re&&Re.height&&Re.width&&_e!=="loading"?{id:U,width:Re.width,height:Re.height,service:Re,type:"Image",selector:{type:"BoxSelector",spatial:{x:0,y:0,width:Re.width,height:Re.height}},target:{type:"BoxSelector",spatial:{x:0,y:0,width:Re.width,height:Re.height}}}:null},[ce,U,he]);if(!me||!me.height||!me.width||i)return null;let ye=y?void 0:t.homePosition?t.homePosition.width/t.homePosition.height:me.width/me.height;return $(XR,{fallbackRender:Re=>$(zl,A({height:l,width:u,aspectRatio:ye},Re))},$(dn,{vault:S},$(Uh,A({onCreated:()=>{r(!0)},viewport:!0,aspectRatio:ye,className:h,nested:q,homeCover:O,background:E,homeOnResize:!!O,rotation:G},t),$(gb,{key:me.id,image:me,id:me.id,isStatic:!_,virtualSizes:a,skipSizes:H,skipThumbnail:se,x:T,y:L,rotation:G,tileFormat:V,annotations:F&&F.selector&&F.selector.type==="BoxSelector"?$(Wo,{id:"highlight",isEditing:!1,interactive:!1,onClick:()=>{},onSave:()=>{},region:F.selector.spatial,style:z?void 0:{border:"3px solid red"},className:z}):void 0}))),g?$("style",null,g):null,p?$("link",{rel:"stylesheet",href:p}):null,e.children?$("slot",null,e.children):null)}function KR(e){let t=Ee(()=>new hb,[]);return $(vy.Provider,{value:t},$(ZR,A({},e)))}typeof window<"u"&&In(KR,"image-service",["src","nested","x","y","width","height","target","region","highlight","highlight-css-class","text-selection-enabled","disable-keyboard-navigation","click-to-enable-zoom","preferred-formats","atlas-mode","style-id","debug","preset","responsive","interactive","iiif-content","class","choice-id","move-events","granular-move-events","home-cover","tile-format","rotation","background"],{shadow:!0,onConstruct(e){e._props={__registerPublicApi:t=>{Object.assign(e,t(e))}}}}),Xe(),Qe();var JR=[...wb,"manifest-id","range-id","start-canvas","paging-enabled","text-selection-enabled","text-enabled","follow-annotations","margin","background"];function eL(e){let{vault:t,webComponent:i,runtime:r,atlasProps:n,isConfigBlocking:a,setParsedTarget:l,highlight:u,highlightCssClass:h,preferredFormats:g,virtualSizes:p,viewport:y,debug:S,mode:C,interactive:_,x:T,y:L,className:O,inlineStyles:E,inlineStyleSheet:F,useProp:z,useRegisterWebComponentApi:U,setMode:q,background:G}=Ol(e),[V,ae,,H]=z("manifestId"),[se,,,ce]=z("rangeId"),[he,_e,,me]=z("startCanvas"),[ye]=z("margin",{parse:kr,defaultValue:0}),[Re]=z("pagingEnabled",{parse:dt,defaultValue:!0}),[J]=z("textSelectionEnabled",{parse:dt,defaultValue:!0}),[Ae]=z("textEnabled",{parse:dt,defaultValue:!1}),[Oe]=z("followAnnotations",{parse:dt,defaultValue:!0}),[Ge,,it]=z("iiifContent",{parse:Ll}),ie=Ge&&Ge.type!=="remote-content-state"?Ge:null,Le=Ge&&Ge.type==="remote-content-state"?Ge.id:null,[$t,Qt]=Me(),[Wt]=z("skipSizes",{parse:dt,defaultValue:!1});return U(yt=>({vault:t,setManifest:Et=>{yt.setAttribute("manifest-id",Et)},setRange:Et=>{yt.setAttribute("range-id",Et)},getRangeId(){return ce.current},getContentState(){let Et=H!=null&&H.current?H==null?void 0:H.current:V,ai=i.current.sequence,ei=ai.items[ai.sequence[ai.currentSequenceIndex][0]].id,{x:Ft,y:Xt,width:mt,height:Fe}=(r==null?void 0:r.current)||{},We={id:`${ei}#xywh=${Tl(Ft)},${Tl(Xt)},${mt},${Fe}`,type:"Canvas",partOf:[{id:Et,type:"Manifest"}]};return{contentState:We,normalisedContentState:Ds(We),encodedContentState:Il(We)}},setContentStateFromText(Et,ai=!1){if(Et==null||Et.trim()==="")return;let ei=Ds(Rl(Et));ei.immediate=ai,it(ei)},getManifestId(){return H.current},disableTextSelection(){yt.setAttribute("text-selection-enabled","false")},enableTextSelection(){yt.setAttribute("text-selection-enabled","true")},enableText(){yt.setAttribute("text-enabled","true")},disableText(){yt.setAttribute("text-enabled","true")}})),Rt(()=>{Le&&!$t&&fetch(Le).then(yt=>yt.json()).then(yt=>{it(Ll(yt))}).catch(yt=>{console.error(yt),Qt(new Error(`Failed to load content state from ${Le} 

 ${yt.toString()}`))})},[Le,$t]),Rt(()=>{var yt;if(ie&&ie.target.length){let Et=ie.target[0];if(Et.type==="SpecificResource"&&Et.source.type==="Canvas"){let ai=(Et.source.partOf||[]).find(ei=>ei.type==="Manifest");if(i.current.sequence.setCurrentCanvasId(Et.source.id),ai&&ae(ai.id),Et.selector&&Et.selector.type==="BoxSelector"){let{x:ei,y:Ft,width:Xt,height:mt}=Et.selector.spatial;(yt=r==null?void 0:r.current)==null||yt.world.gotoRegion({x:ei,y:Ft,width:Xt,height:mt,immediate:ie.immediate})}}}},[ie]),!V||a?null:$(Wh.Provider,{value:e.__registerPublicApi},$(dn,{vault:t},$(vb,null,$(_P,{manifest:V,startCanvas:he,rangeId:se,pagingEnabled:Re},$(bb,{renderMultiple:!0,key:`${he}-${y?"v1":"v0"}`,background:G,interactive:_,followAnnotations:Oe,className:O,highlight:u,debug:S,virtualSizes:p,highlightCssClass:h,displayOptions:n,mode:C,textEnabled:Ae,skipSizes:Wt,textSelectionEnabled:J,margin:ye},$("slot",{name:"atlas"})),$("slot",null)))),E?$("style",null,E):null,F?$("link",{rel:"stylesheet",href:F}):null)}typeof window<"u"&&In(eL,"sequence-panel",JR,{shadow:!0,onConstruct(e){Object.defineProperty(e,"vault",{get(){return e._props.vault},set(t){e._props.vault=t}}),e._props={__registerPublicApi:t=>{Object.assign(e,t(e))}}}}),Xe(),Qe(),Xe();var tL=({metadata:e=[],config:t,variation:i="table",labelWidth:r=16,bordered:n,labelStyle:a,showEmptyMessage:l,allowHtml:u,separator:h})=>{let g={separator:h},p=Ee(()=>{let y=(t||[]).reduce((C,_)=>[...C,..._.keys],[]),S={};for(let C of e){let _=C&&C.label?Object.values(C.label):[];for(let T of _)if(T&&T.length&&(y.indexOf(`metadata.${T[0]}`)!==-1||y.length===0)&&C){let L=`metadata.${T[0]}`;S[L]=S[L]?S[L]:[],S[L].push(C);break}}return S},[t,e]);return Object.keys(p).length===0&&l?$("slot",{name:"empty"}):t&&t.length?$("table",{"data-variation":i,"data-label-style":a,"data-bordered":n},$("slot",{slot:"header"}),$("tbody",null,t.map((y,S)=>{let C=[];for(let _ of y.keys)for(let T of p[_]||[])C.push($("div",{key:S+"__"+_},u?$("span",{dangerouslySetInnerHTML:{__html:Ar(T.value,g)}}):Ar(T.value,g)));return C.length===0?null:$("tr",{className:"metadata-row",key:S},$("td",{className:"metadata-key",style:r?{minWidth:r}:{}},u?$("span",{dangerouslySetInnerHTML:{__html:Ar(y.label,g)}}):Ar(y.label,g)),$("td",{className:"metadata-value"},C))})),$("slot",{name:"footer"})):$("table",{"data-variation":i,"data-label-style":a,"data-bordered":n},$("slot",{name:"header"}),$("tbody",null,e&&e.length?e.map((y,S)=>y?$("tr",{className:"metadata-row",key:S},$("td",{className:"metadata-key",style:r?{minWidth:r}:{}},u?$("span",{dangerouslySetInnerHTML:{__html:Ar(y.label,g)}}):Ar(y.label,g)),$("td",{className:"metadata-value"},u?$("span",{dangerouslySetInnerHTML:{__html:Ar(y.value,g)}}):Ar(y.value,g))):null):$("slot",{name:"empty-table"})),$("slot",{name:"footer"}))};function iL(e){let t=Pl(),i=e.vault||t||Bh(),[r]=je(e.manifestId),[n]=je(e.variation),[a]=je(e.labelStyle),[l]=je(e.separator),[u]=je(e.labelWidth,{parse:kr}),[h]=je(e.bordered,{parse:dt,defaultValue:!1}),[g]=je(e.allowHtml,{parse:dt,defaultValue:!1}),[p]=je(e.showEmptyMessage,{parse:dt,defaultValue:!1});return r?$(et,null,$(dn,{vault:i},$(Cl,{manifest:r},$(rL,{manifestId:r,variation:n,labelStyle:a,labelWidth:u,bordered:h,showEmptyMessage:p,allowHtml:g,separator:l})))):$("slot",{name:"no-manifest"})}function rL(e){let{manifest:t}=El(e.manifestId);return $(tL,B(A({},e),{metadata:t==null?void 0:t.metadata}))}var nL=["manifest-id","config-id","variation","label-style","label-width","bordered","show-empty-message"];typeof window<"u"&&In(iL,"metadata-panel",nL,{shadow:!1,onConstruct(e){Object.defineProperty(e,"vault",{get(){return e._props.vault},set(t){e._props.vault=t}}),e._props={__registerPublicApi:t=>{Object.assign(e,t(e))}}}}),Xe(),Qe(),Xe();function xb(e){var t;let i=bh(),r=Bt(),n=Ee(()=>i==null?void 0:i.items.find(h=>h.type==="Canvas"),[i]),a=Ee(()=>!!(i!=null&&i.items.find(h=>h.type==="Range")),[i]),l=e.selected&&e.selected===(i==null?void 0:i.id);function u(){var h,g;if(i&&e.onRangeClick){let p={isLeaf:!a};if(n){let[y,S]=(h=n.id)==null?void 0:h.split("#");p.selector=n.id,p.canvasId=y,p.fragment=S}else if(i){let y=n0(r,i);if(y){let[S,C]=(g=y.id)==null?void 0:g.split("#");p.selector=y.id,p.canvasId=S,p.fragment=C}}if(p.selector)try{p.parsedSelector=Oh(p.selector)}catch{}e.onRangeClick(i,p)}}return i?$("ul",{className:"range-item-container","data-leaf":!a,"data-selected":l,"data-with-selector":((t=n==null?void 0:n.id)==null?void 0:t.indexOf("#"))!==-1,"data-range-id":i.id},i.label?$("li",{className:"range-split",onClick:u},$("span",{className:"range-label"},Ar(i.label))):null,a?$("div",{className:"range-nested-container"},i.items.map(h=>h.type==="Canvas"||h.type==="SpecificResource"||!h.id?null:$(yh,{key:h.id,range:h.id},$(xb,{onRangeClick:e.onRangeClick,selected:e.selected})))):null):null}Xe(),Qe();function sL(e){let t=pn(),i=Bt();if(!t)throw new Error("No manifest");let r=e.canvasId?cI(i,t,e.canvasId):e.selectedRange?i.get(e.selectedRange):void 0;return Rt(()=>{if(r&&e.autoScroll){let n=document.querySelector(`[data-range-id="${r.id}"]`);n&&n.scrollIntoView({block:"nearest",behavior:"auto"})}},[r]),!t||!t.structures.length?$("slot",{name:"no-range"}):$(et,null,r?$("div",{className:"range-current"},Ar(r.label)):null,t.structures.map(n=>$(yh,{key:n.id,range:n.id},$(xb,{selected:r==null?void 0:r.id,onRangeClick:e.onRangeClick}))))}Qe();function oL(e){let t=Pl(),i=e.vault||t||Bh(),[r]=je(e.manifestId),[n]=je(e.canvasId),[a]=je(e.selectedRange),[l]=je(e.autoScroll,{parse:dt,defaultValue:!0}),[u,h]=Me();if(Rt(()=>{e.__registerPublicApi&&e.__registerPublicApi(p=>(h(p),{}))},[]),!r)return $("slot",{name:"no-manifest"});function g(p,y){u&&u.dispatchEvent(new CustomEvent("range-change",{detail:{range:p,isLeaf:y.isLeaf,canvasId:y.canvasId,fragment:y.fragment,selector:y.selector,parsedSelector:y.parsedSelector}}))}return $(et,null,$(dn,{vault:i},$(aL,{manifestId:r,canvasId:n,selectedRange:a,autoScroll:l,onRangeClick:g})))}function aL(e){let{manifest:t,isLoaded:i}=El(e.manifestId);return!t||!i?null:$(Cl,{manifest:t.id},$(sL,A({},e)))}var lL=["manifest-id","config-id","canvas-id","auto-scroll","selected-range"];typeof window<"u"&&In(oL,"range-panel",lL,{shadow:!1,onConstruct(e){Object.defineProperty(e,"vault",{get(){return e._props.vault},set(t){e._props.vault=t}}),e._props={__registerPublicApi:t=>{Object.assign(e,t(e))}}}})})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ou=window,Cp=Ou.ShadowRoot&&(Ou.ShadyCSS===void 0||Ou.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,kp=Symbol(),cw=new WeakMap;let Ew=class{constructor(w,f,v){if(this._$cssResult$=!0,v!==kp)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=w,this.t=f}get styleSheet(){let w=this.o;const f=this.t;if(Cp&&w===void 0){const v=f!==void 0&&f.length===1;v&&(w=cw.get(f)),w===void 0&&((this.o=w=new CSSStyleSheet).replaceSync(this.cssText),v&&cw.set(f,w))}return w}toString(){return this.cssText}};const EO=R=>new Ew(typeof R=="string"?R:R+"",void 0,kp),CO=(R,...w)=>{const f=R.length===1?R[0]:w.reduce((v,x,k)=>v+(I=>{if(I._$cssResult$===!0)return I.cssText;if(typeof I=="number")return I;throw Error("Value passed to 'css' function must be a 'css' function result: "+I+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(x)+R[k+1],R[0]);return new Ew(f,R,kp)},kO=(R,w)=>{Cp?R.adoptedStyleSheets=w.map(f=>f instanceof CSSStyleSheet?f:f.styleSheet):w.forEach(f=>{const v=document.createElement("style"),x=Ou.litNonce;x!==void 0&&v.setAttribute("nonce",x),v.textContent=f.cssText,R.appendChild(v)})},hw=Cp?R=>R:R=>R instanceof CSSStyleSheet?(w=>{let f="";for(const v of w.cssRules)f+=v.cssText;return EO(f)})(R):R;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var lp;const Mu=window,dw=Mu.trustedTypes,AO=dw?dw.emptyScript:"",pw=Mu.reactiveElementPolyfillSupport,gp={toAttribute(R,w){switch(w){case Boolean:R=R?AO:null;break;case Object:case Array:R=R==null?R:JSON.stringify(R)}return R},fromAttribute(R,w){let f=R;switch(w){case Boolean:f=R!==null;break;case Number:f=R===null?null:Number(R);break;case Object:case Array:try{f=JSON.parse(R)}catch{f=null}}return f}},Cw=(R,w)=>w!==R&&(w==w||R==R),up={attribute:!0,type:String,converter:gp,reflect:!1,hasChanged:Cw},mp="finalized";let lo=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(w){var f;this.finalize(),((f=this.h)!==null&&f!==void 0?f:this.h=[]).push(w)}static get observedAttributes(){this.finalize();const w=[];return this.elementProperties.forEach((f,v)=>{const x=this._$Ep(v,f);x!==void 0&&(this._$Ev.set(x,v),w.push(x))}),w}static createProperty(w,f=up){if(f.state&&(f.attribute=!1),this.finalize(),this.elementProperties.set(w,f),!f.noAccessor&&!this.prototype.hasOwnProperty(w)){const v=typeof w=="symbol"?Symbol():"__"+w,x=this.getPropertyDescriptor(w,v,f);x!==void 0&&Object.defineProperty(this.prototype,w,x)}}static getPropertyDescriptor(w,f,v){return{get(){return this[f]},set(x){const k=this[w];this[f]=x,this.requestUpdate(w,k,v)},configurable:!0,enumerable:!0}}static getPropertyOptions(w){return this.elementProperties.get(w)||up}static finalize(){if(this.hasOwnProperty(mp))return!1;this[mp]=!0;const w=Object.getPrototypeOf(this);if(w.finalize(),w.h!==void 0&&(this.h=[...w.h]),this.elementProperties=new Map(w.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const f=this.properties,v=[...Object.getOwnPropertyNames(f),...Object.getOwnPropertySymbols(f)];for(const x of v)this.createProperty(x,f[x])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(w){const f=[];if(Array.isArray(w)){const v=new Set(w.flat(1/0).reverse());for(const x of v)f.unshift(hw(x))}else w!==void 0&&f.push(hw(w));return f}static _$Ep(w,f){const v=f.attribute;return v===!1?void 0:typeof v=="string"?v:typeof w=="string"?w.toLowerCase():void 0}_$Eu(){var w;this._$E_=new Promise(f=>this.enableUpdating=f),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(w=this.constructor.h)===null||w===void 0||w.forEach(f=>f(this))}addController(w){var f,v;((f=this._$ES)!==null&&f!==void 0?f:this._$ES=[]).push(w),this.renderRoot!==void 0&&this.isConnected&&((v=w.hostConnected)===null||v===void 0||v.call(w))}removeController(w){var f;(f=this._$ES)===null||f===void 0||f.splice(this._$ES.indexOf(w)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((w,f)=>{this.hasOwnProperty(f)&&(this._$Ei.set(f,this[f]),delete this[f])})}createRenderRoot(){var w;const f=(w=this.shadowRoot)!==null&&w!==void 0?w:this.attachShadow(this.constructor.shadowRootOptions);return kO(f,this.constructor.elementStyles),f}connectedCallback(){var w;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(w=this._$ES)===null||w===void 0||w.forEach(f=>{var v;return(v=f.hostConnected)===null||v===void 0?void 0:v.call(f)})}enableUpdating(w){}disconnectedCallback(){var w;(w=this._$ES)===null||w===void 0||w.forEach(f=>{var v;return(v=f.hostDisconnected)===null||v===void 0?void 0:v.call(f)})}attributeChangedCallback(w,f,v){this._$AK(w,v)}_$EO(w,f,v=up){var x;const k=this.constructor._$Ep(w,v);if(k!==void 0&&v.reflect===!0){const I=(((x=v.converter)===null||x===void 0?void 0:x.toAttribute)!==void 0?v.converter:gp).toAttribute(f,v.type);this._$El=w,I==null?this.removeAttribute(k):this.setAttribute(k,I),this._$El=null}}_$AK(w,f){var v;const x=this.constructor,k=x._$Ev.get(w);if(k!==void 0&&this._$El!==k){const I=x.getPropertyOptions(k),M=typeof I.converter=="function"?{fromAttribute:I.converter}:((v=I.converter)===null||v===void 0?void 0:v.fromAttribute)!==void 0?I.converter:gp;this._$El=k,this[k]=M.fromAttribute(f,I.type),this._$El=null}}requestUpdate(w,f,v){let x=!0;w!==void 0&&(((v=v||this.constructor.getPropertyOptions(w)).hasChanged||Cw)(this[w],f)?(this._$AL.has(w)||this._$AL.set(w,f),v.reflect===!0&&this._$El!==w&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(w,v))):x=!1),!this.isUpdatePending&&x&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(f){Promise.reject(f)}const w=this.scheduleUpdate();return w!=null&&await w,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var w;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((x,k)=>this[k]=x),this._$Ei=void 0);let f=!1;const v=this._$AL;try{f=this.shouldUpdate(v),f?(this.willUpdate(v),(w=this._$ES)===null||w===void 0||w.forEach(x=>{var k;return(k=x.hostUpdate)===null||k===void 0?void 0:k.call(x)}),this.update(v)):this._$Ek()}catch(x){throw f=!1,this._$Ek(),x}f&&this._$AE(v)}willUpdate(w){}_$AE(w){var f;(f=this._$ES)===null||f===void 0||f.forEach(v=>{var x;return(x=v.hostUpdated)===null||x===void 0?void 0:x.call(v)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(w)),this.updated(w)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(w){return!0}update(w){this._$EC!==void 0&&(this._$EC.forEach((f,v)=>this._$EO(v,this[v],f)),this._$EC=void 0),this._$Ek()}updated(w){}firstUpdated(w){}};lo[mp]=!0,lo.elementProperties=new Map,lo.elementStyles=[],lo.shadowRootOptions={mode:"open"},pw==null||pw({ReactiveElement:lo}),((lp=Mu.reactiveElementVersions)!==null&&lp!==void 0?lp:Mu.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var cp;const zu=window,ho=zu.trustedTypes,fw=ho?ho.createPolicy("lit-html",{createHTML:R=>R}):void 0,vp="$lit$",An=`lit$${(Math.random()+"").slice(9)}$`,kw="?"+An,PO=`<${kw}>`,vs=document,ga=()=>vs.createComment(""),ma=R=>R===null||typeof R!="object"&&typeof R!="function",Aw=Array.isArray,TO=R=>Aw(R)||typeof(R==null?void 0:R[Symbol.iterator])=="function",hp=`[ 	
\f\r]`,da=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,gw=/-->/g,mw=/>/g,fs=RegExp(`>|${hp}(?:([^\\s"'>=/]+)(${hp}*=${hp}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),vw=/'/g,yw=/"/g,Pw=/^(?:script|style|textarea|title)$/i,IO=R=>(w,...f)=>({_$litType$:R,strings:w,values:f}),va=IO(1),ys=Symbol.for("lit-noChange"),qt=Symbol.for("lit-nothing"),bw=new WeakMap,gs=vs.createTreeWalker(vs,129,null,!1);function Tw(R,w){if(!Array.isArray(R)||!R.hasOwnProperty("raw"))throw Error("invalid template strings array");return fw!==void 0?fw.createHTML(w):w}const RO=(R,w)=>{const f=R.length-1,v=[];let x,k=w===2?"<svg>":"",I=da;for(let M=0;M<f;M++){const j=R[M];let Y,re,A=-1,B=0;for(;B<j.length&&(I.lastIndex=B,re=I.exec(j),re!==null);)B=I.lastIndex,I===da?re[1]==="!--"?I=gw:re[1]!==void 0?I=mw:re[2]!==void 0?(Pw.test(re[2])&&(x=RegExp("</"+re[2],"g")),I=fs):re[3]!==void 0&&(I=fs):I===fs?re[0]===">"?(I=x??da,A=-1):re[1]===void 0?A=-2:(A=I.lastIndex-re[2].length,Y=re[1],I=re[3]===void 0?fs:re[3]==='"'?yw:vw):I===yw||I===vw?I=fs:I===gw||I===mw?I=da:(I=fs,x=void 0);const Pe=I===fs&&R[M+1].startsWith("/>")?" ":"";k+=I===da?j+PO:A>=0?(v.push(Y),j.slice(0,A)+vp+j.slice(A)+An+Pe):j+An+(A===-2?(v.push(void 0),M):Pe)}return[Tw(R,k+(R[f]||"<?>")+(w===2?"</svg>":"")),v]};class ya{constructor({strings:w,_$litType$:f},v){let x;this.parts=[];let k=0,I=0;const M=w.length-1,j=this.parts,[Y,re]=RO(w,f);if(this.el=ya.createElement(Y,v),gs.currentNode=this.el.content,f===2){const A=this.el.content,B=A.firstChild;B.remove(),A.append(...B.childNodes)}for(;(x=gs.nextNode())!==null&&j.length<M;){if(x.nodeType===1){if(x.hasAttributes()){const A=[];for(const B of x.getAttributeNames())if(B.endsWith(vp)||B.startsWith(An)){const Pe=re[I++];if(A.push(B),Pe!==void 0){const le=x.getAttribute(Pe.toLowerCase()+vp).split(An),lt=/([.?@])?(.*)/.exec(Pe);j.push({type:1,index:k,name:lt[2],strings:le,ctor:lt[1]==="."?OO:lt[1]==="?"?FO:lt[1]==="@"?MO:ju})}else j.push({type:6,index:k})}for(const B of A)x.removeAttribute(B)}if(Pw.test(x.tagName)){const A=x.textContent.split(An),B=A.length-1;if(B>0){x.textContent=ho?ho.emptyScript:"";for(let Pe=0;Pe<B;Pe++)x.append(A[Pe],ga()),gs.nextNode(),j.push({type:2,index:++k});x.append(A[B],ga())}}}else if(x.nodeType===8)if(x.data===kw)j.push({type:2,index:k});else{let A=-1;for(;(A=x.data.indexOf(An,A+1))!==-1;)j.push({type:7,index:k}),A+=An.length-1}k++}}static createElement(w,f){const v=vs.createElement("template");return v.innerHTML=w,v}}function po(R,w,f=R,v){var x,k,I,M;if(w===ys)return w;let j=v!==void 0?(x=f._$Co)===null||x===void 0?void 0:x[v]:f._$Cl;const Y=ma(w)?void 0:w._$litDirective$;return(j==null?void 0:j.constructor)!==Y&&((k=j==null?void 0:j._$AO)===null||k===void 0||k.call(j,!1),Y===void 0?j=void 0:(j=new Y(R),j._$AT(R,f,v)),v!==void 0?((I=(M=f)._$Co)!==null&&I!==void 0?I:M._$Co=[])[v]=j:f._$Cl=j),j!==void 0&&(w=po(R,j._$AS(R,w.values),j,v)),w}class LO{constructor(w,f){this._$AV=[],this._$AN=void 0,this._$AD=w,this._$AM=f}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(w){var f;const{el:{content:v},parts:x}=this._$AD,k=((f=w==null?void 0:w.creationScope)!==null&&f!==void 0?f:vs).importNode(v,!0);gs.currentNode=k;let I=gs.nextNode(),M=0,j=0,Y=x[0];for(;Y!==void 0;){if(M===Y.index){let re;Y.type===2?re=new Sa(I,I.nextSibling,this,w):Y.type===1?re=new Y.ctor(I,Y.name,Y.strings,this,w):Y.type===6&&(re=new zO(I,this,w)),this._$AV.push(re),Y=x[++j]}M!==(Y==null?void 0:Y.index)&&(I=gs.nextNode(),M++)}return gs.currentNode=vs,k}v(w){let f=0;for(const v of this._$AV)v!==void 0&&(v.strings!==void 0?(v._$AI(w,v,f),f+=v.strings.length-2):v._$AI(w[f])),f++}}class Sa{constructor(w,f,v,x){var k;this.type=2,this._$AH=qt,this._$AN=void 0,this._$AA=w,this._$AB=f,this._$AM=v,this.options=x,this._$Cp=(k=x==null?void 0:x.isConnected)===null||k===void 0||k}get _$AU(){var w,f;return(f=(w=this._$AM)===null||w===void 0?void 0:w._$AU)!==null&&f!==void 0?f:this._$Cp}get parentNode(){let w=this._$AA.parentNode;const f=this._$AM;return f!==void 0&&(w==null?void 0:w.nodeType)===11&&(w=f.parentNode),w}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(w,f=this){w=po(this,w,f),ma(w)?w===qt||w==null||w===""?(this._$AH!==qt&&this._$AR(),this._$AH=qt):w!==this._$AH&&w!==ys&&this._(w):w._$litType$!==void 0?this.g(w):w.nodeType!==void 0?this.$(w):TO(w)?this.T(w):this._(w)}k(w){return this._$AA.parentNode.insertBefore(w,this._$AB)}$(w){this._$AH!==w&&(this._$AR(),this._$AH=this.k(w))}_(w){this._$AH!==qt&&ma(this._$AH)?this._$AA.nextSibling.data=w:this.$(vs.createTextNode(w)),this._$AH=w}g(w){var f;const{values:v,_$litType$:x}=w,k=typeof x=="number"?this._$AC(w):(x.el===void 0&&(x.el=ya.createElement(Tw(x.h,x.h[0]),this.options)),x);if(((f=this._$AH)===null||f===void 0?void 0:f._$AD)===k)this._$AH.v(v);else{const I=new LO(k,this),M=I.u(this.options);I.v(v),this.$(M),this._$AH=I}}_$AC(w){let f=bw.get(w.strings);return f===void 0&&bw.set(w.strings,f=new ya(w)),f}T(w){Aw(this._$AH)||(this._$AH=[],this._$AR());const f=this._$AH;let v,x=0;for(const k of w)x===f.length?f.push(v=new Sa(this.k(ga()),this.k(ga()),this,this.options)):v=f[x],v._$AI(k),x++;x<f.length&&(this._$AR(v&&v._$AB.nextSibling,x),f.length=x)}_$AR(w=this._$AA.nextSibling,f){var v;for((v=this._$AP)===null||v===void 0||v.call(this,!1,!0,f);w&&w!==this._$AB;){const x=w.nextSibling;w.remove(),w=x}}setConnected(w){var f;this._$AM===void 0&&(this._$Cp=w,(f=this._$AP)===null||f===void 0||f.call(this,w))}}class ju{constructor(w,f,v,x,k){this.type=1,this._$AH=qt,this._$AN=void 0,this.element=w,this.name=f,this._$AM=x,this.options=k,v.length>2||v[0]!==""||v[1]!==""?(this._$AH=Array(v.length-1).fill(new String),this.strings=v):this._$AH=qt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(w,f=this,v,x){const k=this.strings;let I=!1;if(k===void 0)w=po(this,w,f,0),I=!ma(w)||w!==this._$AH&&w!==ys,I&&(this._$AH=w);else{const M=w;let j,Y;for(w=k[0],j=0;j<k.length-1;j++)Y=po(this,M[v+j],f,j),Y===ys&&(Y=this._$AH[j]),I||(I=!ma(Y)||Y!==this._$AH[j]),Y===qt?w=qt:w!==qt&&(w+=(Y??"")+k[j+1]),this._$AH[j]=Y}I&&!x&&this.j(w)}j(w){w===qt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,w??"")}}class OO extends ju{constructor(){super(...arguments),this.type=3}j(w){this.element[this.name]=w===qt?void 0:w}}const $O=ho?ho.emptyScript:"";class FO extends ju{constructor(){super(...arguments),this.type=4}j(w){w&&w!==qt?this.element.setAttribute(this.name,$O):this.element.removeAttribute(this.name)}}class MO extends ju{constructor(w,f,v,x,k){super(w,f,v,x,k),this.type=5}_$AI(w,f=this){var v;if((w=(v=po(this,w,f,0))!==null&&v!==void 0?v:qt)===ys)return;const x=this._$AH,k=w===qt&&x!==qt||w.capture!==x.capture||w.once!==x.once||w.passive!==x.passive,I=w!==qt&&(x===qt||k);k&&this.element.removeEventListener(this.name,this,x),I&&this.element.addEventListener(this.name,this,w),this._$AH=w}handleEvent(w){var f,v;typeof this._$AH=="function"?this._$AH.call((v=(f=this.options)===null||f===void 0?void 0:f.host)!==null&&v!==void 0?v:this.element,w):this._$AH.handleEvent(w)}}class zO{constructor(w,f,v){this.element=w,this.type=6,this._$AN=void 0,this._$AM=f,this.options=v}get _$AU(){return this._$AM._$AU}_$AI(w){po(this,w)}}const ww=zu.litHtmlPolyfillSupport;ww==null||ww(ya,Sa),((cp=zu.litHtmlVersions)!==null&&cp!==void 0?cp:zu.litHtmlVersions=[]).push("2.8.0");const Iw=(R,w,f)=>{var v,x;const k=(v=f==null?void 0:f.renderBefore)!==null&&v!==void 0?v:w;let I=k._$litPart$;if(I===void 0){const M=(x=f==null?void 0:f.renderBefore)!==null&&x!==void 0?x:null;k._$litPart$=I=new Sa(w.insertBefore(ga(),M),M,void 0,f??{})}return I._$AI(R),I};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var dp,pp;let ms=class extends lo{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var w,f;const v=super.createRenderRoot();return(w=(f=this.renderOptions).renderBefore)!==null&&w!==void 0||(f.renderBefore=v.firstChild),v}update(w){const f=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(w),this._$Do=Iw(f,this.renderRoot,this.renderOptions)}connectedCallback(){var w;super.connectedCallback(),(w=this._$Do)===null||w===void 0||w.setConnected(!0)}disconnectedCallback(){var w;super.disconnectedCallback(),(w=this._$Do)===null||w===void 0||w.setConnected(!1)}render(){return ys}};ms.finalized=!0,ms._$litElement$=!0,(dp=globalThis.litElementHydrateSupport)===null||dp===void 0||dp.call(globalThis,{LitElement:ms});const xw=globalThis.litElementPolyfillSupport;xw==null||xw({LitElement:ms});((pp=globalThis.litElementVersions)!==null&&pp!==void 0?pp:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const NO=R=>R.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Rw={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Lw=R=>(...w)=>({_$litDirective$:R,values:w});class Ow{constructor(w){}get _$AU(){return this._$AM._$AU}_$AT(w,f,v){this._$Ct=w,this._$AM=f,this._$Ci=v}_$AS(w,f){return this.update(w,f)}update(w,f){return this.render(...f)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fa=(R,w)=>{var f,v;const x=R._$AN;if(x===void 0)return!1;for(const k of x)(v=(f=k)._$AO)===null||v===void 0||v.call(f,w,!1),fa(k,w);return!0},Nu=R=>{let w,f;do{if((w=R._$AM)===void 0)break;f=w._$AN,f.delete(R),R=w}while((f==null?void 0:f.size)===0)},$w=R=>{for(let w;w=R._$AM;R=w){let f=w._$AN;if(f===void 0)w._$AN=f=new Set;else if(f.has(R))break;f.add(R),DO(w)}};function jO(R){this._$AN!==void 0?(Nu(this),this._$AM=R,$w(this)):this._$AM=R}function BO(R,w=!1,f=0){const v=this._$AH,x=this._$AN;if(x!==void 0&&x.size!==0)if(w)if(Array.isArray(v))for(let k=f;k<v.length;k++)fa(v[k],!1),Nu(v[k]);else v!=null&&(fa(v,!1),Nu(v));else fa(this,R)}const DO=R=>{var w,f,v,x;R.type==Rw.CHILD&&((w=(v=R)._$AP)!==null&&w!==void 0||(v._$AP=BO),(f=(x=R)._$AQ)!==null&&f!==void 0||(x._$AQ=jO))};class UO extends Ow{constructor(){super(...arguments),this._$AN=void 0}_$AT(w,f,v){super._$AT(w,f,v),$w(this),this.isConnected=w._$AU}_$AO(w,f=!0){var v,x;w!==this.isConnected&&(this.isConnected=w,w?(v=this.reconnected)===null||v===void 0||v.call(this):(x=this.disconnected)===null||x===void 0||x.call(this)),f&&(fa(this,w),Nu(this))}setValue(w){if(NO(this._$Ct))this._$Ct._$AI(w,this);else{const f=[...this._$Ct._$AH];f[this._$Ci]=w,this._$Ct._$AI(f,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const WO=()=>new HO;let HO=class{};const fp=new WeakMap,qO=Lw(class extends UO{render(R){return qt}update(R,[w]){var f;const v=w!==this.G;return v&&this.G!==void 0&&this.ot(void 0),(v||this.rt!==this.lt)&&(this.G=w,this.dt=(f=R.options)===null||f===void 0?void 0:f.host,this.ot(this.lt=R.element)),qt}ot(R){var w;if(typeof this.G=="function"){const f=(w=this.dt)!==null&&w!==void 0?w:globalThis;let v=fp.get(f);v===void 0&&(v=new WeakMap,fp.set(f,v)),v.get(this.G)!==void 0&&this.G.call(this.dt,void 0),v.set(this.G,R),R!==void 0&&this.G.call(this.dt,R)}else this.G.value=R}get rt(){var R,w,f;return typeof this.G=="function"?(w=fp.get((R=this.dt)!==null&&R!==void 0?R:globalThis))===null||w===void 0?void 0:w.get(this.G):(f=this.G)===null||f===void 0?void 0:f.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}}),QO=CO`
  :host {
    position: relative;
    display: flex;
    justify-content: center;
    max-height: 100vh;
    max-width: 100vw;
  }

  .image-sequence {
    height: 100vh;
    width: 100%;
  }

  .image-sequence.interactive {
    cursor: grab;
  }

  .image-sequence.interactive.loading {
    cursor: wait;
  }

  .overlay {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background: rgba(0,0,0,0);
    color: white;
    transition: all 0.25s linear;
    z-index: 9999;
    pointer-events: none;
  }

  .overlay.visible {
    opacity: 1;
    pointer-events: auto;
  }

  .overlay:not(.visible) {
    opacity: 0;
    display: none;
  }

  .overlay:hover {
    background: rgba(0,0,0,0.6);
  }

  .overlay.loading.visible {
    animation: loading-overlay 1s infinite alternate;
  }

  .buffering-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    border-radius: 5px;
    height: 15%;
    width: 15%;
    background: rgba(0,0,0,0.6);
  }

  @keyframes loading-overlay {
    from {
      opacity: 0.6;
    }
    to {
      opacity: 1;
    }
  }

  .description {
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    align-items: center;
    opacity: 0;
    transition: opacity 0.25s linear;
  }

  .description__icon {
    fill: white;
    height: 2em;
  }

  .overlay:hover .description {
    opacity: 1;
  }

  canvas {
    display: none;
    pointer-events: none;
    user-select: none;
    object-fit: contain;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
  }

  canvas.visible {
    display: block;
  }

  canvas.fade-in {
    animation: fade-in 0.25s 1 linear;          
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  slot[name='placeholder-image'] img {
    display: block;
    pointer-events: none;
    opacity: 0;
    height: 100%;
    width: 100%;
    margin: 0px auto 0px;
    transition: opacity 0.25s linear;
    object-fit: contain;
  }

  slot[name='placeholder-image'] img.loading {
    opacity: 1;
    filter: brightness(0.4);
    animation: loading-image 1s linear infinite alternate;
  }

  @keyframes loading-image {
    from {
      filter: brightness(0.4);
    }
    to {
      filter: brightness(0.2);
    }
  }`;var uo,$u,ba,bp,wa,wp,xa,xp,_a,_p,co,Fu;class yp extends ms{constructor(){super();ps(this,uo);ps(this,ba);ps(this,wa);ps(this,xa);ps(this,_a);ps(this,co);vr(this,"canvasRef",WO());this.description="Click and drag horizontally to rotate image",this.imageUrls=this.getAttribute("items").split(","),this.posterImageSrc=this.imageUrls.length>0?this.imageUrls[0]:"",this.isContinuous=this.getAttribute("continuous")==="true",this.isInteractive=this.getAttribute("interactive")==="true",this.didInteract=!1,this.isReversed=this.getAttribute("reverse")==="true",this.sequenceId=this.getAttribute("sequence-id");const f=.2;this.bufferSize=Math.ceil(this.imageUrls.length*f),this.blitting=null,this.images=Array(this.imageUrls.length).fill(null),this.requests=Array(this.imageUrls.length).fill(null),this.visible=!1,this.index=0,this.intrinsicHeight=0,this.intrinsicWidth=0,this.oldIndex=null,this.oldX=null,this.imageCount=this.imageUrls.length,this.isInteractive&&this.addEventListener("mousemove",this.handleMouseMove.bind(this))}get bufferedPct(){return Math.floor(this.images.filter((f,v)=>ao(this,uo,$u).includes(v)&&f!==null).length/this.bufferSize*100)}get someImagesLoaded(){return this.images.some(f=>f!==null)}connectedCallback(){super.connectedCallback();const f=(k,I)=>{k.forEach(M=>{M.isIntersecting&&(this.visible=!0,I.disconnect())})},v={root:null,threshold:.5};new IntersectionObserver(f,v).observe(this)}debounce(f,v=250,x=!1){let k=null;return function(){const I=this,M=arguments,j=function(){k=null,x||f.apply(I,M)},Y=x&&!k;clearTimeout(k),k=setTimeout(j,v),Y&&f.apply(I,M)}}handleMouseMove({buttons:f,clientX:v}){if(f){if(this.didInteract=!0,this.oldX){const x=v-this.oldX,k=Math.floor(Math.log(Math.abs(x)))||1;x>0?this.isReversed?this.previousImage(k):this.nextImage(k):x<0&&(this.isReversed?this.nextImage(k):this.previousImage(k))}this.oldX=v}else this.oldX=null}nextImage(f=1){const v=this.index+f>=this.imageCount?this.index+f-this.imageCount:this.index+f;this.index=v}willUpdate(f){if(f.has("rotateToIndex")&&this.rotateToIndex!==!1){const v=this.rotateToIndex-this.index+this.bufferSize/2,x=Array(v).fill(0).map((k,I)=>this.index+I+1);zr(this,co,Fu).call(this,x).then(this.animateRotation(this.rotateToIndex))}if(f.has("animationFrame")){if(!this.animationFrame||this.images[this.animationFrame]===null)return;zr(this,_a,_p).call(this,this.images[this.animationFrame])}f.has("index")&&this.someImagesLoaded&&zr(this,co,Fu).call(this).then(()=>{this.animateRotation(this.index)}),f.has("visible")&&!this.visible&&zr(this,co,Fu).call(this).then(()=>zr(this,_a,_p).call(this))}animateRotation(f){if(this.animationFrame===f)return;this.animationFrame=this.index;const v=setInterval(()=>{if(this.animationFrame===f&&(this.index=f,this.rotateToIndex=!1,this.synchronizeSequenceInstances()),this.rotateToIndex!==f){clearInterval(v);return}this.animationFrame+=1},this.transition)}previousImage(f=1){const v=this.index-f<0?this.imageCount+this.index-f:this.index-f;this.index=v}synchronizeSequenceInstances(){clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>{document.querySelectorAll(`q-image-sequence[sequence-id="${this.sequenceId}"]`).forEach(v=>{parseInt(v.getAttribute("index"))!==this.index&&v.setAttribute("index",this.index)})},250)}render(){const f=this.isInteractive?va`<div slot='overlay' class="overlay ${this.didInteract===!1?"visible":""}"><span class="description">
            <svg class="description__icon">
              <symbol id="rotation-icon" viewBox="0 0 24 24">
                <path d="M6.07426 4.68451L6.89234 4.68451L6.89234 6.34444C7.68861 5.65993 8.56396 5.09807 9.5184 4.65884C10.4728 4.21961 11.4791 4 12.5371 4C13.5952 4 14.6014 4.21106 15.5559 4.63317C16.5103 5.05528 17.3856 5.6086 18.1819 6.29311L18.1819 4.68451L19 4.68451L19 7.93593L15.8913 7.93593L15.8913 7.08029L17.7565 7.08029C16.9821 6.39578 16.1694 5.85388 15.3186 5.45458C14.4678 5.05528 13.5406 4.85564 12.5371 4.85564C11.5336 4.85564 10.6092 5.05528 9.76382 5.45458C8.91847 5.85388 8.10311 6.39578 7.31775 7.08029L9.18298 7.08029L9.18298 7.93593L6.07426 7.93593L6.07426 4.68451ZM6.09062 14.0794L7.8086 9.42473L9.05209 9.90389C9.24843 9.98375 9.42023 10.0978 9.56748 10.2461C9.71474 10.3945 9.81018 10.577 9.85381 10.7938L10.1156 12.1457L14.975 9.86966C15.3895 9.67572 15.8067 9.66431 16.2267 9.83544C16.6466 10.0066 16.9493 10.3089 17.1348 10.7424C17.3202 11.1759 17.3338 11.6123 17.1757 12.0515C17.0175 12.4908 16.7312 12.8073 16.3167 13.0013L13.7479 14.1992L13.9115 14.6099C13.9333 14.6555 13.9442 14.7069 13.9442 14.7639L13.9442 14.935L13.8461 17.7415C13.8352 18.0381 13.737 18.3005 13.5516 18.5287C13.3661 18.7569 13.1316 18.9109 12.848 18.9907L9.3466 19.9491C9.03027 20.0403 8.73031 20.009 8.4467 19.8549C8.1631 19.7009 7.95585 19.4699 7.82496 19.1619L6.12334 15.1575C6.04699 14.9864 6.00608 14.8067 6.00063 14.6184C5.99518 14.4302 6.02517 14.2505 6.09062 14.0794ZM6.97415 14.6099L8.83938 19.0079L12.848 17.9469L12.9953 14.4559L12.6189 13.6002L15.9076 12.0601C16.0931 11.9688 16.2185 11.8433 16.284 11.6836C16.3494 11.5239 16.3385 11.3471 16.2512 11.1531C16.164 10.9592 16.044 10.8308 15.8913 10.7681C15.7386 10.7053 15.5695 10.7196 15.3841 10.8109L9.41204 13.5831L8.88847 10.9478L8.38126 10.7595L6.97415 14.6099Z" />
              </symbol>
              <switch>
                <use xlink:href="#rotation-icon"></use>
              </switch>
            </svg>
            <span class="description__text">${this.description}</span>
          </span></div>`:"";return va`<div class="image-sequence ${ao(this,ba,bp)?"":"loading"} ${this.isInteractive?"interactive":""}">
        <slot name="loading-overlay">
          <div slot="loading-overlay" class='${ao(this,ba,bp)?"":"visible"} loading overlay'>
            <div class="buffering-indicator">Loading Image Sequence&nbsp;(${this.bufferedPct}%)...</div>
            </div>
        </slot>
        <canvas ${qO(this.canvasRef)} height="${this.intrinsicHeight}" width="${this.intrinsicWidth}" class="${this.someImagesLoaded?"visible":""} ${this.didInteract?"":"fade-in"}" slot="images"></canvas>
        <slot name="overlay">
          ${f}
        </slot>
      </div>`}}uo=new WeakSet,$u=function(){const f=this.images.length,v=f+this.index-Math.round(this.bufferSize/2);return Array(this.bufferSize).fill(0).map((x,k)=>(v+k)%f)},ba=new WeakSet,bp=function(){return this.images.filter((f,v)=>ao(this,uo,$u).includes(v)&&f!==null).length===this.bufferSize},wa=new WeakSet,wp=function(f,v){if(this.requests[v])return;const x=new Request(f),k=fetch(x).then(I=>I.blob()).then(I=>window.createImageBitmap(I)).then(I=>{this.intrinsicHeight===0&&(this.intrinsicHeight=I.height,this.intrinsicWidth=I.width),this.images[v]=I}).then(()=>{this.requests[v]=null,this.requestUpdate()}).catch(I=>{console.error(I)});return this.requests[v]=k,k},xa=new WeakSet,xp=function(f){this.context.drawImage(f,0,0)},_a=new WeakSet,_p=function(f){if(this.canvasRef.value){if(this.context??(this.context=this.canvasRef.value.getContext("2d")),f){window.cancelAnimationFrame(this.blitting),this.blitting=window.requestAnimationFrame(()=>zr(this,xa,xp).call(this,f));return}if(!this.images[this.index]){zr(this,wa,wp).call(this,this.imageUrls[this.index],this.index);return}window.cancelAnimationFrame(this.blitting),this.blitting=window.requestAnimationFrame(()=>zr(this,xa,xp).call(this,this.images[this.index]))}},co=new WeakSet,Fu=function(f){if(!this.images.some(k=>k===null))return Promise.all([]);const v=f??ao(this,uo,$u),x=this.images.map((k,I)=>{if(!v.includes(I)||k!==null)return null;const M=this.imageUrls[I];return zr(this,wa,wp).call(this,M,I)}).filter(k=>k);return Promise.all(x)},vr(yp,"styles",[QO]),vr(yp,"properties",{animationFrame:{type:Number,state:!0},bufferSize:{type:Number,state:!0},didInteract:{type:Boolean,state:!0},images:{type:Array,state:!0},imageUrls:{attribute:"image-urls",type:String},index:{type:Number},intrinsicHeight:{type:Number,state:!0},intrinsicWidth:{type:Number,state:!0},rotateToIndex:{attribute:"rotate-to-index",type:Number},transition:{type:Number},visible:{type:Boolean,state:!0}});customElements.define("q-image-sequence",yp);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class Sp extends Ow{constructor(w){if(super(w),this.et=qt,w.type!==Rw.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(w){if(w===qt||w==null)return this.ft=void 0,this.et=w;if(w===ys)return w;if(typeof w!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(w===this.et)return this.ft;this.et=w;const f=[w];return f.raw=f,this.ft={_$litType$:this.constructor.resultType,strings:f,values:[]}}}Sp.directiveName="unsafeHTML",Sp.resultType=1;const pa=Lw(Sp);class Fw extends ms{setupStyles(){let w=this.querySelector('style[slot="lightbox-styles"]');w&&w.sheet&&(this.adoptedStyleSheets=[w.sheet])}constructor(){super(),this.setupStyles(),this.setupFiguresData(),this.setupFullscreenButton(),this.setupNavigationButtons(),this.setupKeyboardControls()}get counterCurrent(){return this.querySelector("[data-lightbox-counter-current]")}get counterTotal(){return this.querySelector("[data-lightbox-counter-total]")}get fullscreenButton(){return this.querySelector("[data-lightbox-fullscreen]")}get nextButton(){return this.querySelector("[data-lightbox-next]")}get previousButton(){return this.querySelector("[data-lightbox-previous]")}get slides(){return this.querySelectorAll(".q-lightbox-slides__slide")}get slideIds(){return Array.from(this.slides).map(w=>w.id)}get currentSlide(){if(this.slides.length)return this.currentId?this.slides[this.currentSlideIndex]:this.slides[0]}get currentSlideIndex(){if(this.slides.length)return this.currentId?this.slideIds.findIndex(w=>w===this.currentId):0}get fullscreen(){return document.fullscreen||this.wrapper.classList.contains("quire-entry__lightbox--fullscreen")}get wrapper(){return document.querySelector(".quire-entry__lightbox")}enterFullscreen(){const w=this.renderRoot.firstElementChild;w.requestFullscreen?w.requestFullscreen():(this.wrapper.classList.add("quire-entry__lightbox--fullscreen"),document.body.style.position="fixed",document.body.style.top=`-${window.scrollY}px`)}exitFullscreen(){document.exitFullscreen?document.exitFullscreen():(this.wrapper.classList.remove("quire-entry__lightbox--fullscreen"),document.body.style.position="",document.body.style.top="")}next(){if(!this.slides.length)return;const w=this.currentSlideIndex+1,f=this.slideIds[w%this.slides.length];this.currentId=f}previous(){if(!this.slides.length)return;const w=this.currentSlideIndex-1,f=this.slideIds.slice(w)[0];this.currentId=f}_alignSlideData(w){const{aspect_ratio:f="widescreen",caption:v,credit:x,id:k,isSequence:I,label:M,mediaType:j}=w;return{...w,isAudio:j==="soundcloud",isVideo:j==="video"||j==="vimeo"||j==="youtube",aspectRatio:f}}_lightboxSlide(w){const{id:f,mediaType:v,figureElementContent:x,annotationsElementContent:k,aspectRatio:I,isVideo:M,isAudio:j,label:Y,labelHtml:re,caption:A,captionHtml:B,credit:Pe,creditHtml:le}=w,lt=`q-lightbox-slides__element--${v}`,Je=M?`q-lightbox-slides__element--video q-lightbox-slides__element--${I}`:"";return va`<div class="q-lightbox-slides__slide" slot="slides" id="${f}">
      <div class="q-lightbox-slides__element ${lt} ${Je} ${j?"q-lightbox-slides__element--audio":""}">
        ${pa(x)}
      </div>
      <div class="q-figure-slides__slide-ui">
        <div class="q-lightbox-slides__caption ${Y||A||Pe?"":"is-hidden"}">
          <span class="q-lightbox-slides__caption-label ${Y?"":"is-hidden"}">${pa(re)}</span>
          <span class="q-lightbox-slides__caption-content ${A||Pe?"":"is-hidden"}">${B?pa(B):""} ${le?pa(le):""}</span>
        </div>
        ${pa(k??"")}
      </div>
    </div>`}setupFiguresData(){const w=this.querySelector('script[type="application/json"]'),f=JSON.parse(w.innerHTML);this.figures=f,f.forEach(v=>{console.log("Rendering",v.id);const x=this._alignSlideData(v);let k=document.createElement("template");Iw(this._lightboxSlide(x),k.content);const I=k.content.cloneNode(!0);this.appendChild(I)})}setupFullscreenButton(){this.fullscreenButton&&this.fullscreenButton.addEventListener("click",()=>{this.toggleFullscreen()})}setupNavigationButtons(){!this.nextButton||!this.previousButton||(this.nextButton.addEventListener("click",()=>{this.next()}),this.previousButton.addEventListener("click",()=>{this.previous()}))}setupKeyboardControls(){document.addEventListener("keyup",({code:w})=>{if(this.slides.length>1)switch(w){default:break;case"ArrowRight":this.next();break;case"ArrowLeft":this.previous();break}})}toggleFullscreen(){this.updateFullscreenButton(),this.fullscreen?this.exitFullscreen():this.enterFullscreen()}updateCounterElements(){!this.counterCurrent||!this.counterTotal||(this.counterCurrent.innerText=this.currentSlideIndex+1,this.counterTotal.innerText=this.slides.length)}updateCurrentSlideElement(){this.currentSlide&&(this.slides.forEach(w=>{w.id!==this.currentId&&delete w.dataset.lightboxCurrent,[this.preloadNextId,this.preloadPrevId].includes(w.id)?w.dataset.lightboxPreload=!0:delete w.dataset.lightboxPreload}),this.currentSlide.dataset.lightboxCurrent=!0)}updateFullscreenButton(){this.fullscreenButton&&(this.fullscreenButton.dataset.lightboxFullscreen=!this.fullscreen)}render(){return this.slides.length?(this.currentId=this.slideIds[this.currentSlideIndex],this.preloadNextId=this.currentSlideIndex+1<this.slideIds.length?this.slideIds[this.currentSlideIndex+1]:void 0,this.preloadPrevId=this.currentSlideIndex-1>=0?this.slideIds[this.currentSlideIndex-1]:void 0,this.updateCurrentSlideElement(),this.updateCounterElements(),va`
      <div class="q-lightbox">
        <slot name="lightbox-styles"></slot>
        <slot name="data"></slot>
        <div class="q-lightbox-slides">
          <slot name="slides"></slot>
        </div>
        <slot name="ui"></slot>
      </div>
    `):""}}vr(Fw,"properties",{currentId:{attribute:"current-id",type:String},preloadNextId:{attribute:"preload-next-id",type:String},preloadPrevId:{attribute:"preload-prev-id",type:String}});customElements.define("q-lightbox",Fw);class Mw extends ms{get closeButton(){return this.querySelector("[data-modal-close]")}get lightbox(){return this.querySelector("q-lightbox")}constructor(){super(),this.setupKeyboardControls(),this.setupModalTriggers()}close(){this.active=!1,this.currentId=null,this.updateLightboxCurrentId(),this.enableScrolling()}disableScrolling(){document.querySelector("html").style.overflow="hidden"}enableScrolling(){document.querySelector("html").style.overflow="auto"}getCurrentFigureId(w){const{target:f}=w;let v=f;for(;!v.matches("figure")&&!v.getAttribute("id");)v=v.parentNode;return v.getAttribute("id")}open(w){this.currentId=this.getCurrentFigureId(w),this.active=!0,this.updateLightboxCurrentId(),this.disableScrolling()}setupCloseButton(){this.closeButton&&this.closeButton.addEventListener("click",()=>{this.close()})}setupKeyboardControls(){document.addEventListener("keyup",({code:w})=>{this.active&&w==="Escape"&&this.close()})}setupModalTriggers(){document.querySelectorAll(".q-figure__modal-link").forEach(w=>{w.addEventListener("click",f=>{f.preventDefault(),this.open(f)})})}updateLightboxCurrentId(){this.lightbox&&this.lightbox.setAttribute("current-id",this.currentId)}render(){return this.dataset.modalActive=this.active,this.setupCloseButton(),va`
      <div class="q-modal">
        <slot></slot>
      </div>
    `}}vr(Mw,"properties",{active:{type:Boolean},currentId:{attribute:"current-id",type:String}});customElements.define("q-modal",Mw);var yr;const xt=(yr=class{constructor(w){this.copyLinkButton=w.querySelector(".accordion-section__copy-link-button"),this.element=w,this.id=w.getAttribute("id"),this.globalExpand=document.querySelector(".global-accordion-expand-all"),this.globalCollapse=document.querySelector(".global-accordion-collapse-all"),this.tooltip=w.querySelector(".accordion-tooltip")}get parentAccordions(){return Array.from(xt.elements).filter(w=>w.contains(this.element)&&w!=this.element)}static setGlobalControls(){if(!(!!xt.globalCollapse&&!!xt.globalExpand))return;const f=this.globalControlsState,v=xt.elements.length,x=Array.from(xt.elements).filter(I=>I.getAttribute("open")===null).length,k=()=>{let I;switch(!0){case x===v:I="allClosed";break;case x===0:I="allOpen";break;default:I="mixed";break}return I};if(f!==k())switch(this.globalControlsState=k(),this.globalControlsState){case"allClosed":xt.globalExpand.classList.remove("visually-hidden"),xt.globalCollapse.classList.add("visually-hidden");break;case"allOpen":xt.globalExpand.classList.add("visually-hidden"),xt.globalCollapse.classList.remove("visually-hidden");break;default:xt.globalCollapse.classList.remove("visually-hidden"),xt.globalExpand.classList.remove("visually-hidden");break}}static setup(){xt.elements.length&&(xt.elements.forEach(w=>{new xt(w).init()}),xt.setGlobalControls())}addEventListeners(){this.copyLinkButton.addEventListener("click",this.copyLink.bind(this)),this.element.addEventListener("toggle",xt.setGlobalControls.bind(this)),xt.globalExpand&&xt.globalExpand.addEventListener("click",this.open.bind(this)),xt.globalCollapse&&xt.globalCollapse.addEventListener("click",this.close.bind(this))}close(){this.element.removeAttribute("open"),xt.setGlobalControls()}copyLink(){if(this.copying)return;this.copying=!0;const w=this.copyLinkButton.getAttribute("value"),{origin:f,pathname:v}=window.location;this.tooltip.classList.add("accordion-tooltip--active");try{const x=new URL(v+w,f);navigator.clipboard.writeText(x),window.history.replaceState({},"",x),setTimeout(()=>{this.tooltip.classList.remove("accordion-tooltip--active"),this.copying=!1},2e3)}catch(x){console.error("Error copying heading link: ",x)}}init(){this.addEventListeners(),this.setStateFromUrl()}open(){this.element.setAttribute("open",!0),xt.setGlobalControls()}setStateFromUrl(){const w=window.location.hash.replace(/^#/,"");if(!w)return;const f=document.querySelector(window.location.hash);(w===this.id||this.element.contains(f))&&(this.open(),this.parentAccordions&&this.parentAccordions.length&&this.parentAccordions.forEach(v=>v.setAttribute("open",!0)))}},vr(yr,"className","accordion-section"),vr(yr,"globalExpand",document.querySelector(".global-accordion-expand-all")),vr(yr,"globalCollapse",document.querySelector(".global-accordion-collapse-all")),vr(yr,"elements",document.querySelectorAll(`.${yr.className}`)),vr(yr,"partOfAccordion",w=>w.closest(`.${yr.className}`)),yr),VO=(R,w,f={})=>{const v={root:document.querySelector(".quire-entry__content"),rootMargin:"-50% 0% -50% 0%",threshold:0,...f},x=I=>{I.forEach(M=>{M.isIntersecting&&w()})};new IntersectionObserver(x,v).observe(R)},GO=({callback:R,interval:w=200,maxTries:f=10,tries:v=0,validate:x})=>{const k=()=>{if(v===f){console.error("Polling reached maximum number of attempts");return}v++,x()?R():setTimeout(k,w)};k()};function YO(R,w=null,f=null){const v=document.querySelector(".quire-navbar"),x=7,k=v?R-v.clientHeight-x:R-x;[document.documentElement,document.body.parentNode,document.body].forEach(M=>{M.scrollTop=k})}const Ap=R=>{if(!R)return;R=R.replace(":","\\:"),R=R.replace(".","\\.");const w=document.querySelector(R);if(w){xt.partOfAccordion(w)&&new xt(w.closest(`.${xt.className}`)).setStateFromUrl();const f=w.getBoundingClientRect().top+window.scrollY;YO(f),setTimeout(()=>w.focus())}},zw=R=>({checked:R.checked,id:R.getAttribute("value"),input:R.getAttribute("type"),type:R.getAttribute("data-annotation-type")}),Nw=R=>{if(!R)return;const w=R.querySelector("canvas-panel"),f=R.querySelector("q-image-sequence"),v=R.querySelector("image-service");return w?w.getAttribute("canvas-id"):v?v.getAttribute("src"):f?f.getAttribute("sequence-id"):void 0},_w=R=>{const[w,f,v,x]=R.split(",").map(k=>parseInt(k.trim()));return{x:w,y:f,width:v,height:x}},Ep=function({annotationIds:R=[],figureId:w,historyBehavior:f="push",region:v,sequence:x={}}){if(!w){console.error("goToFigureState called without an undefined figureId");return}const k=`#${w}`,I=`[slot="slides"][id="${w}"]`,M=document.querySelector(k),j=document.querySelector(I),Y=Nw(M||j);if(!M&&!j)return;const re=j.closest("q-lightbox");if(re.currentId=w,!Y)return;const B=[...document.querySelectorAll(`#${w} .annotations-ui__input, [slot="slides"][id="${w}"] .annotations-ui__input`)].map(Ne=>{const Be=Ne.getAttribute("data-annotation-id");return Ne.checked=R.includes(Be),zw(Ne)});xt.elements.forEach(Ne=>{Ne.contains(M)&&Ne.setAttribute("open",!0)}),jw(Y,{annotations:B,region:v||"reset",sequence:x});const Pe=new URL(window.location.pathname,window.location.origin);Pe.hash=w,Ap(Pe.hash);const le=new URLSearchParams(R.map(Ne=>["annotation-id",encodeURIComponent(Ne)]));v&&le.set("region",encodeURIComponent(v)),Number.isInteger(parseInt(x.index))&&le.set("sequence-index",encodeURIComponent(x.index));const lt=le.toString(),Je=[Pe.pathname];lt&&Je.push(lt);const St=[{},"",`${Je.join("?")}${Pe.hash}`];f==="replace"?window.history.replaceState(...St):window.history.pushState(...St)},Sw=R=>{const w=R.getAttribute("id"),f=Nw(R.closest(".q-figure, .q-lightbox-slides__slide")),v=document.querySelector("q-lightbox").contains(R),x=zw(R),{checked:k,input:I,type:M}=x;if(v){const j=document.querySelector(`#${w.split("lightbox-")[1]}`);j&&(j.checked=R.checked)}else{const j=document.querySelector(`#${["lightbox",w].join("-")}`);j&&(j.checked=R.checked)}if(I==="checkbox"&&M==="choice"){const j=R.closest("form"),Y=j.querySelectorAll(".annotations-ui__input[checked]");if(!k&&Y.length===1&&Y[0].setAttribute("disabled",!0),k){const re=j.querySelector("[disabled]");re&&re.removeAttribute("disabled")}}jw(f,{annotations:[x]})},XO=(R,w)=>{const{checked:f,id:v,type:x}=w;switch(x){case"annotation":R.applyStyles(v,{opacity:+!!f});break;case"choice":GO({callback:()=>ZO(R,w),validate:()=>!!R.makeChoice});break}},ZO=(R,w)=>{const{checked:f,id:v,input:x}=w;R.setAttribute("choice-id",v),R.makeChoice(v,{deselect:!f,deselectOthers:x==="radio"})},KO=()=>{const R=document.querySelectorAll(".ref");for(const f of R){let v=f.getAttribute("data-annotation-ids");v=v.length?v.split(","):void 0;const x=f.getAttribute("data-figure-id"),k={index:parseInt(f.getAttribute("data-sequence-index")),transition:parseInt(f.getAttribute("data-sequence-transition"))},I=f.getAttribute("data-region");f.getAttribute("data-on-scroll")==="true"?VO(f,()=>Ep({annotationIds:v,figureId:x,historyBehavior:"replace",region:I,sequence:k})):f.addEventListener("click",({target:j})=>Ep({annotationIds:v,figureId:x,region:I,sequence:k}))}const w=document.querySelectorAll(".annotations-ui__input");for(const f of w)Sw(f),f.addEventListener("click",({target:v})=>Sw(v))},jw=(R,w)=>{const f=document.querySelectorAll(`canvas-panel[canvas-id="${R}"], image-service[src="${R}"], q-image-sequence[sequence-id="${R}"]`);f.length||console.error(`Failed to call update on canvas panel or image-service component with id ${R}. Element does not exist.`);const{annotations:v,region:x}=w;f.forEach(k=>{const I=k.tagName.toLowerCase()==="q-image-sequence";if(I&&JO(k,w),x&&!I){const M=_w(x&&x!=="reset"?x:k.getAttribute("region")),j={easing:k.easingFunctions().easeOutExpo,duration:2e3};setTimeout((()=>{k.transition(re=>{re.goToRegion(M,{transition:j})})})(),500)}Array.isArray(v)&&v.forEach(M=>XO(k,M))})},JO=(R,{sequence:w={}})=>{const{index:f,transition:v}=w,x=parseInt(R.getAttribute("index")),k=parseInt(f);if(Number.isInteger(k)&&k>=0&&x!==k){if(v){R.setAttribute("transition",v),R.setAttribute("rotate-to-index",k);return}R.setAttribute("rotate-to-index",!1),R.setAttribute("index",k)}};var Bw=Bw||{};Bw.Widget=function(R){function w(v){if(f[v])return f[v].exports;var x=f[v]={exports:{},id:v,loaded:!1};return R[v].call(x.exports,x,x.exports,w),x.loaded=!0,x.exports}var f={};return w.m=R,w.c=f,w.p="",w(0)}([function(R,w,f){function v(Z){return!!(Z===""||Z&&Z.charCodeAt&&Z.substr)}function x(Z){return!!(Z&&Z.constructor&&Z.call&&Z.apply)}function k(Z){return!(!Z||Z.nodeType!==1||Z.nodeName.toUpperCase()!=="IFRAME")}function I(Z){var ne,ue=!1;for(ne in et)if(et.hasOwnProperty(ne)&&et[ne]===Z){ue=!0;break}return ue}function M(Z){var ne,ue,ee;for(ne=0,ue=Gi.length;ne<ue&&(ee=Z(Gi[ne]),ee!==!1);ne++);}function j(Z){var ne,ue,ee,Te="";for(Z.substr(0,2)==="//"&&(Z=window.location.protocol+Z),ee=Z.split("/"),ne=0,ue=ee.length;ne<ue&&ne<3;ne++)Te+=ee[ne],ne<2&&(Te+="/");return Te}function Y(Z){return Z.contentWindow?Z.contentWindow:Z.contentDocument&&"parentWindow"in Z.contentDocument?Z.contentDocument.parentWindow:null}function re(Z){var ne,ue=[];for(ne in Z)Z.hasOwnProperty(ne)&&ue.push(Z[ne]);return ue}function A(Z,ne,ue){ue.callbacks[Z]=ue.callbacks[Z]||[],ue.callbacks[Z].push(ne)}function B(Z,ne){var ue,ee=!0;return ne.callbacks[Z]=[],M(function(Te){if(ue=Te.callbacks[Z]||[],ue.length)return ee=!1,!1}),ee}function Pe(Z,ne,ue){var ee,Te,st=Y(ue);return!!st.postMessage&&(ee=ue.getAttribute("src").split("?")[0],Te=JSON.stringify({method:Z,value:ne}),ee.substr(0,2)==="//"&&(ee=window.location.protocol+ee),ee=ee.replace(/http:\/\/(w|wt).soundcloud.com/,"https://$1.soundcloud.com"),void st.postMessage(Te,ee))}function le(Z){var ne;return M(function(ue){if(ue.instance===Z)return ne=ue,!1}),ne}function lt(Z){var ne;return M(function(ue){if(Y(ue.element)===Z)return ne=ue,!1}),ne}function Je(Z,ne){return function(ue){var ee=x(ue),Te=le(this),st=!ee&&ne?ue:null,xi=ee&&!ne?ue:null;return xi&&A(Z,xi,Te),Pe(Z,st,Te.element),this}}function St(Z,ne,ue){var ee,Te,st;for(ee=0,Te=ne.length;ee<Te;ee++)st=ne[ee],Z[st]=Je(st,ue)}function Ne(Z,ne,ue){return Z+"?url="+ne+"&"+Be(ue)}function Be(Z){var ne,ue,ee=[];for(ne in Z)Z.hasOwnProperty(ne)&&(ue=Z[ne],ee.push(ne+"="+(ne==="start_track"?parseInt(ue,10):ue?"true":"false")));return ee.join("&")}function Yt(Z,ne,ue){var ee,Te,st=Z.callbacks[ne]||[];for(ee=0,Te=st.length;ee<Te;ee++)st[ee].apply(Z.instance,ue);(I(ne)||ne===It.READY)&&(Z.callbacks[ne]=[])}function Ve(Z){var ne,ue,ee,Te,st;try{ue=JSON.parse(Z.data)}catch{return!1}return ne=lt(Z.source),ee=ue.method,Te=ue.value,(!ne||Nt(Z.origin)===Nt(ne.domain))&&(ne?(ee===It.READY&&(ne.isReady=!0,Yt(ne,Ki),B(Ki,ne)),ee!==It.PLAY||ne.playEventFired||(ne.playEventFired=!0),ee!==It.PLAY_PROGRESS||ne.playEventFired||(ne.playEventFired=!0,Yt(ne,It.PLAY,[Te])),st=[],Te!==void 0&&st.push(Te),void Yt(ne,ee,st)):(ee===It.READY&&lr.push(Z.source),!1))}function Nt(Z){return Z.replace(pe,"")}var wi,$,Li,br=f(1),et=f(2),Kt=f(3),It=br.api,Ni=br.bridge,lr=[],Gi=[],Ki="__LATE_BINDING__",ur="http://wt.soundcloud.test:9200/",pe=/^http(?:s?)/;window.addEventListener?window.addEventListener("message",Ve,!1):window.attachEvent("onmessage",Ve),R.exports=Li=function(Z,ne,ue){if(v(Z)&&(Z=document.getElementById(Z)),!k(Z))throw new Error("SC.Widget function should be given either iframe element or a string specifying id attribute of iframe element.");ne&&(ue=ue||{},Z.src=Ne(ur,ne,ue));var ee,Te,st=lt(Y(Z));return st&&st.instance?st.instance:(ee=lr.indexOf(Y(Z))>-1,Te=new wi(Z),Gi.push(new $(Te,Z,ee)),Te)},Li.Events=It,window.SC=window.SC||{},window.SC.Widget=Li,$=function(Z,ne,ue){this.instance=Z,this.element=ne,this.domain=j(ne.getAttribute("src")),this.isReady=!!ue,this.callbacks={}},wi=function(){},wi.prototype={constructor:wi,load:function(Z,ne){if(Z){ne=ne||{};var ue=this,ee=le(this),Te=ee.element,st=Te.src,xi=st.substr(0,st.indexOf("?"));ee.isReady=!1,ee.playEventFired=!1,Te.onload=function(){ue.bind(It.READY,function(){var ft,bs=ee.callbacks;for(ft in bs)bs.hasOwnProperty(ft)&&ft!==It.READY&&Pe(Ni.ADD_LISTENER,ft,ee.element);ne.callback&&ne.callback()})},Te.src=Ne(xi,Z,ne)}},bind:function(Z,ne){var ue=this,ee=le(this);return ee&&ee.element&&(Z===It.READY&&ee.isReady?setTimeout(ne,1):ee.isReady?(A(Z,ne,ee),Pe(Ni.ADD_LISTENER,Z,ee.element)):A(Ki,function(){ue.bind(Z,ne)},ee)),this},unbind:function(Z){var ne,ue=le(this);ue&&ue.element&&(ne=B(Z,ue),Z!==It.READY&&ne&&Pe(Ni.REMOVE_LISTENER,Z,ue.element))}},St(wi.prototype,re(et)),St(wi.prototype,re(Kt),!0)},function(R,w){w.api={LOAD_PROGRESS:"loadProgress",PLAY_PROGRESS:"playProgress",PLAY:"play",PAUSE:"pause",FINISH:"finish",SEEK:"seek",READY:"ready",OPEN_SHARE_PANEL:"sharePanelOpened",CLICK_DOWNLOAD:"downloadClicked",CLICK_BUY:"buyClicked",ERROR:"error"},w.bridge={REMOVE_LISTENER:"removeEventListener",ADD_LISTENER:"addEventListener"}},function(R,w){R.exports={GET_VOLUME:"getVolume",GET_DURATION:"getDuration",GET_POSITION:"getPosition",GET_SOUNDS:"getSounds",GET_CURRENT_SOUND:"getCurrentSound",GET_CURRENT_SOUND_INDEX:"getCurrentSoundIndex",IS_PAUSED:"isPaused"}},function(R,w){R.exports={PLAY:"play",PAUSE:"pause",TOGGLE:"toggle",SEEK_TO:"seekTo",SET_VOLUME:"setVolume",NEXT:"next",PREV:"prev",SKIP:"skip"}}]);var Dw={exports:{}};/**
 * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.3.9
 * Copyright (C) 2020 Oliver Nightingale
 * @license MIT
 */(function(R,w){(function(){var f=function(v){var x=new f.Builder;return x.pipeline.add(f.trimmer,f.stopWordFilter,f.stemmer),x.searchPipeline.add(f.stemmer),v.call(x,x),x.build()};f.version="2.3.9";/*!
 * lunr.utils
 * Copyright (C) 2020 Oliver Nightingale
 */f.utils={},f.utils.warn=function(v){return function(x){v.console&&console.warn&&console.warn(x)}}(this),f.utils.asString=function(v){return v==null?"":v.toString()},f.utils.clone=function(v){if(v==null)return v;for(var x=Object.create(null),k=Object.keys(v),I=0;I<k.length;I++){var M=k[I],j=v[M];if(Array.isArray(j)){x[M]=j.slice();continue}if(typeof j=="string"||typeof j=="number"||typeof j=="boolean"){x[M]=j;continue}throw new TypeError("clone is not deep and does not support nested objects")}return x},f.FieldRef=function(v,x,k){this.docRef=v,this.fieldName=x,this._stringValue=k},f.FieldRef.joiner="/",f.FieldRef.fromString=function(v){var x=v.indexOf(f.FieldRef.joiner);if(x===-1)throw"malformed field ref string";var k=v.slice(0,x),I=v.slice(x+1);return new f.FieldRef(I,k,v)},f.FieldRef.prototype.toString=function(){return this._stringValue==null&&(this._stringValue=this.fieldName+f.FieldRef.joiner+this.docRef),this._stringValue};/*!
 * lunr.Set
 * Copyright (C) 2020 Oliver Nightingale
 */f.Set=function(v){if(this.elements=Object.create(null),v){this.length=v.length;for(var x=0;x<this.length;x++)this.elements[v[x]]=!0}else this.length=0},f.Set.complete={intersect:function(v){return v},union:function(){return this},contains:function(){return!0}},f.Set.empty={intersect:function(){return this},union:function(v){return v},contains:function(){return!1}},f.Set.prototype.contains=function(v){return!!this.elements[v]},f.Set.prototype.intersect=function(v){var x,k,I,M=[];if(v===f.Set.complete)return this;if(v===f.Set.empty)return v;this.length<v.length?(x=this,k=v):(x=v,k=this),I=Object.keys(x.elements);for(var j=0;j<I.length;j++){var Y=I[j];Y in k.elements&&M.push(Y)}return new f.Set(M)},f.Set.prototype.union=function(v){return v===f.Set.complete?f.Set.complete:v===f.Set.empty?this:new f.Set(Object.keys(this.elements).concat(Object.keys(v.elements)))},f.idf=function(v,x){var k=0;for(var I in v)I!="_index"&&(k+=Object.keys(v[I]).length);var M=(x-k+.5)/(k+.5);return Math.log(1+Math.abs(M))},f.Token=function(v,x){this.str=v||"",this.metadata=x||{}},f.Token.prototype.toString=function(){return this.str},f.Token.prototype.update=function(v){return this.str=v(this.str,this.metadata),this},f.Token.prototype.clone=function(v){return v=v||function(x){return x},new f.Token(v(this.str,this.metadata),this.metadata)};/*!
 * lunr.tokenizer
 * Copyright (C) 2020 Oliver Nightingale
 */f.tokenizer=function(v,x){if(v==null||v==null)return[];if(Array.isArray(v))return v.map(function(Pe){return new f.Token(f.utils.asString(Pe).toLowerCase(),f.utils.clone(x))});for(var k=v.toString().toLowerCase(),I=k.length,M=[],j=0,Y=0;j<=I;j++){var re=k.charAt(j),A=j-Y;if(re.match(f.tokenizer.separator)||j==I){if(A>0){var B=f.utils.clone(x)||{};B.position=[Y,A],B.index=M.length,M.push(new f.Token(k.slice(Y,j),B))}Y=j+1}}return M},f.tokenizer.separator=/[\s\-]+/;/*!
 * lunr.Pipeline
 * Copyright (C) 2020 Oliver Nightingale
 */f.Pipeline=function(){this._stack=[]},f.Pipeline.registeredFunctions=Object.create(null),f.Pipeline.registerFunction=function(v,x){x in this.registeredFunctions&&f.utils.warn("Overwriting existing registered function: "+x),v.label=x,f.Pipeline.registeredFunctions[v.label]=v},f.Pipeline.warnIfFunctionNotRegistered=function(v){var x=v.label&&v.label in this.registeredFunctions;x||f.utils.warn(`Function is not registered with pipeline. This may cause problems when serialising the index.
`,v)},f.Pipeline.load=function(v){var x=new f.Pipeline;return v.forEach(function(k){var I=f.Pipeline.registeredFunctions[k];if(I)x.add(I);else throw new Error("Cannot load unregistered function: "+k)}),x},f.Pipeline.prototype.add=function(){var v=Array.prototype.slice.call(arguments);v.forEach(function(x){f.Pipeline.warnIfFunctionNotRegistered(x),this._stack.push(x)},this)},f.Pipeline.prototype.after=function(v,x){f.Pipeline.warnIfFunctionNotRegistered(x);var k=this._stack.indexOf(v);if(k==-1)throw new Error("Cannot find existingFn");k=k+1,this._stack.splice(k,0,x)},f.Pipeline.prototype.before=function(v,x){f.Pipeline.warnIfFunctionNotRegistered(x);var k=this._stack.indexOf(v);if(k==-1)throw new Error("Cannot find existingFn");this._stack.splice(k,0,x)},f.Pipeline.prototype.remove=function(v){var x=this._stack.indexOf(v);x!=-1&&this._stack.splice(x,1)},f.Pipeline.prototype.run=function(v){for(var x=this._stack.length,k=0;k<x;k++){for(var I=this._stack[k],M=[],j=0;j<v.length;j++){var Y=I(v[j],j,v);if(!(Y==null||Y===""))if(Array.isArray(Y))for(var re=0;re<Y.length;re++)M.push(Y[re]);else M.push(Y)}v=M}return v},f.Pipeline.prototype.runString=function(v,x){var k=new f.Token(v,x);return this.run([k]).map(function(I){return I.toString()})},f.Pipeline.prototype.reset=function(){this._stack=[]},f.Pipeline.prototype.toJSON=function(){return this._stack.map(function(v){return f.Pipeline.warnIfFunctionNotRegistered(v),v.label})};/*!
 * lunr.Vector
 * Copyright (C) 2020 Oliver Nightingale
 */f.Vector=function(v){this._magnitude=0,this.elements=v||[]},f.Vector.prototype.positionForIndex=function(v){if(this.elements.length==0)return 0;for(var x=0,k=this.elements.length/2,I=k-x,M=Math.floor(I/2),j=this.elements[M*2];I>1&&(j<v&&(x=M),j>v&&(k=M),j!=v);)I=k-x,M=x+Math.floor(I/2),j=this.elements[M*2];if(j==v||j>v)return M*2;if(j<v)return(M+1)*2},f.Vector.prototype.insert=function(v,x){this.upsert(v,x,function(){throw"duplicate index"})},f.Vector.prototype.upsert=function(v,x,k){this._magnitude=0;var I=this.positionForIndex(v);this.elements[I]==v?this.elements[I+1]=k(this.elements[I+1],x):this.elements.splice(I,0,v,x)},f.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var v=0,x=this.elements.length,k=1;k<x;k+=2){var I=this.elements[k];v+=I*I}return this._magnitude=Math.sqrt(v)},f.Vector.prototype.dot=function(v){for(var x=0,k=this.elements,I=v.elements,M=k.length,j=I.length,Y=0,re=0,A=0,B=0;A<M&&B<j;)Y=k[A],re=I[B],Y<re?A+=2:Y>re?B+=2:Y==re&&(x+=k[A+1]*I[B+1],A+=2,B+=2);return x},f.Vector.prototype.similarity=function(v){return this.dot(v)/this.magnitude()||0},f.Vector.prototype.toArray=function(){for(var v=new Array(this.elements.length/2),x=1,k=0;x<this.elements.length;x+=2,k++)v[k]=this.elements[x];return v},f.Vector.prototype.toJSON=function(){return this.elements};/*!
 * lunr.stemmer
 * Copyright (C) 2020 Oliver Nightingale
 * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
 */f.stemmer=function(){var v={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},x={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},k="[^aeiou]",I="[aeiouy]",M=k+"[^aeiouy]*",j=I+"[aeiou]*",Y="^("+M+")?"+j+M,re="^("+M+")?"+j+M+"("+j+")?$",A="^("+M+")?"+j+M+j+M,B="^("+M+")?"+I,Pe=new RegExp(Y),le=new RegExp(A),lt=new RegExp(re),Je=new RegExp(B),St=/^(.+?)(ss|i)es$/,Ne=/^(.+?)([^s])s$/,Be=/^(.+?)eed$/,Yt=/^(.+?)(ed|ing)$/,Ve=/.$/,Nt=/(at|bl|iz)$/,wi=new RegExp("([^aeiouylsz])\\1$"),$=new RegExp("^"+M+I+"[^aeiouwxy]$"),Li=/^(.+?[^aeiou])y$/,br=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,et=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,Kt=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,It=/^(.+?)(s|t)(ion)$/,Ni=/^(.+?)e$/,lr=/ll$/,Gi=new RegExp("^"+M+I+"[^aeiouwxy]$"),Ki=function(pe){var Z,ne,ue,ee,Te,st,xi;if(pe.length<3)return pe;if(ue=pe.substr(0,1),ue=="y"&&(pe=ue.toUpperCase()+pe.substr(1)),ee=St,Te=Ne,ee.test(pe)?pe=pe.replace(ee,"$1$2"):Te.test(pe)&&(pe=pe.replace(Te,"$1$2")),ee=Be,Te=Yt,ee.test(pe)){var ft=ee.exec(pe);ee=Pe,ee.test(ft[1])&&(ee=Ve,pe=pe.replace(ee,""))}else if(Te.test(pe)){var ft=Te.exec(pe);Z=ft[1],Te=Je,Te.test(Z)&&(pe=Z,Te=Nt,st=wi,xi=$,Te.test(pe)?pe=pe+"e":st.test(pe)?(ee=Ve,pe=pe.replace(ee,"")):xi.test(pe)&&(pe=pe+"e"))}if(ee=Li,ee.test(pe)){var ft=ee.exec(pe);Z=ft[1],pe=Z+"i"}if(ee=br,ee.test(pe)){var ft=ee.exec(pe);Z=ft[1],ne=ft[2],ee=Pe,ee.test(Z)&&(pe=Z+v[ne])}if(ee=et,ee.test(pe)){var ft=ee.exec(pe);Z=ft[1],ne=ft[2],ee=Pe,ee.test(Z)&&(pe=Z+x[ne])}if(ee=Kt,Te=It,ee.test(pe)){var ft=ee.exec(pe);Z=ft[1],ee=le,ee.test(Z)&&(pe=Z)}else if(Te.test(pe)){var ft=Te.exec(pe);Z=ft[1]+ft[2],Te=le,Te.test(Z)&&(pe=Z)}if(ee=Ni,ee.test(pe)){var ft=ee.exec(pe);Z=ft[1],ee=le,Te=lt,st=Gi,(ee.test(Z)||Te.test(Z)&&!st.test(Z))&&(pe=Z)}return ee=lr,Te=le,ee.test(pe)&&Te.test(pe)&&(ee=Ve,pe=pe.replace(ee,"")),ue=="y"&&(pe=ue.toLowerCase()+pe.substr(1)),pe};return function(ur){return ur.update(Ki)}}(),f.Pipeline.registerFunction(f.stemmer,"stemmer");/*!
 * lunr.stopWordFilter
 * Copyright (C) 2020 Oliver Nightingale
 */f.generateStopWordFilter=function(v){var x=v.reduce(function(k,I){return k[I]=I,k},{});return function(k){if(k&&x[k.toString()]!==k.toString())return k}},f.stopWordFilter=f.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),f.Pipeline.registerFunction(f.stopWordFilter,"stopWordFilter");/*!
 * lunr.trimmer
 * Copyright (C) 2020 Oliver Nightingale
 */f.trimmer=function(v){return v.update(function(x){return x.replace(/^\W+/,"").replace(/\W+$/,"")})},f.Pipeline.registerFunction(f.trimmer,"trimmer");/*!
 * lunr.TokenSet
 * Copyright (C) 2020 Oliver Nightingale
 */f.TokenSet=function(){this.final=!1,this.edges={},this.id=f.TokenSet._nextId,f.TokenSet._nextId+=1},f.TokenSet._nextId=1,f.TokenSet.fromArray=function(v){for(var x=new f.TokenSet.Builder,k=0,I=v.length;k<I;k++)x.insert(v[k]);return x.finish(),x.root},f.TokenSet.fromClause=function(v){return"editDistance"in v?f.TokenSet.fromFuzzyString(v.term,v.editDistance):f.TokenSet.fromString(v.term)},f.TokenSet.fromFuzzyString=function(v,x){for(var k=new f.TokenSet,I=[{node:k,editsRemaining:x,str:v}];I.length;){var M=I.pop();if(M.str.length>0){var j=M.str.charAt(0),Y;j in M.node.edges?Y=M.node.edges[j]:(Y=new f.TokenSet,M.node.edges[j]=Y),M.str.length==1&&(Y.final=!0),I.push({node:Y,editsRemaining:M.editsRemaining,str:M.str.slice(1)})}if(M.editsRemaining!=0){if("*"in M.node.edges)var re=M.node.edges["*"];else{var re=new f.TokenSet;M.node.edges["*"]=re}if(M.str.length==0&&(re.final=!0),I.push({node:re,editsRemaining:M.editsRemaining-1,str:M.str}),M.str.length>1&&I.push({node:M.node,editsRemaining:M.editsRemaining-1,str:M.str.slice(1)}),M.str.length==1&&(M.node.final=!0),M.str.length>=1){if("*"in M.node.edges)var A=M.node.edges["*"];else{var A=new f.TokenSet;M.node.edges["*"]=A}M.str.length==1&&(A.final=!0),I.push({node:A,editsRemaining:M.editsRemaining-1,str:M.str.slice(1)})}if(M.str.length>1){var B=M.str.charAt(0),Pe=M.str.charAt(1),le;Pe in M.node.edges?le=M.node.edges[Pe]:(le=new f.TokenSet,M.node.edges[Pe]=le),M.str.length==1&&(le.final=!0),I.push({node:le,editsRemaining:M.editsRemaining-1,str:B+M.str.slice(2)})}}}return k},f.TokenSet.fromString=function(v){for(var x=new f.TokenSet,k=x,I=0,M=v.length;I<M;I++){var j=v[I],Y=I==M-1;if(j=="*")x.edges[j]=x,x.final=Y;else{var re=new f.TokenSet;re.final=Y,x.edges[j]=re,x=re}}return k},f.TokenSet.prototype.toArray=function(){for(var v=[],x=[{prefix:"",node:this}];x.length;){var k=x.pop(),I=Object.keys(k.node.edges),M=I.length;k.node.final&&(k.prefix.charAt(0),v.push(k.prefix));for(var j=0;j<M;j++){var Y=I[j];x.push({prefix:k.prefix.concat(Y),node:k.node.edges[Y]})}}return v},f.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var v=this.final?"1":"0",x=Object.keys(this.edges).sort(),k=x.length,I=0;I<k;I++){var M=x[I],j=this.edges[M];v=v+M+j.id}return v},f.TokenSet.prototype.intersect=function(v){for(var x=new f.TokenSet,k=void 0,I=[{qNode:v,output:x,node:this}];I.length;){k=I.pop();for(var M=Object.keys(k.qNode.edges),j=M.length,Y=Object.keys(k.node.edges),re=Y.length,A=0;A<j;A++)for(var B=M[A],Pe=0;Pe<re;Pe++){var le=Y[Pe];if(le==B||B=="*"){var lt=k.node.edges[le],Je=k.qNode.edges[B],St=lt.final&&Je.final,Ne=void 0;le in k.output.edges?(Ne=k.output.edges[le],Ne.final=Ne.final||St):(Ne=new f.TokenSet,Ne.final=St,k.output.edges[le]=Ne),I.push({qNode:Je,output:Ne,node:lt})}}}return x},f.TokenSet.Builder=function(){this.previousWord="",this.root=new f.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},f.TokenSet.Builder.prototype.insert=function(v){var x,k=0;if(v<this.previousWord)throw new Error("Out of order word insertion");for(var I=0;I<v.length&&I<this.previousWord.length&&v[I]==this.previousWord[I];I++)k++;this.minimize(k),this.uncheckedNodes.length==0?x=this.root:x=this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(var I=k;I<v.length;I++){var M=new f.TokenSet,j=v[I];x.edges[j]=M,this.uncheckedNodes.push({parent:x,char:j,child:M}),x=M}x.final=!0,this.previousWord=v},f.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},f.TokenSet.Builder.prototype.minimize=function(v){for(var x=this.uncheckedNodes.length-1;x>=v;x--){var k=this.uncheckedNodes[x],I=k.child.toString();I in this.minimizedNodes?k.parent.edges[k.char]=this.minimizedNodes[I]:(k.child._str=I,this.minimizedNodes[I]=k.child),this.uncheckedNodes.pop()}};/*!
 * lunr.Index
 * Copyright (C) 2020 Oliver Nightingale
 */f.Index=function(v){this.invertedIndex=v.invertedIndex,this.fieldVectors=v.fieldVectors,this.tokenSet=v.tokenSet,this.fields=v.fields,this.pipeline=v.pipeline},f.Index.prototype.search=function(v){return this.query(function(x){var k=new f.QueryParser(v,x);k.parse()})},f.Index.prototype.query=function(v){for(var x=new f.Query(this.fields),k=Object.create(null),I=Object.create(null),M=Object.create(null),j=Object.create(null),Y=Object.create(null),re=0;re<this.fields.length;re++)I[this.fields[re]]=new f.Vector;v.call(x,x);for(var re=0;re<x.clauses.length;re++){var A=x.clauses[re],B=null,Pe=f.Set.empty;A.usePipeline?B=this.pipeline.runString(A.term,{fields:A.fields}):B=[A.term];for(var le=0;le<B.length;le++){var lt=B[le];A.term=lt;var Je=f.TokenSet.fromClause(A),St=this.tokenSet.intersect(Je).toArray();if(St.length===0&&A.presence===f.Query.presence.REQUIRED){for(var Ne=0;Ne<A.fields.length;Ne++){var Be=A.fields[Ne];j[Be]=f.Set.empty}break}for(var Yt=0;Yt<St.length;Yt++)for(var Ve=St[Yt],Nt=this.invertedIndex[Ve],wi=Nt._index,Ne=0;Ne<A.fields.length;Ne++){var Be=A.fields[Ne],$=Nt[Be],Li=Object.keys($),br=Ve+"/"+Be,et=new f.Set(Li);if(A.presence==f.Query.presence.REQUIRED&&(Pe=Pe.union(et),j[Be]===void 0&&(j[Be]=f.Set.complete)),A.presence==f.Query.presence.PROHIBITED){Y[Be]===void 0&&(Y[Be]=f.Set.empty),Y[Be]=Y[Be].union(et);continue}if(I[Be].upsert(wi,A.boost,function(Bu,wr){return Bu+wr}),!M[br]){for(var Kt=0;Kt<Li.length;Kt++){var It=Li[Kt],Ni=new f.FieldRef(It,Be),lr=$[It],Gi;(Gi=k[Ni])===void 0?k[Ni]=new f.MatchData(Ve,Be,lr):Gi.add(Ve,Be,lr)}M[br]=!0}}}if(A.presence===f.Query.presence.REQUIRED)for(var Ne=0;Ne<A.fields.length;Ne++){var Be=A.fields[Ne];j[Be]=j[Be].intersect(Pe)}}for(var Ki=f.Set.complete,ur=f.Set.empty,re=0;re<this.fields.length;re++){var Be=this.fields[re];j[Be]&&(Ki=Ki.intersect(j[Be])),Y[Be]&&(ur=ur.union(Y[Be]))}var pe=Object.keys(k),Z=[],ne=Object.create(null);if(x.isNegated()){pe=Object.keys(this.fieldVectors);for(var re=0;re<pe.length;re++){var Ni=pe[re],ue=f.FieldRef.fromString(Ni);k[Ni]=new f.MatchData}}for(var re=0;re<pe.length;re++){var ue=f.FieldRef.fromString(pe[re]),ee=ue.docRef;if(Ki.contains(ee)&&!ur.contains(ee)){var Te=this.fieldVectors[ue],st=I[ue.fieldName].similarity(Te),xi;if((xi=ne[ee])!==void 0)xi.score+=st,xi.matchData.combine(k[ue]);else{var ft={ref:ee,score:st,matchData:k[ue]};ne[ee]=ft,Z.push(ft)}}}return Z.sort(function(bs,Ea){return Ea.score-bs.score})},f.Index.prototype.toJSON=function(){var v=Object.keys(this.invertedIndex).sort().map(function(k){return[k,this.invertedIndex[k]]},this),x=Object.keys(this.fieldVectors).map(function(k){return[k,this.fieldVectors[k].toJSON()]},this);return{version:f.version,fields:this.fields,fieldVectors:x,invertedIndex:v,pipeline:this.pipeline.toJSON()}},f.Index.load=function(v){var x={},k={},I=v.fieldVectors,M=Object.create(null),j=v.invertedIndex,Y=new f.TokenSet.Builder,re=f.Pipeline.load(v.pipeline);v.version!=f.version&&f.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+f.version+"' does not match serialized index '"+v.version+"'");for(var A=0;A<I.length;A++){var B=I[A],Pe=B[0],le=B[1];k[Pe]=new f.Vector(le)}for(var A=0;A<j.length;A++){var B=j[A],lt=B[0],Je=B[1];Y.insert(lt),M[lt]=Je}return Y.finish(),x.fields=v.fields,x.fieldVectors=k,x.invertedIndex=M,x.tokenSet=Y.root,x.pipeline=re,new f.Index(x)};/*!
 * lunr.Builder
 * Copyright (C) 2020 Oliver Nightingale
 */f.Builder=function(){this._ref="id",this._fields=Object.create(null),this._documents=Object.create(null),this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=f.tokenizer,this.pipeline=new f.Pipeline,this.searchPipeline=new f.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},f.Builder.prototype.ref=function(v){this._ref=v},f.Builder.prototype.field=function(v,x){if(/\//.test(v))throw new RangeError("Field '"+v+"' contains illegal character '/'");this._fields[v]=x||{}},f.Builder.prototype.b=function(v){v<0?this._b=0:v>1?this._b=1:this._b=v},f.Builder.prototype.k1=function(v){this._k1=v},f.Builder.prototype.add=function(v,x){var k=v[this._ref],I=Object.keys(this._fields);this._documents[k]=x||{},this.documentCount+=1;for(var M=0;M<I.length;M++){var j=I[M],Y=this._fields[j].extractor,re=Y?Y(v):v[j],A=this.tokenizer(re,{fields:[j]}),B=this.pipeline.run(A),Pe=new f.FieldRef(k,j),le=Object.create(null);this.fieldTermFrequencies[Pe]=le,this.fieldLengths[Pe]=0,this.fieldLengths[Pe]+=B.length;for(var lt=0;lt<B.length;lt++){var Je=B[lt];if(le[Je]==null&&(le[Je]=0),le[Je]+=1,this.invertedIndex[Je]==null){var St=Object.create(null);St._index=this.termIndex,this.termIndex+=1;for(var Ne=0;Ne<I.length;Ne++)St[I[Ne]]=Object.create(null);this.invertedIndex[Je]=St}this.invertedIndex[Je][j][k]==null&&(this.invertedIndex[Je][j][k]=Object.create(null));for(var Be=0;Be<this.metadataWhitelist.length;Be++){var Yt=this.metadataWhitelist[Be],Ve=Je.metadata[Yt];this.invertedIndex[Je][j][k][Yt]==null&&(this.invertedIndex[Je][j][k][Yt]=[]),this.invertedIndex[Je][j][k][Yt].push(Ve)}}}},f.Builder.prototype.calculateAverageFieldLengths=function(){for(var v=Object.keys(this.fieldLengths),x=v.length,k={},I={},M=0;M<x;M++){var j=f.FieldRef.fromString(v[M]),Y=j.fieldName;I[Y]||(I[Y]=0),I[Y]+=1,k[Y]||(k[Y]=0),k[Y]+=this.fieldLengths[j]}for(var re=Object.keys(this._fields),M=0;M<re.length;M++){var A=re[M];k[A]=k[A]/I[A]}this.averageFieldLength=k},f.Builder.prototype.createFieldVectors=function(){for(var v={},x=Object.keys(this.fieldTermFrequencies),k=x.length,I=Object.create(null),M=0;M<k;M++){for(var j=f.FieldRef.fromString(x[M]),Y=j.fieldName,re=this.fieldLengths[j],A=new f.Vector,B=this.fieldTermFrequencies[j],Pe=Object.keys(B),le=Pe.length,lt=this._fields[Y].boost||1,Je=this._documents[j.docRef].boost||1,St=0;St<le;St++){var Ne=Pe[St],Be=B[Ne],Yt=this.invertedIndex[Ne]._index,Ve,Nt,wi;I[Ne]===void 0?(Ve=f.idf(this.invertedIndex[Ne],this.documentCount),I[Ne]=Ve):Ve=I[Ne],Nt=Ve*((this._k1+1)*Be)/(this._k1*(1-this._b+this._b*(re/this.averageFieldLength[Y]))+Be),Nt*=lt,Nt*=Je,wi=Math.round(Nt*1e3)/1e3,A.insert(Yt,wi)}v[j]=A}this.fieldVectors=v},f.Builder.prototype.createTokenSet=function(){this.tokenSet=f.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},f.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new f.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:Object.keys(this._fields),pipeline:this.searchPipeline})},f.Builder.prototype.use=function(v){var x=Array.prototype.slice.call(arguments,1);x.unshift(this),v.apply(this,x)},f.MatchData=function(v,x,k){for(var I=Object.create(null),M=Object.keys(k||{}),j=0;j<M.length;j++){var Y=M[j];I[Y]=k[Y].slice()}this.metadata=Object.create(null),v!==void 0&&(this.metadata[v]=Object.create(null),this.metadata[v][x]=I)},f.MatchData.prototype.combine=function(v){for(var x=Object.keys(v.metadata),k=0;k<x.length;k++){var I=x[k],M=Object.keys(v.metadata[I]);this.metadata[I]==null&&(this.metadata[I]=Object.create(null));for(var j=0;j<M.length;j++){var Y=M[j],re=Object.keys(v.metadata[I][Y]);this.metadata[I][Y]==null&&(this.metadata[I][Y]=Object.create(null));for(var A=0;A<re.length;A++){var B=re[A];this.metadata[I][Y][B]==null?this.metadata[I][Y][B]=v.metadata[I][Y][B]:this.metadata[I][Y][B]=this.metadata[I][Y][B].concat(v.metadata[I][Y][B])}}}},f.MatchData.prototype.add=function(v,x,k){if(!(v in this.metadata)){this.metadata[v]=Object.create(null),this.metadata[v][x]=k;return}if(!(x in this.metadata[v])){this.metadata[v][x]=k;return}for(var I=Object.keys(k),M=0;M<I.length;M++){var j=I[M];j in this.metadata[v][x]?this.metadata[v][x][j]=this.metadata[v][x][j].concat(k[j]):this.metadata[v][x][j]=k[j]}},f.Query=function(v){this.clauses=[],this.allFields=v},f.Query.wildcard=new String("*"),f.Query.wildcard.NONE=0,f.Query.wildcard.LEADING=1,f.Query.wildcard.TRAILING=2,f.Query.presence={OPTIONAL:1,REQUIRED:2,PROHIBITED:3},f.Query.prototype.clause=function(v){return"fields"in v||(v.fields=this.allFields),"boost"in v||(v.boost=1),"usePipeline"in v||(v.usePipeline=!0),"wildcard"in v||(v.wildcard=f.Query.wildcard.NONE),v.wildcard&f.Query.wildcard.LEADING&&v.term.charAt(0)!=f.Query.wildcard&&(v.term="*"+v.term),v.wildcard&f.Query.wildcard.TRAILING&&v.term.slice(-1)!=f.Query.wildcard&&(v.term=""+v.term+"*"),"presence"in v||(v.presence=f.Query.presence.OPTIONAL),this.clauses.push(v),this},f.Query.prototype.isNegated=function(){for(var v=0;v<this.clauses.length;v++)if(this.clauses[v].presence!=f.Query.presence.PROHIBITED)return!1;return!0},f.Query.prototype.term=function(v,x){if(Array.isArray(v))return v.forEach(function(I){this.term(I,f.utils.clone(x))},this),this;var k=x||{};return k.term=v.toString(),this.clause(k),this},f.QueryParseError=function(v,x,k){this.name="QueryParseError",this.message=v,this.start=x,this.end=k},f.QueryParseError.prototype=new Error,f.QueryLexer=function(v){this.lexemes=[],this.str=v,this.length=v.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},f.QueryLexer.prototype.run=function(){for(var v=f.QueryLexer.lexText;v;)v=v(this)},f.QueryLexer.prototype.sliceString=function(){for(var v=[],x=this.start,k=this.pos,I=0;I<this.escapeCharPositions.length;I++)k=this.escapeCharPositions[I],v.push(this.str.slice(x,k)),x=k+1;return v.push(this.str.slice(x,this.pos)),this.escapeCharPositions.length=0,v.join("")},f.QueryLexer.prototype.emit=function(v){this.lexemes.push({type:v,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},f.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},f.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return f.QueryLexer.EOS;var v=this.str.charAt(this.pos);return this.pos+=1,v},f.QueryLexer.prototype.width=function(){return this.pos-this.start},f.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},f.QueryLexer.prototype.backup=function(){this.pos-=1},f.QueryLexer.prototype.acceptDigitRun=function(){var v,x;do v=this.next(),x=v.charCodeAt(0);while(x>47&&x<58);v!=f.QueryLexer.EOS&&this.backup()},f.QueryLexer.prototype.more=function(){return this.pos<this.length},f.QueryLexer.EOS="EOS",f.QueryLexer.FIELD="FIELD",f.QueryLexer.TERM="TERM",f.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",f.QueryLexer.BOOST="BOOST",f.QueryLexer.PRESENCE="PRESENCE",f.QueryLexer.lexField=function(v){return v.backup(),v.emit(f.QueryLexer.FIELD),v.ignore(),f.QueryLexer.lexText},f.QueryLexer.lexTerm=function(v){if(v.width()>1&&(v.backup(),v.emit(f.QueryLexer.TERM)),v.ignore(),v.more())return f.QueryLexer.lexText},f.QueryLexer.lexEditDistance=function(v){return v.ignore(),v.acceptDigitRun(),v.emit(f.QueryLexer.EDIT_DISTANCE),f.QueryLexer.lexText},f.QueryLexer.lexBoost=function(v){return v.ignore(),v.acceptDigitRun(),v.emit(f.QueryLexer.BOOST),f.QueryLexer.lexText},f.QueryLexer.lexEOS=function(v){v.width()>0&&v.emit(f.QueryLexer.TERM)},f.QueryLexer.termSeparator=f.tokenizer.separator,f.QueryLexer.lexText=function(v){for(;;){var x=v.next();if(x==f.QueryLexer.EOS)return f.QueryLexer.lexEOS;if(x.charCodeAt(0)==92){v.escapeCharacter();continue}if(x==":")return f.QueryLexer.lexField;if(x=="~")return v.backup(),v.width()>0&&v.emit(f.QueryLexer.TERM),f.QueryLexer.lexEditDistance;if(x=="^")return v.backup(),v.width()>0&&v.emit(f.QueryLexer.TERM),f.QueryLexer.lexBoost;if(x=="+"&&v.width()===1||x=="-"&&v.width()===1)return v.emit(f.QueryLexer.PRESENCE),f.QueryLexer.lexText;if(x.match(f.QueryLexer.termSeparator))return f.QueryLexer.lexTerm}},f.QueryParser=function(v,x){this.lexer=new f.QueryLexer(v),this.query=x,this.currentClause={},this.lexemeIdx=0},f.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var v=f.QueryParser.parseClause;v;)v=v(this);return this.query},f.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},f.QueryParser.prototype.consumeLexeme=function(){var v=this.peekLexeme();return this.lexemeIdx+=1,v},f.QueryParser.prototype.nextClause=function(){var v=this.currentClause;this.query.clause(v),this.currentClause={}},f.QueryParser.parseClause=function(v){var x=v.peekLexeme();if(x!=null)switch(x.type){case f.QueryLexer.PRESENCE:return f.QueryParser.parsePresence;case f.QueryLexer.FIELD:return f.QueryParser.parseField;case f.QueryLexer.TERM:return f.QueryParser.parseTerm;default:var k="expected either a field or a term, found "+x.type;throw x.str.length>=1&&(k+=" with value '"+x.str+"'"),new f.QueryParseError(k,x.start,x.end)}},f.QueryParser.parsePresence=function(v){var x=v.consumeLexeme();if(x!=null){switch(x.str){case"-":v.currentClause.presence=f.Query.presence.PROHIBITED;break;case"+":v.currentClause.presence=f.Query.presence.REQUIRED;break;default:var k="unrecognised presence operator'"+x.str+"'";throw new f.QueryParseError(k,x.start,x.end)}var I=v.peekLexeme();if(I==null){var k="expecting term or field, found nothing";throw new f.QueryParseError(k,x.start,x.end)}switch(I.type){case f.QueryLexer.FIELD:return f.QueryParser.parseField;case f.QueryLexer.TERM:return f.QueryParser.parseTerm;default:var k="expecting term or field, found '"+I.type+"'";throw new f.QueryParseError(k,I.start,I.end)}}},f.QueryParser.parseField=function(v){var x=v.consumeLexeme();if(x!=null){if(v.query.allFields.indexOf(x.str)==-1){var k=v.query.allFields.map(function(j){return"'"+j+"'"}).join(", "),I="unrecognised field '"+x.str+"', possible fields: "+k;throw new f.QueryParseError(I,x.start,x.end)}v.currentClause.fields=[x.str];var M=v.peekLexeme();if(M==null){var I="expecting term, found nothing";throw new f.QueryParseError(I,x.start,x.end)}switch(M.type){case f.QueryLexer.TERM:return f.QueryParser.parseTerm;default:var I="expecting term, found '"+M.type+"'";throw new f.QueryParseError(I,M.start,M.end)}}},f.QueryParser.parseTerm=function(v){var x=v.consumeLexeme();if(x!=null){v.currentClause.term=x.str.toLowerCase(),x.str.indexOf("*")!=-1&&(v.currentClause.usePipeline=!1);var k=v.peekLexeme();if(k==null){v.nextClause();return}switch(k.type){case f.QueryLexer.TERM:return v.nextClause(),f.QueryParser.parseTerm;case f.QueryLexer.FIELD:return v.nextClause(),f.QueryParser.parseField;case f.QueryLexer.EDIT_DISTANCE:return f.QueryParser.parseEditDistance;case f.QueryLexer.BOOST:return f.QueryParser.parseBoost;case f.QueryLexer.PRESENCE:return v.nextClause(),f.QueryParser.parsePresence;default:var I="Unexpected lexeme type '"+k.type+"'";throw new f.QueryParseError(I,k.start,k.end)}}},f.QueryParser.parseEditDistance=function(v){var x=v.consumeLexeme();if(x!=null){var k=parseInt(x.str,10);if(isNaN(k)){var I="edit distance must be numeric";throw new f.QueryParseError(I,x.start,x.end)}v.currentClause.editDistance=k;var M=v.peekLexeme();if(M==null){v.nextClause();return}switch(M.type){case f.QueryLexer.TERM:return v.nextClause(),f.QueryParser.parseTerm;case f.QueryLexer.FIELD:return v.nextClause(),f.QueryParser.parseField;case f.QueryLexer.EDIT_DISTANCE:return f.QueryParser.parseEditDistance;case f.QueryLexer.BOOST:return f.QueryParser.parseBoost;case f.QueryLexer.PRESENCE:return v.nextClause(),f.QueryParser.parsePresence;default:var I="Unexpected lexeme type '"+M.type+"'";throw new f.QueryParseError(I,M.start,M.end)}}},f.QueryParser.parseBoost=function(v){var x=v.consumeLexeme();if(x!=null){var k=parseInt(x.str,10);if(isNaN(k)){var I="boost must be numeric";throw new f.QueryParseError(I,x.start,x.end)}v.currentClause.boost=k;var M=v.peekLexeme();if(M==null){v.nextClause();return}switch(M.type){case f.QueryLexer.TERM:return v.nextClause(),f.QueryParser.parseTerm;case f.QueryLexer.FIELD:return v.nextClause(),f.QueryParser.parseField;case f.QueryLexer.EDIT_DISTANCE:return f.QueryParser.parseEditDistance;case f.QueryLexer.BOOST:return f.QueryParser.parseBoost;case f.QueryLexer.PRESENCE:return v.nextClause(),f.QueryParser.parsePresence;default:var I="Unexpected lexeme type '"+M.type+"'";throw new f.QueryParseError(I,M.start,M.end)}}},function(v,x){R.exports=x()}(this,function(){return f})})()})(Dw);var e$=Dw.exports;const t$=SO(e$);class i${constructor(w){this.contentList=w,this.index=this.buildIndex(w)}buildIndex(w){return t$(function(){this.field("abstract"),this.field("content"),this.field("contributor"),this.field("subtitle"),this.field("title"),this.field("url"),this.ref("url"),w.forEach(f=>{this.add(f)})})}search(w){return this.index.search(w).map(v=>this.contentList.find(({url:x})=>x===v.ref))}}window.toggleMenu=()=>{const R=document.getElementById("site-menu"),w=document.querySelector(".side-by-side > .quire-entry__image-wrap > .quire-entry__image"),f=R.getAttribute("aria-expanded");R.classList.toggle("is-expanded",!R.classList.contains("is-expanded")),f==="true"?(w&&w.classList.remove("menu_open"),R.setAttribute("aria-expanded","false")):(w&&w.classList.add("menu_open"),R.setAttribute("aria-expanded","true"))};window.toggleSearch=()=>{let R=document.getElementById("js-search"),w=document.getElementById("js-search-input"),f=R.getAttribute("aria-expanded");R.classList.toggle("is-active",!R.classList.contains("is-active")),f==="true"?R.setAttribute("aria-expanded","false"):(w.focus(),R.setAttribute("aria-expanded","true"))};window.search=()=>{let w=document.getElementById("js-search-input").value,f=window.QUIRE_SEARCH,v=document.getElementById("js-search-results-list"),x=document.getElementById("js-search-results-template");if(w.length>=3){let M=f.search(w);I(M)}function k(){v.innerText=""}function I(M){k(),M.forEach(j=>{let Y=document.importNode(x.content,!0),re=Y.querySelector(".js-search-results-item"),A=Y.querySelector(".js-search-results-item-title"),B=Y.querySelector(".js-search-results-item-type"),Pe=Y.querySelector(".js-search-results-item-length");re.href=j.url,A.textContent=j.title,B.textContent=j.type,Pe.textContent=j.length,v.appendChild(Y)})}};function r$(R){const w=R.target.closest("a"),f=w.hash;w.pathname.includes(window.location.pathname)&&(R.preventDefault(),window.location.hash=f),Ap(f)}function n$(){const w='a[href*="#"]'+['[href="#"]','[href="#0"]',".accordion-section__heading-link",".q-figure__modal-link"].map(v=>`:not(${v})`).join("");document.querySelectorAll(w).forEach(v=>{v.addEventListener("click",r$)})}function s$(){document.getElementById("container").classList.remove("no-js"),navigator.userAgent.match(/(iPad|iPhone|iPod)/i),navigator.userAgent.match(/android/i),o$(),n$()}function o$(){const R=document.getElementById("js-search").dataset.searchIndex;if(!R){console.warn("Search data url is undefined");return}fetch(R).then(async w=>{const{ok:f,statusText:v,url:x}=w;if(!f){console.warn(`Search data ${v.toLowerCase()} at ${x}`);return}const k=await w.json();window.QUIRE_SEARCH=new i$(k)})}function a$(R){const w={month:"long"},f=R.getMonth();let v;[4,5,6].includes(f)?v=R.toLocaleDateString("en-US",w).replace(/[^A-Za-z]+/,""):(v=v===8?"Sept":R.toLocaleDateString("en-US",w).slice(0,3),v+=".");const x=R.getDate(),k=R.getFullYear();return[x,v,k].join(" ")}function l$(){const R=document.querySelectorAll(".cite-current-date"),w=a$(new Date);R.forEach(f=>{f.innerHTML=w})}function u$(R,w){const f=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--gap")),v=R.getBoundingClientRect(),x=w.getBoundingClientRect(),k=x.left-v.left,I=v.right-x.right,M=v.width/2;I>0?R.style.transform=`translateX(-${M+I+f}px)`:k>0&&(R.style.transform=`translateX(-${M-k-f}px)`)}function c$(){let R=document.querySelectorAll(".expandable [aria-expanded]");for(let w=0;w<R.length;w++)R[w].addEventListener("click",f=>{f.stopPropagation(),f.target.getAttribute("aria-expanded")==="false"?f.target.setAttribute("aria-expanded","true"):f.target.setAttribute("aria-expanded","false");let x=f.target.parentNode.querySelector(".quire-citation__content");x&&(x.getAttribute("hidden"),typeof x.getAttribute("hidden")=="string"?x.removeAttribute("hidden"):x.setAttribute("hidden","hidden"),u$(x,document.documentElement))});document.addEventListener("click",w=>{let f=w.target.parentNode;if(f&&!(f.classList.contains("quire-citation")||f.classList.contains("quire-citation__content"))){let v=document.querySelectorAll(".quire-citation__button"),x=document.querySelectorAll(".quire-citation__content");if(!x)return;for(let k=0;k<x.length;k++){if(!v[k])return;v[k].setAttribute("aria-expanded","false"),x[k].setAttribute("hidden","hidden")}}})}function h$(){l$(),c$()}function d$(){const R=new URL(window.location),w=[...new Set(R.searchParams.keys())];return Object.fromEntries(w.map(f=>[f,R.searchParams.getAll(f).map(decodeURIComponent)]))}s$();window.addEventListener("load",()=>{h$(),Ap(window.location.hash);const R=d$();xt.setup(),KO(),window.location.hash&&Ep({figureId:window.location.hash.replace(/^#/,""),annotationIds:R["annotation-id"],region:R.region?R.region[0]:null,sequence:{index:R["sequence-index"]?R["sequence-index"][0]:null}})});
//# sourceMappingURL=index-6dc591cd.js.map
